{"meta":{"title":"è½¯å¾®9133","subtitle":null,"description":"åªäº‰æœå¤•ï¼Œä¸è´ŸéŸ¶å","author":"PPsteven","url":"http://ppsteven.github.io","root":"/"},"pages":[{"title":"","date":"2020-02-14T17:42:37.825Z","updated":"2019-12-22T15:16:34.050Z","comments":true,"path":"404/index.html","permalink":"http://ppsteven.github.io/404/index.html","excerpt":"","text":""},{"title":"å…³äº","date":"2019-10-26T17:38:15.000Z","updated":"2020-02-15T17:06:40.671Z","comments":true,"path":"about/index.html","permalink":"http://ppsteven.github.io/about/index.html","excerpt":"","text":"è‡ªæˆ‘ä»‹ç»ç ”äºŒ,å¯¹è®¡ç®—æœºå’Œé‡‘èæ„Ÿå…´è¶£ã€‚ç›®å‰åœ¨ä¸€å®¶äº’è”ç½‘å…¬å¸åšåå°å¼€å‘å®ä¹ ï¼ŒPHPå¼€å‘ã€‚æ“…é•¿çˆ¬è™«ï¼Œçˆ¬è¿‡çš„ç½‘ç«™æœ‰ï¼šç¾å›¢ï¼Œç‚¹è¯„ï¼Œåç¨‹ï¼Œé©¬èœ‚çªç­‰ã€‚"},{"title":"categories","date":"2019-10-26T17:38:06.000Z","updated":"2020-02-15T16:29:40.108Z","comments":false,"path":"categories/index.html","permalink":"http://ppsteven.github.io/categories/index.html","excerpt":"","text":""},{"title":"å½’æ¡£","date":"2019-10-27T08:36:41.000Z","updated":"2019-12-22T15:16:34.054Z","comments":true,"path":"archives/index.html","permalink":"http://ppsteven.github.io/archives/index.html","excerpt":"","text":""},{"title":"å‹æƒ…é“¾æ¥","date":"2019-11-04T14:03:28.000Z","updated":"2020-02-16T09:47:47.761Z","comments":false,"path":"link/index.html","permalink":"http://ppsteven.github.io/link/index.html","excerpt":"","text":"ç”¨æˆ· ç½‘å€ æè¿° jordenbruce https://jordenbruce.com/ æ•°ä»“å¤§ç¥ wangjs-jacky http://wangjs-jacky.github.io/ é£é›ªä¹‹éš… http://www.laruence.com/2015/05/28/3038.html é¸Ÿå“¥,PHP7ä¸»è¦å¼€å‘äºº éŸ©å¤©å³° http://rango.swoole.com/ swooleåˆ›å§‹äºº"},{"title":"tags","date":"2019-10-26T17:09:48.000Z","updated":"2020-02-15T16:29:21.685Z","comments":false,"path":"tags/index.html","permalink":"http://ppsteven.github.io/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"docker å®æˆ˜:åˆ©ç”¨ docker æ­å»ºæœåŠ¡","slug":"docker-some-service-build-instruction","date":"2020-06-18T11:15:21.000Z","updated":"2020-06-18T12:08:01.576Z","comments":false,"path":"2020/06/18/docker-some-service-build-instruction/","link":"","permalink":"http://ppsteven.github.io/2020/06/18/docker-some-service-build-instruction/","excerpt":"ç”¨ docker å®‰è£…éœ€è¦ç”¨åˆ°çš„æœåŠ¡å®åœ¨æ˜¯å¤ªæ–¹ä¾¿äº†ï¼Œæˆ‘ä»¬ä¸‹é¢ä»‹ç»ä¸€äº›å¥½çš„è½®å­æ¥ç”¨ã€‚ web-vscode: æ­å»ºä¸€ä¸ªwebç‰ˆçš„vscodeï¼Œä¸è¿‡å®æµ‹ä¸‹æ¥ä¸æ˜¯ç‰¹åˆ«å¥½ç”¨ã€‚å¾ˆå¤švscodeä¸Šçš„æ’ä»¶ç”¨ä¸äº† redis web: webç«¯çš„webç®¡ç†å·¥å…·ï¼Œä¸è¿‡é…ç½®èµ·æ¥ç¨å¾®æœ‰ç‚¹éº»çƒ¦ã€‚ lamp: phpåŸºç¡€å¼€å‘ç¯å¢ƒ","text":"ç”¨ docker å®‰è£…éœ€è¦ç”¨åˆ°çš„æœåŠ¡å®åœ¨æ˜¯å¤ªæ–¹ä¾¿äº†ï¼Œæˆ‘ä»¬ä¸‹é¢ä»‹ç»ä¸€äº›å¥½çš„è½®å­æ¥ç”¨ã€‚ web-vscode: æ­å»ºä¸€ä¸ªwebç‰ˆçš„vscodeï¼Œä¸è¿‡å®æµ‹ä¸‹æ¥ä¸æ˜¯ç‰¹åˆ«å¥½ç”¨ã€‚å¾ˆå¤švscodeä¸Šçš„æ’ä»¶ç”¨ä¸äº† redis web: webç«¯çš„webç®¡ç†å·¥å…·ï¼Œä¸è¿‡é…ç½®èµ·æ¥ç¨å¾®æœ‰ç‚¹éº»çƒ¦ã€‚ lamp: phpåŸºç¡€å¼€å‘ç¯å¢ƒ web-vscode å®‰è£… ä¼ é€é—¨: code-server 1234567891011121314151617181920212223242526#åˆ›å»ºdocker rm -f vscode docker run \\# åå°è¿è¡Œ-d \\ # æ€»æ˜¯è¿è¡Œ--restart=always \\ # Alias--name web_vscode \\ # hostname-h vscode \\ # ä¸€å®šè¦ä»¥rootè´¦å·è¿è¡Œ,ä¸ç„¶ä¼šæŠ¥ Permission denied-u root \\ # æ‰€æœ‰ç«¯å£æ˜ å°„ï¼Œè€Œä¸è¦æ˜¯127.0.0.1-p 8086:8080 \\ -v \"$&#123;HOME&#125;/.local/share/code-server:/home/coder/.local/share/code-server\" \\ # å¯†ç æ˜¯é€šè¿‡ç¯å¢ƒå˜é‡åŠ å…¥çš„-e PASSWORD=mycode \\ # $PWD æ˜¯å½“å‰å¸Œæœ›é¡¹ç›®æ”¾ç½®çš„ä½ç½®-v \"$PWD:/home/coder/project\" \\# é•œåƒåï¼Œæœ¬åœ°ä¸å­˜åœ¨çš„è¯ï¼Œä¼šä»ä»“åº“æ‹‰å–codercom/code-server:v2 #æŸ¥çœ‹docker ps -ldocker logs web_vscode è¿è¡ŒæˆåŠŸå 12345info Server listening on http://0.0.0.0:8080info - Password is 558ba38067432e3beddf1228info - To use your own password, set the PASSWORD environment variableinfo - To disable use `--auth none`info - Not serving HTTPS ç”±äºæˆ‘ä»¬çš„ web-vscode æ˜¯è¿è¡Œåœ¨å®¹å™¨å†…çš„ï¼Œæ‰€ä»¥å¾ˆå¤šç¯å¢ƒæˆ‘ä»¬éœ€è¦è‡ªå·±é…ç½®ï¼Œå‚è€ƒä¸Šè¿°æ“ä½œã€‚ redis web ç®¡ç†å·¥å…·mac ä¸Š redis ç®¡ç†å·¥å…·ç ´è§£ç‰ˆä¸å¥½æ‰¾ï¼Œä½†æ˜¯åœ¨ github ä¸Šæ‰¾åˆ°äº†ä¸€ä¸ªå¼€æºçš„å·¥å…·ï¼Œéå¸¸æ–¹ä¾¿ã€‚æ‹¿æ¥ç”¨ä¸€ä¸‹ ä¼ é€é—¨: phpRedisAdmin 1234docker pull erikdubbelboer/phpredisadmindocker run --rm -itd -e REDIS_1_HOST=redis -e REDIS_1_NAME=myredis -p 8015:80 --link redis-test:redis --name redisadmin erikdubbelboer/phpredisadmin# éœ€è¦æ³¨æ„çš„æ˜¯ REDIS_1_HOST å¡«å†™çš„æ˜¯è‡ªå·± redis æœåŠ¡å™¨çš„åœ°å€# è¿™é‡Œæˆ‘é‡‡ç”¨çš„æ˜¯å®¹å™¨é“¾æ¥çš„æ–¹å¼ redis &amp; rediså¯è§†åŒ–å·¥å…·1234567docker pull redisdocker run -p 127.0.0.1:6379:6379 -d --name redis redis --requirepass &quot;mypassword&quot;# æŸ¥çœ‹redisçš„ipåœ°å€ 172.17.0.2docker inspect redis | grep -ai &apos;ipa&apos;docker run --rm -it -e REDIS_1_HOST=172.17.0.2 -e REDIS_1_NAME=redis -p 80:80 erikdubbelboer/phpredisadmin php LAMP ç¯å¢ƒæ­å»ºåˆ©ç”¨ docker æ­å»º LAMP ç¯å¢ƒæœ¬èº«åº”è¯¥æ˜¯æ¯”è¾ƒçœåŠ›æ°”çš„æ–¹å¼ï¼Œä½†æ˜¯ç½‘ä¸Š CSDN ä¹‹ç±»çš„æ•™ç¨‹å¾ˆå¤šéƒ½æ˜¯å¤åˆ¶é»è´´ï¼Œå¾ˆå¤šå®ç°ä¸äº†ï¼Œä¼˜è´¨æ•™ç¨‹å¾ˆå°‘ã€‚ç›®å‰å‘ç°äº†å›½å¤–çš„ä¸€ä¸ª linode çš„ docke ré•œåƒï¼Œæœ‰éå¸¸è¯¦ç»†çš„æ•™ç¨‹ï¼Œå¾ˆå¥½ç”¨ã€‚ linode è¯¦ç»†é…ç½®ï¼Œè¯·çœ‹ https://hub.docker.com/r/linode/lamp https://www.linode.com/docs/applications/containers/how-to-install-docker-and-deploy-a-lamp-stack/ docker å®‰è£…docker ç¯å¢ƒæ­å»ºè¯·çœ‹æˆ‘çš„ Centos ç¯å¢ƒé…ç½®ï¼ˆæŒç»­æ€»ç»“ï¼‰ è¿™ä¸€ç¯‡æ•™ç¨‹ æ‹‰å–dockeré•œåƒ1234567# docker search -s 10 lampFlag --stars has been deprecated, use --filter=stars=3 insteadNAME DESCRIPTION STARS OFFICIAL AUTOMATEDmattrayner/lamp A simple LAMP docker image running the prereâ€¦ 211 [OK]linode/lamp LAMP on Ubuntu 14.04.1 LTS Container 178... linode çš„é•œåƒ staræ•°è¿˜æ˜¯æ¯”è¾ƒé«˜çš„# sudo docker pull linode/lamp ç”Ÿæˆé…ç½®æ–‡ä»¶ç›®å½•è¿™ä¸€æ­¥å¾ˆå¤šæ•™ç¨‹é‡Œé¢éƒ½ç¼ºå¤±çš„ä¸€éƒ¨åˆ†ï¼Œlamp çš„å¾ˆå¤šæ–‡ä»¶éœ€è¦æ˜ å°„åˆ°å®¿ä¸»æœºï¼Œæ–¹æ³•åé¢çš„é…ç½®ã€‚ 12345678910111213141516171819# å¯åŠ¨è¿›å…¥å®¹å™¨ $ docker run -itd --name lamp linode/lamp:latest /bin/bash# å°†éœ€è¦æ˜ å°„çš„æ–‡ä»¶æ‹·è´å‡ºæ¥ï¼Œä¸»è¦å°±æ˜¯ apache2, mysqlçš„é…ç½®æ–‡ä»¶ å’Œ wwwæ–‡ä»¶å¤¹.â”œâ”€â”€ apache2.confâ”œâ”€â”€ my.cnfâ””â”€â”€ www â”œâ”€â”€ example.com â”‚ â”œâ”€â”€ backups â”‚ â”œâ”€â”€ log â”‚ â””â”€â”€ public_html â””â”€â”€ html â””â”€â”€ index.html $ docker cp lamp:/var/www /Users/xxx/Documents/Dockerfile/lamp/www$ docker cp lamp:/etc/apache2/apache2.conf /Users/xxx/Documents/Dockerfile/lamp/apache2.conf$ docker cp lamp:/etc/mysql/my.cnf /Users/xxx/Documents/Dockerfile/lamp/my.cnf# åˆ é™¤æ—§çš„å®¹å™¨$ docker container rm -f lamp å¯åŠ¨å®¹å™¨123456sudo docker run -p 8010:80 -p 3309:3306 \\ -v /Users/ppsteven/Documents/Dockerfile/lamp/www:/var/www \\ -v /Users/ppsteven/Documents/Dockerfile/lamp/apache2.conf:/etc/apache2/apache2.conf \\ -v /Users/ppsteven/Documents/Dockerfile/lamp/my.cnf:/etc/mysql/my.cnf \\ --name lamp \\ -itd linode/lamp:latest /bin/bash å¯åŠ¨ Apache å’Œ MySQL æœåŠ¡å®¹å™¨å†…éƒ¨çš„ Apache å’Œ MySQL æœåŠ¡æ˜¯é»˜è®¤ä¸è‡ªåŠ¨å¯åŠ¨çš„ï¼ˆå½“ LAMP é‡å¯çš„æ—¶å€™éœ€è¦æ³¨æ„æŸ¥çœ‹è¿™ä¸¤ä¸ªæœåŠ¡æ˜¯å¦ä¹Ÿå¯åŠ¨äº†ï¼‰ 12service apache2 startservice mysql start MySQL åˆå§‹åŒ–é…ç½®è¿™ä¸€æ­¥æ˜¯å¾ˆå¤šåœ°æ–¹æ²¡æœ‰æçš„ï¼Œlinode çš„ MySQL æ˜¯æœ‰é»˜è®¤å¯†ç ï¼ŒAdmin2015ã€‚æˆ‘ä»¬éœ€è¦åˆå§‹åŒ–å¯¹äº MySQL æ•°æ®åº“çš„é…ç½®ã€‚ å‚è€ƒï¼šhttps://zhuanlan.zhihu.com/p/111605563 123456789101112131415161718# å¦‚ä¸‹å‘½ä»¤å³å¯mysql_secure_installationæŒ‰ä¸‹å›åŸé”®ä½ ä¼šçœ‹è§ç»“å°¾å¦‚ä¸‹çš„å¯¹è¯ã€‚Enter current password for root (enter for none): #Set root password? # æ˜¯å¦è®¾ç½®rootç”¨æˆ·å¯†ç  yNew password: # æ–°å¯†ç Re-enter new password: Remove anonymous users? [Y/n] # æ˜¯å¦åˆ é™¤åŒ¿åç”¨æˆ·ï¼Œå›è½¦ yDisallow root login remotely? [Y/n] # æ˜¯å¦ç¦æ­¢rootè¿œç¨‹ç™»å½•Remove test database and access to it? [Y/n] # æ˜¯å¦åˆ é™¤testæ•°æ®åº“Reload privilege tables now? [Y/n] # æ˜¯å¦é‡æ–°åŠ è½½æƒé™è¡¨ yAll done! If youâ€™ve completed all of the above steps, your MariaDBinstallation should now be secure.Thanks for using MariaDB!# æµ‹è¯•ç™»å½•mysql -uroot -p\"è‡ªå·±çš„æ•°æ®åº“å¯†ç \" æµ‹è¯•æ˜¯å¦æˆåŠŸæ¸¸è§ˆå™¨è¾“å…¥ http://localhost:8010/ ï¼Œçœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯ï¼Œè¡¨ç¤ºæˆåŠŸ 123The Docker LAMP stack is working.The configuration information can be found here or hereThis index.html file is located in the &quot;/var/www/example.com/public_html&quot; directory. æ’æŸ¥é—®é¢˜æ–¹æ³•docker é€€å‡º12# åƒä¸‡ä¸è¦ç”¨ exitï¼Œå®¹å™¨ä¼šè·Ÿç€é€€å‡ºçš„CTRL + P + Q docker ipæŸ¥çœ‹ è¿›å…¥å®¹å™¨æŸ¥çœ‹ï¼Œè¿™ç§æ–¹æ³•å¯èƒ½ä¼šå¤±è´¥ï¼Œå› ä¸ºå¯èƒ½å®¹å™¨çš„ç³»ç»Ÿä¸­æ²¡æœ‰å¯¹åº”çš„å‘½ä»¤å·¥å…· 12docker exec -ti &lt;NAME OR ID&gt; /bin/bash# ifconfig/ip addr æœ€æ­£ç»Ÿçš„å†™æ³•(å¯ä»¥å†™åœ¨ shell è„šæœ¬é‡Œ) 12# docker inspect --format '&#123;&#123; .NetworkSettings.IPAddress &#125;&#125;' 2e23d01384ac172.17.0.2 æœ€ç®€å•æŸ¥è¯¢çš„å†™æ³• 12345$ docker inspect lamp | grep -ai 'ipa' \"SecondaryIPAddresses\": null, \"IPAddress\": \"172.17.0.2\", \"IPAMConfig\": null, \"IPAddress\": \"172.17.0.2\", docker æ—¥å¿—æ’æŸ¥ï¼ˆtail -f /dev/nullï¼‰åˆ©ç”¨ tail -f /dev/null é•¿å‘½ä»¤é˜»å¡ï¼Œä¸è®©å®¹å™¨ç«‹é©¬ç»“æŸï¼Œè¿™ç§ç”¨æ³•éå¸¸å¥½ç”¨ 1docker exec -ti &lt;NAME OR ID&gt; tail -f /dev/null","categories":[{"name":"docker","slug":"docker","permalink":"http://ppsteven.github.io/categories/docker/"}],"tags":[{"name":"docker, mysql, redis, ELK","slug":"docker-mysql-redis-ELK","permalink":"http://ppsteven.github.io/tags/docker-mysql-redis-ELK/"}]},{"title":"pythonå¹¶å‘ç¼–ç¨‹â€”â€”å¤šçº¿ç¨‹ç¼–ç¨‹ threading åç¨‹","slug":"python-threading-basic","date":"2020-06-06T16:33:20.000Z","updated":"2020-06-07T03:13:52.823Z","comments":false,"path":"2020/06/07/python-threading-basic/","link":"","permalink":"http://ppsteven.github.io/2020/06/07/python-threading-basic/","excerpt":"Python å¹¶å‘ç¼–ç¨‹å¯ä»¥åˆ†ä¸ºä¸‰å—ï¼šå¤šè¿›ç¨‹ç¼–ç¨‹ï¼Œå¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œå¤šåç¨‹ç¼–ç¨‹ã€‚ä¹‹å‰ä¸€ç¯‡æ–‡ç« å·²ç»è®²è§£è¿‡äº† å¤šè¿›ç¨‹ç¼–ç¨‹ multiprocessing çš„ç”¨æ³•ï¼Œthreading çš„ä½¿ç”¨åŸºæœ¬ä¸Šå’Œ multiprocessing çš„å·®åˆ«ä¸å¤§ï¼Œç”±äºåç¨‹æ˜¯å…±äº«åŒä¸€ä¸ªè¿›ç¨‹ä¸‹çš„å†…å­˜åœ°å€ï¼Œæ‰€ä»¥æ— éœ€ä½¿ç”¨ Manager/Array/Values è¿™ç§è¿›ç¨‹é—´é€šä¿¡çš„æ–¹æ³•ï¼Œæ›´åŠ ç®€å•ã€‚ æœ¬ç« ä¸»è¦ä»‹ç» å¤šçº¿ç¨‹threading çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³• GILé”æ¦‚å¿µ","text":"Python å¹¶å‘ç¼–ç¨‹å¯ä»¥åˆ†ä¸ºä¸‰å—ï¼šå¤šè¿›ç¨‹ç¼–ç¨‹ï¼Œå¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œå¤šåç¨‹ç¼–ç¨‹ã€‚ä¹‹å‰ä¸€ç¯‡æ–‡ç« å·²ç»è®²è§£è¿‡äº† å¤šè¿›ç¨‹ç¼–ç¨‹ multiprocessing çš„ç”¨æ³•ï¼Œthreading çš„ä½¿ç”¨åŸºæœ¬ä¸Šå’Œ multiprocessing çš„å·®åˆ«ä¸å¤§ï¼Œç”±äºåç¨‹æ˜¯å…±äº«åŒä¸€ä¸ªè¿›ç¨‹ä¸‹çš„å†…å­˜åœ°å€ï¼Œæ‰€ä»¥æ— éœ€ä½¿ç”¨ Manager/Array/Values è¿™ç§è¿›ç¨‹é—´é€šä¿¡çš„æ–¹æ³•ï¼Œæ›´åŠ ç®€å•ã€‚ æœ¬ç« ä¸»è¦ä»‹ç» å¤šçº¿ç¨‹threading çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³• GILé”æ¦‚å¿µ threading åº“ä½¿ç”¨åŸºæœ¬ä½¿ç”¨æ–¹æ³•å’Œ multiprocessing ä¸€æ · 1234567891011import threadingimport timedef worker(name): print(\"çº¿ç¨‹ %s æ­£åœ¨è¿è¡Œ\" % name) time.sleep(1)if __name__ == \"__main__\": for i in range(5): t = threading.Thread(target=worker, args=(i,)) t.start() #å¯åŠ¨çº¿ç¨‹ï¼Œå³è®©çº¿ç¨‹å¼€å§‹æ‰§è¡Œ æ„é€ æ–¹æ³•1class threading.Thread(group=None, target=None, name=None, args=(), kwargs=&#123;&#125;, *, daemon=None)Â¶ group å…¼å®¹é€»è¾‘ï¼Œå§‹ç»ˆè®¾ç½®ä¸ºé»˜è®¤ None target ç›®æ ‡å‡½æ•° args ä¼ å…¥tupleå‚æ•° kwargs ä¼ å…¥å­—å…¸å‚æ•° name çº¿ç¨‹åç§°ï¼Œé»˜è®¤ä¼šè‡ªåŠ¨èµ·ä¸€ä¸ª Thread-N çš„åå­— daemon å®ˆæŠ¤çº¿ç¨‹ å±æ€§ &amp; æ–¹æ³• ident çº¿ç¨‹æ ‡è¯†ç¬¦get_ident() name &amp; get_name() &amp; setName() è·å–/è®¾ç½®è¿›ç¨‹å daemon &amp; isDaemon() &amp; setDaemon() è®¾ç½®/åˆ¤æ–­ å®ˆæŠ¤è¿›ç¨‹ is_alive() &amp; isAlive() çº¿ç¨‹æ˜¯å¦å­˜æ´» join([timeout]) çº¿ç¨‹é˜»å¡ start() å’Œ run() å¯åŠ¨çº¿ç¨‹ å¦‚åŒè¿›ç¨‹ä¸€æ ·ï¼Œçº¿ç¨‹ä¹Ÿæœ‰ä¸¤ç§æ„é€ æ–¹æ³•ã€‚ a. é€šè¿‡ start() å¯åŠ¨çº¿ç¨‹ï¼Œæ­¤æ–¹æ³•æ¯ä¸ªçº¿ç¨‹å¯¹è±¡åªèƒ½è°ƒç”¨ä¸€æ¬¡ã€‚start()ä¼šè°ƒç”¨run()æ–¹æ³•ã€‚ â€‹ æ ‡å‡†çš„run() æ–¹æ³•ä¼šæ‰§è¡Œ target å‡½æ•°ï¼Œå¹¶ä½¿ç”¨ args, kwargså‚æ•° 12t = threading.Thread(target=worker, args=(i,))t.start() #å¯åŠ¨çº¿ç¨‹ï¼Œå³è®©çº¿ç¨‹å¼€å§‹æ‰§è¡Œ b. é€šè¿‡ç»§æ‰¿ threading.Thread çš„å­ç±»é‡å†™ run æ–¹æ³•å®ç°æˆ‘ä»¬ä¸Šé¢çš„åŠŸèƒ½ 1234567891011121314151617import threadingimport timeclass MyThreading(threading.Thread): def __init__(self, *args, **kwargs): super(MyThreading, self).__init__() # æœ‰ä¸¤ç§æ–¹æ³•è°ƒç”¨çˆ¶ç±»ï¼Œæ³¨æ„selfçš„åŒºåˆ« # threading.Thread.__init__(self) self.args = args def run(self): print(\"çº¿ç¨‹ %s æ­£åœ¨è¿è¡Œ\" % self.args) time.sleep(1)if __name__ == \"__main__\": for i in range(5): t = MyThreading(i) t.start() æˆ–è€…ï¼Œæ›´åŠ é€šç”¨ä¸€ç‚¹ 12345678910111213141516class MyThreading(threading.Thread): def __init__(self, group=None, target=None, name=None, args=(), kwargs=None, *, daemon=None): threading.Thread.__init__(self, group=None, target=None, name=None, args=(), kwargs=None, daemon=None) self.args = args self.kwargs = kwargs self.func = target def run(self): self.func(*self.args)if __name__ == \"__main__\": for i in range(5): t = MyThreading(target=worker, args=(i,)) t.start() #å¯åŠ¨çº¿ç¨‹ï¼Œå³è®©çº¿ç¨‹å¼€å§‹æ‰§è¡Œ threading æä¾›çš„æ–¹æ³• threading.active_count() å½“å‰å­˜æ´»çš„çº¿ç¨‹æ•°ç›® len(threading.enumerate()) ä¹Ÿå¯ä»¥è®¡ç®—å‡ºç›¸åŒçš„ç»“æœ threading.current_thread() å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹å¯¹è±¡ threading.enumerate() å½“å‰æ´»ç€çš„çº¿ç¨‹åˆ—è¡¨ threading.main_thread() ä¸»çº¿ç¨‹ 1234&gt;&gt; threading.enumerate())[&lt;_MainThread(MainThread, started 4573310400)&gt;, &lt;MyThreading(Thread-1, started 123145406984192)&gt;, &lt;MyThreading(Thread-2, started 123145412239360)&gt;, &lt;MyThreading(Thread-3, started 123145417494528)&gt;, &lt;MyThreading(Thread-4, started 123145422749696)&gt;, &lt;MyThreading(Thread-5, started 123145428004864)&gt;]&gt;&gt; threading.main_thread()&lt;_MainThread(MainThread, started 4573310400)&gt; å¯ä»¥çœ‹åˆ°æˆ‘ä»¬æœ‰ä¸€ä¸ªä¸»çº¿ç¨‹å’Œç¨‹åºè¿è¡Œä¸­è‡ªä¸»åˆ›å»ºçš„5ä¸ªå­çº¿ç¨‹ çº¿ç¨‹ threading å’Œ mutiprocessing å¼‚åŒ æ²¡æœ‰çº¿ç¨‹æ±  çº¿ç¨‹é—´å…±äº«å…¨å±€å˜é‡ï¼Œæ²¡æœ‰å¤šè¿›ç¨‹é—´å¤æ‚çš„æ²Ÿé€šæ–¹å¼ å…±äº«å…¨å±€å˜é‡ä¾æ—§ä¼šå­˜åœ¨å†²çªçš„é—®é¢˜ï¼Œä½¿ç”¨çš„æ–¹æ³•ä¸ºäº’æ–¥é” Lock, RLock, Condtion, Semaphore, Event. Barrierè¿™ä¸€éƒ¨åˆ†å’Œ mutiprocessingä¸€æ · GIL é”GILçš„åŸºæœ¬æ¦‚å¿µ In CPython, the global interpreter lock, or GIL, is a mutex that prevents multiple native threads from executing Python bytecodes at once. This lock is necessary mainly because CPythonâ€™s memory management is not thread-safe. (However, since the GIL exists, other features have grown to depend on the guarantees that it enforces.) GIL(Global Interpreter Lock)ï¼Œä¸­æ–‡è¯‘ä¸ºå…¨å±€è§£é‡Šå™¨é”ã€‚ Python è™½ç„¶æ˜¯è¿‘å¹´æ¥éå¸¸ç«çš„ä¸€ä¸ªè¯­è¨€ï¼Œä½†æ˜¯å®ƒå¹¶ä¸æ˜¯ä¸€ä¸ªæ–°è¯­è¨€ï¼Œ1991å¹´ç¬¬ä¸€ä¸ªPythonç¼–è¯‘å™¨è¯ç”Ÿã€‚é‚£æ—¶å€™çš„è®¡ç®—æœºå¤§å¤šæ˜¯å•æ ¸CPUï¼Œä¹Ÿå°±ä¸å­˜åœ¨å¹¶è¡Œè®¡ç®—çš„é—®é¢˜ã€‚éšç€CPUæ€§èƒ½çš„æå‡ï¼Œå•æ ¸CPUé€æ¸è¢«å¤šæ ¸CPUæ›¿ä»£ã€‚éšç€è€Œæ¥çš„é—®é¢˜æ˜¯ï¼Œå¦‚ä½•ä¿æŒæ•°æ®é—´çš„ä¸€è‡´æ€§ã€‚è§£å†³çš„æœ€ç®€å•çš„æ–¹æ³•æ˜¯åŠ é”ï¼Œåªæ˜¯Pythonçš„è¿™æŠŠé”å¤ªå¤§äº†ç‚¹ã€‚ GILæœ¬è´¨ä¸Šç±»ä¼¼æ“ä½œç³»ç»Ÿçš„ Mutexã€‚GIL çš„åŠŸèƒ½æ˜¯ï¼šåœ¨ CPython è§£é‡Šå™¨ä¸­æ‰§è¡Œçš„æ¯ä¸€ä¸ª Python çº¿ç¨‹ï¼Œéƒ½ä¼šå…ˆé”ä½è‡ªå·±ï¼Œä»¥é˜»æ­¢åˆ«çš„çº¿ç¨‹æ‰§è¡Œã€‚ GILçš„å·¥ä½œåŸç† å¯ä»¥çœ‹åˆ° Thread 1 å’Œ Thread 3 å¹¶ä¸æ˜¯ä¸€æ¬¡æ€§æ‰§è¡Œå®Œçš„ï¼Œè€Œæ˜¯çº¿ç¨‹ä¼šä¸»åŠ¨é‡Šæ”¾ã€‚è¿™é‡Œçš„åŸå› æ˜¯CPythonä¸­å­˜åœ¨ä¸€ä¸ªå«åš é—´éš”å¼æ£€æŸ¥ï¼ˆcheck_intervalï¼‰ çš„æœºåˆ¶ã€‚CPython è§£é‡Šå™¨ä¼šè½®è¯¢çº¿ç¨‹ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´ï¼ŒCPython å°±ä¼šå¼ºåˆ¶å½“å‰çº¿ç¨‹é‡Šæ”¾GILé”ã€‚ è¿™å’ŒCPUæ—¶é—´ç‰‡çš„æ¦‚å¿µä¸€æ · åœ¨Python3 ä¸­ï¼Œâ€œæ—¶é—´ç‰‡â€å¤§è‡´ä¸º15æ¯«ç§’ã€‚ è§£å†³æ–¹æ³•ä½¿ç”¨ multiprocessing æ›¿ä»£ threading multiprocessingåº“çš„å‡ºç°å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯ä¸ºäº†å¼¥è¡¥threadåº“å› ä¸ºGILè€Œä½æ•ˆçš„ç¼ºé™·ã€‚å®ƒå®Œæ•´çš„å¤åˆ¶äº†ä¸€å¥—threadæ‰€æä¾›çš„æ¥å£æ–¹ä¾¿è¿ç§»ã€‚å”¯ä¸€çš„ä¸åŒå°±æ˜¯å®ƒä½¿ç”¨äº†å¤šè¿›ç¨‹è€Œä¸æ˜¯å¤šçº¿ç¨‹ã€‚æ¯ä¸ªè¿›ç¨‹æœ‰è‡ªå·±çš„ç‹¬ç«‹çš„GILï¼Œå› æ­¤ä¹Ÿä¸ä¼šå‡ºç°è¿›ç¨‹ä¹‹é—´çš„GILäº‰æŠ¢ã€‚ â€“ ä½œè€…ï¼šrookieyu multiprocessing çš„é—®é¢˜åœ¨äºï¼Œå…¶å ç”¨çš„èµ„æºæ˜¯é«˜äºå¤šçº¿ç¨‹çš„ã€‚è€Œä¸”ç”±äºè¿›ç¨‹é—´ä¸èƒ½è¯»å–å¯¹æ–¹çš„åœ°å€ç©ºé—´ï¼Œå¯¼è‡´äº†å¤šè¿›ç¨‹æ²Ÿé€šæ˜¯è¾ƒä¸ºå¤æ‚çš„ï¼Œè¿™ä¸ªé¢å¤–çš„æˆæœ¬ä½¿å¾—åŸæœ¬å°±éå¸¸å¤æ‚çš„å¤šçº¿ç¨‹ç¼–ç¨‹å˜å¾—æ›´åŠ å›°éš¾äº†ç‚¹ã€‚ ä¸è¿‡ threading ä¹Ÿå¹¶éæ˜¯ä¸€æ— æ˜¯å¤„ï¼Œè™½ç„¶åœ¨CPU åˆ©ç”¨ç‡ä¸Šè¡¨ç°çš„ä¸å°½äººæ„ï¼Œä½†æ˜¯åœ¨é«˜I/Oæ“ä½œçš„æ—¶å€™ï¼Œå¤šçº¿ç¨‹å¯ä»¥èµ·åˆ°é¿å…é˜»å¡çš„ä½œç”¨ã€‚ è®¡ç®—å¯†é›†å‹ä½¿ç”¨å¤šè¿›ç¨‹ï¼ŒI/Oå¯†é›†å‹ä½¿ç”¨å¤šçº¿ç¨‹æˆ–è€…å¤šåç¨‹ æ”¹ç”¨å…¶ä»–ç¼–è¯‘å™¨ä½¿ç”¨JPython æˆ–è€… IronPython ç¼–è¯‘å™¨ï¼Œå¯ä»¥è§£å†³è¿™ç±»é—®é¢˜ å‚è€ƒèµ„æ–™ threadingâ€” åŸºäºçº¿ç¨‹çš„å¹¶è¡Œ é£Ÿä¹‹æ— å‘³ï¼Œå¼ƒä¹‹å¯æƒœâ€”Python threadingâ€”â€”çº¿ç¨‹å¯¹è±¡ Python GILå…¨å±€è§£é‡Šå™¨é”è¯¦è§£ï¼ˆæ·±åº¦å‰–æï¼‰ rookieyu ç®€ä¹¦â€“ GIL","categories":[],"tags":[{"name":"python","slug":"python","permalink":"http://ppsteven.github.io/tags/python/"},{"name":"threading","slug":"threading","permalink":"http://ppsteven.github.io/tags/threading/"}]},{"title":"mac + VMware + Centos7 ä¸‹çš„ç½‘ç»œé…ç½®","slug":"vmware-centos-environment-network","date":"2020-05-18T17:11:18.000Z","updated":"2020-05-20T14:04:37.216Z","comments":false,"path":"2020/05/19/vmware-centos-environment-network/","link":"","permalink":"http://ppsteven.github.io/2020/05/19/vmware-centos-environment-network/","excerpt":"æœ¬æ–‡ä»‹ç»ï¼Œå¦‚ä½•åœ¨ mac ç³»ç»Ÿä¸‹é…ç½®ä¸€ä¸ª æ— å›¾å½¢åŒ–çš„ centos ç¯å¢ƒï¼Œéš¾ç‚¹åœ¨äºç½‘ç»œé…ç½® æ•™ç¨‹å‚è€ƒ: ä¸ªäººä¸“å±å¤šèŠ‚ç‚¹Linuxç¯å¢ƒæ‰“é€ ï¼ŒLinuxæ“ä½œç³»ç»Ÿå­¦ä¹ å®éªŒç¯å¢ƒå®‰è£…é…ç½®è§†é¢‘æ•™ç¨‹ ç”¨åˆ°çš„å·¥å…· centos ç³»ç»Ÿ é˜¿é‡Œäº‘ç«™ç‚¹: http://mirrors.aliyun.com/centos/7/isos/x86_64/ å„ä¸ªç‰ˆæœ¬çš„ISOé•œåƒæ–‡ä»¶è¯´æ˜ï¼š CentOS-7-x86_64-DVD-1708.iso æ ‡å‡†å®‰è£…ç‰ˆï¼ˆæ¨èï¼‰ CentOS-7-x86_64-Everything-1708.iso å®Œæ•´ç‰ˆï¼Œé›†æˆæ‰€æœ‰è½¯ä»¶ï¼ˆä»¥ç”¨æ¥è¡¥å……ç³»ç»Ÿçš„è½¯ä»¶æˆ–è€…å¡«å……æœ¬åœ°é•œåƒï¼‰ CentOS-7-x86_64-LiveGNOME-1708.iso GNOMEæ¡Œé¢ç‰ˆ CentOS-7-x86_64-LiveKDE-1708.iso KDEæ¡Œé¢ç‰ˆ CentOS-7-x86_64-Minimal-1708.iso ç²¾ç®€ç‰ˆï¼Œè‡ªå¸¦çš„è½¯ä»¶æœ€å°‘ CentOS-7-x86_64-NetInstall-1708.iso ç½‘ç»œå®‰è£…ç‰ˆï¼ˆä»ç½‘ç»œå®‰è£…æˆ–è€…æ•‘æ´ç³»ç»Ÿï¼‰ ä½œè€…ï¼šAda54é“¾æ¥ï¼šhttps://www.jianshu.com/p/a63f47e096e8 è¿™é‡Œ CentOS-7-x86_64-DVD-1708.iso æ˜¯æ ‡å‡†å®‰è£…ç‰ˆï¼Œå¦‚æœé€‰æ‹©æœ€å°å®‰è£…ï¼Œå’Œ CentOS-7-x86_64-Minimal-1708.iso (æ— ç•Œé¢ç‰ˆæœ¬)ä¸€æ ·ã€‚ vmware æˆ–è€… virtualbox finalShell/terminal","text":"æœ¬æ–‡ä»‹ç»ï¼Œå¦‚ä½•åœ¨ mac ç³»ç»Ÿä¸‹é…ç½®ä¸€ä¸ª æ— å›¾å½¢åŒ–çš„ centos ç¯å¢ƒï¼Œéš¾ç‚¹åœ¨äºç½‘ç»œé…ç½® æ•™ç¨‹å‚è€ƒ: ä¸ªäººä¸“å±å¤šèŠ‚ç‚¹Linuxç¯å¢ƒæ‰“é€ ï¼ŒLinuxæ“ä½œç³»ç»Ÿå­¦ä¹ å®éªŒç¯å¢ƒå®‰è£…é…ç½®è§†é¢‘æ•™ç¨‹ ç”¨åˆ°çš„å·¥å…· centos ç³»ç»Ÿ é˜¿é‡Œäº‘ç«™ç‚¹: http://mirrors.aliyun.com/centos/7/isos/x86_64/ å„ä¸ªç‰ˆæœ¬çš„ISOé•œåƒæ–‡ä»¶è¯´æ˜ï¼š CentOS-7-x86_64-DVD-1708.iso æ ‡å‡†å®‰è£…ç‰ˆï¼ˆæ¨èï¼‰ CentOS-7-x86_64-Everything-1708.iso å®Œæ•´ç‰ˆï¼Œé›†æˆæ‰€æœ‰è½¯ä»¶ï¼ˆä»¥ç”¨æ¥è¡¥å……ç³»ç»Ÿçš„è½¯ä»¶æˆ–è€…å¡«å……æœ¬åœ°é•œåƒï¼‰ CentOS-7-x86_64-LiveGNOME-1708.iso GNOMEæ¡Œé¢ç‰ˆ CentOS-7-x86_64-LiveKDE-1708.iso KDEæ¡Œé¢ç‰ˆ CentOS-7-x86_64-Minimal-1708.iso ç²¾ç®€ç‰ˆï¼Œè‡ªå¸¦çš„è½¯ä»¶æœ€å°‘ CentOS-7-x86_64-NetInstall-1708.iso ç½‘ç»œå®‰è£…ç‰ˆï¼ˆä»ç½‘ç»œå®‰è£…æˆ–è€…æ•‘æ´ç³»ç»Ÿï¼‰ ä½œè€…ï¼šAda54é“¾æ¥ï¼šhttps://www.jianshu.com/p/a63f47e096e8 è¿™é‡Œ CentOS-7-x86_64-DVD-1708.iso æ˜¯æ ‡å‡†å®‰è£…ç‰ˆï¼Œå¦‚æœé€‰æ‹©æœ€å°å®‰è£…ï¼Œå’Œ CentOS-7-x86_64-Minimal-1708.iso (æ— ç•Œé¢ç‰ˆæœ¬)ä¸€æ ·ã€‚ vmware æˆ–è€… virtualbox finalShell/terminal å®‰è£…å®Œ Linux åçš„ç½‘ç»œæ˜¯é»˜è®¤ä¸é€šçš„ï¼Œä¸ºäº†ä½¿ç½‘ç»œè¿é€š è®¾ç½®æ¡¥æ¥æ¨¡å¼åœ¨è™šæ‹ŸæœºæŒ‚æœºçš„æƒ…å†µä¸‹ è™šæ‹Ÿæœº -&gt; ç½‘ç»œé€‚é…å™¨ -&gt; æ¡¥æ¥æ¨¡å¼ -&gt; å‹¾é€‰ Wi-Fi æ¨¡å¼ å‹¾é€‰å®Œæ¯•åï¼Œæˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ° IP å’Œ å­ç½‘ æ©ç ï¼Œ è¿™ä¸ª ip å’Œ å­ç½‘æ©ç  åŒæ ·ä¹Ÿæ˜¯ å®¿ä¸»æœº çš„ ip å’Œ å­ç½‘æ©ç  åˆ†é…é™æ€åœ°å€ç”±äºè™šæ‹Ÿæœºé»˜è®¤çš„æ˜¯èµ°çš„ DHCPï¼Œæˆ‘ä»¬éœ€è¦ä¸»åŠ¨è¯·æ±‚å»è·å– ip åœ°å€ã€‚æˆ‘ä»¬åœ¨ä½¿ç”¨è™šæ‹Ÿæœºçš„æ—¶å€™è‚¯å®šæ˜¯å¸Œæœ›ä¸€ä¸ªå›ºå®šçš„ ipã€‚ åˆ©ç”¨ dhclient å‘½ä»¤å¯ä»¥ä¸»åŠ¨å‘ DHCP æœåŠ¡å™¨è·å–ä¸€ä¸ª ip åœ°å€ 12345678910111213141516[root@192 ~]# dhclient[root@192 ~]# ip addr1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet6 ::1/128 scope host valid_lft forever preferred_lft forever2: ens33: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000 link/ether 00:0c:29:45:4d:90 brd ff:ff:ff:ff:ff:ff inet 192.168.1.8/24 brd 192.168.1.255 scope global noprefixroute ens33 valid_lft forever preferred_lft forever inet6 2409:8a1e:5e7a:f280:c9ed:976f:94f1:9901/64 scope global noprefixroute dynamic valid_lft 209430sec preferred_lft 123030sec inet6 fe80::9f8c:26f6:3c23:c4d3/64 scope link noprefixroute valid_lft forever preferred_lft forever æˆ‘ä»¬è·å¾—äº†ä¸€ä¸ª ip åœ°å€ 192.168.1.8 è®¾ç½®å›ºå®š ipæ³¨æ„äº‹é¡¹ å¦‚æœä½ ä¸Šé¢çš„é™æ€ ip æ²¡æœ‰ä¸»åŠ¨åˆ†é…çš„è¯ï¼Œç›´æ¥åœ¨æœ¬å°èŠ‚ä¸­ä¿®æ”¹é…ç½®ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ä½†æ˜¯è¿™æ ·åšçš„è¯ï¼Œä½ éœ€è¦è®¾ç½®ä¸€ä¸ªæ¯”è¾ƒå¤§çš„ ipï¼Œå¦‚ 192.168.0.20ã€‚è¿™æ˜¯å› ä¸ºåœ¨åŒä¸€ä¸ªå±€åŸŸç½‘ä¸‹ï¼Œå¯èƒ½æœ‰åˆ«çš„è®¾å¤‡ï¼ˆæ‰‹æœºï¼Œå¹³æ¿ï¼‰å ç”¨äº†æŸä¸ª ip åœ°å€ï¼Œä½ éœ€è¦å»é¿å¼€è¿™ä¸€ç‚¹ã€‚ éœ€è¦åˆ‡æ¢æˆ root è´¦å·å»æ“ä½œ é…ç½®æ–‡ä»¶ä¿®æ”¹12345678910111213141516171819202122# vi /etc/sysconfig/network-scripts/ifcfg-ens33 TYPE=EthernetPROXY_METHOD=none BROWSER_ONLY=no- BOOTPROTO=dhcp+ BOOTPROTO=static # é»˜è®¤æ˜¯ dhcpDEFROUTE=yesIPV4_FAILURE_FATAL=noIPV6INIT=yesIPV6_AUTOCONF=yesIPV6_DEFROUTE=yesIPV6_FAILURE_FATAL=noIPV6_ADDR_GEN_MODE=stable-privacyNAME=ens33UUID=5bf952f3-8b37-4ded-b5bc-79ce0676e69dDEVICE=ens33- ONBOOT=no # é»˜è®¤æ˜¯no+ ONBOOT=yes # é»˜è®¤æ˜¯no+ IPADDR=192.168.1.8 # å¡«å†™åˆšåˆšåˆ†é…ç»™æˆ‘ä»¬çš„ ipåœ°å€+ NETMASK=255.255.255.0 # å¡«å†™åˆšåˆšæŸ¥åˆ°çš„ å­ç½‘æ©ç + GATEWAY=192.168.1.1 # å­ç½‘æ©ç  + ip å¯å¾—+ DNS1=192.168.1.1 # è¿™é‡Œå¡«å†™çš„ mac ä¸Šçš„ dns æœåŠ¡å™¨ mac-&gt;ç½‘ç»œåå¥½è®¾ç½®-&gt;é«˜çº§-&gt;DNS å¯ä»¥æŸ¥åˆ° DNSæœåŠ¡å™¨åœ°å€æ‰“å¼€ã€ç³»ç»Ÿåå¥½è®¾ç½®ã€‘-ã€ç½‘ç»œã€‘- é€‰ä¸­ã€Wi-Fiã€‘é¡¹ï¼ˆå¦‚æœæ‚¨æ˜¯WIFIä¸Šç½‘è¯·é€‰æ‹©æ­¤é¡¹ï¼‰- ç‚¹å³ä¾§ã€é«˜çº§ã€‘é€‰æ‹©ã€TCP/IPã€‘é€‰é¡¹å¡ï¼Œè®°å½•å¥½ã€å­ç½‘æ©ç ã€‘ã€ã€è·¯ç”±å™¨ã€‘åœ°å€ã€DNSé€‰é¡¹å¡ä¸‹çš„DNSæœåŠ¡å™¨åœ°å€ï¼ˆå¦‚æœDNSæœåŠ¡å™¨åœ°å€æ²¡æœ‰é…ç½®ï¼Œä¹Ÿå¯ä»¥ç»™é…ç½®ä¸ª8.8.8.8ï¼‰ ç½‘ç»œé‡å¯1systemctl restart network.service æŸ¥çœ‹æ˜¯å¦è¿é€š123456789[root@192 ~]# ping www.baidu.comPING www.a.shifen.com (36.152.44.95) 56(84) bytes of data.64 bytes from 36.152.44.95 (36.152.44.95): icmp_seq=1 ttl=56 time=11.3 ms64 bytes from 36.152.44.95 (36.152.44.95): icmp_seq=2 ttl=56 time=11.2 ms64 bytes from 36.152.44.95 (36.152.44.95): icmp_seq=3 ttl=56 time=65.8 ms^C--- www.a.shifen.com ping statistics ---3 packets transmitted, 3 received, 0% packet loss, time 2003msrtt min/avg/max/mdev = 11.281/29.502/65.882/25.724 ms æœ‰ç•Œé¢ç‰ˆå¦‚æœåˆ‡æ¢æˆæ— ç•Œé¢12$ systemctl set-default multi-user.target (å…³é—­å›¾å½¢ç•Œé¢) # æ‰§è¡Œä»¥å,è¾“å…¥å‘½ä»¤ reboot é‡å¯æœºå™¨å°±å¯ä»¥$ systemctl set-default graphical.target (å¼€å¯å›¾å½¢ç•Œé¢) # æ‰§è¡Œä»¥å,è¾“å…¥å‘½ä»¤ reboot é‡å¯æœºå™¨å°±å¯ä»¥ å‚è€ƒèµ„æ–™https://segmentfault.com/a/1190000015227575","categories":[{"name":"centos","slug":"centos","permalink":"http://ppsteven.github.io/categories/centos/"}],"tags":[{"name":"centos","slug":"centos","permalink":"http://ppsteven.github.io/tags/centos/"}]},{"title":"ç®—æ³•ç¬”è®°:ã€Šå‰‘æŒ‡ Offerã€‹","slug":"jz-offer-solution","date":"2020-05-14T12:13:20.000Z","updated":"2020-07-10T12:25:09.945Z","comments":false,"path":"2020/05/14/jz-offer-solution/","link":"","permalink":"http://ppsteven.github.io/2020/05/14/jz-offer-solution/","excerpt":"ç”¨è¨€ç®€æ„èµ…çš„æ–¹æ³•è®°å½• ã€Šå‰‘æŒ‡ã€‹ï¼Œä½œä¸ºå¤ä¹ ã€Šå‰‘æŒ‡offerã€‹çš„ç¬”è®°","text":"ç”¨è¨€ç®€æ„èµ…çš„æ–¹æ³•è®°å½• ã€Šå‰‘æŒ‡ã€‹ï¼Œä½œä¸ºå¤ä¹ ã€Šå‰‘æŒ‡offerã€‹çš„ç¬”è®° é¢è¯•é¢˜03. æ•°æ®ä¸­çš„é‡å¤æ•°å­—Best Answerã€åˆ©ç”¨ä¸‹è¡¨æ³•ã€‘ è§£é¢˜æ€è·¯ï¼š åˆ©ç”¨ nums é‡Œçš„æ‰€æœ‰æ•°å­—éƒ½åœ¨ 0ï½n-1 çš„èŒƒå›´å†… è¿™ä¸€æ¡ä»¶ï¼Œè¡¨ç¤º æ¯ä¸ªæ•°å­—éƒ½åªæœ‰ä¸€ä¸ªå‘ä½ï¼Œä¸€ä¸ªå‘ä½ä¸Šä¸èƒ½æœ‰ä¸¤ä¸ªæ•°å­— æ—¶é—´å¤æ‚åº¦ O(n) ç©ºé—´å¤æ‚åº¦O(1) 123456789class Solution: def findRepeatNumber(self, nums: List[int]) -&gt; int: for i in range(len(nums)): while i != nums[i]: if nums[i] == nums[nums[i]]: return nums[i] # åŸåœ°äº¤æ¢ temp = nums[i] nums[i] = nums[nums[i]] nums[temp] = temp äº¤æ¢æ•°ç»„çš„æ—¶å€™ï¼Œéœ€è¦æ³¨æ„åˆ©ç”¨ python ä¾¿æ·çš„äº¤æ¢æ–¹å¼å­˜åœ¨é™·é˜± 12345678910# æ­£ç¡®æ–¹æ³•ä¸€ï¼štemp = nums[i]nums[i] = nums[nums[i]]nums[temp] = temp# æ­£ç¡®æ–¹æ³•äºŒï¼šnums[nums[i]] , nums[i] = nums[i] , nums[nums[i]]# é”™è¯¯æ–¹å¼ï¼šnums[i], nums[nums[i]] = nums[nums[i]], nums[i] Other Answerã€å“ˆå¸Œè¡¨æ³•ã€‘ è§£é¢˜æ€è·¯ï¼šå“ˆå¸Œè¡¨ æ—¶é—´å¤æ‚åº¦ O(n) ç©ºé—´å¤æ‚åº¦O(n) Pythonçš„å®ç°å“ˆå¸Œè¡¨çš„æ–¹å¼æ˜¯é€šè¿‡ å­—å…¸ å’Œ é›†åˆ çš„æ–¹å¼ 1234567891011121314# åŸºäºé›†åˆclass Solution: def findRepeatNumber(self, nums: List[int]) -&gt; int: s = set() for i in nums: if i in s: return i else: s.add(i)# åŸºäºå­—å…¸class Solution: def findRepeatNumber(self, nums: List[int]) -&gt; int: s = dict() for i in nums: if i in s: return i else: s[i] = True é¢è¯•é¢˜04. äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾ åŒ æœç´¢äºŒç»´çŸ©é˜µ II Best Answerã€å·¦ä¸‹/å³ä¸Šå…ƒç´ ç§»åŠ¨æ³•ã€‘ è§£é¢˜æ€è·¯ï¼š å·¦ä¸‹ã€å³ä¸Šè§’çš„ç‰¹ç‚¹æ˜¯ï¼Œæ’é™¤å¼æŸ¥æ‰¾ã€‚ æ—¶é—´å¤æ‚åº¦ O(è¡Œé«˜+åˆ—å®½) ç©ºé—´å¤æ‚åº¦ï¼šO(1) 12345678910class Solution: def findNumberIn2DArray(self, matrix: List[List[int]], target: int) -&gt; bool: if not matrix: return False # ä»¥å³ä¸Šè§’ä¸ºä¾‹ i, j = 0, len(matrix[0]) - 1 while i &lt; len(matrix) and j &gt;= 0: if matrix[i][j] == target: return True elif matrix[i][j] &lt; target: i += 1 # æ¯”ç›®æ ‡å€¼å°ï¼Œå‘ä¸‹ä¸€è¡ŒæŸ¥æ‰¾ else: j -= 1 # æ¯”ç›®æ ‡å€¼å¤§ï¼Œå‘ä¸Šä¸€è¡ŒæŸ¥æ‰¾ return False Other Answer ã€åŒæŠ˜åŠæŸ¥æ‰¾ã€‘ è§£é¢˜æ€è·¯ æŠ˜åŠæ³• å‚è€ƒï¼šhttps://blog.nowcoder.net/n/d332492753844d18aa4edc484e3c1318 æ—¶é—´å¤æ‚åº¦ï¼šO(logM + logN) å¤æ‚åº¦æœ€åæƒ…å†µä¸ºO(M * logN) äºŒç»´æ•°ç»„åˆ†ä¸ºä¸Šä¸‹å·¦å³å››ä¸ªè¾¹ç•Œtopï¼Œbottomï¼Œleftï¼Œrightï¼š æ ¹æ®ä¸Šè¾¹ç•ŒæŠ˜åŠæŸ¥æ‰¾â€”â€”ç¡®å®š right èŒƒå›´ æ ¹æ®ä¸‹è¾¹ç•ŒæŠ˜åŠæŸ¥æ‰¾â€”â€”ç¡®å®š left èŒƒå›´ æ ¹æ®å·¦è¾¹ç•ŒæŠ˜åŠæŸ¥æ‰¾â€”â€”ç¡®å®š top èŒƒå›´ æ ¹æ®å³è¾¹ç•ŒæŠ˜åŠæŸ¥æ‰¾â€”â€”ç¡®å®š bottom èŒƒå›´ æœ€ç›´æ¥çš„æ–¹æ³•ï¼Œä»£ç é‡å¤§ï¼Œè€ƒå¯ŸåŸºæœ¬åŠŸ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576class Solution: # array äºŒç»´åˆ—è¡¨ def Find(self, target, array): # write code here left = 0 right = len(array[0]) - 1 top = 0 bottom = len(array) - 1 while (left &lt; right or top &lt; bottom): # å¯¹ä¸Šè¾¹ç•Œè¿›è¡ŒæŠ˜åŠï¼Œå¯ä»¥ç¼©å°å³è¾¹ç•Œ l = left r = right while (l &lt;= r): mid = (l+r) // 2 if array[top][mid] == target: return True elif array[top][mid] &gt; target: r = mid - 1 else: l = mid + 1 if (mid &lt; right): right = mid top += 1 # å¯¹ä¸‹è¾¹ç•Œè¿›è¡ŒæŠ˜åŠï¼Œå¯ä»¥ç¼©å°å·¦è¾¹ç•Œ l = left r = right while (l &lt;= r): mid = (l + r) // 2 if array[bottom][mid] == target: return True elif array[bottom][mid] &gt; target: r = mid - 1 else: l = mid + 1 if (mid &gt; left): left = mid bottom -= 1 # å¯¹å·¦è¾¹ç•Œè¿›è¡ŒæŠ˜åŠï¼Œå¯ä»¥ç¼©å°ä¸‹è¾¹ç•Œ t = top b = bottom while (t &lt;= b): mid = (t + b) // 2 if array[mid][left] == target: return True elif array[mid][left] &gt; target: b = mid - 1 else: t = mid + 1 if (t &lt; mid): t = mid left += 1 # å¯¹å³è¾¹ç•Œè¿›è¡ŒæŠ˜åŠï¼Œå¯ä»¥ç¼©å°ä¸Šè¾¹ç•Œ t = top b = bottom while (t &lt;= b): mid = (t + b) // 2 if array[mid][right] == target: return True elif array[mid][right] &gt; target: b = mid - 1 else: t = mid + 1 if (b &gt; mid): b = mid right -= 1 return Falseif __name__ == \"__main__\": ret = Solution().Find(7,[[1,2,8,9],[2,4,9,12],[4,7,10,13],[6,8,11,15]]) print(ret) é¢è¯•é¢˜05. æ›¿æ¢ç©ºæ ¼ è§£é¢˜æ€è·¯ï¼š å­—ç¬¦ä¸²ç›¸å…³æ“ä½œ é¢è¯•é¢˜06. ä»å°¾åˆ°å¤´æ‰“å°é“¾è¡¨ é€’å½’æ³• é€’å½’æ˜¯ç”±è®¡ç®—æœºå¸®åŠ©å®ç° â€œæ ˆâ€ ç»“æ„ 12345class Solution: stack = [] def reversePrint(self, head: ListNode) -&gt; List[int]: if not head: return [] return self.reversePrint(head.next) + [head.val] æ•°æ®ç»“æ„â€”â€”æ ˆ 12345678class Solution: # è¿”å›ä»å°¾éƒ¨åˆ°å¤´éƒ¨çš„åˆ—è¡¨å€¼åºåˆ—ï¼Œä¾‹å¦‚[1,2,3] def printListFromTailToHead(self, listNode): stack = [] while listNode: stack.append(listNode.val) listNode = listNode.next return stack[::-1] é¢è¯•é¢˜07. é‡å»ºäºŒå‰æ ‘Best Answer è§£é¢˜æ€è·¯: æ•°æ®ç»“æ„â€”â€”äºŒå‰æ ‘ æ ¹æ® pre ç¡®å®š æ ¹èŠ‚ç‚¹ æ ¹æ® vin ç¡®å®šå·¦å³å­æ ‘çš„å¤§å° é€’å½’ç¼–ç¨‹ æ³¨æ„ç‚¹ éœ€è¦æ ¹æ®ä¸­åºéå†ç»“æœï¼Œç¡®å®šå·¦å­æ ‘é•¿åº¦ tin.index(value) 1234567891011121314151617181920212223242526272829303132class TreeNode: def __init__(self, x): self.val = x self.left = None self.right = None class Solution: # è¿”å›æ„é€ çš„TreeNodeæ ¹èŠ‚ç‚¹ def reConstructBinaryTree(self, pre, tin): # write code here if len(pre) == 0 : return None if len(pre) == 1 : return TreeNode(pre[0]) value = pre[0] root = TreeNode(value) # æˆªå–å·¦å­æ ‘ preLeft = pre[1:tin.index(value) + 1] # å…ˆåºéå†ï¼Œä»ç¬¬äºŒä¸ªå¼€å§‹æˆªå›¾ å·¦å­æ ‘é•¿åº¦çš„ æ•°ç»„ tinLeft = tin[:tin.index(value)] # ä¸­åºéå† # æˆªå–å³å­æ ‘ preRight = pre[tin.index(value) + 1:] # å…ˆåºéå†ï¼Œ å·¦å­æ ‘åçš„æ•°ç»„å…ƒç´ æ˜¯ å³å­æ ‘ tinRight = tin[tin.index(value) + 1:] # ä¸­åºéå† root.left = self.reConstructBinaryTree(preLeft, tinLeft) root.right = self.reConstructBinaryTree(preRight, tinRight) return root if __name__ == \"__main__\": sol = Solution().reConstructBinaryTree([1,2,4,5,3,6,7],[4,2,5,1,6,3,7]) print(sol) é¢è¯•é¢˜09. ç”¨ä¸¤ä¸ªæ ˆå®ç°ä¸€ä¸ªé˜Ÿåˆ—Best Answer è§£é¢˜æ€è·¯:æ ˆæ˜¯åè¿›å…ˆå‡º(LIFO)ï¼Œé˜Ÿåˆ—æ˜¯å…ˆè¿›å…ˆå‡º(FIFO)ã€‚å¯ä»¥ä½¿ç”¨2ä¸ªæ ˆæ¥è¡¨ç¤ºï¼Œä¸€ä¸ªè¡¨ç¤ºå…¥æ ˆï¼Œè¿˜æœ‰ä¸€ä¸ªè¡¨ç¤ºå‡ºæ ˆï¼Œå‡ºæ ˆçš„é¡ºåºä¸å…¥æ ˆçš„é¡ºåºç›¸åã€‚ ç¬¬ä¸€ä¸ªæ ˆå¼¹å‡ºåå‹å…¥ç¬¬äºŒä¸ªæ ˆå°±å¯ä»¥äº† python æ ˆ &amp; é˜Ÿåˆ— å®ç° 123456789101112131415161718192021222324252627282930313233# python æ ˆå®ç°stack = []stack.append(1) # å…¥æ ˆstack.pop() # å‡ºæ ˆ# python é˜Ÿåˆ—å®ç°from collections import deque queue = deque(['A', 'B', 'C']) queue.append('D') # å…¥é˜Ÿqueue.popleft() # å‡ºé˜Ÿ# è‡ªå®šä¹‰å®ç°class Stack: # item = [] è¿™æ ·çš„ç”¨æ³•æ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºæ­¤æ—¶æœ‰ä¸¤ä¸ªæ ˆå®ä¾‹éƒ½ä¼šä½¿ç”¨æ­¤å˜é‡ def __init__(self): self.item = [] def push(self, node): self.item.append(node) def pop(self): v = self.item.pop() return v @property def length(self): return len(self.item) def isEmpty(self): if self.length &gt; 0: return False else: return True å›¾è§£ å‚è€ƒï¼šhttps://leetcode-cn.com/problems/yong-liang-ge-zhan-shi-xian-dui-lie-lcof/solution/fu-zhu-zhan-python3-c-by-z1m/ 123456789101112131415class CQueue: def __init__(self): # s1 ç”¨äºå­˜å‚¨ï¼Œç›¸å½“äºä»“åº“; s2 ç”¨äºè¾“å‡º self.s1, self.s2 = [], [] def appendTail(self, value: int) -&gt; None: self.s1.append(value) def deleteHead(self) -&gt; int: if self.s2: return self.s2.pop() while self.s1: # å¦‚æœ s1 ä¸ºç©ºï¼Œå°è¯•æŠŠ s2 æ•°æ®æ¢è¿‡æ¥ self.s2.append(self.s1.pop()) if self.s2: return self.s2.pop() # å†æ¬¡å°è¯•å–æ•°æ® else: return -1 é¢è¯•10- I. æ–æ³¢é‚£å¥‘æ•°åˆ—ã€åŠ¨æ€è§„åˆ’ç»å…¸ã€‘é¢è¯•10- II. é’è›™è·³å°é˜¶é—®é¢˜ã€åŠ¨æ€è§„åˆ’ç»å…¸ã€‘Best Answerã€åŠ¨æ€è§„åˆ’ã€‘ è§£é¢˜æ€è·¯ï¼šåŠ¨æ€è§„åˆ’åŠ¨æ€è§„åˆ’è§£æï¼š ä½œè€…ï¼šjyd æ—¶é—´å¤æ‚åº¦ï¼šO(n) ç©ºé—´å¤æ‚åº¦O(n) 123456class Solution: def fib(self, n: int) -&gt; int: fibArr = [0, 1] for i in range(2, n + 1): fibArr.append(fibArr[i - 1] + fibArr[i - 2]) return fibArr[n] % 1000000007 Other Answer ã€å¾ªç¯æ±‚ä½™æ³•ã€‘ è§£é¢˜é€Ÿç‡ï¼šåŠ¨æ€è§„åˆ’çš„æ”¹è¿› ä½œè€…ï¼šjyd æ—¶é—´å¤æ‚åº¦ï¼šO(n) ç©ºé—´å¤æ‚åº¦O(1) åŠ¨æ€è§„åˆ’çš„ç©ºé—´å¤æ‚åº¦ O(n) ï¼Œå¯ä»¥ä¸å­˜å‚¨ä¸­é—´ç»“æœã€‚ 123456class Solution: def fib(self, n: int) -&gt; int: a, b = 0, 1 for _ in range(n): a, b = b, a + b return a % 1000000007 Other Answerã€åˆ†æ²»æ³•+è®°å¿†åŒ–æœç´¢ã€‘ è§£é¢˜æ€è·¯ï¼š åˆ†æ²»æ³• + è®°å¿†åŒ–æœç´¢ ä¼ ç»Ÿçš„åˆ†æ²»æ³•ä¼šäº§ç”Ÿå¤§é‡é‡å¤è®¡ç®—ï¼Œä¸€å®šä¼šè¶…æ—¶ã€‚é€šè¿‡å°†ç»“æœå›ºå®šä¸‹æ¥å¯ä»¥åŠ å¿«è¿ç®—é€Ÿåº¦ 123456789class Solution: def fib(self, n: int) -&gt; int: def F(n): if n in memory: return memory[n] value = F(n-1) + F(n-2) memory[n] = value return memory[n] memory = &#123;0:0, 1:1&#125; return F(n) % 1000000007 é¢è¯•é¢˜11. æ—‹è½¬æ•°ç»„çš„æœ€å°æ•°å­—ã€ä¸­é«˜éš¾ã€‘Best Answerã€å˜å½¢äºŒåˆ†æŸ¥æ‰¾ã€‘ è§£é¢˜æ€è·¯ï¼š æ—¶é—´å¤æ‚åº¦O(n) ç©ºé—´å¤æ‚åº¦ O(1) å˜å½¢çš„äºŒåˆ†æŸ¥æ‰¾ï¼Œä½†æ˜¯æœ‰ä¸€äº›å‘ a. æ­£ç¡®æƒ…å†µä¸‹çš„äºŒåˆ†æŸ¥æ‰¾ b. ç‰¹æ®Šæƒ…å†µ å½“å‡ºç°é‡å¤æ•°å­—æƒ…å½¢çš„æ—¶å€™ï¼Œç›´æ¥ç¼©å°å·¦è¾¹ç•Œï¼ˆå› ä¸ºæœ€å°å€¼æ€»æ˜¯åœ¨å³ä¾§å‡ºç°ï¼‰ æƒ…å½¢4 å¯ä»¥é€‚åº”éé€’å¢æ•°åˆ—çš„æœ€å°å€¼ä¸ºé˜Ÿé¦–å…ƒç´ çš„æƒ…å½¢ã€‚æœ€åçš„ä»£ç éå¸¸å·§å¦™ 12345678910111213141516class Solution: def minNumberInRotateArray(self, rotateArray): left = 0 right = len(rotateArray) - 1 while left &lt; right: # ä¸èƒ½æ˜¯ &lt;= # åŠ å…¥ç‰¹æ®Šæƒ…å†µï¼Œéé€’å‡æ•°ç»„çš„æœ€å°å€¼å°±æ˜¯é˜Ÿé¦– if rotateArray[left] &lt; rotateArray[right]: return rotateArray[left] mid = (left + right) // 2 if rotateArray[mid] &gt; rotateArray[left]: left = mid + 1 # ä¸€èˆ¬éƒ½æ˜¯åœ¨å³ä¾§ï¼Œæ‰€ä»¥æ”¾å¿ƒåŠ 1 elif rotateArray[mid] &lt; rotateArray[right]: right = mid # æ­¤æ—¶ mid å¯èƒ½æ˜¯æœ€å°å€¼ï¼Œä¸èƒ½æ’é™¤ else: left += 1 # å·§å¦™é¿å…äº†offerä¹¦ä¸Šè¯´çš„å‘ç‚¹ï¼ˆ1 0 1 1 1ï¼‰ return rotateArray[left] äºŒåˆ†æ³•è§£é¢˜éœ€è¦è€ƒè™‘çš„æƒ…å†µ while left &lt;= right æ˜¯é”™è¯¯çš„ å®ä¾‹ï¼š[2,2,2,0,1] é”™è¯¯è¾“å‡º 2 ï¼Œå®é™…ä¸Šæ˜¯ 0 right = mid æç°äº†æœ€å°å€¼ä¸€èˆ¬æ˜¯åœ¨å³ä¾§ è€ƒè™‘åˆ°å­˜åœ¨æœ‰åºçš„æƒ…å†µï¼Œå•ç‹¬å¤„ç† Other Answer ã€ç›´æ¥æœç´¢ã€‘ æ—¶é—´å¤æ‚åº¦ï¼š O(n) ç©ºé—´å¤æ‚åº¦: O(1) 123456789class Solution: def minNumberInRotateArray(self, rotateArray): if not rotateArray: return 0 for i in range(1, len(rotateArray)): if rotateArray[i-1] &gt; rotateArray[i]: return rotateArray[i] return rotateArray[0] é¢è¯•é¢˜12. çŸ©é˜µä¸­çš„è·¯å¾„Best Answer è§£é¢˜æ€è·¯: DFS æ·±åº¦æœç´¢ 12345678910111213141516171819202122class Solution: def exist(self, board: List[List[str]], word: str) -&gt; bool: def dfs(i, j, word): if not word: return True # å·²ç»æ‰¾åˆ° if not (0 &lt;= i &lt;= len(board) - 1 and \\ 0 &lt;= j &lt;= len(board[0]) - 1 and \\ board[i][j] == word[0]): return False flag.append((i, j)) # åŠ å…¥è®¿é—®è¿‡çš„èŠ‚ç‚¹ for d in dirction: ni, nj = i + d[0], j + d[1] if (ni, nj) not in flag: # åˆ¤æ–­æœ‰æ— èµ°è¿‡ if dfs(ni, nj, word[1:]): return True flag.remove((i, j)) # èµ°å®Œä¸€å®šè¦å›æº¯å›çŠ¶æ€ return False dirction = [(-1, 0), (1, 0), (0, -1), (0, 1)] flag = [] # æ ‡è®°èµ°è¿‡çš„æ ¼å­ for i in range(len(board)): for j in range(len(board[0])): if dfs(i, j, word): return True return False é‡ç‚¹å…ƒç´ ï¼š ç»ˆæ­¢æ¡ä»¶ if not word: return True ä¸èƒ½æ¼æ‰ è®¿é—®è¿‡çš„èŠ‚ç‚¹çŸ©é˜µï¼šä¸¤ç§å®ç°æ–¹æ³• é‚»æ¥çŸ©é˜µè¡¨ç¤ºæ³•ã€ç¨€ç–çŸ©é˜µæ ‡è¯†æ–¹å¼ flags = [[0]*ncol for _ in range(nrow)] ï¼Œé€šè¿‡è®¾ç½® flags[j][i] = True flags = [(1, 2), (3,4)] ä¸€å®šè¦æ³¨æ„ç»“æŸå å›æº¯çŠ¶æ€ Graceful Answer ã€ç²¾å¦™å†™æ³•ã€‘ å‚è€ƒè‡ª: Krahets-Leetcode é¢˜è§£ 1234567891011121314151617class Solution: def exist(self, board: List[List[str]], word: str) -&gt; bool: def dfs(i, j, k): if not 0 &lt;= i &lt; len(board) or \\ not 0 &lt;= j &lt; len(board[0]) or \\ board[i][j] != word[k]: return False # åˆ¤æ–­éƒ½æ”¾åœ¨è¿™é‡Œ if k == len(word) - 1: return True tmp, board[i][j] = board[i][j], '/' # ç›´æ¥ä¿®æ”¹åŸçŸ©é˜µ res = dfs(i + 1, j, k + 1) or dfs(i - 1, j, k + 1) or dfs(i, j + 1, k + 1) or dfs(i, j - 1, k + 1) board[i][j] = tmp return res for i in range(len(board)): for j in range(len(board[0])): if dfs(i, j, 0): return True return False é¢è¯•é¢˜13. æœºå™¨äººçš„è¿åŠ¨èŒƒå›´My Answerã€DFS æ·±åº¦æœç´¢æ”¹è¿›ã€‘ è§£é¢˜æ€è·¯ï¼šDFS æ·±åº¦æœç´¢ + å‰ªæ ä¸Šä¸€é¢˜åŒæ ·æ˜¯ DFS ç®—æ³•ï¼Œå…¶ä¸­æåˆ°ä¸€å®šè¦æ³¨æ„ çŠ¶æ€å›æº¯ ã€‚æœ¬é¢˜åˆ™ä¸åŒï¼Œå› ä¸ºæ˜¯æ±‚çš„ æœ€å¤šè®¿é—®åˆ°çš„æ ¼å­ï¼Œ æœ€å¤šè®¿é—®çš„è·¯å¾„ ã€‚æ‰€ä»¥ è¾…åŠ©çŸ©é˜µ visited æ˜¯è®°å½•è®¿é—®åˆ°çš„æ ¼å­ï¼Œæœ€åè¿”å›çš„ç»“æœä¹Ÿæ˜¯ len(visited) ç»ˆæ­¢æ¡ä»¶ï¼š ä¸‹æ ‡è¶Šç•Œã€é¢˜ç›®æ¡ä»¶é™åˆ¶ã€èŠ‚ç‚¹å·²è®¿é—® è®¡ç®—èŠ‚ç‚¹ä½æ•°å’Œçš„æ–¹æ³•å¯ä»¥å°è¯• memory è®°å¿†çŸ©é˜µåšç¼“å­˜ å‰ªæä½“ç°åœ¨ï¼šæ ¹æ®é¢˜æ„ï¼Œåªéœ€è¦è®¿é—® å³ã€ä¸‹ ä¸¤ä¸ªæ–¹å‘å³å¯ã€‚ 1234567891011121314151617181920class Solution: def movingCount(self, m: int, n: int, k: int) -&gt; int: def cal_digit(x): if not x in memory: ret = sum([int(_) for _ in str(x)]) memory[x] = ret return memory[x] def dfs(i, j): if i &gt;= m or j &gt;=n: return # ä¸‹è¡¨è¶Šç•Œ if cal_digit(i) + cal_digit(j)&gt; k: return # é¢˜ç›®æ¡ä»¶é™åˆ¶ if (i, j) in visited: return # èŠ‚ç‚¹å·²è®¿é—®è¿‡ visited.append((i, j)) dfs(i + 1, j) dfs(i, j + 1) visited = [] memory = &#123;&#125; dfs(0, 0) return len(visited) è®¡ç®—ä½æ•°çš„æ–¹å¼ï¼š 12345678910111213141516# å¾ªç¯å–ä½™def cal_digit(x): if not x in memory: ret, y = 0, x while y: ret += y % 10 y = y // 10 memory[x] = ret return memory[x]# å­—ç¬¦ä¸²è®¡ç®—def cal_digit(x): if not x in memory: ret = sum([int(_) for _ in str(x)]) memory[x] = ret return memory[x] Best Answerã€DFS æ·±åº¦æœç´¢ã€‘ è§£é¢˜æ€è·¯ï¼šDFS æœç´¢ + æ•°ä½å’Œè®¡ç®—æ–¹å¼æ”¹è¿› å‚è€ƒï¼šKrahets-è§£é¢˜ Krahetsâ€™s Blog è¿™ä¸ªå¤§ç¥äº›çš„ä¸œè¥¿ï¼ŒçœŸçš„æ¯”åŸä¹¦çš„ä½œè€…å†™çš„è§£æ³•å¥½ï¼Œè€Œä¸”æ˜¯pythonç‰ˆ æ•°ä½å’Œå¢é‡å…¬å¼ï¼š 1s_x + 1 if (x + 1) % 10 else s_x - 8 ä»£ç å¦‚ä¸‹ã€å¾ˆç²¾å¦™çš„å†™æ³•ã€‘ï¼š 12345678910class Solution: def movingCount(self, m: int, n: int, k: int) -&gt; int: def dfs(i, j, si, sj): if i &gt;= m or j &gt;= n or k &lt; si + sj or (i, j) in visited: return 0 visited.add((i,j)) return 1 + dfs(i + 1, j, si + 1 if (i + 1) % 10 else si - 8, sj) \\ + dfs(i, j + 1, si, sj + 1 if (j + 1) % 10 else sj - 8) visited = set() return dfs(0, 0, 0, 0) Best Answer ã€BFS å¹¿åº¦æœç´¢ã€‘è§£é¢˜æ€è·¯ï¼šBFS å¹¿åº¦æœç´¢ 12345678910class Solution: def movingCount(self, m: int, n: int, k: int) -&gt; int: queue, visited, = [(0, 0, 0, 0)], set() while queue: i, j, si, sj = queue.pop(0) if i &gt;= m or j &gt;= n or k &lt; si + sj or (i, j) in visited: continue visited.add((i,j)) queue.append((i + 1, j, si + 1 if (i + 1) % 10 else si - 8, sj)) queue.append((i, j + 1, si, sj + 1 if (j + 1) % 10 else sj - 8)) return len(visited) é¢è¯•é¢˜14- I. å‰ªç»³å­ã€éå¸¸ç»å…¸ã€‘ å‚è€ƒï¼šè…çƒ‚çš„æ©˜å­ğŸŠ Answer 01 ã€æš´åŠ›æ³•ã€‘ ä¸‹é¢æˆ‘ä»¬æ‰‹ç®—ä¸€ä¸‹ $F(4)$ çš„å–å€¼æ˜¯ä» $F(3)\\times1, 3 \\times 1;F(2)\\times 2, 2\\times 2;F(1)\\times3, 1\\times3$ ä¸­æŒ‘é€‰å‡ºæœ€å¤§çš„å€¼ã€‚å¯ä»¥å½’çº³å‡ºå¦‚ä¸‹é€’å½’å‡½æ•° $$F(n)=max(i\\times(n-i),i\\times F(n-i)),i=1,2,â€¦,n-2$$ æš´åŠ›æ³•å­˜åœ¨å¤§é‡è®¡ç®—ä¸€å®šä¼šè¶…æ—¶ï¼Œæ‰€ä»¥ä¸€èˆ¬æš´åŠ›æ³•éƒ½æ˜¯æ­é… è®°å¿†åŒ–çŸ©é˜µ ä¸€èµ· é£Ÿç”¨ Answer 02 ã€è®°å¿†åŒ–æœç´¢ã€‘ã€è‡ªé¡¶å‘ä¸‹ã€‘ è§£é¢˜æ€è·¯ï¼šè®°å¿†åŒ–æŠ€æœ¯ï¼ˆè‡ªé¡¶å‘ä¸‹ï¼‰ é€’å½’å‡½æ•°ä¸­å­˜åœ¨å¤§é‡é‡å¤çš„è®¡ç®—ï¼Œè®°å¿†åŒ–æŠ€æœ¯ï¼Œå¯ä»¥å¸®åŠ©ç¼©å°æ—¶é—´ï¼Œé€šè¿‡è®¡ç®—æœºéªŒè¯ æ—¶é—´å¤æ‚åº¦ $O(n^2)$ ç©ºé—´å¤æ‚åº¦ $O(n)$ 1234567891011class Solution: def cuttingRope(self, n: int) -&gt; int: def f(n): if n in memory: return memory[n] res = -1 for i in range(1, n): res = max(res, f(i) * (n - i), i * (n - i)) memory[n] = res return memory[n] memory = &#123;1: 1&#125; # å¯ä»¥å°†ç»ˆæ­¢æ¡ä»¶è®¾ç½®åœ¨ è®°å¿†åŒ–çŸ©é˜µä¸­ return f(n) Best Answer ã€åŠ¨æ€è§„åˆ’ã€‘ã€è‡ªåº•å‘ä¸Šã€‘ è§£é¢˜æ€è·¯ï¼šåŠ¨æ€è§„åˆ’ï¼ˆè‡ªåº•å‘ä¸Šï¼‰(æ¨èæ–¹æ³•) æ—¶é—´å¤æ‚åº¦ O(n) ç©ºé—´å¤æ‚åº¦ O(n) åŠ¨æ€è§„åˆ’çš„æ ¸å¿ƒæ˜¯ï¼Œè®¾å®šè¾¹ç•Œæ¡ä»¶ å’Œ çŠ¶æ€è½¬ç§»æ–¹ç¨‹ ã€‚ å»ºè®®ä¸€ç»´åŠ¨æ€æ•°ç»„ dp : è¾¹ç•Œæ¡ä»¶ï¼š$dp[1] = dp[2] = 1$ ï¼Œè¡¨ç¤ºé•¿åº¦ä¸º 2 çš„ç»³å­æœ€å¤§ä¹˜ç§¯ä¸º 1ï¼› çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š $dp[i] = max(dp[i], max((i-j)j, jdp[i-j]))$ 12345678910class Solution: def cuttingRope(self, n: int) -&gt; int: d = [ 0 for _ in range(n + 1)] d[1], d[2] = 0, 1 for i in range(3, n+1): res = -1 for j in range(1, i // 2 + 1): res = max(res, j * (i - j), j * d[i-j]) d[i] = res return d[n] Best Answer ã€åŠ¨æ€è§„åˆ’ç©ºé—´ä¼˜åŒ–ã€‘ã€è‡ªåº•å‘ä¸Šã€‘ åŒ é¢è¯•é¢˜10-I æ–æ³¢é‚£å¥‘æ•°åˆ—ä¸€æ ·ã€‚åŒæ ·å¯ä»¥é’ˆå¯¹ç©ºé—´å¤æ‚åº¦ä¼˜åŒ– 123456789101112# ä½œè€…ï¼šz1m# é“¾æ¥ï¼šhttps://leetcode-cn.com/problems/jian-sheng-zi-lcof/solution/xiang-jie-bao-li-di-gui-ji-yi-hua-ji-zhu-dong-tai-/class Solution: def cuttingRope(self, n): dp = [0, 1, 1] for i in range(3, n + 1): dp[i % 3] = max(max(dp[(i - 1) % 3], i - 1), 2 * max(dp[(i - 2) % 3], i - 2), 3 * max(dp[(i - 3) % 3], i - 3)) return dp[n % 3] Best Answer ã€æ•°å­¦æ¨å¯¼ã€‘è¿™ä¸€éƒ¨åˆ†å±äºæ•°æ®å…¬å¼çš„è¯æ˜ï¼Œå¯ä»¥å‚è€ƒå¦‚ä¸‹æ•™ç¨‹ï¼Œæ¯”è¾ƒæ¸…æ™° é¢è¯•é¢˜14- I. å‰ªç»³å­ï¼ˆæ•°å­¦æ¨å¯¼ / è´ªå¿ƒæ€æƒ³ï¼Œæ¸…æ™°å›¾è§£ï¼‰ é¢è¯•é¢˜15-äºŒè¿›åˆ¶ä¸­çš„1 è§£é¢˜æ€è·¯ï¼šä½æ“ä½œ åŸç ã€åç ã€è¡¥ç ç›¸å…³æ¦‚å¿µã€‚ åŸç  å–å + 1 ==&gt; è¡¥ç  æ•™ç¨‹ï¼šåŸç , åç , è¡¥ç  è¯¦è§£ ç›¸å…³ä½è¿ç®— 123n &amp; 1 # n &amp; 1 éªŒè¯æœ€åä¸€ä½æ˜¯å¦æ˜¯1n &gt;&gt; 1 # ç­‰ä»·äº n // 2 n &amp; (n - 1) # My Answer ã€æ— ç¬¦å·ä½ã€‘ã€é€ä½åˆ¤æ–­ã€‘ æ—¶é—´å¤æ‚åº¦ $O(log_2n)$ ç©ºé—´å¤æ‚åº¦ $O(1)$ 1234567class Solution: def hammingWeight(self, n: int) -&gt; int: res = 0 while n: res += n &amp; 1 n &gt;&gt;= 1 return res Graceful Answerã€æ— ç¬¦å·ã€‘ã€æŠ€å·§æ³•ã€‘ è§£é¢˜æ€è·¯ï¼šæŠ€å·§ï¼š n &amp; (n - 1) $(n - 1)$ äºŒè¿›åˆ¶æœ€å³è¾¹çš„ 1å˜æˆ0ï¼Œ0å˜æˆ1 $n\\times(n - 1)$ äºŒè¿›åˆ¶æœ€å³è¾¹çš„ 1 å˜æˆ 0ï¼Œå…¶ä½™ä¿æŒä¸å˜ ã€‚æ¯ä¸€æ¬¡ $n\\times(n - 1)$éƒ½ä¼šæ¶ˆå»ä¸€ä¸ª0ï¼Œç›´åˆ°æ¶ˆå®Œä¸ºæ­¢ã€‚ æ—¶é—´å¤æ‚åº¦ $O(M),M ä»£è¡¨æ•°å­—Nä¸­1çš„ä¸ªæ•°$ ç©ºé—´å¤æ‚åº¦: $O(1)$ 1234567class Solution: def hammingWeight(self, n: int) -&gt; int: res = 0 while n: res += 1 n &amp;= n - 1 return res é¢è¯•é¢˜16. æ•°å€¼çš„æ•´æ•°æ¬¡æ–¹Best Answer ã€é€’å½’æ³•ã€‘ã€å¿«é€Ÿå¹‚ã€‘ è§£é¢˜æ€è·¯ï¼šå¿«é€Ÿå¹‚ äºŒåˆ†æ¨å¯¼ï¼š å½“ n ä¸ºå¶æ•°ï¼š $x^n=x^{n/2}\\times x^{n/2}$ å½“ n ä¸ºå¥‡æ•°ï¼š $x^n=x^{n/2}\\times x^{n/2}\\times x$ æ—¶é—´å¤æ‚åº¦ä¸º $O(log_2n)$ ç©ºé—´å¤æ‚åº¦ $O(1)$ 123456789101112class Solution: def myPow(self, x: float, n: int) -&gt; float: \"\"\" åˆ†æ²»æ³•: é€’å½’ç‰ˆ \"\"\" if x == 0: raise Exception(\"0 is not invalid\") if n == 0: return 1 # è¿™ä¸ªç‰¹åˆ«å®¹æ˜“æ¼ if n == 1: return x postivate_n = abs(n) temp = self.myPow(x, postivate_n &gt;&gt; 1) res = temp * temp * (x if postivate_n &amp; 1 else 1) return res if n &gt; 0 else 1/res Graceful Answer ã€æ•°å­¦é€’æ¨æ³•ã€‘ã€å¿«é€Ÿå¹‚ã€‘ è§£é¢˜æ€è·¯ï¼š æ•°æ®é€’æ¨æ³• + ä½è¿ç®— ä¸¾ä¾‹ $n = 9$ ï¼Œç”¨äºŒè¿›åˆ¶å¯è¡¨ç¤ºä¸º $n = 9 = 1001_b$$$x^9 = 1\\times x^{2^0} \\times x^{2^3}$$è¿™é‡Œï¼Œå‘ç° $x^{2^0} = x$ï¼Œ æ­¤æ—¶å…¬å¼å°±å˜æˆ$$x^9 = 1\\times y \\times y^3$$å¯ä»¥å‘ç°ï¼Œåªè¦å¯¹åº”äºŒè¿›åˆ¶ä½ä¸º 0 çš„è¯ï¼Œå°±ä¸ä¹˜ä¸Šå»ã€‚ 123456789class Solution: def myPow(self, x: float, n: int) -&gt; float: pos_n = abs(n) res = 1 while pos_n: res = res * (x if (pos_n &amp; 1) else 1) pos_n = pos_n &gt;&gt; 1 x = x * x return res if n &gt; 0 else 1/res é¢è¯•é¢˜17. æ‰“å°ä»1åˆ°æœ€å¤§çš„nä½æ•°Simple Answerã€ç®€å•ç‰ˆæœ¬ã€‘ é¢˜è§£ï¼Œæœ¬é¢˜å¯¹äº Pythonå¹¶ä¸æ˜¯ä¸€é“ç®€å•çš„é¢˜ç›®ã€‚éš¾ç‚¹æ˜¯å¦‚ä½•å¤„ç† å¤§æ•°æƒ…å†µ 1list(range(1, 10**n)) Hard Answer ã€å¤§æ•°ç‰ˆæœ¬ã€‘ã€å…¨æ’åˆ—ã€‘ è§£é¢˜æ€è·¯ï¼šå…¨æ’åˆ— å‚è€ƒï¼šé¢è¯•é¢˜17. æ‰“å°ä» 1 åˆ°æœ€å¤§çš„ n ä½æ•°ï¼ˆåˆ†æ²»ç®—æ³• / å…¨æ’åˆ—ï¼Œæ¸…æ™°å›¾è§£ï¼‰ æ—¶é—´å¤æ‚åº¦ $O(10^n)$ ç©ºé—´å¤æ‚åº¦ $O(1)$ é¦–å…ˆå®ç°ç®€å•çš„å®ç° ä¸¤ä¸ªæ•°å­—0~9 çš„å…¨æ’åˆ—ã€‚å¯ä»¥é€šè¿‡ é€’å½’ å»å®ç° 1234567891011121314151617181920# åˆ©ç”¨é€’å½’å®ç° å…¨æ’åˆ—é—®é¢˜def printNumbers(self, n: int) -&gt; [int]: def dfs(x): if x == n: # ç»ˆæ­¢æ¡ä»¶ï¼šå·²å›ºå®šå®Œæ‰€æœ‰ä½ res.append(''.join(num)) # æ‹¼æ¥ num å¹¶æ·»åŠ è‡³ res å°¾éƒ¨ return for i in range(10): # éå† 0 - 9 num[x] = str(i) # å›ºå®šç¬¬ x ä½ä¸º i dfs(x + 1) # å¼€å¯å›ºå®šç¬¬ x + 1 ä½ num = ['0'] * n # èµ·å§‹æ•°å­—å®šä¹‰ä¸º n ä¸ª 0 ç»„æˆçš„å­—ç¬¦åˆ—è¡¨ res = [] # æ•°å­—å­—ç¬¦ä¸²åˆ—è¡¨ dfs(0) # å¼€å¯å…¨æ’åˆ—é€’å½’ return resif __name__ == \"__main__\": res = printNumbers(2) print(res)# output: # ['00', '01', '02', '03', '04', '05', ...., '97', '98', '99'] æ¥ä¸‹æ¥ï¼Œéœ€è¦å¯¹ å…¨æ’åˆ— åšä¸€ä¸‹ä¼˜åŒ–ï¼Œå»é™¤å¤šä½™çš„ 0 å’Œ ä»1å¼€å§‹è¾“å‡º è¿™æ ·çš„æ”¹è¿›ï¼Œæ„Ÿè§‰å°±æ˜¯ä¿®å¤é€»è¾‘æ¼æ´ä¸€æ ·ï¼Œæ¯”è¾ƒè€ƒå¯Ÿæ˜¯å¦ç»†å¿ƒï¼Œè¿™é‡Œå°±æ¯”è¾ƒè§ä»è§æ™ºäº†ã€‚è¿™é‡Œæˆ‘å‚è€ƒçš„æ˜¯ Krahets ç»™çš„è§£æ³•ã€‚ 1234567891011121314151617181920212223class Solution: def printNumbers(self, n): def dfs(x): if x == n: # è¿™ä¸€æ­¥å¤æ‚ç­›é€‰å’Œç”Ÿäº§æ•°å­—åºåˆ— s = ''.join(self.num)[self.digit:] # '0001' =&gt; '1' if s == '0': return # åªå¤„ç† â€™0000â€˜ å…¨é›¶çš„è¿™ä¸€æƒ…å†µ if self.digit + self.nine == n : self.digit -= 1 self.res.append(s) return for i in range(10): # è¿™ä¸€æ­¥å¤æ‚ç”Ÿäº§ '00', '01', '02' è¿™æ ·çš„åºåˆ— if i == 9: self.nine += 1 self.num[x] = str(i) dfs(x + 1) self.num = ['0'] * n self.digit = n - 1 # ä»£è¡¨æ˜¯ä»æœ€åä¸€ä½å¼€å§‹ self.nine = 0 # è®°å½•æ˜¯ä¸æ˜¯ä» 9 self.res = [] dfs(0) return self.resif __name__ == \"__main__\": res = Solution().printNumbers(2) print(res) é¢è¯•é¢˜18. åˆ é™¤é“¾è¡¨çš„èŠ‚ç‚¹My Answerã€å•æŒ‡é’ˆã€‘12345678910111213class Solution: def deleteNode(self, head: ListNode, val: int) -&gt; ListNode: \"\"\" å•æŒ‡é’ˆæ³• \"\"\" # åˆ é™¤å¤´ç»“ç‚¹ if head.val == val: return head.next temp = head # éå¤´ç»“ç‚¹ while temp and temp.next: if temp.next.val == val and temp.next: temp.next = temp.next.next temp = temp.next return head My Answerã€åŒæŒ‡é’ˆã€‘ã€è¾ƒä¸ºæ¸…æ™°ã€‘1234567891011class Solution: def deleteNode(self, head: ListNode, val: int) -&gt; ListNode: \"\"\" åŒæŒ‡é’ˆæ³• \"\"\" if head.val == val: return head.next # å¦‚æœæ­£å¥½æ˜¯å¤´ç»“ç‚¹ pre, cur = head, head.next while cur: if cur.val == val: pre.next = cur.next return head else: pre, cur = pre.next, cur.next Other Answer ã€é€’å½’ã€‘12345class Solution: def deleteNode(self, head: ListNode, val: int) -&gt; ListNode: if not head: return head head.next = self.deleteNode(head.next, val) return head.next if head.val == val else head é¢è¯•é¢˜19. æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ã€å›°éš¾ã€‘æœ¬é¢˜çš„ ã€Hardã€‘æ¨¡å¼ï¼Œæ­£æ˜¯å› ä¸ºè€ƒè™‘çš„æƒ…å½¢æ¯”è¾ƒå¤šï¼Œå¾ˆå®¹æ˜“ä¸€äº›å°ç»†èŠ‚æ¼åšã€‚å°½ç®¡æ•´ç†çš„æ—¶å€™å·²ç»æ˜¯äºŒæ¬¡åˆ·é¢˜äº†ï¼Œä½†æ˜¯è¿˜æ˜¯èŠ±äº† 1H è°ƒè¯•+é‡å†™æ‰æˆåŠŸ My Answer ã€é€’å½’æ³•ã€‘ è§£é¢˜æ€è·¯ï¼šé€’å½’æ³• è€ƒè™‘åˆ°çš„æç«¯æƒ…å†µ ab &lt;â€“&gt; ab ab &lt;â€“&gt; .* ab* çš„æ—¶å€™ï¼Œb é›¶æ¬¡çš„ä¿¡æ¯å¾ˆå®¹æ˜“æ¼æ‰ ç»ˆæ­¢æ¡ä»¶ï¼š if not p: return not a åˆ¤æ–­ç›¸ç­‰é€»è¾‘ï¼š p[0] in {s[i], &#39;.&#39;} 1234567891011121314class Solution: def isMatch(self, s: str, p: str) -&gt; bool: if not p: return not s # ab &lt;--&gt; a* å¸¦æ˜Ÿå·çš„ä¸€å®šè¦å…ˆå¤„ç†ï¼Œä¸ç„¶åœ¨ s='' p='*b'çš„æ—¶å€™ä¼šå‡ºé”™ if len(p) &gt; 1 and p[1] == '*': if self.isMatch(s, p[2:]): return True # é›¶æ¬¡æƒ…å†µè€ƒè™‘åˆ° i = 0 while i &lt; len(s) and p[0] in &#123;s[i], '.'&#125;: # aaab a*b if self.isMatch(s[i+1:], p[2:]): return True i += 1 if p and s and p[0] in &#123;s[0], '.'&#125;: # ab &lt;--&gt; ab return self.isMatch(s[1:], p[1:]) else: return False äºæ­¤ï¼Œæˆ‘ä»¬åˆå‘ç°å¯ä»¥æ”¹è¿›çš„åœ°æ–¹ 12while i &lt; len(s) and p[0] in &#123;s[i], '.'&#125;: # aaab a*b if self.isMatch(s[i+1:], p[2:]): return True å¯ä»¥åˆ—ä¸€å¼ è¡¨ï¼Œçœ‹åˆ°è¿™é‡Œçš„ while å¾ªç¯æ˜¯ä¸å¿…è¦çš„ï¼Œå› ä¸ºé€’å½’ç¨‹åºä¼šå¸®æˆ‘ä»¬ä¸€æ¬¡æ¬¡æœ€ç»ˆèµ°åˆ° * ä¸‰æ¬¡ çš„æƒ…å†µï¼Œä¸éœ€è¦æˆ‘ä»¬è‡ªå·±æ˜¾å¼çš„å»å†™å‡ºï¼Œè€Œä¸”å°±ç®—å†™å‡ºäº†ï¼Œç¨‹åºä¹Ÿèµ°ä¸åˆ°ã€‚ s p value åŸå§‹ aaab a*b True * é›¶æ¬¡ aaab b False * ä¸€æ¬¡ aab b Falseâ€“&gt; * äºŒæ¬¡ * äºŒæ¬¡ ab b Falseâ€“&gt;* ä¸‰æ¬¡ * ä¸‰æ¬¡ b b True æ”¹è¿›çš„ä»£ç  1234567891011class Solution: def isMatch(self, s: str, p: str) -&gt; bool: if not p: return not s # ab &lt;--&gt; a* å¸¦æ˜Ÿå·çš„ä¸€å®šè¦å…ˆå¤„ç†ï¼Œä¸ç„¶åœ¨ s='' p='*b'çš„æ—¶å€™ä¼šå‡ºé”™ if len(p) &gt; 1 and p[1] == '*': if self.isMatch(s, p[2:]): return True # é›¶æ¬¡æƒ…å†µè€ƒè™‘åˆ° if p and s and p[0] in &#123;s[0], '.'&#125; and self.isMatch(s[1:], p): return True if p and s and p[0] in &#123;s[0], '.'&#125;: # ab &lt;--&gt; ab return self.isMatch(s[1:], p[1:]) else: return False Graceful Answerã€é€’å½’æ³•ã€‘ã€å¤§ç¥ä»£ç ã€‘1234567891011121314# ä½œè€…ï¼šz1m# é“¾æ¥ï¼šhttps://leetcode-cn.com/problems/zheng-ze-biao-da-shi-pi-pei-lcof/solution/hui-su-dong-tai-gui-hua-by-ml-zimingmeng/class Solution: def isMatch(self, s: str, p: str) -&gt; bool: if not p: return not s # ç¬¬ä¸€ä¸ªå­—æ¯æ˜¯å¦åŒ¹é… first_match = bool(s and p[0] in &#123;s[0],'.'&#125;) # å¦‚æœ p ç¬¬äºŒä¸ªå­—æ¯æ˜¯ * if len(p) &gt;= 2 and p[1] == \"*\": return self.isMatch(s, p[2:]) or \\ first_match and self.isMatch(s[1:], p) else: return first_match and self.isMatch(s[1:], p[1:]) Graceful Answer ã€å€’æŸ¥é€’å½’ã€‘ã€å¤§ç¥ä»£ç ã€‘1234567891011121314151617181920def isMatch(self, s: str, p: str) -&gt; bool: \"\"\" å€’æŸ¥é€’å½’ï¼Œæ€è·¯å‚è€ƒ https://leetcode-cn.com/problems/zheng-ze-biao-da-shi-pi-pei-lcof/solution/zhu-xing-xiang-xi-jiang-jie-you-qian-ru-shen-by-je/ 1. æ­£åˆ™ä¸²æ˜¯ æ­£å¸¸å­—ç¬¦ä¸²åŒ¹é…/. s[:n-2] p[:m-2] 2. æ­£åˆ™ä¸²å¸¦ * a. å…ˆç›´æ¥å»é™¤ c* s,p[:m-2] b. å¦‚æœåŒ¹é…*å‰çš„å­—ç¬¦ä¸²ï¼Œ s[:n-1] p 3ã€ æ­£å¸¸å­—ç¬¦ä¸² ä¸åŒ¹é… ç›´æ¥è¿”å›False \"\"\" if not p : return not s if s and p[-1] in &#123;s[-1], '.'&#125;: return self.isMatch(s[:-1], p[:-1]) if p[-1] == '*': return self.isMatch(s, p[:-2]) or \\ bool(s and p[-2] in &#123;s[-1], '.'&#125; and self.isMatch(s[:-1], p)) else: return False Graceful Answer ã€åŠ¨æ€è§„åˆ’ã€‘ 123456789101112131415161718192021222324252627282930313233# ä½œè€…ï¼šz1m# é“¾æ¥ï¼šhttps://leetcode-cn.com/problems/zheng-ze-biao-da-shi-pi-pei-lcof/solution/hui-su-dong-tai-gui-hua-by-ml-zimingmeng/class Solution: def isMatch(self, s: str, p: str) -&gt; bool: # è¾¹ç•Œæ¡ä»¶ï¼Œè€ƒè™‘ s æˆ– p åˆ†åˆ«ä¸ºç©ºçš„æƒ…å†µ if not p: return not s if not s and len(p) == 1: return False m, n = len(s) + 1, len(p) + 1 dp = [[False for _ in range(n)] for _ in range(m)] # åˆå§‹çŠ¶æ€ dp[0][0] = True dp[0][1] = False for c in range(2, n): j = c - 1 if p[j] == '*': dp[0][c] = dp[0][c - 2] for r in range(1,m): i = r - 1 for c in range(1, n): j = c - 1 if s[i] == p[j] or p[j] == '.': dp[r][c] = dp[r - 1][c - 1] elif p[j] == '*': # â€˜*â€™å‰é¢çš„å­—ç¬¦åŒ¹é…s[i] æˆ–è€…ä¸º'.' if p[j - 1] == s[i] or p[j - 1] == '.': dp[r][c] = dp[r - 1][c] or dp[r][c - 2] else: # â€˜*â€™åŒ¹é…äº†0æ¬¡å‰é¢çš„å­—ç¬¦ dp[r][c] = dp[r][c - 2] else: dp[r][c] = False return dp[m - 1][n - 1] é¢è¯•é¢˜21. è°ƒæ•´æ•°ç»„é¡ºåºä½¿å¥‡æ•°ä½äºå¶æ•°å‰é¢Best Answerã€å¿«æ’æ€è·¯ã€‘ã€é¦–å°¾åŒæŒ‡é’ˆã€‘ è§£é¢˜æ€è·¯ï¼š å¿«æ’æ€æƒ³ ä¸»è¦å˜åŠ¨çš„æ˜¯åœ¨åˆ¤æ–­çš„ä¾æ®ä¸Š æ—¶é—´å¤æ‚åº¦ $O(n)$ ç©ºé—´å¤æ‚åº¦ $O(1)$ 12345678910111213141516class Solution: def exchange(self, nums: List[int]) -&gt; List[int]: if not nums: return [] left = 0 right = len(nums) - 1 temp = nums[left] while left &lt; right: while left &lt; right and nums[right] % 2 == 0: right -= 1 nums[left] = nums[right] while left &lt; right and nums[left] % 2 == 1: left += 1 nums[right] = nums[left] nums[right] = temp return nums æ›´åŠ ç®€å•ä¸€ç‚¹çš„å†™æ³• 1234567891011# ä½œè€…ï¼šjyd# é“¾æ¥ï¼šhttps://leetcode-cn.com/problems/diao-zheng-shu-zu-shun-xu-shi-qi-shu-wei-yu-ou-shu-qian-mian-lcof/solution/mian-shi-ti-21-diao-zheng-shu-zu-shun-xu-shi-qi-4/class Solution: def exchange(self, nums: List[int]) -&gt; List[int]: i, j = 0, len(nums) - 1 while i &lt; j: while i &lt; j and nums[i] &amp; 1 == 1: i += 1 while i &lt; j and nums[j] &amp; 1 == 0: j -= 1 nums[i], nums[j] = nums[j], nums[i] return nums Best Answer ã€é¦–ç«¯å¿«æ…¢æŒ‡é’ˆã€‘12345678910class Solution: def exchange(self, nums: List[int]) -&gt; List[int]: # é¦–ç«¯å¿«æ…¢æŒ‡é’ˆ i, j, size = -1, -1, len(nums) while i &lt; size - 1: i += 1 if nums[i] &amp; 1 == 1: # æ‰¾åˆ°å¥‡æ•° j += 1 nums[i], nums[j] = nums[j], nums[i] return nums Simple Answer ã€è¾…åŠ©æ•°ç»„ã€‘ æ—¶é—´å¤æ‚åº¦ $O(n)$ ç©ºé—´å¤æ‚åº¦ $O(n)$ 1234567class Solution: def exchange(self, nums: List[int]) -&gt; List[int]: num1, num2 = [], [] for n in nums: if n &amp; 1: num1.append(n) else: num2.append(n) return num1 + num2 é¢è¯•é¢˜22. é“¾è¡¨ä¸­å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹Simple Answerã€è¾…åŠ©æ•°ç»„ã€‘ æ—¶é—´å¤æ‚åº¦ $O(n)$ ç©ºé—´å¤æ‚åº¦ $O(n)$ 1234567class Solution: def getKthFromEnd(self, head: ListNode, k: int) -&gt; ListNode: arr = [] while head: arr.append(head) head = head.next return arr[-1*k] Best Answer ã€åŒæŒ‡é’ˆã€‘ è§£é¢˜æ€è·¯ï¼š åŒæŒ‡ ï¼Œä¸¤æ­¥èµ° 12345678910class Solution: def getKthFromEnd(self, head: ListNode, k: int) -&gt; ListNode: h1, h2 = head, head for _ in range(k): # h1 å…ˆèµ° k æ­¥ h1 = h1.next while h1: # h1 èµ°å®Œ h1 = h1.next h2 = h2.next # æ­¤æ—¶ h2 èµ°äº† n-k æ­¥ï¼Œå³å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹ return h2 é¢è¯•é¢˜24. åè½¬é“¾è¡¨My Answer 1 ã€åŒæŒ‡é’ˆå¤´å°¾äº¤æ¢ã€‘ å›¾å‚è€ƒï¼šã€åè½¬é“¾è¡¨ã€‘ï¼šåŒæŒ‡é’ˆï¼Œé€’å½’ï¼Œå¦–é­”åŒ–çš„åŒæŒ‡é’ˆ 12345678910def reverseList(self, head: ListNode) -&gt; ListNode: \"\"\" åŒæŒ‡é’ˆ\"\"\" pre, cur = None, head while cur: cur_next_bak = cur.next # å› ä¸ºcur.next é©¬ä¸Šè¦æŒ‡å‘å‰èŠ‚ç‚¹ï¼Œè¿™é‡Œåšä¸ªå¤‡ä»½ cur.next = pre pre = cur cur = cur_next_bak return pre My Answer 2ã€é€’å½’ã€‘ã€ç†è§£æœ‰ç‚¹éš¾åº¦ã€‘ åŠ¨å›¾æ¥è‡ªï¼šåŠ¨ç”»æ¼”ç¤º+å¤šç§è§£æ³• é¢è¯•é¢˜24. åè½¬é“¾è¡¨ 12345678910class Solution: def reverseList(self, head: ListNode) -&gt; ListNode: if not head or not head.next: return head cur = self.reverseList(head.next) head.next.next = head head.next = None return cur My Answer 3ã€è¾…åŠ©ç©ºé—´ã€‘12345678910class Solution: def reverseList(self, head: ListNode) -&gt; ListNode: ret = None while head: node = ListNode(head.val) node.next = ret ret = node head = head.next return ret é¢è¯•é¢˜25. åˆå¹¶ä¸¤ä¸ªæ’åºçš„é“¾è¡¨ã€ç»å…¸ã€‘Best Answer å¼•å…¥ä¸€ä¸ªå¤´èŠ‚ç‚¹ 12345678910111213141516class Solution: def mergeTwoLists(self, l1: ListNode, l2: ListNode) -&gt; ListNode: sortedList = ListNode(None) # ä¼ªèŠ‚ç‚¹ head = sortedList while l1 and l2: if l2.val &gt; l1.val: node = ListNode(l1.val) sortedList.next = node l1 = l1.next else: node = ListNode(l2.val) sortedList.next = node l2 = l2.next sortedList = sortedList.next sortedList.next = l1 if l1 else l2 # å‰ªæ return head.next é¢è¯•é¢˜26. æ ‘çš„å­ç»“æ„Best Answer ã€é€’å½’ã€‘ è§£é¢˜æŠ€å·§ åœ¨ return ä¸­ï¼ŒåŠ å…¥bool(A and B) æ¥ä»£æ›¿ if not A and not B: return False ï¼Œæ˜¾å¾—æ›´åŠ ç®€æ´ 12345678class Solution: def isSubStructure(self, A: TreeNode, B: TreeNode) -&gt; bool: def recur(A, B): if not B: return True if not A and A.val != B.val: return False # å¤´ç»“ç‚¹åŒ¹é…æˆåŠŸ return recur(A.left, B.left) and recur(A.right, B.right) return bool(A and B) and # ç©ºæ ‘ä¸æ˜¯ä»»æ„ä¸€ä¸ªæ ‘çš„å­èŠ‚ç‚¹\\ (recur(A, B) or recur(A.left, B) or recur(A.right, B)) é¢è¯•é¢˜27. äºŒå‰æ ‘çš„é•œåƒBest Answerã€é€’å½’ã€‘1234567class Solution: def mirrorTree(self, root: TreeNode) -&gt; TreeNode: if not root: return True root.left, root.right = root.right, root.left self.mirrorTree(root.left) self.mirrorTree(root.right) return root é¢è¯•é¢˜28. å¯¹ç§°çš„äºŒå‰æ ‘Best Answer ã€é€’å½’ã€‘1234567891011class Solution: def isSymmetric(self, root: TreeNode) -&gt; bool: def compareTree(treeA, treeB): if not treeA and not treeB: return True if not treeA or not treeB: return False if treeA.val != treeB.val: return False return compareTree(treeA.left, treeB.right) and \\ compareTree(treeA.right, treeB.left) if not root: return True return compareTree(root.left, root.right) é¢è¯•é¢˜29. é¡ºæ—¶é’ˆæ‰“å°çŸ©é˜µMy Answer ã€å¯»æ‰¾è§„å¾‹ã€‘ è§£é¢˜æ€è·¯ï¼š å¯ä»¥é€šè¿‡è§‚å¯Ÿï¼Œå‘ç°æ¯æ¬¡ æ¨ªå‘ç§»åŠ¨çš„æ—¶å€™ï¼Œç§»åŠ¨çš„é•¿åº¦ä¼šå‡ä¸€ã€‚çºµå‘ç§»åŠ¨åŒæ ·å¦‚æ­¤ã€‚ å¦‚ä¸€ä¸ª $3 \\times 3$ çš„çŸ©é˜µï¼Œè§„å¾‹ä¸ºï¼šå‘å³ç§»åŠ¨3æ¬¡ï¼Œå‘ä¸‹ç§»åŠ¨2æ¬¡ï¼Œå‘å·¦ç§»åŠ¨2æ¬¡ï¼Œå‘ä¸Šç§»åŠ¨1æ¬¡ï¼Œå‘å³ç§»åŠ¨1æ¬¡ã€‚ æˆ‘ä»¬ç»™æ¨ªå‘ç§»åŠ¨è®¾ç½®åˆå§‹å€¼å€¼ 3ï¼Œçºµå‘ç§»åŠ¨ 2ã€‚æ¯æ¬¡ç§»åŠ¨å®Œäº†å°±å‡ä¸€ã€‚ è¿™é‡Œéœ€è¦è€ƒè™‘ç»ˆæ­¢æ¡ä»¶çš„ä½ç½®ï¼šä¸€å®šæ˜¯åœ¨ç§»åŠ¨ä¹‹å‰æ£€æŸ¥æœ¬æ–¹å‘æ˜¯å¦å·²ç»ˆæ­¢ 1234567891011121314151617181920212223242526class Solution: def spiralOrder(self, matrix: List[List[int]]) -&gt; List[int]: if not matrix: return [] xlen, ylen = len(matrix[0]), len(matrix) - 1 x, y = -1, 0 direction = [(1, 0), (0, 1), (-1, 0), (0, -1)] # å³ä¸‹å·¦ä¸Š dflag = 0 ret = [] while True: if not xlen: break # åœ¨æ¨ªå‘ç§»åŠ¨ä¹‹å‰ï¼Œæ£€æŸ¥èƒ½å¦ç§»åŠ¨ï¼Œä¸èƒ½çš„è¯ä¸€å®šæ˜¯ä»£è¡¨ç»“æŸ for _ in range(xlen): # æ¨ªå‘æ‰“å° x = x + direction[dflag][0] y = y + direction[dflag][1] ret.append(matrix[y][x]) xlen -= 1 dflag = (dflag + 1) % 4 if not ylen: break # åœ¨çºµå‘å‘ç§»åŠ¨ä¹‹å‰ï¼Œæ£€æŸ¥èƒ½å¦ç§»åŠ¨ï¼Œä¸èƒ½çš„è¯ä¸€å®šæ˜¯ä»£è¡¨ç»“æŸ for _ in range(ylen): # æ¨ªå‘æ‰“å° x = x + direction[dflag][0] y = y + direction[dflag][1] ret.append(matrix[y][x]) ylen -= 1 dflag = (dflag + 1) % 4 return ret é¢è¯•é¢˜30. åŒ…å«minå‡½æ•°çš„æ ˆã€æ€è·¯ç»å…¸ã€‘Best Answer è§£é¢˜æ€è·¯ï¼šè¾…åŠ©æ ˆ 123456789101112131415161718class MinStack: def __init__(self): self.A, self.B = [], [] def push(self, x: int) -&gt; None: self.A.append(x) if not self.B or self.B[-1] &gt;= x: self.B.append(x) def pop(self) -&gt; None: if self.A.pop() == self.B[-1]: self.B.pop() def top(self) -&gt; int: return self.A[-1] def min(self) -&gt; int: return self.B[-1] é¢è¯•é¢˜31. æ ˆçš„å‹å…¥ã€å¼¹å‡ºåºåˆ—Best Answer ã€æ¨¡æ‹Ÿæ³•ã€‘ è§£é¢˜æ€è·¯ï¼šç”±äºé¢˜ç›®ä¸­å‡å®šäº†ä¸¤ä¸ªé˜Ÿåˆ—é•¿åº¦ç›¸ç­‰ï¼Œæ ˆå†…å…ƒç´ ä¸åŒã€‚è¿™ä¸€å‡è®¾å¤§å¤§ç®€åŒ–äº†é—®é¢˜çš„å¤æ‚ç¨‹åº¦ 12345678910class Solution: def validateStackSequences(self, pushed: List[int], popped: List[int]) -&gt; bool: tempList = [] for each in pushed: tempList.append(each) while tempList and tempList[-1] == popped[0]: tempList.pop() popped = popped[1:] return True if not popped else False é¢è¯•é¢˜32 - I. ä»ä¸Šåˆ°ä¸‹æ‰“å°äºŒå‰æ ‘Best Answerã€ç»å…¸ç®—æ³•ã€‘ã€äºŒå‰æ ‘çš„å±‚æ¬¡éå†ã€‘12345678910111213141516171819202122232425262728class Solution: def levelOrder(self, root: TreeNode) -&gt; List[int]: if not root : return [] res = [] queue = [root] while queue: node, queue = queue[0], queue[1:] res.append(node.val) if node.left: queue.append(node.left) if node.right: queue.append(node.right) return res # åˆ©ç”¨ collection.deque å®ç°é˜Ÿåˆ—class Solution: def levelOrder(self, root: TreeNode) -&gt; List[int]: if not root : return [] res, queue = [], collections.deque() queue.append(root) while queue: node = queue.popleft() res.append(node.val) if node.left: queue.append(node.left) if node.right: queue.append(node.right) return res é¢è¯•é¢˜32 - II. ä»ä¸Šåˆ°ä¸‹æ‰“å°äºŒå‰æ ‘ IIBest Answer ã€å±‚æ¬¡éå†å‡çº§ã€‘ è§£é¢˜æ€è·¯ï¼š æ ¸å¿ƒè§£å†³çš„å°±æ˜¯å±‚ä¸å±‚çš„åŒºåˆ† é€šè¿‡æ ‡è®°å±‚å·è§£å†³ é€šè¿‡queueçš„é•¿åº¦æ¥åŒºåˆ†å±‚ ã€æ ‡è®°å±‚å·ã€‘ 123456789101112class Solution: def levelOrder(self, root: TreeNode) -&gt; List[List[int]]: if not root: return [] res, queue = [], collections.deque() queue.append((root, 0)) while queue: node, level = queue.popleft() if level &gt; len(res) - 1: res.append([]) res[level].append(node.val) if node.left: queue.append((node.left, level + 1)) if node.right: queue.append((node.right, level + 1)) return res ã€æ ¹æ®queueé•¿åº¦ã€‘ 1234567891011121314class Solution: def levelOrder(self, root: TreeNode) -&gt; List[List[int]]: if not root: return [] res, queue = [], collections.deque() queue.append(root) while queue: _res = [] for _ in range(len(queue)): node = queue.popleft() _res.append(node.val) if node.left: queue.append(node.left) if node.right: queue.append(node.right) res.append(_res) return res é¢è¯•é¢˜32 - III. ä»ä¸Šåˆ°ä¸‹æ‰“å°äºŒå‰æ ‘ III å‚è€ƒï¼šé¢è¯•é¢˜32 - III. ä»ä¸Šåˆ°ä¸‹æ‰“å°äºŒå‰æ ‘ IIIï¼ˆå±‚åºéå† BFS / åŒç«¯é˜Ÿåˆ—ï¼Œæ¸…æ™°å›¾è§£ï¼‰ Best Answer è§£é¢˜æ€è·¯ï¼š å±‚æ¬¡éå† + åŒç«¯é˜Ÿåˆ— åœ¨å¥‡å¶å±‚èŠ‚ç‚¹åŠ å…¥ä¸Šï¼Œå¥‡æ•°å±‚ä»å·¦ç«¯åŠ å…¥ï¼Œå¶æ•°å±‚åœ¨å³ç«¯åŠ å…¥ 12temp.appendleft()temp.append() 12345678910111213141516class Solution: def levelOrder(self, root: TreeNode) -&gt; List[List[int]]: if not root: return [] queue = collections.deque() queue.append(root) res = [] while queue: temp = collections.deque() for _ in range(len(queue)): node = queue.popleft() if len(res) &amp; 1 == 0: temp.append(node.val) else: temp.appendleft(node.val) if node.left: queue.append(node.left) if node.right: queue.append(node.right) res.append(list(temp)) return res å±‚æ¬¡éå† + å¥‡å¶é€»è¾‘åˆ†å¼€ ï¼ˆç•¥ï¼‰ åœ¨å‡ºé˜Ÿçš„æ—¶å€™ï¼Œå¥‡æ•°å±‚ä»å·¦ç«¯å‡ºé˜Ÿï¼Œå¶æ•°å±‚ä»å³ç«¯å‡ºé˜Ÿ 12queue.popleft()queue.pop() ä»…å¯¹ é¢è¯•é¢˜32-II çš„é¡ºåºè¿›è¡Œè°ƒæ•´ ï¼ˆç•¥ï¼‰ é¢è¯•é¢˜33. äºŒå‰æœç´¢æ ‘çš„ååºéå†åºåˆ— é¢è¯•é¢˜33. äºŒå‰æœç´¢æ ‘çš„ååºéå†åºåˆ—ï¼ˆé€’å½’åˆ†æ²» / å•è°ƒæ ˆï¼Œæ¸…æ™°å›¾è§£ï¼‰ Best Answer è§£é¢˜æ€è·¯ï¼šé€’å½’åˆ†æ²» åˆ¤æ–­å½“å‰æ ¹æ˜¯å¦å­˜åœ¨é”™è¯¯ ï¼Œå³ æ˜¯å¦ç¬¦åˆ å·¦ &lt; æ ¹ &lt; å³ self.verifyPostorder(postorder[: m]) åˆ¤æ–­å·¦å­æ ‘æ˜¯å¦æ­£ç¡® self.verifyPostorder(postorder[m : -1]) åˆ¤æ–­å³å­æ ‘æ˜¯å¦æ­£ç¡® 12345678910111213class Solution: def verifyPostorder(self, postorder: List[int]) -&gt; bool: if not postorder: return True # åˆ¤æ–­æ˜¯å¦ç¬¦åˆ å·¦&lt;æ ¹&lt;å³ root = postorder[-1] for i in range(len(postorder)): if postorder[i] &gt; root: break m = i # m ä¸ºå³å­æ ‘çš„ç¬¬ä¸€ä¸ªå…ƒç´  for i in range(m, len(postorder) - 1): if postorder[i] &lt; root: return False # å³å­æ ‘å‡ºç°äº†æ¯”æ ¹èŠ‚ç‚¹å°çš„èŠ‚ç‚¹ã€‚ return self.verifyPostorder(postorder[: m]) and \\ self.verifyPostorder(postorder[m : -1]) å‰‘æŒ‡ Offer 34. äºŒå‰æ ‘ä¸­å’Œä¸ºæŸä¸€å€¼çš„è·¯å¾„å¾…æ•´ç† å‰‘æŒ‡ Offer 35. å¤æ‚é“¾è¡¨çš„å¤åˆ¶å¾…æ•´ç† é¢è¯•é¢˜36. äºŒå‰æœç´¢æ ‘ä¸åŒå‘é“¾è¡¨ã€å›°éš¾ã€‘My Answer ã€ä¸­åºéå†ã€‘ã€è¾…åŠ©é˜Ÿåˆ—ã€‘ è§£é¢˜æ€è·¯ï¼šä¸­åºéå† + è¾…åŠ©é˜Ÿåˆ— 12345678910111213141516171819class Solution: def treeToDoublyList(self, root: 'Node') -&gt; 'Node': def dfs(cur): # ä¸­åºéå† if not cur: return [] dfs(cur.left) # å·¦ res.append(cur) # ä¸­ dfs(cur.right) # å³ if not root: return None res = [] dfs(root) # æ ¹æ® é˜Ÿåˆ—ï¼Œå‰åé“¾æ¥é“¾è¡¨ for i in range(0, len(res) - 1): res[i].right = res[i + 1] res[i+1].left = res[i] # å¤´å°¾ç‰¹æ®Šå¤„ç† res[0].left = res[-1] res[-1].right = res[0] return res[0] Best Answer ã€ä¸­åºéå†ã€‘ã€åŒæŒ‡é’ˆæ”¹è¿›ã€‘ è§£é¢˜æ€è·¯ ä¸Šè¿°æ–¹æ³•è™½ç„¶ç®€å•ï¼Œä½†æ˜¯å€ŸåŠ©äº† è¾…åŠ©é˜Ÿåˆ— ï¼Œå¯ä»¥åˆ©ç”¨åŒæŒ‡é’ˆæ”¹è¿› 1234567891011121314151617class Solution: def treeToDoublyList(self, root: 'Node') -&gt; 'Node': def dfs(cur): if not cur: return None dfs(cur.left) if self.pre: self.pre.right, cur.left = cur, self.pre else: self.head = cur # æ­¤æ—¶è®°å½•çš„æ˜¯å¤´ç»“ç‚¹ self.pre = cur # æœ€åéå†çš„æ˜¯å°¾ç»“ç‚¹ dfs(cur.right) if not root: return None self.pre = None dfs(root) self.head.left, self.pre.right = self.pre, self.head return self.head é¢è¯•é¢˜37. åºåˆ—åŒ–äºŒå‰æ ‘ã€å›°éš¾ã€‘Best Answer è§£é¢˜æ€è·¯ï¼šå±‚æ¬¡éå† æˆ‘ä»¬å¯ä»¥æ ¹æ® level å±‚çº§ï¼Œé™åˆ¶æœ€åç”Ÿæˆ é˜Ÿåˆ— çš„é•¿åº¦ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657import collectionsclass TreeNode(object): def __init__(self, x): self.val = x self.left = None self.right = Noneclass Codec: def serialize(self, root): \"\"\"Encodes a tree to a single string. :type root: TreeNode :rtype: str \"\"\" if not root: return \"[]\" res, queue = [], collections.deque() queue.append(root) level = 0 while queue: for _ in range(len(queue)): node = queue.popleft() if node: res.append(node.val) queue.append(node.left) queue.append(node.right) else: res.append(\"null\") level += 1 level -= 1 # å‡ä¸€åçš„levelæ˜¯çœŸå®çš„ å±‚æ•° res = res[:2**level - 1] return \"[\" + \",\".join([str(_) for _ in res]) + \"]\" def deserialize(self, data): \"\"\"Decodes your encoded data to tree. :type data: str :rtype: TreeNode \"\"\" if data == \"[]\": return None vals, i = data[1:-1].split(','), 1 root = TreeNode(int(vals[0])) queue = collections.deque() queue.append(root) while queue and i &lt; len(vals): node = queue.popleft() if vals[i] != \"null\": node.left = TreeNode(int(vals[i])) queue.append(node.left) i += 1 if vals[i] != \"null\": node.right = TreeNode(int(vals[i])) queue.append(node.right) i += 1 return root é¢è¯•é¢˜38. å­—ç¬¦ä¸²çš„æ’åˆ—ã€å…¨æ’åˆ—ã€‘Best Answer è§£é¢˜æ€è·¯ï¼šå›æº¯ + äº¤æ¢ 12345678910111213141516171819# ä½œè€…ï¼šjyd# é“¾æ¥ï¼šhttps://leetcode-cn.com/problems/zi-fu-chuan-de-pai-lie-lcof/solution/mian-shi-ti-38-zi-fu-chuan-de-pai-lie-hui-su-fa-by/class Solution: def permutation(self, s: str) -&gt; List[str]: c, res = list(s), [] def dfs(x): if x == len(c) - 1: res.append(''.join(c)) # æ·»åŠ æ’åˆ—æ–¹æ¡ˆ return dic = set() for i in range(x, len(c)): if c[i] in dic: continue # é‡å¤ï¼Œå› æ­¤å‰ªæ dic.add(c[i]) c[i], c[x] = c[x], c[i] # äº¤æ¢ï¼Œå°† c[i] å›ºå®šåœ¨ç¬¬ x ä½ dfs(x + 1) # å¼€å¯å›ºå®šç¬¬ x + 1 ä½å­—ç¬¦ c[i], c[x] = c[x], c[i] # æ¢å¤äº¤æ¢ dfs(0) return res My Answer è§£é¢˜æ€è·¯ï¼š å›æº¯ + è¾…åŠ©ç«™ æ¯ä¸€ä½ä¸Šåªèƒ½ä½¿ç”¨ä¸€æ¬¡ï¼Œæ•…ç”¨ visited çŸ©é˜µ è®°å½•çš„ä½ç½® 123456789101112131415class Solution: def permutation(self, s: str): def recur(st): if len(st) == len(s): res.append(st) return for i in range(len(s)): if i not in visited: visited.append(i) recur(st + s[i]) visited.remove(i) visited, res = [], [] recur(\"\") return list(set(res)) é¢è¯•é¢˜39. æ•°ç»„ä¸­å‡ºç°æ¬¡æ•°è¶…è¿‡ä¸€åŠçš„æ•°å­— å‚è€ƒï¼šhttps://leetcode-cn.com/problems/shu-zu-zhong-chu-xian-ci-shu-chao-guo-yi-ban-de-shu-zi-lcof/solution/mian-shi-ti-39-shu-zu-zhong-chu-xian-ci-shu-chao-3/ è§£é¢˜æ€è·¯ï¼š å“ˆå¸Œè¡¨ç»Ÿè®¡æ³•ï¼š éå†æ•°ç»„ nums ï¼Œç”¨ HashMap ç»Ÿè®¡å„æ•°å­—çš„æ•°é‡ï¼Œæœ€ç»ˆè¶…è¿‡æ•°ç»„é•¿åº¦ä¸€åŠçš„æ•°å­—åˆ™ä¸ºä¼—æ•°ã€‚æ­¤æ–¹æ³•æ—¶é—´å’Œç©ºé—´å¤æ‚åº¦å‡ä¸º $O(N)$ ã€‚ æ•°ç»„æ’åºæ³•ï¼š å°†æ•°ç»„ nums æ’åºï¼Œç”±äºä¼—æ•°çš„æ•°é‡è¶…è¿‡æ•°ç»„é•¿åº¦ä¸€åŠï¼Œå› æ­¤ æ•°ç»„ä¸­ç‚¹çš„å…ƒç´  ä¸€å®šä¸ºä¼—æ•°ã€‚æ­¤æ–¹æ³•æ—¶é—´å¤æ‚åº¦ $O(N log_2 N)$ æ‘©å°”æŠ•ç¥¨æ³•ï¼š æ ¸å¿ƒç†å¿µä¸º â€œæ­£è´ŸæŠµæ¶ˆâ€ ï¼›æ—¶é—´å’Œç©ºé—´å¤æ‚åº¦åˆ†åˆ«ä¸º $O(N)$ å’Œ $O(1)$ï¼›æ˜¯æœ¬é¢˜çš„æœ€ä½³è§£æ³•ã€‚ Best Answer ã€æ‘©å°”æŠ•ç¥¨æ³•ã€‘12345678910class Solution: def majorityElement(self, nums: List[int]) -&gt; int: votes, count = 0, 0 for num in nums: if votes == 0: x = num votes += 1 if num == x else -1 # éªŒè¯ x æ˜¯å¦ä¸ºä¼—æ•° for num in nums: if num == x: count += 1 return x if count &gt; len(nums) // 2 else 0 # å½“æ— ä¼—æ•°æ—¶è¿”å› 0 é¢è¯•é¢˜40. æœ€å°çš„kä¸ªæ•° è§£é¢˜æ€è·¯ï¼š å¿«æ’ + ç­›é€‰ æ—¶é—´å¤æ‚åº¦: $O(N log_2 N)$ï¼Œ ç©ºé—´å¤æ‚åº¦ $O(1)$ å †æ’ æ—¶é—´å¤åˆ¶åº¦ï¼š$O(Nlog_2k)$ ï¼Œç©ºé—´å¤æ‚åº¦ $O(N)$ My Answer1ã€å¿«æ’ã€‘ å¿«æ’ + ç­›é€‰ 123456789101112131415161718# å¿«æ’ + ç­›é€‰class Solution: def getLeastNumbers(self, arr: List[int], k: int) -&gt; List[int]: def quicksort(nums, start, end): if start &gt;= end: return pivot = nums[start] low, high = start, end while low &lt; high: while low &lt; high and nums[high] &gt;= pivot: high -= 1 nums[low] = nums[high] while low &lt; high and nums[low] &lt; pivot: low += 1 nums[high] = nums[low] nums[low] = pivot quicksort(nums, start, low - 1) quicksort(nums, low + 1, end) quicksort(arr, 0, len(arr) - 1) return arr[:k] # ç­›é€‰ ä¸Šé¢çš„æ–¹æ³•æ²¡æœ‰åˆ©ç”¨åˆ° å¿«æ’ çš„æ€§è´¨ï¼Œç”±äºæ¯æ¬¡æ’å®Œä¹‹åï¼Œå­˜åœ¨ å·¦ &lt; ä¸­ &lt; å³ ä¸­ == k - 1 æˆ‘ä»¬å·²ç»è·å¾—äº†å‰Kä¸ªå…ƒç´ ï¼Œä½†æ˜¯ä¹Ÿæ²¡æœ‰æ’åº ä¸­ &gt; k - 1 åªéœ€è¦åœ¨å·¦è¾¹æ‰¾ ä¸­ &lt; k - 1 åªéœ€è¦åœ¨å³è¾¹æ‰¾ åˆ©ç”¨å¿«æ’ æ€§è´¨ 123456789101112131415161718class Solution: def getLeastNumbers(self, arr: List[int], k: int) -&gt; List[int]: def quicksort(nums, start, end): if start &gt;= end: return pivot = nums[start] low, high = start, end while low &lt; high: while low &lt; high and nums[high] &gt;= pivot: high -= 1 nums[low] = nums[high] while low &lt; high and nums[low] &lt; pivot: low += 1 nums[high] = nums[low] nums[low] = pivot if low == k - 1: return arr[:k] elif low &lt; k - 1: quicksort(nums, low + 1, end) else: quicksort(nums, start, low - 1) My Answer2 ã€å †æ’ã€‘1234567891011121314151617181920212223242526272829class Solution: def getLeastNumbers(self, arr: List[int], k: int) -&gt; List[int]: def adjust_heap(nums, i, size): lchild = 2 * i + 1 rchild = 2 * i + 2 max = i if i &lt; size / 2: if lchild &lt; size and nums[lchild] &gt; nums[max]: max = lchild if rchild &lt; size and nums[rchild] &gt; nums[max]: max = rchild if max != i: nums[max], nums[i] = nums[i], nums[max] adjust_heap(nums, max, size) def build_heap(nums): size = len(nums) for i in range(0, size &gt;&gt; 1)[::-1]: adjust_heap(nums, i, size) if not arr: return [] arr = [-1 * _ for _ in arr] build_heap(arr) size = len(arr) for i in range(len(arr) - 1, len(arr) - 1 - k, -1): # print(arr) arr[0], arr[i] = arr[i], arr[0] adjust_heap(arr, 0, i) arr = [-1 * _ for _ in arr][::-1] return arr[:k] å †æ’å¯ä»¥ç›´æ¥ä½¿ç”¨ python è‡ªå¸¦çš„ å †ç»“æ„ 1234567import heapqfrom random import shuffleclass Solution: def getLeastNumbers(self, arr, k: int) : shuffle(arr) # éšæœºæ’åº heapq.heapify(arr) # å»ºç«‹å †ç»“æ„ return heapq.nsmallest(k, arr) heapq æ¨¡å—çš„ä½¿ç”¨ 12345678910111213141516heapq.heappush(heap, item) # æ·»åŠ å…ƒç´ heapq.heappop(heap) # å¼¹å‡ºå…ƒç´ heapq.heappushpop(heap, item) #æ·»åŠ å…ƒç´ åï¼Œå†å¼¹å‡ºä¸€ä¸ªå…ƒç´ ï¼Œæ¯” heappush + heappop æ›´é«˜æ•ˆheapq.heapreplace(heap, item) #æ·»åŠ å…ƒç´ åï¼Œè¿”å›çš„æ˜¯åŸæ•°ç»„ä¸­æœ€å°çš„å…ƒç´ heapq.heapify(x) # å †çš„åˆå§‹åŒ–heapq.nlargest(n, heap) # æœ€å¤§nä¸ªå…ƒç´ heapq.nsmallest(n, heap) # æœ€å°nä¸ªå…ƒç´ # heapreplace vs heappushpop &gt;&gt;&gt; a = [2,7,4,0,8,12,14,13,10,3,4]&gt;&gt;&gt; heapify(a)&gt;&gt;&gt; b = a[:]&gt;&gt;&gt; heappushpop(a, -1)-1&gt;&gt;&gt; heapreplace(b, -1)0 é¢è¯•é¢˜41. æ•°æ®æµä¸­çš„ä¸­ä½æ•°ã€å›°éš¾ã€‘Best Answerã€ä¼˜å…ˆé˜Ÿåˆ—ã€‘ è§£é¢˜æ€è·¯ï¼š ç»´æŒä¸¤ä¸ªæ ¹å †ï¼Œä¸€ä¸ªæ˜¯å¤§é¡¶å †Aï¼Œä¸€ä¸ªæ˜¯å°é¡¶å †Bã€‚å…¶ä¸­Açš„æœ€å¤§å…ƒç´  å°äº Bçš„æœ€å°å…ƒç´ ã€‚ å¯»æ‰¾ä¸­ä½æ•°çš„æ€è·¯ï¼šä»¤mä¸ºAçš„é•¿åº¦ï¼Œnä¸ºBçš„é•¿åº¦ï¼ŒNä¸ºæ€»é•¿åº¦â€‹ å½“ m = n æ—¶ï¼Œè¯æ˜Nä¸ºå¶æ•°ï¼Œä¸­ä½æ•°ä¸º (Açš„å †é¡¶ + Bçš„å †é¡¶)/2 å½“ m != n æ—¶ï¼Œè¯æ˜Nä¸ºå¥‡æ•°ï¼Œä¸­ä½æ•°ä¸ºAçš„å †é¡¶(ä¹Ÿå¯ä»¥å–Bçš„å †é¡¶ï¼Œç±»æ¨) Tips: ä¸ºäº†ä¿å­˜ä¸­ä½æ•°ä¸€ç›´åœ¨Açš„å †é¡¶ï¼Œè¦ä¿è¯Açš„é•¿åº¦å§‹ç»ˆè¦å¤§äºç­‰äºBã€‚è€Œä¸”æ‰€æœ‰å…ƒç´ ä¸€å®šè¦åœ¨Aï¼ŒBä¸­éƒ½è°ƒæ•´è¿‡ã€‚ å½“ m = n æ—¶ï¼Œåº”è¯¥å‘Aæ¨å…ƒç´ ï¼Œæ•…åº”å…ˆæ¨Bï¼Œå†æ¨Aï¼Œæ­¤æ—¶ A æœ‰ m + 1 ä¸ªï¼ŒBæœ‰ n ä¸ª å½“ m != n æ—¶ï¼Œåº”è¯¥å‘Bæ¨å…ƒç´ ï¼Œå› ä¸ºæˆ‘ä»¬å§‹ç»ˆä¿æŒçš„æ˜¯Açš„æ•°é‡å¤§äºBã€‚å³ m &gt;= nã€‚æ•…åº”å…ˆæ¨Aå†æ¨Bï¼Œæ­¤æ—¶ A æœ‰ mï¼ŒB æœ‰ n + 1 ä¸ª æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œå…ˆæ¨çš„é‚£ä¸ªæ€»æ˜¯é•¿åº¦ä¸å˜çš„ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ heapq.hashpushpop() æ–¹æ³• A æ˜¯å¤§å †é¡¶ï¼Œæ•… push&amp;pop çš„æ—¶å€™åº”è¯¥æ³¨æ„ä½¿ç”¨è´Ÿæ•°ã€‚heapq å®ç°äº†å°é¡¶å †ï¼Œéœ€è¦å€ŸåŠ© è´Ÿå· å®ç°å¤§æ ¹å † æ—¶é—´å¤æ‚åº¦ï¼š$O(logn)$ã€‚å †æ’å…¥å’Œåˆ é™¤éœ€è¦$O(logn)$ï¼ŒæŸ¥æ‰¾ä¸­ä½æ•°éœ€è¦$O(1)$ã€‚ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$ 123456789101112131415161718192021# ä½œè€…ï¼šjyd# é“¾æ¥ï¼šhttps://leetcode-cn.com/problems/shu-ju-liu-zhong-de-zhong-wei-shu-lcof/solution/mian-shi-ti-41-shu-ju-liu-zhong-de-zhong-wei-shu-y/class MedianFinder: def __init__(self): self.max_heap, self.min_heap = [], [] def addNum(self, num: int) -&gt; None: if len(self.max_heap) == len(self.min_heap): heapq.heappush(self.max_heap, -heapq.heappushpop(self.min_heap, num)) else: heapq.heappush(self.min_heap, -heapq.heappushpop(self.max_heap, -num)) def findMedian(self) -&gt; float: if len(self.max_heap) == len(self.min_heap): return (- self.max_heap[0] + self.min_heap[0])/2 else: return - self.max_heap[0] Best Answerã€æŠ˜åŠç›´æ¥æ’å…¥ã€‘ å‚è€ƒï¼šè…çƒ‚çš„æ©˜å­ğŸŠ å›¾è§£ æ’åº+äºŒåˆ†æŸ¥æ‰¾+ä¼˜å…ˆé˜Ÿåˆ— è§£é¢˜æ€è·¯ï¼š æ’åºæ³•æ˜¯é’ˆå¯¹æ— åºæ•°ç»„ï¼Œæœ¬é¢˜ä¸­æœ€é€‚åˆçš„æ’åºæ–¹æ³•æ˜¯ ç›´æ¥æ’å…¥æ’åºï¼ŒPython è‡ªå¸¦çš„ bisect å·²ç»ä¸ºæˆ‘ä»¬æå‰å®ç°äº† äºŒåˆ†æ’å…¥ Tips: å½“ æ•°ç»„é•¿åº¦ä¸ºå¥‡æ•°æ—¶ï¼Œç›´æ¥è¿”å›ä¸­ä½æ•°ï¼šnums[len(nums)&gt;&gt;1] å½“ æ•°ç»„é•¿åº¦ä¸ºå¶æ•°æ—¶ï¼Œç›´æ¥è¿”å›å¹³å‡æ•°ï¼š (nums[len(nums)//2] + nums[len(nums)//2 +1])/2 12345678# a æŸ¥æ‰¾æ•°ç»„ï¼›xä¸ºæ’å…¥çš„å…ƒç´ ï¼›lo,hi çº¦å®šä¸ºæ•°ç»„çš„èŒƒå›´bisect.insort(a, x, lo=0, hi=len(a)) # æŠ˜åŠæ’å…¥ï¼Œè‹¥å­˜åœ¨xåˆ™æ’å…¥xçš„å³ä¾§bisect.insort_right # åŒ bisect.insortbisect.insort_left # æŠ˜åŠæ’å…¥ï¼Œè‹¥å­˜åœ¨xåˆ™æ’å…¥xçš„å·¦ä¾§# æœ‰ä»¥ä¸‹ä¸‰ç§æ–¹æ³•ï¼Œå¯¹åº”ä¸Šé¢çš„æ’å…¥æ–¹æ³•ã€‚ä¸åŒçš„æ˜¯ï¼Œå®ƒä»¬åªè¿”å›åº”æ’å…¥çš„ä½ç½®bisect.bisectbisect.bisect_leftbisect.bisect_right 1234567891011121314class MedianFinder: def __init__(self): self.A = [] def addNum(self, num: int) -&gt; None: bisect.insort(self.A, num) def findMedian(self) -&gt; float: size = len(self.A) if size &amp; 1 == 0: # even return (self.A[size &gt;&gt; 1] + self.A[(size &gt;&gt; 1) - 1]) / 2 else: return self.A[size &gt;&gt; 1] é¢è¯•é¢˜42. è¿ç»­å­æ•°ç»„çš„æœ€å¤§å’Œ å‚è€ƒKrahets çš„ æ–¹æ³•æ€»ç»“ å¸¸è§è§£æ³• æ—¶é—´å¤æ‚åº¦ ç©ºé—´å¤æ‚åº¦ æš´åŠ›æœç´¢ $O(N^2)$ $O(1)$ åˆ†æ²»æ€æƒ³ $O(NlogN)$ $O(logN)$ åŠ¨æ€è§„åˆ’ $O(N)$ $O(1)$ å‰ªææ³• $O(N)$ $O(1)$ Best Answer ã€æš´åŠ›+å‰ªæã€‘ è§£é¢˜æ€è·¯ï¼š åªéœ€è¦ ä¿è¯æ±‚å‡ºçš„ sum å§‹ç»ˆå¤§äº 0 å³å¯ï¼Œè‹¥æ˜¯å°äº0ï¼Œå®Œå…¨å¯ä»¥ç›´æ¥ä¸¢å¼ƒã€‚ æœ¬è´¨ç®—æ˜¯æš´åŠ›æ³•çš„å‰ªæï¼Œè¿™ç§å‰ªæå·§å¦™çš„åˆ©ç”¨äº†è§„å¾‹ 123456789# 64msclass Solution: def maxSubArray(self, nums: List[int]) -&gt; int: s, ret = 0, -101 for i in nums: if s &lt; 0: s = 0 s += i ret = max(ret, s) return ret Best Answer ã€åŠ¨æ€è§„åˆ’ã€‘ 12345678class Solution: def maxSubArray(self, nums: List[int]) -&gt; int: for i in range(1, len(nums)): nums[i] += max(nums[i - 1], 0) return max(nums)# ä½œè€…ï¼šjyd# é“¾æ¥ï¼šhttps://leetcode-cn.com/problems/lian-xu-zi-shu-zu-de-zui-da-he-lcof/solution/mian-shi-ti-42-lian-xu-zi-shu-zu-de-zui-da-he-do-2/ ä¸Šé¢ jyd åœ¨å¤„ç†çš„æ—¶å€™ï¼Œç›´æ¥åœ¨ nums åŸºç¡€ä¸Šè¿›è¡Œäº†è¿ç®—ï¼Œå¯ä»¥è¯´èŠ‚çº¦äº† $O(N)$ çš„ç©ºé—´ä½¿ç”¨ï¼Œéå¸¸ç²¾å¦™ Other Answer ã€åˆ†æ²»æ³•ã€‘ å‚è€ƒèµ„æ–™ï¼š æœ€å¤§å­åºå’Œï¼ˆæš´åŠ›æ³• + åˆ†æ²»æ³• + DPï¼‰- Python3 ã€è¶…å…¨Â·4ç§è§£æ³•ã€‘åŠ¨æ€è§„åˆ’åŠä¼˜åŒ–ã€è´ªå¿ƒæ³•ã€åˆ†æ²»æ³•ï¼ˆJavaScriptå®ç°ï¼‰ è§£é¢˜æ€è·¯ï¼š å°†æ•°ç»„åˆ†ä¸º 2 éƒ¨åˆ†ã€‚ä¾‹å¦‚ [1, 2, 3, 4] è¢«åˆ†ä¸º [1, 2] å’Œ [3, 4] é€šè¿‡é€’å½’è®¡ç®—ï¼Œå¾—åˆ°å·¦å³ä¸¤éƒ¨åˆ†çš„æœ€å¤§å­åºåˆ—å’Œæ˜¯ lsumï¼Œrsum ä»æ•°ç»„ä¸­é—´å¼€å§‹å‘ä¸¤è¾¹è®¡ç®—æœ€å¤§å­åºåˆ—å’Œ cross è¿”å› max(lsum, cross, rsum) Tips: ç”±äº len(nums)==1 ä¿è¯äº† mid=len(nums)//2 - 1 å’Œ mid - 1 æ˜¯å­˜åœ¨çš„ ä¸­é—´å€¼è®¡ç®—ä¸€å®šæ˜¯ä» mid å¼€å§‹çš„è¿ç»­å€¼ 1234567891011121314151617181920212223# 544 msclass Solution: def maxSubArray(self, nums: List[int]) -&gt; int: def crossSum(nums): mid = len(nums) // 2 - 1 left_max_sum, left_sum = nums[mid], 0 for i in nums[mid: : -1]: left_sum += i left_max_sum = max(left_max_sum, left_sum) right_max_sum, right_sum = nums[mid + 1], 0 for i in nums[mid + 1: : 1]: right_sum += i right_max_sum = max(right_max_sum, right_sum) return left_max_sum + right_max_sum if len(nums) == 1: return nums[0] mid = len(nums) &gt;&gt; 1 left_max = self.maxSubArray(nums[:mid]) right_max = self.maxSubArray(nums[mid:]) mid_max = crossSum(nums) return max(left_max, right_max, mid_max) å‰‘æŒ‡ Offer 43. 1ï½næ•´æ•°ä¸­1å‡ºç°çš„æ¬¡æ•°å¾…æ•´ç† å‰‘æŒ‡ Offer 44. æ•°å­—åºåˆ—ä¸­æŸä¸€ä½çš„æ•°å­—å¾…æ•´ç†","categories":[{"name":"åˆ·é¢˜","slug":"åˆ·é¢˜","permalink":"http://ppsteven.github.io/categories/%E5%88%B7%E9%A2%98/"}],"tags":[{"name":"å‰‘æŒ‡Offerï¼Œåˆ·é¢˜","slug":"å‰‘æŒ‡Offerï¼Œåˆ·é¢˜","permalink":"http://ppsteven.github.io/tags/%E5%89%91%E6%8C%87Offer%EF%BC%8C%E5%88%B7%E9%A2%98/"}]},{"title":"æå‡ git é€Ÿåº¦çš„å‡ ä¸ªåŠ é€Ÿæ–¹æ³•","slug":"several-tips-git-speed-up","date":"2020-05-03T12:07:16.000Z","updated":"2020-06-16T08:47:15.795Z","comments":false,"path":"2020/05/03/several-tips-git-speed-up/","link":"","permalink":"http://ppsteven.github.io/2020/05/03/several-tips-git-speed-up/","excerpt":"æœ€è¿‘ç»å¸¸éœ€è¦ä»githubä¸Šæ‹‰ä»£ç ä¸‹æ¥ï¼Œé€Ÿåº¦å®åœ¨æ˜¯å¤ªæ…¢äº†ã€‚æ‰€ä»¥å†™è¿™ç¯‡æ–‡ä»¶ï¼Œæ¥å¥½å¥½æ€»ç»“ä¸€ä¸‹æé€Ÿçš„æ–¹æ³•ã€‚ æ€»çš„æ¥è¯´ï¼Œæ–¹æ³•æœ‰ æ›¿æ¢ é•œåƒæº/ä¿®æ”¹hosts/ä½¿ç”¨å›½å†…æ‰˜ç®¡å¹³å°/ä½¿ç”¨ä»£ç† ç»è¿‡å®éªŒä¸‹æ¥ï¼Œä½¿ç”¨ä»£ç†çš„æ•ˆæœæœ€å¥½","text":"æœ€è¿‘ç»å¸¸éœ€è¦ä»githubä¸Šæ‹‰ä»£ç ä¸‹æ¥ï¼Œé€Ÿåº¦å®åœ¨æ˜¯å¤ªæ…¢äº†ã€‚æ‰€ä»¥å†™è¿™ç¯‡æ–‡ä»¶ï¼Œæ¥å¥½å¥½æ€»ç»“ä¸€ä¸‹æé€Ÿçš„æ–¹æ³•ã€‚ æ€»çš„æ¥è¯´ï¼Œæ–¹æ³•æœ‰ æ›¿æ¢ é•œåƒæº/ä¿®æ”¹hosts/ä½¿ç”¨å›½å†…æ‰˜ç®¡å¹³å°/ä½¿ç”¨ä»£ç† ç»è¿‡å®éªŒä¸‹æ¥ï¼Œä½¿ç”¨ä»£ç†çš„æ•ˆæœæœ€å¥½ ä½¿ç”¨é•œåƒæº(æ¨è) å‚è€ƒ çŸ¥ä¹Don.hub æ›¿æ¢ github é•œåƒç½‘ç«™ï¼ŒæŠŠ github.com æ›¿æ¢æˆ github.com.cnpmjs.org 12https://github.com/graykode/nlp-tutorialhttps://github.com.cnpmjs.org/graykode/nlp-tutorial è¿™ä¸ªæ–¹æ³•æœ€ç®€å•ï¼Œæé€Ÿæ•ˆæœè¿˜æ˜¯å¾ˆæ˜æ˜¾çš„ã€‚å½“ç„¶ç¼ºç‚¹ä¹Ÿæ˜¯å¾ˆæ˜æ˜¾çš„ï¼Œå°±æ˜¯å¦‚æœæ˜¯ä¸€äº›ä¸çŸ¥åçš„é¡¹ç›®ï¼Œå°±æ²¡æœ‰å¯¹åº”çš„é•œåƒæºå¯ä»¥ç”¨äº†ã€‚ ä¿®æ”¹hostsï¼ˆä¸æ¨èï¼‰DNSæ±¡æŸ“æ˜¯GFWçš„ä¸€ä¸ªé‡è¦æ‰‹æ®µï¼Œé€šè¿‡ä¿®æ”¹ hosts æ–‡ä»¶æ¥ç›´æ¥ç»•è¿‡DNSè§£ææ˜¯ä¸€ä¸ªä¸é”™çš„æ–¹æ³•ã€‚è¿™æ˜¯ä¸€ä¸ªä¸»æµçš„è§£å†³æ–¹æ³•ï¼Œä½†æ˜¯å®æµ‹ä¸‹æ¥æ•ˆæœå¹¶ä¸æ˜¾è‘—ã€‚ ç¬¬ä¸€æ­¥: æ‰¾åˆ°ä»¥ä¸‹ä¸¤ä¸ªåŸŸåå¯¹åº”æœ€å¿«çš„ ip åœ°å€ æŸ¥ ip åœ°å€ï¼š https://www.ipaddress.com 12github.global.ssl.fastly.net github.com ç¬¬äºŒæ­¥: å°†æ‰¾åˆ°çš„å¯¹åº”çš„ ip æ·»åŠ è‡³ hosts ( åœ°å€: /etc/hosts) 123# ä¸¾ä¸ªä¾‹å­213.54.23.32 github.global.ssl.fastly.net 212.44.53.42 github.com ä½¿ç”¨å›½å†…æ‰˜ç®¡å¹³å°é€šè¿‡å›½å†…æ‰˜ç®¡å¹³å°ï¼Œå¦‚ç äº‘ gitee/é˜¿é‡Œäº‘/oschaina ç­‰ä½œä¸ºä¸­è½¬ï¼Œå°†ä»£ç  fork åˆ°è‡ªå·±çš„ä»“åº“ä¸‹ã€‚ç„¶åå» clone å¯¹åº”ä»“åº“çš„repoï¼ŒåŸºæœ¬å¯ä»¥åˆ°è¾¾æ»¡é€Ÿã€‚ æ¬è¿æ•™ç¨‹ï¼šhttps://zhuanlan.zhihu.com/p/111697412 è¿™ä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„æ–¹æ³•ï¼Œå°±æ˜¯ç¨å¾®æœ‰ç‚¹çƒ¦ã€‚è€Œä¸”å¯¹äºå°ç™½æ¥è¯´ï¼Œè¿˜å®¹æ˜“ç¢°åˆ°ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œåœ¨ä½¿ç”¨ SSH æ–¹å¼æ‹‰ä»£ç çš„è¯ï¼Œéœ€è¦ç¢°åˆ°å¤šä¸ªç§˜é’¥ç®¡ç†çš„éº»çƒ¦äº‹æƒ…ã€‚ ä»£ç†æœåŠ¡å™¨ï¼ˆé€‰æ‹©æ–¹æ¡ˆï¼‰æœ€åæˆ‘é‡‡ç”¨çš„æ˜¯è¿™ä¸ªæ–¹æ¡ˆï¼Œå‚è€ƒ è¿™ç¯‡æ•™ç¨‹ã€‚å¦‚æœä½ æ‰‹é‡Œæœ‰ä¸€å°æµ·å¤–çš„VPSï¼Œå°±éå¸¸ç®€å•ã€‚ æœ¬åœ°ä»£ç†åŠ é€Ÿç¬¬ä¸€æ­¥: æŸ¥çœ‹ä½ çš„è¿æ¥å·¥å…·çš„ç›‘å¬ç«¯å£ è¿æ¥ VPS çš„å·¥å…·å„ä¸ç›¸åŒï¼Œè¿™é‡Œä»¥æœ€å¸¸ä½¿ç”¨çš„ shadowssocks ä¸ºä¾‹ï¼Œé€‰æ‹© åå¥½è®¾ç½®-&gt;é«˜çº§ å°±å¯ä»¥æŸ¥çœ‹ socks5 ç›‘å¬çš„ç«¯å£ã€‚ ç¬¬äºŒæ­¥ï¼šè®¾ç½®ä»£ç†è½¬å‘çš„ç«¯å£ è®¾ç½®å…¨å±€ä»£ç† å…¨å±€ä»£ç†è®¾ç½®åï¼Œæ‰€æœ‰ git çš„ http/https éƒ½ä¼šèµ°æˆ‘ä»¬çš„ä»£ç†ç«¯å£ 1234567# SOCKS5 åè®®ï¼Œ1080 ç«¯å£ä¿®æ”¹æˆè‡ªå·±çš„æœ¬åœ° SOCKS5 ä»£ç†ç«¯å£git config --global http.proxy socks5://127.0.0.1:1080git config --global https.proxy socks5://127.0.0.1:1080# HTTP åè®®ï¼Œ1081 ç«¯å£ä¿®æ”¹æˆè‡ªå·±çš„æœ¬åœ° HTTP ä»£ç†ç«¯å£git config --global http.proxy http://127.0.0.1:1081git config --global https.proxy https://127.0.0.1:1081 è®¾ç½®å±€éƒ¨ä»£ç† 1234567# SOCKS5 åè®®ï¼Œ1080 ç«¯å£ä¿®æ”¹æˆè‡ªå·±çš„æœ¬åœ° SOCKS5 ä»£ç†ç«¯å£git config --global http.https://github.com.proxy socks5://127.0.0.1:1080git config --global https.https://github.com.proxy socks5://127.0.0.1:1080# HTTP åè®®ï¼Œ1081 ç«¯å£ä¿®æ”¹æˆè‡ªå·±çš„æœ¬åœ° HTTP ä»£ç†ç«¯å£git config --global http.https://github.com.proxy https://127.0.0.1:1081git config --global https.https://github.com.proxy https://127.0.0.1:1081 è®¾ç½®åï¼Œæˆ‘ä»¬å¯ä»¥æ‰“å¼€ ~/.gitconfig 1234[http &quot;https://github.com&quot;] proxy = socks5://127.0.0.1:1080[https &quot;https://github.com&quot;] proxy = socks5://127.0.0.1:1080 æˆ–è€… git config --global -l æŸ¥çœ‹é…ç½®æ˜¯å¦ç”Ÿæ•ˆ 12http.https://github.com.proxy=socks5://127.0.0.1:1080https.https://github.com.proxy=socks5://127.0.0.1:1080 å–æ¶ˆä»£ç† 123456# å–æ¶ˆå±€éƒ¨ä»£ç†git config --global --unset http.https://github.com.proxygit config --global --unset https.https://github.com.proxy# å–æ¶ˆå…¨å±€ä»£ç†git config --global --unset http.proxygit config --global --unset https.proxy è¿œç¨‹ä»£ç†åŠ é€Ÿæœ¬åœ°ä»£ç†çš„è¯ï¼Œå¯¹äºåœ¨ä¸ªäººç”µè„‘ä¸Šå¼€å‘æ˜¯å¾ˆæœ‰å¸®åŠ©çš„ã€‚ä½†æ˜¯å¦‚æœæœåŠ¡å™¨ä¹Ÿè¦ gitåŠ é€Ÿ çš„è¯å°±æ¯”è¾ƒéº»çƒ¦äº†ï¼Œè¿˜è¦åœ¨æœåŠ¡å™¨ä¸Šé…ç½®ä¸€éæœ¬åœ°ä»£ç†ã€‚ä¸å…¶è¿™æ ·åšï¼Œä¸å¦‚ç›´æ¥åœ¨æœåŠ¡å™¨ç«¯å¼€ä¸€ä¸ªä»£ç†æ¥çš„æ–¹ä¾¿ã€‚ æœåŠ¡å™¨ç«¯çš„åŸºæœ¬é…ç½®1234567891011121314# å®‰è£… shadowsockssudo pip install shadowsocks# åˆ›å»ºé…ç½®æ–‡ä»¶&#123; \"server\":\"*.*.*.*\", \"server_port\":***,+ \"local_server\":\"0.0.0.0\", # é»˜è®¤127.0.0.1 \"local_port\":1081, \"password\":\"*****\", \"timeout\":600, \"method\":\"aes-256-cfb\"&#125;# åå°è¿è¡Œnohup /root/miniconda2/envs/base/bin/sslocal -c ss.json &gt;&gt; ss.log 1&gt;2&amp; æ³¨æ„: è¿™é‡Œéœ€è¦æ·»åŠ ä¸€è¡Œé…ç½®ï¼Œ0.0.0.0 è¡¨ç¤ºç›‘å¬æ‰€æœ‰ç«¯å£ï¼ŒåŸå…ˆé»˜è®¤ 127.0.0.1 åªç›‘å¬æœ¬åœ°ç«¯å£ P.S. æŸ¥çœ‹æœåŠ¡å™¨ç»‘å®šç«¯å£çš„å‘½ä»¤: netstat -tunlp æœ‰äº†è¿œç«¯ä»£ç†ï¼Œæ‰€æœ‰ä¸œè¥¿çªç„¶å°±æ–¹ä¾¿äº†å¾ˆå¤šã€‚æ‰€æœ‰çš„é…ç½®éƒ½åªè¦èµ° x.x.x.x:1081 è½¬å‘ä¸€ä¸‹å°±å¯ä»¥äº†ã€‚å› ä¸ºæˆ‘ä»¬æœ¬åœ°çš„ä»£ç†å¹¶ä¸æ˜¯ä¼šä¸€ç›´å¼€ç€çš„ï¼Œè€Œè¿œç«¯çš„ä»£ç†æ˜¯ä¸€ç›´å­˜åœ¨çš„ã€‚ Baacloud åŠ é€Ÿç”±äºæˆ‘æ˜¯ç”¨çš„æˆ‘å¼Ÿå¼Ÿçš„ Baacloudï¼Œè¿™ç§FQå·¥å…·æä¾›çš„ä¸æ˜¯ä¸€å°æœºå™¨ï¼Œè€Œæ˜¯å¤šå°æœºå™¨çš„åœ°å€ã€‚ç”±äºæœ‰å¾ˆå¤šäººç”¨ï¼Œæ‰€ä»¥æ¯ä¸ªèŠ‚ç‚¹æ‹¥æŒ¤ç¨‹åº¦ä¸åŒã€‚æˆ‘è‡ªå·±ç¼–äº†ä¸€ä¸ªå°è„šæœ¬ï¼Œè·å–æ¯ä¸ªèŠ‚ç‚¹çš„ PING å€¼ï¼Œé€‰æ‹©å»¶æ—¶æœ€ä½çš„èŠ‚ç‚¹è¿æ¥ã€‚ å…·ä½“çš„æ–‡ç« åç»­æ›´æ–° Baacloud ä¼˜åŒ–æ–¹æ³• ç¼ºç‚¹ç»è¿‡æµ‹è¯•ä¸‹æ¥ï¼Œæˆ‘çš„ github æ‹‰ä»£ç çš„é€Ÿåº¦ä» 4kb ä¸€ä¸‹å­æåˆ°äº† 100+ kb/sã€‚æœ‰äººè§‰å¾—è¿™ä¸ªé€Ÿåº¦ä¹Ÿå¹¶ä¸å¿«ï¼Œä½†æ˜¯å®é™…ä¸Šå·²ç»è¾¾åˆ°äº†é€Ÿåº¦çš„ä¸Šçº¿äº†ã€‚ æˆ‘è¿œç«¯æœåŠ¡å™¨ä½¿ç”¨çš„æ˜¯å›½å†…è…¾è®¯äº‘çš„æœåŠ¡å™¨ (å­¦ç”Ÿä¼˜æƒ æ—¶å€™åŠçš„)ï¼Œä½†æ˜¯åªæœ‰ 1M çš„å°æ°´ç®¡ (å¸¦å®½çš„ä¸Šé™åˆ¶ä¹Ÿå°±æ˜¯125kb/s) ï¼Œæ‰€ä»¥ git ä¹Ÿåˆ°è¾¾æ»¡é€Ÿäº†ã€‚ ç»è¿‡è¿™ä¸ªäº‹æƒ…ï¼Œæˆ‘æ¯”è¾ƒäº†ä¸€ä¸‹å›½å†…å¤–VPSçš„ä»·æ ¼ï¼Œå‘ç°é™¤äº†è€ƒè™‘ ç¡¬ç›˜/å†…å­˜ ä»¥å¤–ï¼Œå›½å†…å¤–çš„VPSå¸¦å®½çš„å·®è·æ˜¯çœŸçš„æ‰“ã€‚å›½å†…çš„å¸¦å®½æ™®éæ˜¯1/2Mçš„å°æ°´ç®¡ï¼Œå›½å¤–çš„éƒ½èƒ½åˆ°è¾¾ 1Gã€‚ åç»­æˆ‘å¯èƒ½è€ƒè™‘æ‰¾ä¸€ä¸ªç¨³å®šçš„æµ·å¤–VPSé‡æ–°æä¸€ä¸‹ã€‚ Socks5/http/httpsä»£ç†çš„åŒºåˆ« ä½œè€…ï¼šé»æ˜é“¾æ¥ï¼šhttps://www.zhihu.com/question/65960461/answer/505625432æ¥æºï¼šçŸ¥ä¹è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚ çŸ¥ä¹ä¸Šçœ‹åˆ°ä¸€ä¸ªå›ç­” HTTP ä»£ç†æ˜¯åŸºäº HTTP åè®®çš„ï¼Œå±äºåº”ç”¨å±‚åè®®ï¼Œä¸€èˆ¬åªä¼šä»£ç†è½¬å‘ HTTP è¯·æ±‚ï¼Œä¹Ÿå¯ä»¥é€šè¿‡CONNECT æ–¹æ³•æ¥å®ç°ä¸€èˆ¬ TCP çš„ä»£ç†è½¬å‘ã€‚ è€Œ Socks5 ä»£ç†åˆ™ç›¸å¯¹åº•å±‚ä¸€äº›ï¼Œå±äº ä¼šè¯å±‚åè®® ï¼Œå®ƒç›´æ¥é€šè¿‡åè®®æ¡æ‰‹æ¥è¿›è¡Œè¿æ¥ï¼Œå¹¶ç›´æ¥ä¿®æ”¹æŠ¥å¤´æ¥å®ç°è½¬å‘ï¼Œæ‰€ä»¥é€Ÿåº¦éå¸¸å¿«ï¼Œå¹¶ä¸”æ”¯æŒå¯¹ FTP ç”šè‡³æ˜¯ UDP è¿›è¡Œä»£ç†è½¬å‘ï¼ŒåŠŸèƒ½æ¯” HTTP ä»£ç†è¦å¼ºå¤§å¾ˆå¤šã€‚ ä¸¤ä¸ªä»£ç†åœ¨ OSI æ¨¡å‹ä¸­çš„ä½ç½®ï¼š ç‰©ç†å±‚ &lt; æ•°æ®é“¾è·¯å±‚ &lt; ç½‘ç»œå±‚ &lt; ä¼ è¾“å±‚ &lt; ä¼šè¯å±‚[socks5] &lt; è¡¨ç¤ºå±‚ &lt; åº”ç”¨å±‚[http] å®é™…ä½¿ç”¨æ—¶ï¼Œä¸€èˆ¬å»ºè®®æ˜¯åœ¨æ”¯æŒçš„æ—¶å€™ä½¿ç”¨ Socks5ï¼Œä¸æ”¯æŒ Socks5 çš„è¯å°±ç”¨ HTTPã€‚ è…¾è®¯äº‘è¢«å°åšå®¢å†™å¥½æ²¡ä¸€å¤©ï¼Œæˆ‘çš„è¿™ä¸ªè¿œç¨‹ä»£ç†å°±è¢«è…¾è®¯äº‘æ£€æµ‹åˆ°äº†ã€‚ä¸çŸ¥é“æ˜¯å“ªä¸ªâ€ç”¨æˆ·â€ä¸¾æŠ¥çš„æˆ‘ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘æ„Ÿè§‰æœ€å¥½çš„è¿˜æ˜¯ä¹°ä¸€ä¸ªå›½å¤–çš„VPSã€‚ æ–¹æ¡ˆæµç¨‹å›¾ä¸ºäº†ä¸è®©è…¾è®¯äº‘å‘ç°çš„è¯ï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨ frp ä»£ç†ï¼Œåœ¨è…¾è®¯äº‘ä¸Šåšä¸€ä¸ªç«¯å£è½¬å‘ï¼Œå‘åˆ°æˆ‘å®¶é‡Œé—²ç½®çš„ç”µè„‘ä¸Šï¼Œç„¶ååœ¨æœ¬åœ°æ­ä»£ç†ã€‚è¿™æ ·é¥¶äº†ä¸€åœˆï¼Œä¼šç‰¹åˆ«çƒ¦ï¼Œä½†æ˜¯åº”è¯¥å¯ä»¥èº²é¿è…¾è®¯äº‘çš„ç›‘æ§ï¼ˆè™½ç„¶æˆ‘ä¸çŸ¥é“æ€ä¹ˆè¢«å‘ç°çš„ï¼‰ã€‚ æ­¤å¤–ï¼Œsocks5 ä»£ç†å¼€å¯çš„æ—¶å€™ï¼Œæœ€å¥½è¦åŠ ä¸Šæ¼”éªŒè¯ç­–ç•¥ã€‚ å‚è€ƒèµ„æ–™Git å‘½ä»¤è¡ŒåŠ é€Ÿ Socks5/http/httpsä»£ç†çš„åŒºåˆ« çŸ¥ä¹ä¸Šè¿˜æœ‰ä¸€ä½å¤§ä½¬æ·±å…¥æ•´ç†äº†ä¸€å¥—ä»£ç†çš„æŠ€æœ¯æ–‡ç«  ç”±æµ…å…¥æ·±å†™ä»£ç†(3) -socks5 ä»£ç†","categories":[{"name":"git","slug":"git","permalink":"http://ppsteven.github.io/categories/git/"}],"tags":[{"name":"git","slug":"git","permalink":"http://ppsteven.github.io/tags/git/"},{"name":"ä»£ç†","slug":"ä»£ç†","permalink":"http://ppsteven.github.io/tags/%E4%BB%A3%E7%90%86/"}]},{"title":"Pythonå¹¶å‘ç¼–ç¨‹â€”â€”å¤šè¿›ç¨‹ç¼–ç¨‹ multiprocessing æ¨¡å—","slug":"python-multiprocessing-basic","date":"2020-04-05T04:27:57.000Z","updated":"2020-06-06T19:12:51.853Z","comments":false,"path":"2020/04/05/python-multiprocessing-basic/","link":"","permalink":"http://ppsteven.github.io/2020/04/05/python-multiprocessing-basic/","excerpt":"Python å¹¶å‘ç¼–ç¨‹å¯ä»¥åˆ†ä¸ºä¸‰å—ï¼šå¤šè¿›ç¨‹ç¼–ç¨‹ï¼Œå¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œå¤šåç¨‹ç¼–ç¨‹ã€‚å‰ä¸¤è€…æ˜¯ç”±äºæ“ä½œç³»ç»Ÿæ§åˆ¶çš„ï¼Œåç¨‹æ˜¯ç”±ç”¨æˆ·æ§åˆ¶ã€‚æ‰€ä»¥åœ¨å¤šè¿›ç¨‹çš„ç¼–ç¨‹ä¸Šï¼Œä¸åŒæ“ä½œç³»ç»Ÿçš„æ•ˆæœä¸ä¸€æ ·ã€‚å¦‚æœæ˜¯ä¸ºäº†å­¦ä¹ å¤šè¿›ç¨‹ç¼–è¾‘ï¼Œå»ºè®®åœ¨Mac Os æˆ–è€… Linux ä¸Šã€‚ æœ¬ç¯‡ä»‹ç»åŸºäºè¿›ç¨‹çš„å¹¶è¡Œæ“ä½œï¼Œä¸»è¦ç”¨åˆ°çš„æ¨¡å—æ˜¯ multiprocessing","text":"Python å¹¶å‘ç¼–ç¨‹å¯ä»¥åˆ†ä¸ºä¸‰å—ï¼šå¤šè¿›ç¨‹ç¼–ç¨‹ï¼Œå¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œå¤šåç¨‹ç¼–ç¨‹ã€‚å‰ä¸¤è€…æ˜¯ç”±äºæ“ä½œç³»ç»Ÿæ§åˆ¶çš„ï¼Œåç¨‹æ˜¯ç”±ç”¨æˆ·æ§åˆ¶ã€‚æ‰€ä»¥åœ¨å¤šè¿›ç¨‹çš„ç¼–ç¨‹ä¸Šï¼Œä¸åŒæ“ä½œç³»ç»Ÿçš„æ•ˆæœä¸ä¸€æ ·ã€‚å¦‚æœæ˜¯ä¸ºäº†å­¦ä¹ å¤šè¿›ç¨‹ç¼–è¾‘ï¼Œå»ºè®®åœ¨Mac Os æˆ–è€… Linux ä¸Šã€‚ æœ¬ç¯‡ä»‹ç»åŸºäºè¿›ç¨‹çš„å¹¶è¡Œæ“ä½œï¼Œä¸»è¦ç”¨åˆ°çš„æ¨¡å—æ˜¯ multiprocessing ç®€å•å¤šè¿›ç¨‹ç¼–ç¨‹ç®€å•å¤šè¿›ç¨‹ç”¨ Process å’Œ Pool ä¸¤ä¸ªåŸºç¡€ç±»å°±å¯ä»¥å®ç° Process123456789from multiprocessing import Processdef f(name): print('hello', name)if __name__ == '__main__': p = Process(target=f, args=('bob',)) p.start() # å¯åŠ¨è¿›ç¨‹ p.join() # é˜»å¡è¿›ç¨‹ï¼Œåªæœ‰å½“æœ¬æ¬¡è¿›ç¨‹å®Œæˆåæ‰è¿è¡Œä¸‹ä¸€è¿›ç¨‹ã€‚è¿›ç¨‹åŒæ­¥é€»è¾‘ã€‚ ä¸‹é¢æˆ‘ä»¬å¯ä»¥è¯¦ç»†çœ‹çœ‹ Process ç±»çš„å±æ€§ï¼Œæ„é€ æ–¹æ³•å’Œæ–¹æ³• æ„é€ æ–¹æ³•1class multiprocessing.Process(group=None, target=None, name=None, args=(), kwargs=&#123;&#125;, *, daemon=None) group å…¼å®¹é€»è¾‘ï¼Œå§‹ç»ˆè®¾ç½®ä¸ºNone target ç›®æ ‡å‡½æ•° args, kwargs ä¼ å…¥ç›®æ ‡å‡½æ•°çš„å‚æ•°ï¼Œåˆ—è¡¨å‚æ•°å’Œå­—å…¸å‚æ•° name è¿›ç¨‹åç§° daemon åå°è¿è¡Œï¼Œå®ˆæŠ¤è¿›ç¨‹ã€‚è‹¥ daemon =Trueï¼Œè¯¥è¿›ç¨‹ä¼šä¸€ç›´å­˜åœ¨äºä¸»è¿›ç¨‹ä¸­ï¼Œä¼´éšç€çˆ¶è¿›ç¨‹ç»ˆæ­¢è€Œç»ˆæ­¢ã€‚ Tipsï¼š å®ˆæŠ¤è¿›ç¨‹ ä¸»è¿›ç¨‹ç»“æŸåï¼Œå­è¿›ç¨‹ä¸ä¸€å®šä¼šè¿è¡Œç»“æŸã€‚å¦‚æœæˆ‘ä»¬éœ€è¦è®©çˆ¶è¿›ç¨‹ç»ˆæ­¢çš„æ—¶å€™ï¼Œå¯ä»¥è®¾ç½®å­è¿›ç¨‹ä¸ºå®ˆæŠ¤è¿›ç¨‹ã€‚æ³¨æ„çš„æ˜¯ï¼Œå®ˆæŠ¤è¿›ç¨‹ä¸èƒ½å¤Ÿå†åˆ›é€ å­è¿›ç¨‹äº†ã€‚ 12multiprocessing.Process(group=None, target=None, name=None, args=(), kwargs=&#123;&#125;, *, daemon=True) # åˆ›å»ºProcessç±»æ—¶è®¾ç½®p.daemon = True # ä¸»åŠ¨è®¾ç½®deemon å±æ€§ å±æ€§ pid è¿›ç¨‹ID name è¿›ç¨‹å deamon è®¾ç½®åå°å®ˆæŠ¤è¿›ç¨‹ exitcode å­è¿›ç¨‹é€€å‡ºä»£ç ã€‚å¦‚æœè¿›ç¨‹å°šæœªç»ˆæ­¢ï¼Œè¿™å°†æ˜¯ None ã€‚è´Ÿå€¼ -N è¡¨ç¤ºå­©å­è¢«ä¿¡å· N ç»ˆæ­¢ã€‚ æˆ‘ä»¬å¯ä»¥è½»æ¾çš„é€šè¿‡è®¿é—®ä»»ä¸€ Process ç±»çš„å˜é‡è·å–åŸºæœ¬ä¿¡æ¯ 12multiprocessing.current_process().pidmultiprocessing.current_process().name æ–¹æ³• run() è¿›ç¨‹æ´»åŠ¨çš„æ–¹æ³• é€šè¿‡é‡è½½ run æ–¹æ³•å®ç°è¿›ç¨‹ 12345678910111213141516import multiprocessingclass MyProcess(multiprocessing.Process): def __init__(self): super().__init__() def run(self): name = multiprocessing.current_process().name pid = multiprocessing.current_process().pid print(f'name:&#123;name&#125;, pid:&#123;pid&#125;')if __name__ == '__main__': p = MyProcess() p.start() p.join() éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå°½ç®¡æˆ‘ä»¬ä¿®æ”¹çš„æ˜¯ run æ–¹æ³•ã€‚æˆ‘ä»¬å¯åŠ¨è¿›ç¨‹çš„æ–¹æ³•è¿˜æ˜¯ p.start start() å¯åŠ¨è¿›ç¨‹ join([timeout]) è¿›ç¨‹é˜»å¡ï¼Œç›´åˆ°è¿›ç¨‹ç»ˆæ­¢ã€‚ timeout æ˜¯é˜»å¡çš„æ—¶é—´ï¼Œé»˜è®¤Noneï¼Œä¸€ç›´é˜»å¡ç›´åˆ°è¿›ç¨‹ç»ˆæ­¢ã€‚ is_alive() è¿›ç¨‹å­˜åœ¨è¿”å› Trueï¼Œ å¦åˆ™ False terminate()/kill() åœ¨Unixä¸Šï¼Œè¿™æ˜¯ä½¿ç”¨ SIGTERM ä¿¡å·å®Œæˆçš„ close() å…³é—­ Processå¯¹è±¡ï¼Œé‡Šæ”¾ä¸ä¹‹å…³è”çš„æ‰€æœ‰èµ„æº Poolå¦‚æœéœ€è¦è¿è¡Œå¤šä¸ªå­è¿›ç¨‹ï¼Œé‡‡ç”¨è¿›ç¨‹æ±  Pool çš„æ–¹å¼å¯ä»¥èŠ‚çœç¨‹åºå¼€é”€ã€‚è¿›ç¨‹çš„åˆ›å»ºå’Œé”€æ¯éƒ½æ˜¯éœ€è¦æ“ä½œç³»ç»Ÿèµ„æºçš„ã€‚ è¿›ç¨‹æ± Pool vs Process12345678910111213141516171819202122232425262728293031import multiprocessingimport osdef worker(msg): print(\"%s is now running, process id: %s\" % (msg, os.getpid()))if __name__ == \"__main__\": po = multiprocessing.Pool(4) for i in range(10): po.apply_async(worker, args=(i,)) print(\"main process starting....\") po.close() po.join() print(\"main process stoping....\")''' è¾“å‡ºmain process starting....0 is now running, process id: 34361 is now running, process id: 34372 is now running, process id: 34384 is now running, process id: 34363 is now running, process id: 34395 is now running, process id: 34376 is now running, process id: 34387 is now running, process id: 34368 is now running, process id: 34379 is now running, process id: 3439main process stoping....''' ä½¿ç”¨è¿›ç¨‹æ± çš„ä¼˜ç‚¹æç°åœ¨ é™åˆ¶åŒä¸€æ—¶é—´è¿›ç¨‹å¹¶è¡Œçš„æ•°ç›®å¤šè¿›ç¨‹å¯ä»¥æé«˜ç¨‹åºè¿è¡Œçš„æ•ˆç‡ï¼Œä½†æ˜¯è¿‡å¤šçš„è¿›ç¨‹åˆ‡æ¢åè€Œä¼šé™ä½æ•ˆç‡ã€‚åŸå› æ˜¯a.è¿›ç¨‹ä¼šå ç”¨è®¡ç®—æœºèµ„æºï¼Œèµ„æºå†³å®šäº†è¿›ç¨‹ä¸èƒ½å¼€å¯è¿‡å¤šã€‚b.è¿›ç¨‹çš„åˆ‡æ¢å¼€é”€æ¯”è¾ƒå¤§ï¼Œå ç”¨è¿‡å¤šCPUèµ„æºã€‚ è¿›ç¨‹æ± å‡å°‘ä¸å¿…è¦çš„åˆ›å»ºï¼Œé”€æ¯è¿‡ç¨‹ã€‚ ç¨‹åºä¸­ï¼ŒPool(4) çš„è¿›ç¨‹å·åªæœ‰ 3436ï¼Œ3437ï¼Œ3438ï¼Œ3439 è¿™å››ä¸ªè¿›ç¨‹å·ã€‚è¯æ˜è¿›ç¨‹æ± çœå»äº†åˆ›å»ºå’Œé”€æ¯çš„è¿‡ç¨‹ã€‚ å½“è¿›ç¨‹æ•°å’Œè®¡ç®—æœºçš„å†…æ ¸æ•°ä¸€è‡´çš„æ—¶å€™ï¼Œæ•ˆç‡æœ€é«˜ã€‚æˆ‘ä»¬å¯ä»¥å…ˆçœ‹çœ‹è‡ªå·±è®¡ç®—æœºçš„å†…æ ¸ä¸ªæ•°ï¼Œä½¿ç”¨ os.cpu_count() æˆ–è€… multiprocess.cpu_count() æ¥æŸ¥çœ‹å†…æ ¸ä¸ªæ•°ã€‚å¦‚æœä¸å¡«å†™å†…æ ¸å‚æ•°ï¼ŒPool é»˜è®¤é‡‡å–æœºå™¨çš„å†…æ ¸ä¸ªæ•°ã€‚ 1234567from multiprocessing import Poolp = Pool(4)for i in range(5): p.apply_async(f, args=(i,)) # å¼‚æ­¥è°ƒç”¨ p.apply(f, args=(i,)) # åŒæ­¥è°ƒç”¨p.close()p.join() æ„é€ æ–¹æ³•12class multiprocessing.pool.Pool([processes[, initializer[, initargs[, maxtasksperchild[, context]]]]])# ä¸€ä¸ªè¿›ç¨‹æ± å¯¹è±¡ï¼Œå®ƒæ§åˆ¶å¯ä»¥æäº¤ä½œä¸šçš„å·¥ä½œè¿›ç¨‹æ± ã€‚å®ƒæ”¯æŒå¸¦æœ‰è¶…æ—¶å’Œå›è°ƒçš„å¼‚æ­¥ç»“æœï¼Œä»¥åŠä¸€ä¸ªå¹¶è¡Œçš„ map å®ç°ã€‚ processes è¿›ç¨‹æ•°ï¼Œé»˜è®¤é‡‡ç”¨ os.cpu_count() initializer(*initargs) è¿›ç¨‹æ± è°ƒç”¨å‰çš„åˆå§‹åŒ–æ–¹æ³• æ–¹æ³• apply(func[, args[, kwds]]) è¿”å›ç»“æœå‰é˜»å¡ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œapply_async() æ›´é€‚åˆå¹¶è¡ŒåŒ–å·¥ä½œã€‚å¦å¤– func åªä¼šåœ¨ä¸€ä¸ªè¿›ç¨‹æ± ä¸­çš„ä¸€ä¸ªå·¥ä½œè¿›ç¨‹ä¸­æ‰§è¡Œã€‚ apply_async(func[, args[, kwds[, callback[, error_callback]]]]) éé˜»å¡æ“ä½œ callback æ˜¯ä¸€ä¸ªåªæ¥å—ä¸€ä¸ªå‚æ•°çš„å¯è°ƒç”¨å¯¹è±¡ã€‚æˆåŠŸåˆ™æ‰§è¡Œcallbackï¼Œå¤±è´¥æ‰§è¡Œ error_callback map(func, iterable[, chunksize]) å†…ç½®å‡½æ•° map çš„å¹¶è¡Œç‰ˆæœ¬ï¼Œmapä¼š ä¿æŒé˜»å¡ ç›´åˆ°è·å¾—ç»“æœã€‚ iterable å¯ä»¥åˆ‡åˆ†æˆå¤šå—è¿è¡Œï¼Œchunksize æŒ‡å®šå—çš„å¤§å°ã€‚ å½“ iterable å¤ªå¤§çš„æ—¶å€™ï¼Œä¸ºäº†èŠ‚çœå†…å­˜ï¼Œå¯ä»¥ä½¿ç”¨ imap å’Œ imap_unordered map_async(func, iterable[, chunksize[, callback[, error_callback]]]) map çš„å¯¹åº”çš„å¼‚æ­¥å›è°ƒæ–¹æ³• imap(func, iterable[, chunksize] éœ€è¦æ˜¾å¼çš„è®¾ç½® chunksizeï¼Œå¯ä»¥æå¤§çš„åŠ å¿« map çš„é€Ÿåº¦ã€‚åŸå…ˆmapä¸­çš„é»˜è®¤å€¼ä¸º1ã€‚ imap_unordered imap çš„æ— åºç‰ˆæœ¬ apply_async å’Œ map_async é™¤äº†æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ä»¥å¤–ï¼Œå®ƒä»¬è¿˜ä¼šæ”¾å›ä¸€ä¸ª AsyncResult å¯¹è±¡ï¼Œå®ƒæœ‰å¦‚ä¸‹æ–¹æ³• get([timeout]) è·å–æ‰§è¡Œçš„ç»“æœ wait([timeout]) é˜»å¡ï¼Œç›´åˆ°è¿”å›ç»“æœ ready æ˜¯å¦å·²å®Œæˆç»“æœ successful æ˜¯å¦å·²å®Œæˆä¸”æ²¡æœ‰å‘ç”Ÿå¼‚å¸¸ è¿›ç¨‹é—´é€šä¿¡â€”â€”æ•°æ®ä¼ é€’multiprocessing æ”¯æŒä¸¤ç§é€šä¿¡æ–¹å¼ï¼šQueue(é˜Ÿåˆ—) , Pipe(ç®¡é“) åŸºç¡€ç”¨æ³•12345678910q = Queue(maxsize=4)q.put(obj, block=True, timeout=None) # å­˜å…¥é˜Ÿåˆ—ä¸­q.get(obj, block=False) # è¯»å–é˜Ÿåˆ—# block: æ˜¯å¦ä¸»åŠ¨é˜»å¡ï¼Œé˜»å¡çš„æ—¶é—´ä¸ºtimeoutã€‚timeout=None ä»£è¡¨ä¸€ç›´é˜»å¡ã€‚blockä¸º False çš„æ—¶å€™ï¼Œä¼šä¸»åŠ¨æŠ›å‡º queue.Full å’Œ queue.Empty çš„é”™è¯¯ã€‚# Pipe å»ºç«‹çš„æ˜¯ä¸€ä¸ªåŒå…¨å·¥çš„è¿æ¥parent_conn, child_conn = Pipe()parent_conn.send([42, None, 'hello']) # å‘é€parent_conn.close() # å…³é—­ ä¸€ç«¯çš„è¿æ¥ï¼Œå…³é—­åä¸å¯ä»¥å†æ¬¡è¿›è¡Œ send å’Œ recv æ“ä½œchild_conn.recv() # æ¥æ”¶ å¯ä»¥çœ‹å‡ºï¼ŒPipe æ˜¯åªèƒ½åœ¨ä¸¤ä¸ªè¿›ç¨‹è¿›è¡Œé€šä¿¡ï¼Œè€Œ Queue å¯ä»¥æ”¯æŒå¤šä¸ªé˜Ÿåˆ—ã€‚Pipe è§£å†³äº†è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡é—®é¢˜ï¼ŒQueue è¿˜åŠ ä¸Šäº†ä¸€ä¸ªç¼“å†²åŒºçš„ä½œç”¨ã€‚ é‚£ä¹ˆmultiprocessing.Queue å’Œ æ ‡å‡†åº“ä¸­çš„ queue çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ éœ€è¦æ³¨æ„çš„æ˜¯è¿™é‡Œæ˜¯å¤šè¿›ç¨‹ç¼–ç¨‹ï¼Œè¿›ç¨‹æ˜¯èµ„æºåˆ†é…çš„æœ€å°å•ä½ã€‚ä¸åŒçš„è¿›ç¨‹æ˜¯æ— æ³•è·å–å¯¹æ–¹å †æ ˆçš„ã€‚Queue å¯ä»¥è§£å†³è¿™ä¸€ä¸ªæ•°æ®å…±äº«çš„é—®é¢˜ã€‚å¦‚æœæˆ‘ä»¬ç°åœ¨é‡‡ç”¨çš„æ˜¯å¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç›´æ¥é‡‡ç”¨æ ‡å‡†åº“çš„queue æ¥æ›¿ä»£ã€‚ multiprocessing ä¸­çš„ Queue å®ç°äº†æ ‡å‡†åº“ä¸­çš„ queue ä¸­çš„æ‰€æœ‰æ–¹æ³•ï¼Œé™¤äº†task_done å’Œ join æ–¹æ³• Pipe çš„ä½¿ç”¨1234conn1, conn2 = multiprocessing.Pipe([duplex])# è¿”å› Connection å¯¹è±¡ conn1,conn2 åˆ†åˆ«ä»£è¡¨ç®¡é“çš„ä¸¤ç«¯ã€‚Connection ç±»å‹while conn1.poll(): conn1.recv() duplex: True ä»£è¡¨åŒå…¨å·¥ï¼Œå³ç®¡é“çš„ä¸¤ç«¯æ˜¯å¯ä»¥åŒå‘çš„é€šä¿¡çš„ã€‚False ä»£è¡¨å•å‘ï¼Œ conn1 åªèƒ½ç”¨äºæ¥æ”¶æ¶ˆæ¯ï¼Œè€Œ conn2 ä»…èƒ½ç”¨äºå‘é€æ¶ˆæ¯ã€‚ Connect å¯¹è±¡çš„æ–¹æ³•æœ‰ send/recv å‘é€çš„å¯¹è±¡å¿…é¡»æ˜¯å¯åºåˆ—åŒ–çš„ send_bytes(buffer[, offset[, size]]) / recv_bytes([maxlength]) / recv_bytes_into(buffer[, offset]) å‘é€ å’Œ æ¥å— bytes-like object å­—èŠ‚ç±»å¯¹è±¡ poll([timeout]) è¿”å›è¿æ¥å¯¹è±¡ä¸­æ˜¯å¦æœ‰å¯ä»¥è¯»å–çš„æ•°æ® close() å…³é—­ æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼ŒConnect çš„ä»…ä»…æ”¯æŒå°‘é‡æ•°æ®çš„å‘é€ï¼Œå¯¹äºå¤šå¤§çš„å¯¹è±¡ï¼ˆ32M+ï¼‰ï¼Œå¯èƒ½ä¼šå¼•å‘å¼‚å¸¸ Queue çš„ä½¿ç”¨1class multiprocessing.Queue([maxsize]) ä¸»è¦å®ç°äº†å¦‚ä¸‹å±æ€§&amp;æ–¹æ³•ï¼ŒåŸºæœ¬å’Œ queue ä¸€æ · qsize é˜Ÿåˆ—å¤§å°ï¼Œç”±äºæ˜¯å¤šè¿›ç¨‹çš„ä¸Šä¸‹æ–‡ï¼Œè¿™ä¸ªæ•°å­—ä¸æ˜¯å¾ˆå¯é ï¼Œè€Œä¸”åœ¨Mac OS X ä¸Šå¯èƒ½å­˜åœ¨å¼‚å¸¸ã€‚ empty æ˜¯å¦ä¸ºç©º full æ˜¯å¦ä¸ºæ»¡ put(obj[, block[, timeout]]) å½“æ²¡æœ‰å¯ç”¨ç¼“å†²æ§½çš„æ—¶ï¼ŒæŠ›å‡º queue.Empty å¼‚å¸¸ put_nowait(obj) ç­‰ä»·äº put(obj, False) get([block[, timeout]]) å½“æ²¡æœ‰å¯å–ç”¨å¯¹è±¡æ—¶ï¼ŒæŠ›å‡º queue.Empty å¼‚å¸¸ get_nowait() ç­‰ä»·äº get(False) close() æŒ‡ç¤ºå½“å‰è¿›ç¨‹å°†ä¸ä¼šå†å¾€é˜Ÿåˆ—ä¸­æ”¾å…¥å¯¹è±¡ Queueçš„å‡ ç§å˜å½¢ multiprocessing.SimpleQueue() ç®€åŒ–çš„é˜Ÿåˆ—ï¼Œå…¶åªå…·æœ‰emptyã€getã€put3ä¸ªæ–¹æ³•ã€‚ è¿™ä¸ªé˜Ÿåˆ—å®é™…ä¸Šæ˜¯ç”¨ Pipe å®ç°çš„ multiprocessing.JoinableQueue(maxsize=0) å»ºç«‹å¯é˜»å¡çš„é˜Ÿåˆ—å®ä¾‹ï¼Œé‡‡ç”¨ä¸€èˆ¬é˜Ÿåˆ—çš„æ–¹å¼è®¿é—®ã€‚åŠ ä¸Šäº† join å’Œ task_done ä¸¤ä¸ªæ–¹æ³•ã€‚ è¿›ç¨‹é—´é€šä¿¡â€”â€”æ•°æ®å…±äº«è¿›ç¨‹é—´çš„é€šä¿¡ Pipe å’Œ Queue èƒ½è§£å†³å°æ‰¹é‡æ•°æ®çš„ä¼ è¾“ï¼Œå¦‚ Pipe.send() æ–¹æ³•å‘é€çš„æ•°æ®ä¸€èˆ¬ä¸è¶…è¿‡ 32Mã€‚å¯¹äºå¤§é‡çš„æ•°æ®ï¼Œå¯ä»¥å€ŸåŠ© å…±äº«å†…å­˜ å’Œ Manager ç±»å®ç°ã€‚Managerå®ç°äº†ä¸¤ä¸ªé‡è¦çš„ç±»å‹ list å’Œ dictã€‚ Manager ç±»ï¼ˆå…±äº«è¿›ç¨‹ï¼‰123456789101112131415161718192021222324252627282930import multiprocessingimport timedef f(list, x): print(list, x) list.append(x)if __name__ == '__main__': manager = multiprocessing.Manager() mag_list = manager.list([]) with multiprocessing.Pool(4) as p: for item in [1, 2, 3]: p.apply(f, args=(mag_list, item)) p.close() print(mag_list)# output: # [] 1# [1] 2# [1, 2] 3# [1, 2, 3]# å¯ä»¥å°è¯• mag_list=[] ,æœ€åçš„ç»“æœæ˜¯ä¸ä¼šå‘ç”Ÿä»»ä½•å˜åŒ–# [] 1# [] 2# [] 3# [] Value, Arrayï¼ˆå…±äº«å†…å­˜ï¼‰12multiprocessing.Value(typecode_or_type, *args, lock=True)multiprocessing.Array(typecode_or_type, size_or_initializer, *, lock=True) typecode_or_type ç±»å‹ç  size_or_initializer å¤§å°ï¼Œæˆ–è€…åˆå§‹åŒ–æ“ä½œ 12multiprocessing.Array('i', 3) # ç»“æœ [0,0,0]multiprocessing.Array('i', range(3)) # ç»“æœ [0,1,2] Lock é”æ“ä½œï¼Œåœ¨ä¿®æ”¹è®¿é—®æ•°æ®çš„æ—¶å€™ï¼Œé€šè¿‡è®¾ç½®ä¸º True èƒ½é”å®šèµ„æºï¼Œé˜»å¡å…¶ä»–è¿›ç¨‹çš„è®¿é—®ã€‚ ä¾‹å­123v = multiprocessing.Value('d', 10, lock=True)with v.get_lock(): # ä¿®æ”¹å€¼å‰ï¼ŒåŠ é” v.value += 1 # å±æ€§ value å–å€¼ æ•°æ®è¿›ç¨‹é”ä¸Šä¸€éƒ¨åˆ†è§£å†³äº†è¿›ç¨‹é—´å…±äº«æ•°æ®çš„æ“ä½œã€‚ä½†æ˜¯ä¸åŒè¿›ç¨‹è‹¥æ˜¯éœ€è¦å¯¹äºå…±äº«æ•°æ®è¿›è¡Œä¿®æ”¹ï¼Œå¯èƒ½ä¼šå‘ç”Ÿå†²çªã€‚è§£å†³è¿™ä¸€ç±»é—®é¢˜çš„æ–¹å¼å°±æ˜¯åœ¨ é‡è¦æ•°æ®ä¿®æ”¹çš„æ—¶å€™åŠ ä¸Šé”ï¼Œä¿®æ”¹å®Œæ¯•å†é‡Šæ”¾ã€‚ multiprocessing çš„ äº’æ–¥&amp;åŒæ­¥æ“ä½œæœ‰ï¼š Lock, Semaphore , Event å’Œ Barrier Lock åŸå§‹é”åŸå§‹é”ï¼ˆéé€’å½’é”ï¼‰å¯¹è±¡ï¼Œä¸€æ—¦ä¸€ä¸ªè¿›ç¨‹æˆ–è€…çº¿ç¨‹æ‹¿åˆ°äº†é”ï¼Œåç»­çš„ä»»ä½•å…¶ä»–è¿›ç¨‹æˆ–çº¿ç¨‹çš„å…¶ä»–è¯·æ±‚éƒ½ä¼šè¢«é˜»å¡ç›´åˆ°é”è¢«é‡Šæ”¾ã€‚ä»»ä½•è¿›ç¨‹æˆ–çº¿ç¨‹éƒ½å¯ä»¥é‡Šæ”¾é”ã€‚ Lock ä¸€èˆ¬åªé’ˆå¯¹ä¸€ä¸ªèµ„æºåŒæ­¥è®¿é—® RLock é€’å½’é”é€’å½’é”å¿…é¡»ç”±æŒæœ‰çº¿ç¨‹ã€è¿›ç¨‹äº²è‡ªé‡Šæ”¾ã€‚é€’å½’é”å’ŒåŸå§‹é”çš„åŒºåˆ«æ˜¯ï¼Œä¸€ä¸ªè¿›ç¨‹å¯ä»¥å¤šæ¬¡åŠ é”ï¼Œæ¯æ¬¡åŠ é”ï¼Œé”åŠ ä¸€ã€‚æ¯æ¬¡é‡Šæ”¾ï¼Œé”å‡ä¸€ã€‚æ‰€ä»¥å½“è·å¾—é”å’Œé‡Šæ”¾é”çš„æ•°é‡ç›¸ç­‰çš„æ—¶å€™ï¼Œæ‰èƒ½é‡Šæ”¾é”ä½çš„èµ„æºã€‚ä½¿ç”¨æ–¹æ³•å’ŒLock ä¸€æ ·ã€‚ Semaphore ä¿¡å·é‡Semaphore ä¸€èˆ¬æ˜¯é’ˆå¯¹å¤šä¸ª(æœ‰é™)èµ„æºçš„è®¿é—®çš„ï¼Œå®ƒçš„æ“ä½œå’ŒLockä¸€æ ·ã€‚åªæ˜¯åˆå§‹åŒ–çš„æ—¶å€™ï¼Œéœ€è¦ç»™å‡ºå‹å·é‡çš„åˆå§‹å€¼ã€‚å¯ä»¥è®¤ä¸ºSemaphore(1) å’Œ RLockæ˜¯ç›¸åŒçš„ã€‚ ä¸Šé¢ä¸‰ä¸ªé”çš„ä½¿ç”¨æ–¹æ³•éƒ½å¯ä»¥ä½¿ç”¨ acquire/release æ“ä½œ Barrier å±éšœå½“è‹¥å¹²ä¸ªè¿›ç¨‹æ²¡æœ‰åˆ°è¾¾å±éšœç‚¹çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨é˜»å¡ï¼Œä¸€æ—¦åˆ°è¾¾å±éšœç‚¹ï¼Œå°†ä¼šè‡ªåŠ¨è§£é™¤é˜»å¡å¹¶å¯åŠ¨è¿è¡Œ 1class threading.Barrier(parties, action=None, timeout=None) parties æ …æ çš„ä¸ªæ•° action å½“çªç ´æ …æ åï¼Œä¼šåœ¨è¢«é‡Šæ”¾çš„å…¶ä¸­ä¸€ä¸ªè¿›ç¨‹ä¸­è¿è¡Œ å±æ€§ n_waiting å½“å‰æ—¶åˆ»æ­£åœ¨æ …æ ä¸­é˜»å¡çš„çº¿ç¨‹æ•°é‡ã€‚ broken å€¼ä¸º True è¡¨æ˜æ …æ ä¸ºç ´æŸæ€ã€‚ æ–¹æ³• wait(timeout=None) é˜»å¡æ“ä½œï¼Œå‡½æ•°ä¼šè¿”å›ä¸€ä¸ªèŒƒå›´åœ¨ 0~parties-1 å†…çš„æ•´æ•°ã€‚å½“ä¸º0 çš„æ—¶å€™ï¼Œä»£è¡¨æ …æ ç ´è£‚ reset() é‡ç½®ä¸ºåˆå§‹çŠ¶æ€ abort() ä¸reset() ç›¸åï¼Œè®¾ç½®ä¸ºç ´æŸçŠ¶æ€ Event äº‹ä»¶é”è¿™æ˜¯çº¿ç¨‹ä¹‹é—´é€šä¿¡çš„æœ€ç®€å•æœºåˆ¶ä¹‹ä¸€ï¼šä¸€ä¸ªçº¿ç¨‹å‘å‡ºäº‹ä»¶ä¿¡å·ï¼Œè€Œå…¶ä»–çº¿ç¨‹ç­‰å¾…è¯¥ä¿¡å·ã€‚ æ–¹æ³• is_set() åˆ¤æ–­å†…éƒ¨æ ‡è¯†ä½æ˜¯å¦ä¸ºTrue set() è®¾ç½®å†…éƒ¨æ ‡è¯†ä½ä¸ºTrue clear() è®¾ç½®å†…éƒ¨æ ‡è¯†ä½ä¸ºFalse wait() é˜»å¡çº¿ç¨‹ç›´åˆ°å†…éƒ¨å˜é‡ä¸ºtrueã€‚å¦‚æœè°ƒç”¨æ—¶å†…éƒ¨æ ‡å¿—ä¸ºtrueï¼Œå°†ç«‹å³è¿”å›ã€‚å¦åˆ™å°†é˜»å¡çº¿ç¨‹ï¼Œ ä¾‹å­ç”±äºä¹‹å‰æ²¡æœ‰æ¥è§¦è¿‡Eventï¼Œè¿™é‡Œè‡ªå·±ç»ƒæ‰‹å†™äº†ä¸€ä¸ªEvent çš„å°ä¾‹å­ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960import multiprocessingimport timedef car(e, car_id): print(f'car &#123;car_id&#125; is coming ') if not e.is_set(): print(f'car &#123;car_id&#125; is waiting') e.wait() if e.is_set(): print(f'car &#123;car_id&#125; pass the cross road')def traffic_light(e): \"\"\" çº¢ç»¿ç¯åˆ‡æ¢çš„æ—¶å€™ï¼Œe.clear å’Œ e.set æ˜¯æˆé˜Ÿå‡ºç°çš„ã€‚ å› ä¸ºçº¢ç»¿æœ¬çœå°±æ˜¯ç›¸äº’åŒæ­¥çš„ä¸€ä¸ªæ“ä½œ \"\"\" while True: # æ¯5ç§’åˆ‡æ¢ä¸€æ¬¡çº¢ç»¿ç¯ if e.is_set(): time.sleep(2) print('&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; green to red &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;') e.clear() if not e.is_set(): time.sleep(2) print('&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; red to green &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;') e.set()if __name__ == '__main__': event = multiprocessing.Event() event.clear() # é»˜è®¤è®¾ç½®çº¢ç¯ cars = [multiprocessing.Process(target=car, args=(event,car_id)) for car_id in range(10)] lights = multiprocessing.Process(target=traffic_light, args=(event,)) lights.daemon = True # è®¾ç½®å®Œè¿™ä¸€æ­¥ï¼Œå¯ä»¥åœ¨å°æ±½è½¦éƒ½å¼€èµ°åï¼Œç»“æŸæ•´ä¸ªç¨‹åºã€‚ lights.start() for each in cars: each.start() time.sleep(1) # é—´éš”ä¸€ç§’é’Ÿå‘è½¦ for each in cars: each.join() # å½“ each.join æ‰§è¡Œå®Œæ¯•ï¼Œæ­¤æ—¶ traffic_light è¿˜åœ¨åå°è¿è¡Œ # ä½†æ˜¯ç”±äºæ²¡æœ‰æ·»åŠ  traffic_light.join() æ‰€ä»¥æ­¤æ—¶ mian ç»“æŸï¼Œå¸¦ç€å®ˆæŠ¤è¿›ç¨‹ traffic_lightä¸€èµ·ç»“æŸ# è¾“å‡ºç»“æœå¦‚ä¸‹car 0 is coming car 0 is waitingcar 1 is coming car 1 is waiting&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; red to green &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;....&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; green to red &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;car 8 is coming car 8 is waitingcar 9 is coming car 9 is waiting&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; red to green &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;car 8 pass the cross roadcar 9 pass the cross road å¦‚æœæˆ‘ä»¬ä¸å¯åŠ¨å®ˆæŠ¤è¿›ç¨‹ï¼Œè€Œæ˜¯ä¸€ç›´è®©ç¨‹åºåœ¨åå°è¿è¡Œã€‚è¿™æ ·æˆ‘ä»¬å¯ä»¥æ„Ÿå—åˆ° å®ˆæŠ¤è¿›ç¨‹ çš„ä½œç”¨ 12345678910111213141516171819 cars = [multiprocessing.Process(target=car, args=(event,car_id)) for car_id in range(10)] lights = multiprocessing.Process(target=traffic_light, args=(event,))- lights.daemon = True # è®¾ç½®å®Œè¿™ä¸€æ­¥ï¼Œå¯ä»¥åœ¨å°æ±½è½¦éƒ½å¼€èµ°åï¼Œç»“æŸæ•´ä¸ªç¨‹åºã€‚ lights.start() for each in cars: each.start() time.sleep(1) # é—´éš”ä¸€ç§’é’Ÿå‘è½¦ for each in cars: each.join()+ lights.join() # # è¾“å‡ºç»“æœå¦‚ä¸‹&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; red to green &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;car 9 pass the cross roadcar 8 pass the cross road&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; green to red &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; red to green &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; green to red &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; red to green &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Condition æ¡ä»¶é”å‡ ç§æ–¹æ³•çš„æ¯”è¾ƒ æ–¹æ³• åç§° ä½œç”¨ Lock åŸå§‹é” å½“å¤šä¸ªè¿›ç¨‹éœ€è¦è®¿é—®å…±äº«èµ„æºçš„æ—¶å€™ï¼Œã€ RLock é€’å½’é” Lock çš„å‡çº§ Semaphore ä¿¡å·é‡ï¼ˆè®¡æ•°å™¨é”ï¼‰ Semaphoreç”¨æ¥æ§åˆ¶å¯¹å…±äº«èµ„æºçš„è®¿é—®æ•°é‡ï¼Œä¾‹å¦‚æ± çš„æœ€å¤§è¿æ¥æ•°ã€‚ Barrier æ—¶é—´é” è¿›ç¨‹é—´åŒæ­¥é€šä¿¡ Barrier éšœç¢é” ç­‰å¾…è¶³å¤Ÿèµ„æºå¯åŠ¨ å‚è€ƒèµ„æ–™pythonå®˜æ–¹æ–‡æ¡£ Bç«™ã€æå…´åç¼–ç¨‹è®­ç»ƒè¥ã€‘Pythonå¹¶å‘ç¼–ç¨‹ çŸ¥ä¹pythonå¹¶è¡Œè®¡ç®—ï¼ˆä¸Šï¼‰ï¼šmultiprocessingã€multiprocessæ¨¡å—","categories":[{"name":"python","slug":"python","permalink":"http://ppsteven.github.io/categories/python/"}],"tags":[{"name":"python","slug":"python","permalink":"http://ppsteven.github.io/tags/python/"},{"name":"multiprocessing","slug":"multiprocessing","permalink":"http://ppsteven.github.io/tags/multiprocessing/"}]},{"title":"mysql å¸¸ç”¨å‘½ä»¤","slug":"mysql-freq-command","date":"2020-03-01T14:38:46.000Z","updated":"2020-06-13T13:17:22.370Z","comments":false,"path":"2020/03/01/mysql-freq-command/","link":"","permalink":"http://ppsteven.github.io/2020/03/01/mysql-freq-command/","excerpt":"æ…¢æ…¢æ€»ç»“å¸¸ç”¨çš„çš„mysql å‘½ä»¤ï¼Œçœ‹åšæ˜¯å¹³æ—¶å·¥ä½œçš„â€œç¼“å­˜â€","text":"æ…¢æ…¢æ€»ç»“å¸¸ç”¨çš„çš„mysql å‘½ä»¤ï¼Œçœ‹åšæ˜¯å¹³æ—¶å·¥ä½œçš„â€œç¼“å­˜â€ ä¿®æ”¹å¯†ç å¼ºåº¦ä¿®æ”¹å¯†ç å¼ºåº¦ä¸€èˆ¬æ˜¯mysql5.7 å‡çº§åˆ° mysql8.0ï¼Œæˆ–è€…æ˜¯åˆšåˆšå®‰è£…mysql8.0æ—¶å€™å¾ˆå®¹æ˜“ç¢°åˆ°çš„é—®é¢˜ã€‚ 12345678# æŸ¥çœ‹å¯†ç éœ€è¦æ»¡è¶³çš„æ¡ä»¶SHOW VARIABLES LIKE &apos;validate_password%&apos;; # validate_password_policyä»£è¡¨å¯†ç ç­–ç•¥ï¼Œé»˜è®¤æ˜¯1ï¼šç¬¦åˆé•¿åº¦ï¼Œä¸”å¿…é¡»å«æœ‰æ•°å­—ï¼Œå°å†™æˆ–å¤§å†™å­—æ¯ï¼Œç‰¹æ®Šå­—ç¬¦ã€‚è®¾ç½®ä¸º0åˆ¤æ–­å¯†ç çš„æ ‡å‡†å°±åŸºäºå¯†ç çš„é•¿åº¦äº†ã€‚ä¸€å®šè¦å…ˆä¿®æ”¹ä¸¤ä¸ªå‚æ•°å†ä¿®æ”¹å¯†ç set global validate_password.policy=0;# validate_password_lengthä»£è¡¨å¯†ç é•¿åº¦ï¼Œæœ€å°å€¼ä¸º4set global validate_password.length=4; yumå®‰è£…mysql ä¸‹è½½é€Ÿåº¦æ…¢12345678910# å¤‡ä»½ç³»ç»Ÿè‡ªå¸¦yumæºé…ç½®æ–‡ä»¶mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup# ä¸‹è½½ailiyunçš„yumæºé…ç½®æ–‡ä»¶(é˜¿é‡Œäº‘é€Ÿåº¦æ¯”è¾ƒå¿«)wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo# ç”Ÿæˆç¼“å­˜yum makecache# yum å‡çº§yum -y update# å®‰è£…yumyum install -y mysql-server åˆ›å»ºæ–°çš„ç”¨æˆ·123456789101112# åˆ›å»ºæ–°ç”¨æˆ· reader01ï¼Œ èµ‹äºˆå¯†ç &apos;onlyread@123&apos;CREATE USER `reader01`@`%` IDENTIFIED by &apos;onlyread@123&apos;;# èµ‹äºˆ select æƒé™ï¼Œ èµ‹äºˆnongwei_synæ‰€æœ‰æ•°æ®è¡¨çš„è®¿é—®æƒé™GRANT SELECT ON `nongwei_syn`.* TO `reader01`@`%` ;# é™ä½ mysql åŠ å¯†è§„åˆ™ALTER USER `reader01`@`%` IDENTIFIED WITH mysql_native_password BY &apos;onlyread@123&apos;;# åˆ·æ–°ä¸€ä¸‹æƒé™flush privileges;# æŸ¥çœ‹ç”¨æˆ·çš„æƒé™show grants for reader01;GRANT USAGE ON *.* TO `reader01`@`%`GRANT SELECT ON `nongwei_syn`.* TO `reader01`@`%` æ•°æ®å­—å…¸æ˜¾ç¤ºæ˜¾ç¤ºå­—æ®µçš„è¯¦ç»†ä¿¡æ¯ï¼ˆåŒ…å«COMMENTï¼‰ 1show full columns from d_dbname.t_table_name å»ºè®®æ¯æ¬¡å»ºè¡¨çš„æ—¶å€™ï¼Œéƒ½å¸¦ä¸ŠCOMMENT å¦‚æœä½ ä¸€å¼€å§‹å¹¶æ²¡æœ‰è¿™æ ·åšçš„è¯ï¼Œéœ€è¦å€ŸåŠ© alter æ¥æ·»åŠ  COMMENT 1alter table `d_dbname`.`t_table_name` modify column foodtype varchar(20) COMMENT &apos;å“ç§&apos;; æ˜¾ç¤ºå»ºè¡¨çš„SQL 1234567891011121314151617show create table `d_dbname`.`t_table_name`# output:CREATE TABLE `t_vegnet_price_202003` ( `id` int NOT NULL AUTO_INCREMENT COMMENT &apos;åºå·&apos;, `foodtype` varchar(20) DEFAULT NULL COMMENT &apos;å“ç§&apos;, `market` varchar(30) DEFAULT NULL COMMENT &apos;æ‰¹å‘å¸‚åœº&apos;, `lprice` float(10,2) DEFAULT NULL COMMENT &apos;æœ€ä½ä»·&apos;, `hprice` float(10,2) DEFAULT NULL COMMENT &apos;æœ€é«˜ä»·&apos;, `avgprice` float(10,2) DEFAULT NULL COMMENT &apos;å¹³å‡ä»·&apos;, `unit` varchar(20) DEFAULT NULL COMMENT &apos;è®¡é‡å•ä½&apos;, `date` varchar(10) DEFAULT NULL COMMENT &apos;æ—¥æœŸ&apos;, `pagenum` int DEFAULT NULL COMMENT &apos;é¡µç &apos;, `create_time` datetime DEFAULT CURRENT_TIMESTAMP COMMENT &apos;åˆ›å»ºæ—¶é—´&apos;, PRIMARY KEY (`id`), UNIQUE KEY `date` (`date`,`foodtype`,`market`)) ENGINE=InnoDB AUTO_INCREMENT=42501 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci","categories":[{"name":"mysql","slug":"mysql","permalink":"http://ppsteven.github.io/categories/mysql/"}],"tags":[{"name":"mysql","slug":"mysql","permalink":"http://ppsteven.github.io/tags/mysql/"}]},{"title":"ã€è½¬è½½ã€‘ mysqlè§¦å‘å™¨trigger å®ä¾‹è¯¦è§£","slug":"è½¬è½½/mysqlè§¦å‘å™¨trigger å®ä¾‹è¯¦è§£","date":"2020-02-29T17:35:50.000Z","updated":"2020-02-29T18:47:35.334Z","comments":false,"path":"2020/03/01/è½¬è½½/mysqlè§¦å‘å™¨trigger å®ä¾‹è¯¦è§£/","link":"","permalink":"http://ppsteven.github.io/2020/03/01/%E8%BD%AC%E8%BD%BD/mysql%E8%A7%A6%E5%8F%91%E5%99%A8trigger%20%E5%AE%9E%E4%BE%8B%E8%AF%A6%E8%A7%A3/","excerpt":"mysqlè§¦å‘å™¨trigger å®ä¾‹è¯¦è§£MySQLå¥½åƒä»5.0.2ç‰ˆæœ¬å°±å¼€å§‹æ”¯æŒè§¦å‘å™¨çš„åŠŸèƒ½äº†ï¼Œæœ¬æ¬¡åšå®¢å°±æ¥ä»‹ç»ä¸€ä¸‹è§¦å‘å™¨ï¼Œé¦–å…ˆè¿˜æ˜¯è°ˆä¸‹æ¦‚å¿µæ€§çš„ä¸œè¥¿å§ï¼š ä»€ä¹ˆæ˜¯è§¦å‘å™¨è§¦å‘å™¨æ˜¯ä¸è¡¨æœ‰å…³çš„æ•°æ®åº“å¯¹è±¡ï¼Œåœ¨æ»¡è¶³å®šä¹‰æ¡ä»¶æ—¶è§¦å‘ï¼Œå¹¶æ‰§è¡Œè§¦å‘å™¨ä¸­å®šä¹‰çš„è¯­å¥é›†åˆã€‚è§¦å‘å™¨çš„è¿™ç§ç‰¹æ€§å¯ä»¥ååŠ©åº”ç”¨åœ¨æ•°æ®åº“ç«¯ç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚ä½ ç°åœ¨æœ‰ä¸¤ä¸ªè¡¨ã€ç”¨æˆ·è¡¨ã€‘å’Œã€æ—¥å¿—è¡¨ã€‘ï¼Œå½“ä¸€ä¸ªç”¨æˆ·è¢«åˆ›å»ºçš„æ—¶å€™ï¼Œå°±éœ€è¦åœ¨æ—¥å¿—è¡¨ä¸­æ’å…¥åˆ›å»ºçš„logæ—¥å¿—ï¼Œå¦‚æœåœ¨ä¸ä½¿ç”¨è§¦å‘å™¨çš„æƒ…å†µä¸‹ï¼Œä½ éœ€è¦ç¼–å†™ç¨‹åºè¯­è¨€é€»è¾‘æ‰èƒ½å®ç°ï¼Œä½†æ˜¯å¦‚æœä½ å®šä¹‰äº†ä¸€ä¸ªè§¦å‘å™¨ï¼Œè§¦å‘å™¨çš„ä½œç”¨å°±æ˜¯å½“ä½ åœ¨ç”¨æˆ·è¡¨ä¸­æ’å…¥ä¸€æ¡æ•°æ®çš„ä¹‹åå¸®ä½ åœ¨æ—¥å¿—è¡¨ä¸­æ’å…¥ä¸€æ¡æ—¥å¿—ä¿¡æ¯ã€‚å½“ç„¶è§¦å‘å™¨å¹¶ä¸æ˜¯åªèƒ½è¿›è¡Œæ’å…¥æ“ä½œï¼Œè¿˜èƒ½æ‰§è¡Œä¿®æ”¹ï¼Œåˆ é™¤ã€‚","text":"mysqlè§¦å‘å™¨trigger å®ä¾‹è¯¦è§£MySQLå¥½åƒä»5.0.2ç‰ˆæœ¬å°±å¼€å§‹æ”¯æŒè§¦å‘å™¨çš„åŠŸèƒ½äº†ï¼Œæœ¬æ¬¡åšå®¢å°±æ¥ä»‹ç»ä¸€ä¸‹è§¦å‘å™¨ï¼Œé¦–å…ˆè¿˜æ˜¯è°ˆä¸‹æ¦‚å¿µæ€§çš„ä¸œè¥¿å§ï¼š ä»€ä¹ˆæ˜¯è§¦å‘å™¨è§¦å‘å™¨æ˜¯ä¸è¡¨æœ‰å…³çš„æ•°æ®åº“å¯¹è±¡ï¼Œåœ¨æ»¡è¶³å®šä¹‰æ¡ä»¶æ—¶è§¦å‘ï¼Œå¹¶æ‰§è¡Œè§¦å‘å™¨ä¸­å®šä¹‰çš„è¯­å¥é›†åˆã€‚è§¦å‘å™¨çš„è¿™ç§ç‰¹æ€§å¯ä»¥ååŠ©åº”ç”¨åœ¨æ•°æ®åº“ç«¯ç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚ä½ ç°åœ¨æœ‰ä¸¤ä¸ªè¡¨ã€ç”¨æˆ·è¡¨ã€‘å’Œã€æ—¥å¿—è¡¨ã€‘ï¼Œå½“ä¸€ä¸ªç”¨æˆ·è¢«åˆ›å»ºçš„æ—¶å€™ï¼Œå°±éœ€è¦åœ¨æ—¥å¿—è¡¨ä¸­æ’å…¥åˆ›å»ºçš„logæ—¥å¿—ï¼Œå¦‚æœåœ¨ä¸ä½¿ç”¨è§¦å‘å™¨çš„æƒ…å†µä¸‹ï¼Œä½ éœ€è¦ç¼–å†™ç¨‹åºè¯­è¨€é€»è¾‘æ‰èƒ½å®ç°ï¼Œä½†æ˜¯å¦‚æœä½ å®šä¹‰äº†ä¸€ä¸ªè§¦å‘å™¨ï¼Œè§¦å‘å™¨çš„ä½œç”¨å°±æ˜¯å½“ä½ åœ¨ç”¨æˆ·è¡¨ä¸­æ’å…¥ä¸€æ¡æ•°æ®çš„ä¹‹åå¸®ä½ åœ¨æ—¥å¿—è¡¨ä¸­æ’å…¥ä¸€æ¡æ—¥å¿—ä¿¡æ¯ã€‚å½“ç„¶è§¦å‘å™¨å¹¶ä¸æ˜¯åªèƒ½è¿›è¡Œæ’å…¥æ“ä½œï¼Œè¿˜èƒ½æ‰§è¡Œä¿®æ”¹ï¼Œåˆ é™¤ã€‚ åˆ›å»ºè§¦å‘å™¨åˆ›å»ºè§¦å‘å™¨çš„è¯­æ³•å¦‚ä¸‹ï¼š 123456789CREATE TRIGGER trigger_name trigger_time trigger_event ON tb_name FOR EACH ROW trigger_stmttrigger_nameï¼šè§¦å‘å™¨çš„åç§°tirgger_timeï¼šè§¦å‘æ—¶æœºï¼Œä¸ºBEFOREæˆ–è€…AFTERtrigger_eventï¼šè§¦å‘äº‹ä»¶ï¼Œä¸ºINSERTã€DELETEæˆ–è€…UPDATEtb_nameï¼šè¡¨ç¤ºå»ºç«‹è§¦å‘å™¨çš„è¡¨æ˜ï¼Œå°±æ˜¯åœ¨å“ªå¼ è¡¨ä¸Šå»ºç«‹è§¦å‘å™¨trigger_stmtï¼šè§¦å‘å™¨çš„ç¨‹åºä½“ï¼Œå¯ä»¥æ˜¯ä¸€æ¡SQLè¯­å¥æˆ–è€…æ˜¯ç”¨BEGINå’ŒENDåŒ…å«çš„å¤šæ¡è¯­å¥æ‰€ä»¥å¯ä»¥è¯´MySQLåˆ›å»ºä»¥ä¸‹å…­ç§è§¦å‘å™¨ï¼šBEFORE INSERT,BEFORE DELETE,BEFORE UPDATEAFTER INSERT,AFTER DELETE,AFTER UPDATE å…¶ä¸­ï¼Œè§¦å‘å™¨åå‚æ•°æŒ‡è¦åˆ›å»ºçš„è§¦å‘å™¨çš„åå­— BEFOREå’ŒAFTERå‚æ•°æŒ‡å®šäº†è§¦å‘æ‰§è¡Œçš„æ—¶é—´ï¼Œåœ¨äº‹ä»¶ä¹‹å‰æˆ–æ˜¯ä¹‹å FOR EACH ROWè¡¨ç¤ºä»»ä½•ä¸€æ¡è®°å½•ä¸Šçš„æ“ä½œæ»¡è¶³è§¦å‘äº‹ä»¶éƒ½ä¼šè§¦å‘è¯¥è§¦å‘å™¨ åˆ›å»ºæœ‰å¤šä¸ªæ‰§è¡Œè¯­å¥çš„è§¦å‘å™¨12345CREATE TRIGGER è§¦å‘å™¨å BEFORE|AFTER è§¦å‘äº‹ä»¶ON è¡¨å FOR EACH ROWBEGIN æ‰§è¡Œè¯­å¥åˆ—è¡¨END å…¶ä¸­ï¼ŒBEGINä¸ENDä¹‹é—´çš„æ‰§è¡Œè¯­å¥åˆ—è¡¨å‚æ•°è¡¨ç¤ºéœ€è¦æ‰§è¡Œçš„å¤šä¸ªè¯­å¥ï¼Œä¸åŒè¯­å¥ç”¨åˆ†å·éš”å¼€ tipsï¼šä¸€èˆ¬æƒ…å†µä¸‹ï¼Œmysqlé»˜è®¤æ˜¯ä»¥ ; ä½œä¸ºç»“æŸæ‰§è¡Œè¯­å¥ï¼Œä¸è§¦å‘å™¨ä¸­éœ€è¦çš„åˆ†è¡Œèµ·å†²çª ä¸ºè§£å†³æ­¤é—®é¢˜å¯ç”¨DELIMITERï¼Œå¦‚ï¼šDELIMITER ||ï¼Œå¯ä»¥å°†ç»“æŸç¬¦å·å˜æˆ|| å½“è§¦å‘å™¨åˆ›å»ºå®Œæˆåï¼Œå¯ä»¥ç”¨DELIMITER ;æ¥å°†ç»“æŸç¬¦å·å˜æˆ; 1234567891011mysql&gt; DELIMITER ||mysql&gt; CREATE TRIGGER demo BEFORE DELETE -&gt; ON users FOR EACH ROW -&gt; BEGIN -&gt; INSERT INTO logs VALUES(NOW()); -&gt; INSERT INTO logs VALUES(NOW()); -&gt; END -&gt; ||Query OK, 0 rows affected (0.06 sec)mysql&gt; DELIMITER ; ä¸Šé¢çš„è¯­å¥ä¸­ï¼Œå¼€å¤´å°†ç»“æŸç¬¦å·å®šä¹‰ä¸º||ï¼Œä¸­é—´å®šä¹‰ä¸€ä¸ªè§¦å‘å™¨ï¼Œä¸€æ—¦æœ‰æ»¡è¶³æ¡ä»¶çš„åˆ é™¤æ“ä½œ å°±ä¼šæ‰§è¡ŒBEGINå’ŒENDä¸­çš„è¯­å¥ï¼Œæ¥ç€ä½¿ç”¨||ç»“æŸ æœ€åä½¿ç”¨DELIMITER ; å°†ç»“æŸç¬¦å·è¿˜åŸ tigger_eventï¼š load dataè¯­å¥æ˜¯å°†æ–‡ä»¶çš„å†…å®¹æ’å…¥åˆ°è¡¨ä¸­ï¼Œç›¸å½“äºæ˜¯insertè¯­å¥ï¼Œè€Œreplaceè¯­å¥åœ¨ä¸€èˆ¬çš„æƒ…å†µä¸‹å’Œinsertå·®ä¸å¤šï¼Œä½†æ˜¯å¦‚æœè¡¨ä¸­å­˜åœ¨primary æˆ–è€…uniqueç´¢å¼•çš„æ—¶å€™ï¼Œå¦‚æœæ’å…¥çš„æ•°æ®å’ŒåŸæ¥çš„primary keyæˆ–è€…uniqueç›¸åŒçš„æ—¶å€™ï¼Œä¼šåˆ é™¤åŸæ¥çš„æ•°æ®ï¼Œç„¶åå¢åŠ ä¸€æ¡æ–°çš„æ•°æ®ï¼Œæ‰€ä»¥æœ‰çš„æ—¶å€™æ‰§è¡Œä¸€æ¡replaceè¯­å¥ç›¸å½“äºæ‰§è¡Œäº†ä¸€æ¡deleteå’Œinsertè¯­å¥ã€‚ è§¦å‘å™¨å¯ä»¥æ˜¯ä¸€æ¡SQLè¯­å¥ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šæ¡SQLä»£ç å—ï¼Œé‚£å¦‚ä½•åˆ›å»ºå‘¢ï¼Ÿ 12345678DELIMITER $ #å°†è¯­å¥çš„åˆ†éš”ç¬¦æ”¹ä¸º$BEGINsql1;sql2;...sqlnEND $DELIMITER ; #å°†è¯­å¥çš„åˆ†éš”ç¬¦æ”¹å›åŸæ¥çš„åˆ†å·&quot;;&quot; åœ¨BEGINâ€¦ENDè¯­å¥ä¸­ä¹Ÿå¯ä»¥å®šä¹‰å˜é‡ï¼Œä½†æ˜¯åªèƒ½åœ¨BEGINâ€¦ENDå†…éƒ¨ä½¿ç”¨ï¼š 12DECLARE var_name var_type [DEFAULT value] #å®šä¹‰å˜é‡ï¼Œå¯æŒ‡å®šé»˜è®¤å€¼SET var_name = value #ç»™å˜é‡èµ‹å€¼ NEWå’ŒOLDçš„ä½¿ç”¨: æ ¹æ®ä»¥ä¸Šçš„è¡¨æ ¼ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸‹æ ¼å¼æ¥ä½¿ç”¨ç›¸åº”çš„æ•°æ®ï¼š 12NEW.columnnameï¼šæ–°å¢è¡Œçš„æŸåˆ—æ•°æ®OLD.columnnameï¼šåˆ é™¤è¡Œçš„æŸåˆ—æ•°æ® è¯´äº†è¿™ä¹ˆå¤šç°åœ¨æˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ªè§¦å‘å™¨å§ï¼ ç°åœ¨æœ‰è¡¨å¦‚ä¸‹ï¼šç”¨æˆ·usersè¡¨ 1234567CREATE TABLE `users` ( `id` int(11) unsigned NOT NULL AUTO_INCREMENT, `name` varchar(255) CHARACTER SET utf8mb4 DEFAULT NULL, `add_time` int(11) DEFAULT NULL, PRIMARY KEY (`id`), KEY `name` (`name`(250)) USING BTREE) ENGINE=MyISAM AUTO_INCREMENT=1000001 DEFAULT CHARSET=latin1; æ—¥å¿—logsè¡¨ï¼š 12345CREATE TABLE `logs` ( `Id` int(11) NOT NULL AUTO_INCREMENT, `log` varchar(255) DEFAULT NULL COMMENT &apos;æ—¥å¿—è¯´æ˜&apos;, PRIMARY KEY (`Id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT=&apos;æ—¥å¿—è¡¨&apos;; éœ€æ±‚æ˜¯ï¼šå½“åœ¨usersä¸­æ’å…¥ä¸€æ¡æ•°æ®ï¼Œå°±ä¼šåœ¨logsä¸­ç”Ÿæˆä¸€æ¡æ—¥å¿—ä¿¡æ¯ã€‚ åˆ›å»ºè§¦å‘å™¨ï¼š 12345678910DELIMITER $CREATE TRIGGER user_log AFTER INSERT ON users FOR EACH ROWBEGINDECLARE s1 VARCHAR(40)character set utf8;DECLARE s2 VARCHAR(20) character set utf8;#åé¢å‘ç°ä¸­æ–‡å­—ç¬¦ç¼–ç å‡ºç°ä¹±ç ï¼Œè¿™é‡Œè®¾ç½®å­—ç¬¦é›†SET s2 = &quot; is created&quot;;SET s1 = CONCAT(NEW.name,s2); #å‡½æ•°CONCATå¯ä»¥å°†å­—ç¬¦ä¸²è¿æ¥INSERT INTO logs(log) values(s1);END $DELIMITER ; è¿™é‡Œæˆ‘ç”¨çš„navicat: æŸ¥çœ‹è§¦å‘å™¨SHOW TRIGGERSè¯­å¥æŸ¥çœ‹è§¦å‘å™¨ä¿¡æ¯ Tip: 12ä¸Šé¢æˆ‘ç”¨çš„navicatç›´æ¥åˆ›å»ºï¼Œå¦‚æœå¤§å®¶ç”¨çš„mysql frontï¼Œnameè¿™é‡Œä¼šæœ‰ä¸ªåŒºåˆ«ï¼Œæˆ‘ä»¬åˆ é™¤åˆšæ‰çš„è§¦å‘å™¨ï¼Œåœ¨Mysql frontä¸­æµ‹è¯•drop trigger user_log;#åˆ é™¤è§¦å‘å™¨ æ‰“å¼€Mysql Frontï¼š mysql frontåœ¨ç¼–è¯‘sqlæ—¶ï¼Œä¸ç”¨å®šä¹‰ç»“å°¾åˆ†éš”ç¬¦ï¼Œä¿®æ”¹åçš„sqlç›´æ¥è¿™æ ·æ—¢å¯ï¼š 12345678910#DELIMITER $CREATE TRIGGER user_log AFTER INSERT ON users FOR EACH ROWBEGINDECLARE s1 VARCHAR(40)character set utf8;DECLARE s2 VARCHAR(20) character set utf8;SET s2 = &quot; is created&quot;;SET s1 = CONCAT(NEW.name,s2); #å‡½æ•°CONCATå¯ä»¥å°†å­—ç¬¦ä¸²è¿æ¥INSERT INTO logs(log) values(s1);END #$#DELIMITER ; è¿™é‡Œå†å•°å—¦å‡ å¥ï¼š tipsï¼šSHOW TRIGGERSè¯­å¥æ— æ³•æŸ¥è¯¢æŒ‡å®šçš„è§¦å‘å™¨ åœ¨triggersè¡¨ä¸­æŸ¥çœ‹è§¦å‘å™¨ä¿¡æ¯1SELECT * FROM information_schema.triggers; ç»“æœæ˜¾ç¤ºäº†æ‰€æœ‰è§¦å‘å™¨çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒæ—¶ï¼Œè¯¥æ–¹æ³•å¯ä»¥æŸ¥è¯¢åˆ¶å®šè§¦å‘å™¨çš„è¯¦ç»†ä¿¡æ¯ 1SELECT * FROM information_schema.triggers WHERE TRIGGER_NAME=&apos;user_log&apos;; tipsï¼šæ‰€æœ‰è§¦å‘å™¨ä¿¡æ¯éƒ½å­˜å‚¨åœ¨information_schemaæ•°æ®åº“ä¸‹çš„triggersè¡¨ä¸­ å¯ä»¥ä½¿ç”¨SELECTè¯­å¥æŸ¥è¯¢ï¼Œå¦‚æœè§¦å‘å™¨ä¿¡æ¯è¿‡å¤šï¼Œæœ€å¥½é€šè¿‡TRIGGER_NAMEå­—æ®µæŒ‡å®šæŸ¥è¯¢ å›åˆ°ä¸Šé¢,æˆ‘ä»¬åˆ›å»ºå¥½äº†è§¦å‘å™¨,ç»§ç»­åœ¨usersä¸­æ’å…¥æ•°æ®å¹¶æŸ¥çœ‹æ•°æ®ï¼š 1insert into users(name,add_time) values(&apos;å‘¨ä¼¯é€š&apos;,now()); å¥½å§ï¼Œæˆ‘ä»¬å†æ¥æŸ¥çœ‹ä¸€ä¸‹logsè¡¨å§ï¼ é€šè¿‡ä¸Šé¢çš„ä¾‹å­ï¼Œå¯ä»¥çœ‹åˆ°åªéœ€è¦åœ¨usersä¸­æ’å…¥ç”¨æˆ·çš„ä¿¡æ¯ï¼Œæ—¥å¿—ä¼šè‡ªåŠ¨è®°å½•åˆ°logsè¡¨ä¸­ï¼Œè¿™ä¹Ÿè®¸å°±æ˜¯è§¦å‘å™¨ç»™æˆ‘å¸¦æ¥çš„ä¾¿æ·å§ï¼ é™åˆ¶å’Œæ³¨æ„äº‹é¡¹è§¦å‘å™¨ä¼šæœ‰ä»¥ä¸‹ä¸¤ç§é™åˆ¶ï¼š 1.è§¦å‘ç¨‹åºä¸èƒ½è°ƒç”¨å°†æ•°æ®è¿”å›å®¢æˆ·ç«¯çš„å­˜å‚¨ç¨‹åºï¼Œä¹Ÿä¸èƒ½ä½¿ç”¨é‡‡ç”¨CALLè¯­å¥çš„åŠ¨æ€SQLè¯­å¥ï¼Œä½†æ˜¯å…è®¸å­˜å‚¨ç¨‹åºé€šè¿‡å‚æ•°å°†æ•°æ®è¿”å›è§¦å‘ç¨‹åºï¼Œä¹Ÿå°±æ˜¯å­˜å‚¨è¿‡ç¨‹æˆ–è€…å‡½æ•°é€šè¿‡OUTæˆ–è€…INOUTç±»å‹çš„å‚æ•°å°†æ•°æ®è¿”å›è§¦å‘å™¨æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯ä¸èƒ½è°ƒç”¨ç›´æ¥è¿”å›æ•°æ®çš„è¿‡ç¨‹ã€‚ 2.ä¸èƒ½å†è§¦å‘å™¨ä¸­ä½¿ç”¨ä»¥æ˜¾ç¤ºæˆ–éšå¼æ–¹å¼å¼€å§‹æˆ–ç»“æŸäº‹åŠ¡çš„è¯­å¥ï¼Œå¦‚START TRANS-ACTION,COMMITæˆ–ROLLBACKã€‚ æ³¨æ„äº‹é¡¹ï¼šMySQLçš„è§¦å‘å™¨æ˜¯æŒ‰ç…§BEFOREè§¦å‘å™¨ã€è¡Œæ“ä½œã€AFTERè§¦å‘å™¨çš„é¡ºåºæ‰§è¡Œçš„ï¼Œå…¶ä¸­ä»»ä½•ä¸€æ­¥å‘ç”Ÿé”™è¯¯éƒ½ä¸ä¼šç»§ç»­æ‰§è¡Œå‰©ä¸‹çš„æ“ä½œï¼Œå¦‚æœå¯¹äº‹åŠ¡è¡¨è¿›è¡Œçš„æ“ä½œï¼Œå¦‚æœå‡ºç°é”™è¯¯ï¼Œé‚£ä¹ˆå°†ä¼šè¢«å›æ»šï¼Œå¦‚æœæ˜¯å¯¹éäº‹åŠ¡è¡¨è¿›è¡Œæ“ä½œï¼Œé‚£ä¹ˆå°±æ— æ³•å›æ»šäº†ï¼Œæ•°æ®å¯èƒ½ä¼šå‡ºé”™ã€‚ æ€»ç»“è§¦å‘å™¨æ˜¯åŸºäºè¡Œè§¦å‘çš„ï¼Œæ‰€ä»¥åˆ é™¤ã€æ–°å¢æˆ–è€…ä¿®æ”¹æ“ä½œå¯èƒ½éƒ½ä¼šæ¿€æ´»è§¦å‘å™¨ï¼Œæ‰€ä»¥ä¸è¦ç¼–å†™è¿‡äºå¤æ‚çš„è§¦å‘å™¨ï¼Œä¹Ÿä¸è¦å¢åŠ è¿‡å¾—çš„è§¦å‘å™¨ï¼Œè¿™æ ·ä¼šå¯¹æ•°æ®çš„æ’å…¥ã€ä¿®æ”¹æˆ–è€…åˆ é™¤å¸¦æ¥æ¯”è¾ƒä¸¥é‡çš„å½±å“ï¼ŒåŒæ—¶ä¹Ÿä¼šå¸¦æ¥å¯ç§»æ¤æ€§å·®çš„åæœï¼Œæ‰€ä»¥åœ¨è®¾è®¡è§¦å‘å™¨çš„æ—¶å€™ä¸€å®šè¦æœ‰æ‰€è€ƒè™‘ã€‚ è§¦å‘å™¨æ˜¯ä¸€ç§ç‰¹æ®Šçš„å­˜å‚¨è¿‡ç¨‹ï¼Œå®ƒåœ¨æ’å…¥ï¼Œåˆ é™¤æˆ–ä¿®æ”¹ç‰¹å®šè¡¨ä¸­çš„æ•°æ®æ—¶è§¦å‘æ‰§è¡Œï¼Œå®ƒæ¯”æ•°æ®åº“æœ¬èº«æ ‡å‡†çš„åŠŸèƒ½æœ‰æ›´ç²¾ç»†å’Œæ›´å¤æ‚çš„æ•°æ®æ§åˆ¶èƒ½åŠ›ã€‚ æ•°æ®åº“è§¦å‘å™¨æœ‰ä»¥ä¸‹çš„ä½œç”¨ï¼š 1.å®‰å…¨æ€§ã€‚å¯ä»¥åŸºäºæ•°æ®åº“çš„å€¼ä½¿ç”¨æˆ·å…·æœ‰æ“ä½œæ•°æ®åº“çš„æŸç§æƒåˆ©ã€‚ # å¯ä»¥åŸºäºæ—¶é—´é™åˆ¶ç”¨æˆ·çš„æ“ä½œï¼Œä¾‹å¦‚ä¸å…è®¸ä¸‹ç­åå’ŒèŠ‚å‡æ—¥ä¿®æ”¹æ•°æ®åº“æ•°æ®ã€‚ # å¯ä»¥åŸºäºæ•°æ®åº“ä¸­çš„æ•°æ®é™åˆ¶ç”¨æˆ·çš„æ“ä½œï¼Œä¾‹å¦‚ä¸å…è®¸è‚¡ç¥¨çš„ä»·æ ¼çš„å‡å¹…ä¸€æ¬¡è¶…è¿‡10%ã€‚ 2.å®¡è®¡ã€‚å¯ä»¥è·Ÿè¸ªç”¨æˆ·å¯¹æ•°æ®åº“çš„æ“ä½œã€‚ # å®¡è®¡ç”¨æˆ·æ“ä½œæ•°æ®åº“çš„è¯­å¥ã€‚ # æŠŠç”¨æˆ·å¯¹æ•°æ®åº“çš„æ›´æ–°å†™å…¥å®¡è®¡è¡¨ã€‚ 3.å®ç°å¤æ‚çš„æ•°æ®å®Œæ•´æ€§è§„åˆ™ # å®ç°éæ ‡å‡†çš„æ•°æ®å®Œæ•´æ€§æ£€æŸ¥å’Œçº¦æŸã€‚è§¦å‘å™¨å¯äº§ç”Ÿæ¯”è§„åˆ™æ›´ä¸ºå¤æ‚çš„é™åˆ¶ã€‚ä¸è§„åˆ™ä¸åŒï¼Œè§¦å‘å™¨å¯ä»¥å¼•ç”¨åˆ—æˆ–æ•°æ®åº“å¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œè§¦å‘å™¨å¯å›é€€ä»»ä½•ä¼å›¾åƒè¿›è¶…è¿‡è‡ªå·±ä¿è¯é‡‘çš„æœŸè´§ã€‚ # æä¾›å¯å˜çš„ç¼ºçœå€¼ã€‚ 4.å®ç°å¤æ‚çš„éæ ‡å‡†çš„æ•°æ®åº“ç›¸å…³å®Œæ•´æ€§è§„åˆ™ã€‚è§¦å‘å™¨å¯ä»¥å¯¹æ•°æ®åº“ä¸­ç›¸å…³çš„è¡¨è¿›è¡Œè¿ç¯æ›´æ–°ã€‚ä¾‹å¦‚ï¼Œåœ¨authsè¡¨author_codeåˆ—ä¸Šçš„åˆ é™¤è§¦å‘å™¨å¯å¯¼è‡´ç›¸åº”åˆ é™¤åœ¨å…¶å®ƒè¡¨ä¸­çš„ä¸ä¹‹åŒ¹é…çš„è¡Œã€‚ # åœ¨ä¿®æ”¹æˆ–åˆ é™¤æ—¶çº§è”ä¿®æ”¹æˆ–åˆ é™¤å…¶å®ƒè¡¨ä¸­çš„ä¸ä¹‹åŒ¹é…çš„è¡Œã€‚ # åœ¨ä¿®æ”¹æˆ–åˆ é™¤æ—¶æŠŠå…¶å®ƒè¡¨ä¸­çš„ä¸ä¹‹åŒ¹é…çš„è¡Œè®¾æˆNULLå€¼ã€‚ # åœ¨ä¿®æ”¹æˆ–åˆ é™¤æ—¶æŠŠå…¶å®ƒè¡¨ä¸­çš„ä¸ä¹‹åŒ¹é…çš„è¡Œçº§è”è®¾æˆç¼ºçœå€¼ã€‚ # è§¦å‘å™¨èƒ½å¤Ÿæ‹’ç»æˆ–å›é€€é‚£äº›ç ´åç›¸å…³å®Œæ•´æ€§çš„å˜åŒ–ï¼Œå–æ¶ˆè¯•å›¾è¿›è¡Œæ•°æ®æ›´æ–°çš„äº‹åŠ¡ã€‚å½“æ’å…¥ä¸€ä¸ªä¸å…¶ä¸»å¥ä¸åŒ¹é…çš„å¤–éƒ¨é”®æ—¶ï¼Œè¿™ç§è§¦å‘å™¨ä¼šèµ·ä½œç”¨ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥åœ¨books.author_code åˆ—ä¸Šç”Ÿæˆä¸€ä¸ªæ’å…¥è§¦å‘å™¨ï¼Œå¦‚æœæ–°å€¼ä¸auths.author_codeåˆ—ä¸­çš„æŸå€¼ä¸åŒ¹é…æ—¶ï¼Œæ’å…¥è¢«å›é€€ã€‚ 5.åŒæ­¥å®æ—¶åœ°å¤åˆ¶è¡¨ä¸­çš„æ•°æ®ã€‚ 6.è‡ªåŠ¨è®¡ç®—æ•°æ®å€¼ï¼Œå¦‚æœæ•°æ®çš„å€¼è¾¾åˆ°äº†ä¸€å®šçš„è¦æ±‚ï¼Œåˆ™è¿›è¡Œç‰¹å®šçš„å¤„ç†ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå…¬å¸çš„å¸å·ä¸Šçš„èµ„é‡‘ä½äº5ä¸‡å…ƒåˆ™ç«‹å³ç»™è´¢åŠ¡äººå‘˜å‘é€è­¦å‘Šæ•°æ®ã€‚ æ— è®ºä»äº‹ä»€ä¹ˆè¡Œä¸šï¼Œåªè¦åšå¥½ä¸¤ä»¶äº‹å°±å¤Ÿäº†ï¼Œä¸€ä¸ªæ˜¯ä½ çš„ä¸“ä¸šã€ä¸€ä¸ªæ˜¯ä½ çš„äººå“ï¼Œä¸“ä¸šå†³å®šäº†ä½ çš„å­˜åœ¨ï¼Œäººå“å†³å®šäº†ä½ çš„äººè„‰ï¼Œå‰©ä¸‹çš„å°±æ˜¯åšæŒï¼Œç”¨å–„è‰¯å°ˆæ¥­å’ŒçœŸè¯šèµ¢å–æ›´å¤šçš„ä¿¡ä»»ã€‚ åˆ†ç±»: mysqlç¬”è®° æ ‡ç­¾: mysql","categories":[{"name":"mysql","slug":"mysql","permalink":"http://ppsteven.github.io/categories/mysql/"}],"tags":[{"name":"mysql","slug":"mysql","permalink":"http://ppsteven.github.io/tags/mysql/"},{"name":"è½¬è½½","slug":"è½¬è½½","permalink":"http://ppsteven.github.io/tags/%E8%BD%AC%E8%BD%BD/"},{"name":"æ•°æ®åº“åŒæ­¥","slug":"æ•°æ®åº“åŒæ­¥","permalink":"http://ppsteven.github.io/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8C%E6%AD%A5/"}]},{"title":"dockeræ­å»ºelasticsearch+kibana","slug":"docker-elasticsearch-Kibana-installation","date":"2020-02-25T01:10:44.000Z","updated":"2020-02-25T03:24:08.469Z","comments":false,"path":"2020/02/25/docker-elasticsearch-Kibana-installation/","link":"","permalink":"http://ppsteven.github.io/2020/02/25/docker-elasticsearch-Kibana-installation/","excerpt":"å·¥ä½œä¸­éœ€è¦å¯¹å…¬å¸çš„esæœåŠ¡å™¨è¿›è¡Œé…ç½®ï¼Œå°ç™½ä¸æ•¢ç›´æ¥åœ¨å…¬å¸çš„å¼€å‘æœºä¸Šç›´æ¥ä¿®æ”¹ã€‚æ•…éœ€è¦åœ¨æµ‹è¯•æœºä¸Šä¸´æ—¶æ­å»ºä¸€ä¸ªes+kibanaç¯å¢ƒã€‚ ä¸ºäº†é¿å¼€åŸºç¡€çš„ç¯å¢ƒé—®é¢˜å’Œå¿«é€Ÿæ­å»ºï¼Œdockeræ˜¯æˆ‘ä»¬éå¸¸å¥½çš„ä¼™ä¼´","text":"å·¥ä½œä¸­éœ€è¦å¯¹å…¬å¸çš„esæœåŠ¡å™¨è¿›è¡Œé…ç½®ï¼Œå°ç™½ä¸æ•¢ç›´æ¥åœ¨å…¬å¸çš„å¼€å‘æœºä¸Šç›´æ¥ä¿®æ”¹ã€‚æ•…éœ€è¦åœ¨æµ‹è¯•æœºä¸Šä¸´æ—¶æ­å»ºä¸€ä¸ªes+kibanaç¯å¢ƒã€‚ ä¸ºäº†é¿å¼€åŸºç¡€çš„ç¯å¢ƒé—®é¢˜å’Œå¿«é€Ÿæ­å»ºï¼Œdockeræ˜¯æˆ‘ä»¬éå¸¸å¥½çš„ä¼™ä¼´ elasticsearchå®‰è£…1docker pull elasticsearch:6.6.1 åˆ›å»ºé…ç½®æ–‡ä»¶ 12345# vim /etc/elasticsearch.ymlcluster.name: \"docker-cluster\"network.host: 0.0.0.0# å…è®¸ä»»ä½•ç«¯å£è®¿é—®transport.host: 0.0.0.0 å¯åŠ¨å®¹å™¨ 1docker run -di --name=es -p 9200:9200 -p 9300:9300 -e \"discovery.type=single-node\" -v /etc/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml elasticsearch:6.6.1 å¼€æ”¾äº†9300ç«¯å£ æŒ‚è½½é…ç½®æ–‡ä»¶ï¼š/usr/share/elasticsearch/config/elasticsearch.yml æŸ¥çœ‹å®¹å™¨æ˜¯å¦å¯åŠ¨ï¼Œä»¥åŠç«¯å£æ˜¯å¦æ­£å¸¸å¼€æ”¾ 123$ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMESacc39c54a0d8 elasticsearch:6.6.1 \"/usr/local/bin/dockâ€¦\" 18 hours ago Up 18 hours 0.0.0.0:9200-&gt;9200/tcp, 0.0.0.0:9300-&gt;9300/tcp es æ›´åŠ ç›´è§‚çš„åˆ¤æ–­æ˜¯å¦å¯åŠ¨æˆåŠŸçš„æç¤ºæ˜¯ï¼Œç›´æ¥è®¿é—® 9200 ç«¯å£å·ã€‚æˆåŠŸçš„è¯ï¼Œä¼šè¿”å›å¦‚ä¸‹ä¿¡æ¯ã€‚ 12345678910111213141516# è¿™é‡Œå‡è®¾ä¸€ä¸ªå…¬ç½‘çš„ip http://111.111.111.111:9200/&#123; &quot;name&quot; : &quot;cWz9ZWm&quot;, &quot;cluster_name&quot; : &quot;elasticsearch&quot;, &quot;cluster_uuid&quot; : &quot;5v3SilrTQyCjjQO-a5heBA&quot;, &quot;version&quot; : &#123; &quot;number&quot; : &quot;6.2.4&quot;, &quot;build_hash&quot; : &quot;ccec39f&quot;, &quot;build_date&quot; : &quot;2018-04-12T20:37:28.497551Z&quot;, &quot;build_snapshot&quot; : false, &quot;lucene_version&quot; : &quot;7.2.1&quot;, &quot;minimum_wire_compatibility_version&quot; : &quot;5.6.0&quot;, &quot;minimum_index_compatibility_version&quot; : &quot;5.0.0&quot; &#125;, &quot;tagline&quot; : &quot;You Know, for Search&quot;&#125; kibanaå®‰è£…1docker pull kibana:6.6.1 æ¥ä¸‹æ¥ï¼Œå¦‚æœæˆ‘ä»¬æ‰‹é‡Œæ²¡æœ‰kibanaé…ç½®æ–‡ä»¶çš„ä¿¡æ¯çš„è¯ï¼Œéœ€è¦å…ˆä»å®¹å™¨ä¸­copyä¸€ä»½è¿‡æ¥ã€‚ 1234567891011# å¯åŠ¨å®¹å™¨ tempdocker run -di -p 5601:5601 --name temp kibana:6.6.1# åˆ›å»ºæ–‡ä»¶å¤¹å­˜æ”¾é…ç½®æ–‡ä»¶mkdir -p /etc/kibana# ä»å®¹å™¨ä¸­å¤åˆ¶è¿‡æ¥ï¼Œæ³¨æ„é…ç½®æ–‡ä»¶åœ°å€æ˜¯ /usr/share/kibana/configdocker cp temp:/usr/share/kibana/config /etc/kibana/config# åˆ é™¤ä¸´æ—¶çš„tempæ–‡ä»¶ï¼Œå¼ºåˆ¶åˆ é™¤docker container rm -f temp æ³¨æ„æŒ‚è½½çš„é…ç½®æ–‡ä»¶åœ°å€ä¸ºï¼š /usr/share/kibana/config ä¿®æ”¹æœ¬åœ°é…ç½®æ–‡ä»¶ 123456789# vim /etc/kibana/config/kibana.ymlserver.name: kibana# å…è®¸æ‰€æœ‰åœ°å€è®¿é—®server.host: \"0.0.0.0\"# elasticsearchçš„åœ°å€ï¼Œæ³¨æ„è¿™é‡Œæˆ‘ç›´æ¥å¡«å†™çš„å…¬ç½‘ipã€‚# æœ‰çš„æ•™ç¨‹é‡Œé¢å¡«å†™elasticsearchï¼Œ127.0.0.1ï¼Œlocalhost ç­‰# dockerå®¹å™¨çš„ç½‘ç»œé—®é¢˜æ˜¯æˆ‘çš„å¼±é¡¹ï¼Œé‡‡ç”¨ä¸Šè¿°æ–¹æ¡ˆï¼Œéœ€è¦åœ¨dockerå®¹å™¨äº’è”ï¼Œç½‘ç»œæ–¹é¢æœ‰ä¸€å®šçš„çŸ¥è¯†ï¼Œä¸ç„¶ä¼šå‡ºé—®é¢˜ã€‚elasticsearch.url: http://111.111.111.111:9200xpack.monitoring.ui.container.elasticsearch.enabled: true å¯åŠ¨å®¹å™¨ 1docker run -di --name=kibana -p 5601:5601 -v /etc/kibana/config:/usr/share/kibana/config kibana:6.6.1 è¿™é‡Œå¼€æ”¾äº†æ–°çš„ç«¯å£ 5601 éªŒè¯æ˜¯å¦æˆåŠŸï¼Œç›´æ¥è®¿é—® http://111.111.111.111:5601 å°±å¯ä»¥çœ‹åˆ°å¦‚ä¸‹ç•Œé¢ æ³¨æ„ç‚¹ elasticsearch å’Œ kibana çš„ç‰ˆæœ¬æœ€å¥½ä¿æŒä¸€è‡´ï¼Œè¿™é‡Œæˆ‘éƒ½ä½¿ç”¨äº† 6.6.1 elasticsearch å’Œ kibana éƒ½æ˜¯æ¯”è¾ƒåƒå†…å­˜çš„å®¶ä¼™ï¼Œæ‰€ä»¥å¦‚æœä½ çš„æœåŠ¡å™¨çš„å†…å­˜å°‘äº4Gï¼Œå¯èƒ½å°±ä¼šå‡ºå¾ˆå¤šé—®é¢˜ã€‚ kibana ç«¯å£å¯èƒ½ä¼šè¢«å°æ‰ã€‚æ³¨æ„ä½ çš„æœåŠ¡å™¨æœ‰æ²¡æœ‰æ‰“å¼€ 5601 ç«¯å£ï¼Œè‹¥æ˜¯æ²¡æœ‰çš„è¯ï¼Œæ¢ä¸€ä¸ªç«¯å£æ˜ å°„å³å¯ã€‚-p 7899:5601 é…ç½®ä¿®æ”¹åå¯èƒ½ä¼šéœ€è¦é‡å¯æœåŠ¡/å®¹å™¨ 12345# é‡å¯/æŸ¥çœ‹ æœåŠ¡çŠ¶æ€service kibana restart/statussystemctl restart/status kibana# å®¹å™¨é‡å¯docker restart kibana TODOå¦‚æœæ˜¯æ­å»ºELKï¼Œæˆ‘ä»¬å¯èƒ½è¿˜éœ€è¦ Filebeat å’Œ Logstash çš„é…å’Œï¼Œè¿™äº›è¿˜è¦åç»­çš„è¿›è¡Œæ­å»ºã€‚ELK æ˜¯å¥½ä¸œè¥¿ï¼Œåªæ˜¯å¤ªåƒå†…å­˜äº†ã€‚å¦‚æœä¸æ˜¯å…¬å¸åŸºæœ¬çš„é¡¹ç›®ï¼Œåªæ˜¯åšçš„ç©ç¥¨æ€§è´¨çš„å°æœåŠ¡ï¼Œä¼°è®¡ä¹°æœåŠ¡å™¨çš„å¼€é”€å°±ä¸å°ï¼Œæ‰€ä»¥æˆ‘æš‚æ—¶ä¸å¤ªä¼šç”¨ ELK æ­å»ºæ—¥å¿—ç³»ç»Ÿã€‚ å‚è€ƒèµ„æ–™Dockerå®‰è£…ELK","categories":[{"name":"docker","slug":"docker","permalink":"http://ppsteven.github.io/categories/docker/"}],"tags":[{"name":"es","slug":"es","permalink":"http://ppsteven.github.io/tags/es/"},{"name":"kibana","slug":"kibana","permalink":"http://ppsteven.github.io/tags/kibana/"},{"name":"docker","slug":"docker","permalink":"http://ppsteven.github.io/tags/docker/"}]},{"title":"linux ç¯å¢ƒå˜é‡è¯»å–é¡ºåº","slug":"linux-environment-variable-config-file-order","date":"2020-02-22T13:02:00.000Z","updated":"2020-02-22T13:21:29.402Z","comments":false,"path":"2020/02/22/linux-environment-variable-config-file-order/","link":"","permalink":"http://ppsteven.github.io/2020/02/22/linux-environment-variable-config-file-order/","excerpt":"","text":"linux ç¯å¢ƒå˜é‡è¯»å–é¡ºåºå‚è€ƒäº†è®¸å¤šä¼˜ç§€çš„æ•™ç¨‹ï¼Œæ€»ç»“äº† linux è¯»å–é…ç½®æ–‡ä»¶çš„é¡ºåº æ–‡ä»¶ ç³»ç»Ÿ/ç”¨æˆ· æè¿° /etc/environment ç³»ç»Ÿ ç³»ç»Ÿç¯å¢ƒå˜é‡ /etc/profile ç³»ç»Ÿ æ­¤æ–‡ä»¶ä¸ºç³»ç»Ÿçš„æ¯ä¸ªç”¨æˆ·è®¾ç½®ç¯å¢ƒä¿¡æ¯å½“ç”¨æˆ·ç¬¬ä¸€æ¬¡ç™»å½•æ—¶,è¯¥æ–‡ä»¶è¢«æ‰§è¡Œå¹¶ä»/etc/profile.dç›®å½•çš„é…ç½®æ–‡ä»¶ä¸­æœé›†shellçš„è®¾ç½®. /etc/profile.d/test.sh ç³»ç»Ÿ æ–°å»ºæ–‡ä»¶ï¼Œæ²¡æœ‰æ–‡ä»¶å¤¹å¯ç•¥è¿‡ /etc/bashrc/etc/bash.bashrc ç³»ç»Ÿ ä¸ºæ¯ä¸€ä¸ªè¿è¡Œ bash shellçš„ç”¨æˆ·æ‰§è¡Œæ­¤æ–‡ä»¶å½“ bash shellè¢«æ‰“å¼€æ—¶,è¯¥æ–‡ä»¶è¢«è¯»å–. ~/.bash_profile~/.bash_login ç”¨æˆ· æ¯ä¸ªç”¨æˆ·è¾“å…¥ä¸“ç”¨äºè‡ªå·±ä½¿ç”¨çš„shellä¿¡æ¯å½“ç”¨æˆ·ç™»å½•æ—¶,è¯¥æ–‡ä»¶ä»…ä»…æ‰§è¡Œä¸€æ¬¡!é»˜è®¤æƒ…å†µä¸‹,è®¾ç½®ä¸€äº›ç¯å¢ƒå˜é‡,æ‰§è¡Œç”¨æˆ·çš„.bashrcæ–‡ä»¶ ~/.profile ç”¨æˆ· åªåœ¨ç”¨æˆ·ç™»å½•çš„æ—¶å€™è¯»å–ä¸€æ¬¡ ~/.bashrc ç”¨æˆ· æ¯æ¬¡æ‰“å¼€æ–° bash shell æˆ– ç™»å½•æ—¶ç”Ÿæ•ˆ ~/.bash_logout ç”¨æˆ· æ¯æ¬¡é€€å‡º bash shell æˆ– ç³»ç»Ÿæ—¶ç”Ÿæ•ˆ å‚è€ƒèµ„æ–™Linuxç¯å¢ƒå˜é‡é…ç½®å…¨æ”»ç•¥ /etc/profileå’Œ~/.bash_profileç­‰æ–‡ä»¶çš„åŒºåˆ«å’Œè”ç³»","categories":[{"name":"linux","slug":"linux","permalink":"http://ppsteven.github.io/categories/linux/"}],"tags":[{"name":"linux","slug":"linux","permalink":"http://ppsteven.github.io/tags/linux/"},{"name":"ç¯å¢ƒå˜é‡","slug":"ç¯å¢ƒå˜é‡","permalink":"http://ppsteven.github.io/tags/%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/"}]},{"title":"ã€è½¬è½½ã€‘Linuxç¯å¢ƒå˜é‡é…ç½®å…¨æ”»ç•¥","slug":"è½¬è½½/Linuxç¯å¢ƒå˜é‡é…ç½®å…¨æ”»ç•¥","date":"2020-02-22T07:02:00.000Z","updated":"2020-02-22T13:21:13.450Z","comments":false,"path":"2020/02/22/è½¬è½½/Linuxç¯å¢ƒå˜é‡é…ç½®å…¨æ”»ç•¥/","link":"","permalink":"http://ppsteven.github.io/2020/02/22/%E8%BD%AC%E8%BD%BD/Linux%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E9%85%8D%E7%BD%AE%E5%85%A8%E6%94%BB%E7%95%A5/","excerpt":"Linuxç¯å¢ƒå˜é‡é…ç½®å…¨æ”»ç•¥ æ³¨ï¼šæœ¬æ–‡æ˜¯è½¬è½½æ–‡ç«  åŸæ–‡é“¾æ¥ï¼šLinuxç¯å¢ƒå˜é‡é…ç½®å…¨æ”»ç•¥ Linuxç¯å¢ƒå˜é‡é…ç½®åœ¨è‡ªå®šä¹‰å®‰è£…è½¯ä»¶çš„æ—¶å€™ï¼Œç»å¸¸éœ€è¦é…ç½®ç¯å¢ƒå˜é‡ï¼Œä¸‹é¢åˆ—ä¸¾å‡ºå„ç§å¯¹ç¯å¢ƒå˜é‡çš„é…ç½®æ–¹æ³•ã€‚ ä¸‹é¢æ‰€æœ‰ä¾‹å­çš„ç¯å¢ƒè¯´æ˜å¦‚ä¸‹ï¼š ç³»ç»Ÿï¼šUbuntu 14.0 ç”¨æˆ·åï¼šuusama éœ€è¦é…ç½®MySQLç¯å¢ƒå˜é‡è·¯å¾„ï¼š/home/uusama/mysql/bin Linuxè¯»å–ç¯å¢ƒå˜é‡è¯»å–ç¯å¢ƒå˜é‡çš„æ–¹æ³•ï¼š exportå‘½ä»¤æ˜¾ç¤ºå½“å‰ç³»ç»Ÿå®šä¹‰çš„æ‰€æœ‰ç¯å¢ƒå˜é‡ echo $PATHå‘½ä»¤è¾“å‡ºå½“å‰çš„PATHç¯å¢ƒå˜é‡çš„å€¼","text":"Linuxç¯å¢ƒå˜é‡é…ç½®å…¨æ”»ç•¥ æ³¨ï¼šæœ¬æ–‡æ˜¯è½¬è½½æ–‡ç«  åŸæ–‡é“¾æ¥ï¼šLinuxç¯å¢ƒå˜é‡é…ç½®å…¨æ”»ç•¥ Linuxç¯å¢ƒå˜é‡é…ç½®åœ¨è‡ªå®šä¹‰å®‰è£…è½¯ä»¶çš„æ—¶å€™ï¼Œç»å¸¸éœ€è¦é…ç½®ç¯å¢ƒå˜é‡ï¼Œä¸‹é¢åˆ—ä¸¾å‡ºå„ç§å¯¹ç¯å¢ƒå˜é‡çš„é…ç½®æ–¹æ³•ã€‚ ä¸‹é¢æ‰€æœ‰ä¾‹å­çš„ç¯å¢ƒè¯´æ˜å¦‚ä¸‹ï¼š ç³»ç»Ÿï¼šUbuntu 14.0 ç”¨æˆ·åï¼šuusama éœ€è¦é…ç½®MySQLç¯å¢ƒå˜é‡è·¯å¾„ï¼š/home/uusama/mysql/bin Linuxè¯»å–ç¯å¢ƒå˜é‡è¯»å–ç¯å¢ƒå˜é‡çš„æ–¹æ³•ï¼š exportå‘½ä»¤æ˜¾ç¤ºå½“å‰ç³»ç»Ÿå®šä¹‰çš„æ‰€æœ‰ç¯å¢ƒå˜é‡ echo $PATHå‘½ä»¤è¾“å‡ºå½“å‰çš„PATHç¯å¢ƒå˜é‡çš„å€¼ è¿™ä¸¤ä¸ªå‘½ä»¤æ‰§è¡Œçš„æ•ˆæœå¦‚ä¸‹ 123456789101112131415uusama@ubuntu:~$ exportdeclare -x HOME=&quot;/home/uusama&quot;declare -x LANG=&quot;en_US.UTF-8&quot;declare -x LANGUAGE=&quot;en_US:&quot;declare -x LESSCLOSE=&quot;/usr/bin/lesspipe %s %s&quot;declare -x LESSOPEN=&quot;| /usr/bin/lesspipe %s&quot;declare -x LOGNAME=&quot;uusama&quot;declare -x MAIL=&quot;/var/mail/uusama&quot;declare -x PATH=&quot;/home/uusama/bin:/home/uusama/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;declare -x SSH_TTY=&quot;/dev/pts/0&quot;declare -x TERM=&quot;xterm&quot;declare -x USER=&quot;uusama&quot;uusama@ubuntu:~$ echo $PATH/home/uusama/bin:/home/uusama/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin å…¶ä¸­PATHå˜é‡å®šä¹‰äº†è¿è¡Œå‘½ä»¤çš„æŸ¥æ‰¾è·¯å¾„ï¼Œä»¥å†’å·:åˆ†å‰²ä¸åŒçš„è·¯å¾„ï¼Œä½¿ç”¨exportå®šä¹‰çš„æ—¶å€™å¯åŠ åŒå¼•å·ä¹Ÿå¯ä¸åŠ ã€‚ Linuxç¯å¢ƒå˜é‡é…ç½®æ–¹æ³•ä¸€ï¼šexport PATHä½¿ç”¨exportå‘½ä»¤ç›´æ¥ä¿®æ”¹PATHçš„å€¼ï¼Œé…ç½®MySQLè¿›å…¥ç¯å¢ƒå˜é‡çš„æ–¹æ³•: 1234export PATH=/home/uusama/mysql/bin:$PATH# æˆ–è€…æŠŠPATHæ”¾åœ¨å‰é¢export PATH=$PATH:/home/uusama/mysql/bin æ³¨æ„äº‹é¡¹ï¼š ç”Ÿæ•ˆæ—¶é—´ï¼šç«‹å³ç”Ÿæ•ˆ ç”Ÿæ•ˆæœŸé™ï¼šå½“å‰ç»ˆç«¯æœ‰æ•ˆï¼Œçª—å£å…³é—­åæ— æ•ˆ ç”Ÿæ•ˆèŒƒå›´ï¼šä»…å¯¹å½“å‰ç”¨æˆ·æœ‰æ•ˆ é…ç½®çš„ç¯å¢ƒå˜é‡ä¸­ä¸è¦å¿˜äº†åŠ ä¸ŠåŸæ¥çš„é…ç½®ï¼Œå³$PATHéƒ¨åˆ†ï¼Œé¿å…è¦†ç›–åŸæ¥é…ç½® Linuxç¯å¢ƒå˜é‡é…ç½®æ–¹æ³•äºŒï¼švim ~/.bashrcé€šè¿‡ä¿®æ”¹ç”¨æˆ·ç›®å½•ä¸‹çš„~/.bashrcæ–‡ä»¶è¿›è¡Œé…ç½®ï¼š 1234vim ~/.bashrc# åœ¨æœ€åä¸€è¡ŒåŠ ä¸Šexport PATH=$PATH:/home/uusama/mysql/bin æ³¨æ„äº‹é¡¹ï¼š ç”Ÿæ•ˆæ—¶é—´ï¼šä½¿ç”¨ç›¸åŒçš„ç”¨æˆ·æ‰“å¼€æ–°çš„ç»ˆç«¯æ—¶ç”Ÿæ•ˆï¼Œæˆ–è€…æ‰‹åŠ¨source ~/.bashrcç”Ÿæ•ˆ ç”Ÿæ•ˆæœŸé™ï¼šæ°¸ä¹…æœ‰æ•ˆ ç”Ÿæ•ˆèŒƒå›´ï¼šä»…å¯¹å½“å‰ç”¨æˆ·æœ‰æ•ˆ å¦‚æœæœ‰åç»­çš„ç¯å¢ƒå˜é‡åŠ è½½æ–‡ä»¶è¦†ç›–äº†PATHå®šä¹‰ï¼Œåˆ™å¯èƒ½ä¸ç”Ÿæ•ˆ Linuxç¯å¢ƒå˜é‡é…ç½®æ–¹æ³•ä¸‰ï¼švim ~/.bash_profileå’Œä¿®æ”¹~/.bashrcæ–‡ä»¶ç±»ä¼¼ï¼Œä¹Ÿæ˜¯è¦åœ¨æ–‡ä»¶æœ€ååŠ ä¸Šæ–°çš„è·¯å¾„å³å¯ï¼š 1234vim ~/.bash_profile# åœ¨æœ€åä¸€è¡ŒåŠ ä¸Šexport PATH=$PATH:/home/uusama/mysql/bin æ³¨æ„äº‹é¡¹ï¼š ç”Ÿæ•ˆæ—¶é—´ï¼šä½¿ç”¨ç›¸åŒçš„ç”¨æˆ·æ‰“å¼€æ–°çš„ç»ˆç«¯æ—¶ç”Ÿæ•ˆï¼Œæˆ–è€…æ‰‹åŠ¨source ~/.bash_profileç”Ÿæ•ˆ ç”Ÿæ•ˆæœŸé™ï¼šæ°¸ä¹…æœ‰æ•ˆ ç”Ÿæ•ˆèŒƒå›´ï¼šä»…å¯¹å½“å‰ç”¨æˆ·æœ‰æ•ˆ å¦‚æœæ²¡æœ‰~/.bash_profileæ–‡ä»¶ï¼Œåˆ™å¯ä»¥ç¼–è¾‘~/.profileæ–‡ä»¶æˆ–è€…æ–°å»ºä¸€ä¸ª Linuxç¯å¢ƒå˜é‡é…ç½®æ–¹æ³•å››ï¼švim /etc/bashrcè¯¥æ–¹æ³•æ˜¯ä¿®æ”¹ç³»ç»Ÿé…ç½®ï¼Œéœ€è¦ç®¡ç†å‘˜æƒé™ï¼ˆå¦‚rootï¼‰æˆ–è€…å¯¹è¯¥æ–‡ä»¶çš„å†™å…¥æƒé™ï¼š 1234567# å¦‚æœ/etc/bashrcæ–‡ä»¶ä¸å¯ç¼–è¾‘ï¼Œéœ€è¦ä¿®æ”¹ä¸ºå¯ç¼–è¾‘chmod -v u+w /etc/bashrcvim /etc/bashrc# åœ¨æœ€åä¸€è¡ŒåŠ ä¸Šexport PATH=$PATH:/home/uusama/mysql/bin æ³¨æ„äº‹é¡¹ï¼š ç”Ÿæ•ˆæ—¶é—´ï¼šæ–°å¼€ç»ˆç«¯ç”Ÿæ•ˆï¼Œæˆ–è€…æ‰‹åŠ¨source /etc/bashrcç”Ÿæ•ˆ ç”Ÿæ•ˆæœŸé™ï¼šæ°¸ä¹…æœ‰æ•ˆ ç”Ÿæ•ˆèŒƒå›´ï¼šå¯¹æ‰€æœ‰ç”¨æˆ·æœ‰æ•ˆ Linuxç¯å¢ƒå˜é‡é…ç½®æ–¹æ³•äº”ï¼švim /etc/profileè¯¥æ–¹æ³•ä¿®æ”¹ç³»ç»Ÿé…ç½®ï¼Œéœ€è¦ç®¡ç†å‘˜æƒé™æˆ–è€…å¯¹è¯¥æ–‡ä»¶çš„å†™å…¥æƒé™ï¼Œå’Œvim /etc/bashrcç±»ä¼¼ï¼š 1234567# å¦‚æœ/etc/profileæ–‡ä»¶ä¸å¯ç¼–è¾‘ï¼Œéœ€è¦ä¿®æ”¹ä¸ºå¯ç¼–è¾‘chmod -v u+w /etc/profilevim /etc/profile# åœ¨æœ€åä¸€è¡ŒåŠ ä¸Šexport PATH=$PATH:/home/uusama/mysql/bin æ³¨æ„äº‹é¡¹ï¼š ç”Ÿæ•ˆæ—¶é—´ï¼šæ–°å¼€ç»ˆç«¯ç”Ÿæ•ˆï¼Œæˆ–è€…æ‰‹åŠ¨source /etc/profileç”Ÿæ•ˆ ç”Ÿæ•ˆæœŸé™ï¼šæ°¸ä¹…æœ‰æ•ˆ ç”Ÿæ•ˆèŒƒå›´ï¼šå¯¹æ‰€æœ‰ç”¨æˆ·æœ‰æ•ˆ Linuxç¯å¢ƒå˜é‡é…ç½®æ–¹æ³•å…­ï¼švim /etc/environmentè¯¥æ–¹æ³•æ˜¯ä¿®æ”¹ç³»ç»Ÿç¯å¢ƒé…ç½®æ–‡ä»¶ï¼Œéœ€è¦ç®¡ç†å‘˜æƒé™æˆ–è€…å¯¹è¯¥æ–‡ä»¶çš„å†™å…¥æƒé™ï¼š 1234567# å¦‚æœ/etc/bashrcæ–‡ä»¶ä¸å¯ç¼–è¾‘ï¼Œéœ€è¦ä¿®æ”¹ä¸ºå¯ç¼–è¾‘chmod -v u+w /etc/environmentvim /etc/profile# åœ¨æœ€åä¸€è¡ŒåŠ ä¸Šexport PATH=$PATH:/home/uusama/mysql/bin æ³¨æ„äº‹é¡¹ï¼š ç”Ÿæ•ˆæ—¶é—´ï¼šæ–°å¼€ç»ˆç«¯ç”Ÿæ•ˆï¼Œæˆ–è€…æ‰‹åŠ¨source /etc/environmentç”Ÿæ•ˆ ç”Ÿæ•ˆæœŸé™ï¼šæ°¸ä¹…æœ‰æ•ˆ ç”Ÿæ•ˆèŒƒå›´ï¼šå¯¹æ‰€æœ‰ç”¨æˆ·æœ‰æ•ˆ Linuxç¯å¢ƒå˜é‡åŠ è½½åŸç†è§£æä¸Šé¢åˆ—å‡ºäº†ç¯å¢ƒå˜é‡çš„å„ç§é…ç½®æ–¹æ³•ï¼Œé‚£ä¹ˆLinuxæ˜¯å¦‚ä½•åŠ è½½è¿™äº›é…ç½®çš„å‘¢ï¼Ÿæ˜¯ä»¥ä»€ä¹ˆæ ·çš„é¡ºåºåŠ è½½çš„å‘¢ï¼Ÿ ç‰¹å®šçš„åŠ è½½é¡ºåºä¼šå¯¼è‡´ç›¸åŒåç§°çš„ç¯å¢ƒå˜é‡å®šä¹‰è¢«è¦†ç›–æˆ–è€…ä¸ç”Ÿæ•ˆã€‚ ç¯å¢ƒå˜é‡çš„åˆ†ç±»ç¯å¢ƒå˜é‡å¯ä»¥ç®€å•çš„åˆ†æˆç”¨æˆ·è‡ªå®šä¹‰çš„ç¯å¢ƒå˜é‡ä»¥åŠç³»ç»Ÿçº§åˆ«çš„ç¯å¢ƒå˜é‡ã€‚ ç”¨æˆ·çº§åˆ«ç¯å¢ƒå˜é‡å®šä¹‰æ–‡ä»¶ï¼š~/.bashrcã€~/.profileï¼ˆéƒ¨åˆ†ç³»ç»Ÿä¸ºï¼š~/.bash_profileï¼‰ ç³»ç»Ÿçº§åˆ«ç¯å¢ƒå˜é‡å®šä¹‰æ–‡ä»¶ï¼š/etc/bashrcã€/etc/profile(éƒ¨åˆ†ç³»ç»Ÿä¸ºï¼š/etc/bash_profileï¼‰ã€/etc/environment å¦å¤–åœ¨ç”¨æˆ·ç¯å¢ƒå˜é‡ä¸­ï¼Œç³»ç»Ÿä¼šé¦–å…ˆè¯»å–~/.bash_profileæ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰è¯¥æ–‡ä»¶åˆ™è¯»å–~/.bash_loginï¼Œå¦‚æœä¹Ÿæ²¡æœ‰è¯¥æ–‡ä»¶ï¼Œåˆ™è¯»å–~/.profileï¼Œæ ¹æ®è¿™äº›æ–‡ä»¶ä¸­å†…å®¹å†å»è¯»å–~/.bashrcã€‚ æµ‹è¯•Linuxç¯å¢ƒå˜é‡åŠ è½½é¡ºåºçš„æ–¹æ³•ä¸ºäº†æµ‹è¯•å„ä¸ªä¸åŒæ–‡ä»¶çš„ç¯å¢ƒå˜é‡åŠ è½½é¡ºåºï¼Œæˆ‘ä»¬åœ¨æ¯ä¸ªç¯å¢ƒå˜é‡å®šä¹‰æ–‡ä»¶ä¸­çš„ç¬¬ä¸€è¡Œéƒ½å®šä¹‰ç›¸åŒçš„ç¯å¢ƒå˜é‡UU_ORDERï¼Œè¯¥å˜é‡çš„å€¼ä¸ºæœ¬èº«çš„å€¼è¿æ¥ä¸Šå½“å‰æ–‡ä»¶åç§°ã€‚ éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶å¦‚ä¸‹ï¼š /etc/environment /etc/profile /etc/profile.d/test.shï¼Œæ–°å»ºæ–‡ä»¶ï¼Œæ²¡æœ‰æ–‡ä»¶å¤¹å¯ç•¥è¿‡ /etc/bashrcï¼Œæˆ–è€…/etc/bash.bashrc /.bash_profileï¼Œæˆ–è€…/.profile ~/.bashrc åœ¨æ¯ä¸ªæ–‡ä»¶ä¸­çš„ç¬¬ä¸€è¡Œéƒ½åŠ ä¸Šä¸‹é¢è¿™å¥ä»£ç ï¼Œå¹¶ç›¸åº”çš„æŠŠå†’å·åçš„å†…å®¹ä¿®æ”¹ä¸ºå½“å‰æ–‡ä»¶çš„ç»å¯¹æ–‡ä»¶åã€‚ 1export UU_ORDER=&quot;$UU_ORDER:~/.bash_profile&quot; ä¿®æ”¹å®Œä¹‹åä¿å­˜ï¼Œæ–°å¼€ä¸€ä¸ªçª—å£ï¼Œç„¶åecho $UU_ORDERè§‚å¯Ÿå˜é‡çš„å€¼ï¼š 12uusama@ubuntu:~$ echo $UU_ORDER$UU_ORDER:/etc/environment:/etc/profile:/etc/bash.bashrc:/etc/profile.d/test.sh:~/.profile:~/.bashrc å¯ä»¥æ¨æµ‹å‡ºLinuxåŠ è½½ç¯å¢ƒå˜é‡çš„é¡ºåºå¦‚ä¸‹ï¼š /etc/environment /etc/profile /etc/bash.bashrc /etc/profile.d/test.sh ~/.profile ~/.bashrc Linuxç¯å¢ƒå˜é‡æ–‡ä»¶åŠ è½½è¯¦è§£ç”±ä¸Šé¢çš„æµ‹è¯•å¯å®¹æ˜“å¾—å‡ºLinuxåŠ è½½ç¯å¢ƒå˜é‡çš„é¡ºåºå¦‚ä¸‹ï¼Œï¼š ç³»ç»Ÿç¯å¢ƒå˜é‡ -&gt; ç”¨æˆ·è‡ªå®šä¹‰ç¯å¢ƒå˜é‡/etc/environment -&gt; /etc/profile -&gt; ~/.profile æ‰“å¼€/etc/profileæ–‡ä»¶ä½ ä¼šå‘ç°ï¼Œè¯¥æ–‡ä»¶çš„ä»£ç ä¸­ä¼šåŠ è½½/etc/bash.bashrcæ–‡ä»¶ï¼Œç„¶åæ£€æŸ¥/etc/profile.d/ç›®å½•ä¸‹çš„.shæ–‡ä»¶å¹¶åŠ è½½ã€‚ 123456789101112131415161718192021222324252627# /etc/profile: system-wide .profile file for the Bourne shell (sh(1))# and Bourne compatible shells (bash(1), ksh(1), ash(1), ...).if [ &quot;$PS1&quot; ]; then if [ &quot;$BASH&quot; ] &amp;&amp; [ &quot;$BASH&quot; != &quot;/bin/sh&quot; ]; then # The file bash.bashrc already sets the default PS1. # PS1=&apos;\\h:\\w\\$ &apos; if [ -f /etc/bash.bashrc ]; then . /etc/bash.bashrc fi else if [ &quot;`id -u`&quot; -eq 0 ]; then PS1=&apos;# &apos; else PS1=&apos;$ &apos; fi fifiif [ -d /etc/profile.d ]; then for i in /etc/profile.d/*.sh; do if [ -r $i ]; then . $i fi done unset ifi å…¶æ¬¡å†æ‰“å¼€~/.profileæ–‡ä»¶ï¼Œä¼šå‘ç°è¯¥æ–‡ä»¶ä¸­åŠ è½½äº†~/.bashrcæ–‡ä»¶ã€‚ 12345678910# if running bashif [ -n &quot;$BASH_VERSION&quot; ]; then # include .bashrc if it exists if [ -f &quot;$HOME/.bashrc&quot; ]; then . &quot;$HOME/.bashrc&quot; fifi# set PATH so it includes user&apos;s private bin directoriesPATH=&quot;$HOME/bin:$HOME/.local/bin:$PATH&quot; ä»~/.profileæ–‡ä»¶ä¸­ä»£ç ä¸éš¾å‘ç°ï¼Œ/.profileæ–‡ä»¶åªåœ¨ç”¨æˆ·ç™»å½•çš„æ—¶å€™è¯»å–ä¸€æ¬¡ï¼Œè€Œ/.bashrcä¼šåœ¨æ¯æ¬¡è¿è¡ŒShellè„šæœ¬çš„æ—¶å€™è¯»å–ä¸€æ¬¡ã€‚ ä¸€äº›å°æŠ€å·§å¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªç¯å¢ƒå˜é‡æ–‡ä»¶ï¼Œæ¯”å¦‚åœ¨æŸä¸ªé¡¹ç›®ä¸‹å®šä¹‰uusama.profileï¼Œåœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ä½¿ç”¨exportå®šä¹‰ä¸€ç³»åˆ—å˜é‡ï¼Œç„¶ååœ¨~/.profileæ–‡ä»¶åé¢åŠ ä¸Šï¼šsourc uusama.profileï¼Œè¿™æ ·ä½ æ¯æ¬¡ç™»é™†éƒ½å¯ä»¥åœ¨Shellè„šæœ¬ä¸­ä½¿ç”¨è‡ªå·±å®šä¹‰çš„ä¸€ç³»åˆ—å˜é‡ã€‚ ä¹Ÿå¯ä»¥ä½¿ç”¨aliaså‘½ä»¤å®šä¹‰ä¸€äº›å‘½ä»¤çš„åˆ«åï¼Œæ¯”å¦‚alias rm=&quot;rm -i&quot;ï¼ˆåŒå¼•å·å¿…é¡»ï¼‰ï¼Œå¹¶æŠŠè¿™ä¸ªä»£ç åŠ å…¥åˆ°~/.profileä¸­ï¼Œè¿™æ ·ä½ æ¯æ¬¡ä½¿ç”¨rmå‘½ä»¤çš„æ—¶å€™ï¼Œéƒ½ç›¸å½“äºä½¿ç”¨rm -iå‘½ä»¤ï¼Œéå¸¸æ–¹ä¾¿ã€‚","categories":[{"name":"linux","slug":"linux","permalink":"http://ppsteven.github.io/categories/linux/"}],"tags":[{"name":"linux","slug":"linux","permalink":"http://ppsteven.github.io/tags/linux/"},{"name":"ç¯å¢ƒå˜é‡","slug":"ç¯å¢ƒå˜é‡","permalink":"http://ppsteven.github.io/tags/%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/"},{"name":"è½¬è½½","slug":"è½¬è½½","permalink":"http://ppsteven.github.io/tags/%E8%BD%AC%E8%BD%BD/"}]},{"title":"linux crontab å…¥é—¨","slug":"linux-crontab-basic","date":"2020-02-18T16:18:48.000Z","updated":"2020-02-22T13:56:47.084Z","comments":true,"path":"2020/02/19/linux-crontab-basic/","link":"","permalink":"http://ppsteven.github.io/2020/02/19/linux-crontab-basic/","excerpt":"crontab çš„ä½œç”¨æ˜¯ï¼Œæ‰§è¡Œ linux ä¸Šçš„å®šæ—¶ä»»åŠ¡ã€‚å½“æˆ‘ä»¬éœ€è¦è¿è¡Œä¸€äº›è¯¸å¦‚ æ—¥å¿—é‡‡é›† ã€å¿ƒè·³æ£€æŸ¥ è¿™ç§ä»»åŠ¡çš„æ—¶å€™ï¼Œéœ€è¦ç”¨åˆ°ã€‚ æœ€è¿‘åœ¨åš linux è„šæœ¬æ£€æŸ¥ python çˆ¬è™«è„šæœ¬ æ˜¯å¦å¥åº·è¿è¡Œï¼Œæ•…é‡‡ç”¨è¿™ä¸ªæ–¹æ³•ã€‚ åªè¦æ˜¯å¸¸é©»çš„ç¨‹åºï¼Œå¯¹äºç¨‹åºçš„è¦æ±‚æ¯”è¾ƒé«˜ï¼Œå¿…é¡»æœ‰å¾ˆå¥½çš„ç¨³å¥æ€§ï¼Œå¯ä»¥é¢å¯¹å„ç§æƒ…å†µã€‚ ä¸€ä¸ªç¨‹åºå¾ˆéš¾è€ƒè™‘åˆ°å„ç§æç«¯æƒ…å†µ(æ­»æœºï¼Œå†…å­˜çˆ†ï¼Œç½‘ç»œé—®é¢˜ç­‰)ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¿…é¡»è¦å®æ—¶ç›‘æ§è¿™äº›è¿›ç¨‹çš„æ–¹æ³•ã€‚ è¿™é‡Œæˆ‘å‡†å¤‡é‡‡ç”¨çš„æ–¹æ³•ä¸€ï¼šæ—¥è®°é‡‡é›†+ç›‘æ§ï¼Œ æ–¹æ³•äºŒï¼šå®šæœŸæ£€æŸ¥å¹¶å”¤èµ·ã€‚æ—¥å¿—é‡‡é›†çš„ä¸œè¥¿å‡†å¤‡æ”¾åœ¨ä¸‹ä¸€ç¯‡è®²ã€‚ å½“å®‰è£…å®Œæˆæ“ä½œç³»ç»Ÿä¹‹åï¼Œé»˜è®¤ä¾¿ä¼šå¯åŠ¨æ­¤ä»»åŠ¡è°ƒåº¦å‘½ä»¤ã€‚crond å‘½ä»¤æ¯åˆ†é”ºä¼šå®šæœŸæ£€æŸ¥æ˜¯å¦æœ‰è¦æ‰§è¡Œçš„å·¥ä½œï¼Œå¦‚æœæœ‰è¦æ‰§è¡Œçš„å·¥ä½œä¾¿ä¼šè‡ªåŠ¨æ‰§è¡Œè¯¥å·¥ä½œ","text":"crontab çš„ä½œç”¨æ˜¯ï¼Œæ‰§è¡Œ linux ä¸Šçš„å®šæ—¶ä»»åŠ¡ã€‚å½“æˆ‘ä»¬éœ€è¦è¿è¡Œä¸€äº›è¯¸å¦‚ æ—¥å¿—é‡‡é›† ã€å¿ƒè·³æ£€æŸ¥ è¿™ç§ä»»åŠ¡çš„æ—¶å€™ï¼Œéœ€è¦ç”¨åˆ°ã€‚ æœ€è¿‘åœ¨åš linux è„šæœ¬æ£€æŸ¥ python çˆ¬è™«è„šæœ¬ æ˜¯å¦å¥åº·è¿è¡Œï¼Œæ•…é‡‡ç”¨è¿™ä¸ªæ–¹æ³•ã€‚ åªè¦æ˜¯å¸¸é©»çš„ç¨‹åºï¼Œå¯¹äºç¨‹åºçš„è¦æ±‚æ¯”è¾ƒé«˜ï¼Œå¿…é¡»æœ‰å¾ˆå¥½çš„ç¨³å¥æ€§ï¼Œå¯ä»¥é¢å¯¹å„ç§æƒ…å†µã€‚ ä¸€ä¸ªç¨‹åºå¾ˆéš¾è€ƒè™‘åˆ°å„ç§æç«¯æƒ…å†µ(æ­»æœºï¼Œå†…å­˜çˆ†ï¼Œç½‘ç»œé—®é¢˜ç­‰)ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¿…é¡»è¦å®æ—¶ç›‘æ§è¿™äº›è¿›ç¨‹çš„æ–¹æ³•ã€‚ è¿™é‡Œæˆ‘å‡†å¤‡é‡‡ç”¨çš„æ–¹æ³•ä¸€ï¼šæ—¥è®°é‡‡é›†+ç›‘æ§ï¼Œ æ–¹æ³•äºŒï¼šå®šæœŸæ£€æŸ¥å¹¶å”¤èµ·ã€‚æ—¥å¿—é‡‡é›†çš„ä¸œè¥¿å‡†å¤‡æ”¾åœ¨ä¸‹ä¸€ç¯‡è®²ã€‚ å½“å®‰è£…å®Œæˆæ“ä½œç³»ç»Ÿä¹‹åï¼Œé»˜è®¤ä¾¿ä¼šå¯åŠ¨æ­¤ä»»åŠ¡è°ƒåº¦å‘½ä»¤ã€‚crond å‘½ä»¤æ¯åˆ†é”ºä¼šå®šæœŸæ£€æŸ¥æ˜¯å¦æœ‰è¦æ‰§è¡Œçš„å·¥ä½œï¼Œå¦‚æœæœ‰è¦æ‰§è¡Œçš„å·¥ä½œä¾¿ä¼šè‡ªåŠ¨æ‰§è¡Œè¯¥å·¥ä½œ è€Œ linux ä»»åŠ¡è°ƒåº¦çš„å·¥ä½œä¸»è¦åˆ†ä¸ºä»¥ä¸‹ä¸¤ç±»ï¼š 1ã€ç³»ç»Ÿæ‰§è¡Œçš„å·¥ä½œï¼šç³»ç»Ÿå‘¨æœŸæ€§æ‰€è¦æ‰§è¡Œçš„å·¥ä½œï¼Œå¦‚å¤‡ä»½ç³»ç»Ÿæ•°æ®ã€æ¸…ç†ç¼“å­˜ 2ã€ä¸ªäººæ‰§è¡Œçš„å·¥ä½œï¼šæŸä¸ªç”¨æˆ·å®šæœŸè¦åšçš„å·¥ä½œï¼Œä¾‹å¦‚æ¯éš”10åˆ†é’Ÿæ£€æŸ¥é‚®ä»¶æœåŠ¡å™¨æ˜¯å¦æœ‰æ–°ä¿¡ï¼Œè¿™äº›å·¥ä½œå¯ç”±æ¯ä¸ªç”¨æˆ·è‡ªè¡Œè®¾ç½® å®‰è£…1yum install crontabs å¯¹äº crontabs æœåŠ¡çš„æ“ä½œ 123456systemctl status crond // systemctl å’Œ service ä¹Ÿæ˜¯ä¸€æ ·service crond start //å¯åŠ¨æœåŠ¡service crond stop //å…³é—­æœåŠ¡service crond restart //é‡å¯æœåŠ¡service crond reload //é‡æ–°è½½å…¥é…ç½®service crond status //æŸ¥çœ‹æœåŠ¡æ˜¯å¦å¯åŠ¨ åŸºç¡€è¯­æ³•12345crontab [ -u user ] filecrontab [ -u user ] &#123; -l | -r | -e &#125; -l åˆ—å‡ºç›®å‰ç”¨æˆ·çš„æ—¶ç¨‹è¡¨-r åˆ é™¤ç›®å‰ç”¨æˆ·çš„æ—¶ç¨‹è¡¨-e ç¼–è¾‘ç›®å‰ç”¨æˆ·çš„æ—¶ç¨‹è¡¨(é»˜è®¤é‡‡ç”¨VI) ç­‰ä»·äºè¿è¡Œ vi /var/spool/cron/root [æ³¨:å‡å¦‚ä½ æ˜¯rootç”¨æˆ·(æ–‡ä»¶åä¸ç”¨æˆ·åä¸€æ ·)] ä½¿ç”¨æ–¹æ³•1f1 f2 f3 f4 f5 program å…¶ä¸­ f1 æ˜¯è¡¨ç¤ºåˆ†é’Ÿï¼Œf2 è¡¨ç¤ºå°æ—¶ï¼Œf3 è¡¨ç¤ºä¸€ä¸ªæœˆä»½ä¸­çš„ç¬¬å‡ æ—¥ï¼Œf4 è¡¨ç¤ºæœˆä»½ï¼Œf5 è¡¨ç¤ºä¸€ä¸ªæ˜ŸæœŸä¸­çš„ç¬¬å‡ å¤©ã€‚program è¡¨ç¤ºè¦æ‰§è¡Œçš„ç¨‹åºã€‚ å½“ f1 ä¸º * æ—¶è¡¨ç¤ºæ¯åˆ†é’Ÿéƒ½è¦æ‰§è¡Œ programï¼Œf2 ä¸º * æ—¶è¡¨ç¤ºæ¯å°æ—¶éƒ½è¦æ‰§è¡Œç¨‹åºï¼Œå…¶é¦€ç±»æ¨ å½“ f1 ä¸º a-b æ—¶è¡¨ç¤ºä»ç¬¬ a åˆ†é’Ÿåˆ°ç¬¬ b åˆ†é’Ÿè¿™æ®µæ—¶é—´å†…è¦æ‰§è¡Œï¼Œf2 ä¸º a-b æ—¶è¡¨ç¤ºä»ç¬¬ a åˆ°ç¬¬ b å°æ—¶éƒ½è¦æ‰§è¡Œï¼Œå…¶é¦€ç±»æ¨ å½“ f1 ä¸º */n æ—¶è¡¨ç¤ºæ¯ n åˆ†é’Ÿä¸ªæ—¶é—´é—´éš”æ‰§è¡Œä¸€æ¬¡ï¼Œf2 ä¸º */n è¡¨ç¤ºæ¯ n å°æ—¶ä¸ªæ—¶é—´é—´éš”æ‰§è¡Œä¸€æ¬¡ï¼Œå…¶é¦€ç±»æ¨ å½“ f1 ä¸º a, b, c,â€¦ æ—¶è¡¨ç¤ºç¬¬ a, b, c,â€¦ åˆ†é’Ÿè¦æ‰§è¡Œï¼Œf2 ä¸º a, b, c,â€¦ æ—¶è¡¨ç¤ºç¬¬ a, b, câ€¦ä¸ªå°æ—¶è¦æ‰§è¡Œï¼Œå…¶é¦€ç±»æ¨ 12345678* * * * *- - - - -| | | | || | | | +----- æ˜ŸæœŸä¸­æ˜ŸæœŸå‡  (0 - 7) (æ˜ŸæœŸå¤© ä¸º0)| | | +---------- æœˆä»½ (1 - 12) | | +--------------- ä¸€ä¸ªæœˆä¸­çš„ç¬¬å‡ å¤© (1 - 31)| +-------------------- å°æ—¶ (0 - 23)+------------------------- åˆ†é’Ÿ (0 - 59) å®ä¾‹12345670 */2 * * * /sbin/service httpd restart æ„æ€æ˜¯æ¯ä¸¤ä¸ªå°æ—¶é‡å¯ä¸€æ¬¡apache 50 7 * * * /sbin/service sshd start æ„æ€æ˜¯æ¯å¤©7ï¼š50å¼€å¯sshæœåŠ¡ 50 22 * * * /sbin/service sshd stop æ„æ€æ˜¯æ¯å¤©22ï¼š50å…³é—­sshæœåŠ¡ 0 0 1,15 * * fsck /home æ¯æœˆ1å·å’Œ15å·æ£€æŸ¥/home ç£ç›˜ 1 * * * * /home/bruce/backup æ¯å°æ—¶çš„ç¬¬ä¸€åˆ†æ‰§è¡Œ /home/bruce/backupè¿™ä¸ªæ–‡ä»¶ 00 03 * * 1-5 find /home &quot;*.xxx&quot; -mtime +4 -exec rm &#123;&#125; \\; æ¯å‘¨ä¸€è‡³å‘¨äº”3ç‚¹é’Ÿï¼Œåœ¨ç›®å½•/homeä¸­ï¼ŒæŸ¥æ‰¾æ–‡ä»¶åä¸º*.xxxçš„æ–‡ä»¶ï¼Œå¹¶åˆ é™¤4å¤©å‰çš„æ–‡ä»¶ã€‚30 6 */10 * * ls æ„æ€æ˜¯æ¯æœˆçš„1ã€11ã€21ã€31æ—¥æ˜¯çš„6ï¼š30æ‰§è¡Œä¸€æ¬¡lså‘½ä»¤ é…ç½®æ–‡ä»¶crontab æ˜¯ç³»ç»Ÿä»»åŠ¡è°ƒåº¦çš„é…ç½®æ–‡ä»¶ 1234# /etc/crontabSHELL=/bin/bash # è®°å½•ä½¿ç”¨çš„ shell PATH=/sbin:/bin:/usr/sbin:/usr/bin # è®°å½• crontab çš„ç¯å¢ƒå˜é‡MAILTO=root # å‘é€é‚®ä»¶çš„ç”¨æˆ· å¸¸è§é—®é¢˜å¦‚ä½•æŸ¥çœ‹æ—¥å¿—æ‰§è¡Œæ—¥å¿— å­˜å‚¨åœ°å€ /var/log/cron* æ‰§è¡Œæ—¥å¿—æŒ‰å¤©æ’åˆ—ï¼šcron ã€cron-20171119 â€¦ 1tail -f /var/log/cron è¿è¡Œæ—¥å¿— å­˜å‚¨åœ°å€ /var/spool/mail/root mail/root ä¸­çš„root æ˜¯æ–‡ä»¶åï¼Œä¸ç”¨æˆ·ä¿æŒä¸€è‡´ å‘é‚®ä»¶çš„åŠŸèƒ½ï¼Œæˆ‘æ²¡æœ‰å°è¯•æˆåŠŸ // TODO å¦‚ä½•æŸ¥çœ‹/å¤‡ä»½ä»»åŠ¡12345678# ç¼–è¾‘ä»»åŠ¡crontab -e # å®é™…ä¸Šæ‰€æœ‰çš„é…ç½®éƒ½å­˜æ”¾åœ¨ /var/spool/cron/*ä¸‹ï¼Œæ–‡ä»¶åä¸ç”¨æˆ·åä¸€è‡´/var/spool/conf/root :root ç”¨æˆ·ä»»åŠ¡/var/spool/conf/mysql :mysql ç”¨æˆ·ä»»åŠ¡# å¤‡ä»½ä»»åŠ¡crontab -l &gt; $HOME/mycrontabcp /var/spool/conf/root $HOME/YOURPLACE/root æ³¨æ„äº‹é¡¹crontab æœ‰å¾ˆå¤šçš„æ³¨æ„å®ç°ï¼Œæ–°æ‰‹å¾ˆå®¹æ˜“ç¿»è½¦ å»ºè®®ä¸è¾“å‡ºæ—¥å¿—åŸå› æ˜¯ä»»åŠ¡è¿è¡Œå¤ªé¢‘ç¹ï¼Œæ—¥å¿—ä¼šç´¯ç§¯çš„éå¸¸å¤§ï¼Œä¸ç•™æ„ä¼šæ’‘çˆ†ä½ çš„ç¡¬ç›˜ 1&gt; /dev/null 2&gt;&amp;1 ç¯å¢ƒå˜é‡é—®é¢˜crontab çš„ç¯å¢ƒå˜é‡æ˜¯ä¸€ä¸ªå¤§é—®é¢˜ï¼Œcrontabè¿è¡Œçš„æ—¶å€™ä¸æ˜¯ä»¥äº¤äº’å¼çš„æ–¹å¼è¿è¡Œæˆ‘ä»¬çš„ç¨‹åºï¼Œè¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬å¸¸è§„çš„ç”¨æ¥é…ç½® linux ç¯å¢ƒå˜é‡ çš„æ–¹æ³•ã€‚å¦‚ .bashrc ï¼Œ.bash_profile ç­‰éƒ½ä¸ä¼šèµ·ä½œç”¨ã€‚ å®˜æ–¹ç»™çš„å»ºè®®æ˜¯ï¼Œä¸è¦å‡å®š cron çŸ¥é“æ‰€éœ€è¦çš„ç‰¹æ®Šç¯å¢ƒï¼Œæ‰€ä»¥è¦ä¿è¯ shell è„šæœ¬ä¸­æä¾›æ‰€æœ‰å¿…è¦çš„è·¯å¾„å’Œç¯å¢ƒå˜é‡ã€‚ è„šæœ¬ä¸­æ¶‰åŠæ–‡ä»¶è·¯å¾„æ—¶å†™å…¨å±€è·¯å¾„ï¼› è„šæœ¬æ‰§è¡Œè¦ç”¨åˆ°javaæˆ–å…¶ä»–ç¯å¢ƒå˜é‡æ—¶ï¼Œé€šè¿‡sourceå‘½ä»¤å¼•å…¥ç¯å¢ƒå˜é‡ï¼Œå¦‚: 123456cat start_cbp.sh#!/bin/sh# shell è„šæœ¬ä¸­å†™å…¥æ‰€éœ€å¼•å…¥çš„ç¯å¢ƒå˜é‡source /etc/profileexport RUN_CONF=/home/d139/conf/platform/cbp/cbp_jboss.conf/usr/local/jboss-4.0.5/bin/run.sh -c mev &amp; å½“æ‰‹åŠ¨æ‰§è¡Œè„šæœ¬OKï¼Œä½†æ˜¯crontabæ­»æ´»ä¸æ‰§è¡Œæ—¶,å¾ˆå¯èƒ½æ˜¯ç¯å¢ƒå˜é‡æƒ¹çš„ç¥¸ï¼Œå¯å°è¯•åœ¨crontabä¸­ç›´æ¥å¼•å…¥ç¯å¢ƒå˜é‡è§£å†³é—®é¢˜ã€‚å¦‚: 10 * * * * . /etc/profile;/bin/sh /var/www/java/audit_no_count/bin/restart_audit.sh å‚è€ƒèµ„æ–™èœé¸Ÿæ•™ç¨‹ï¼šLinux crontab å‘½ä»¤ å°aç–æ‹¾æŸ’ï¼šLinux crontabå‘½ä»¤è¯¦è§£","categories":[{"name":"linux","slug":"linux","permalink":"http://ppsteven.github.io/categories/linux/"}],"tags":[{"name":"linux","slug":"linux","permalink":"http://ppsteven.github.io/tags/linux/"},{"name":"crontab","slug":"crontab","permalink":"http://ppsteven.github.io/tags/crontab/"},{"name":"è¿ç»´","slug":"è¿ç»´","permalink":"http://ppsteven.github.io/tags/%E8%BF%90%E7%BB%B4/"}]},{"title":"mysql error:Waiting for table metadata lock","slug":"mysql-bug-solution","date":"2020-02-11T15:57:07.000Z","updated":"2020-02-15T17:00:07.283Z","comments":true,"path":"2020/02/11/mysql-bug-solution/","link":"","permalink":"http://ppsteven.github.io/2020/02/11/mysql-bug-solution/","excerpt":"èƒŒæ™¯æ˜¯ï¼ŒNavicat åœ¨é’ˆå¯¹ä¸€å¼ è¡¨æ ¼åšåˆ é™¤æ“ä½œçš„æ—¶å€™ï¼Œä¼šä¸€ç›´ç­‰å¾…ï¼Œæ— æ³•è¿›è¡Œä»»ä½•æ“ä½œã€‚ ç»è¿‡ show PROCESSLIST å‘ç°æ˜¯ Waiting for table metadata lock é”™è¯¯ã€‚","text":"èƒŒæ™¯æ˜¯ï¼ŒNavicat åœ¨é’ˆå¯¹ä¸€å¼ è¡¨æ ¼åšåˆ é™¤æ“ä½œçš„æ—¶å€™ï¼Œä¼šä¸€ç›´ç­‰å¾…ï¼Œæ— æ³•è¿›è¡Œä»»ä½•æ“ä½œã€‚ ç»è¿‡ show PROCESSLIST å‘ç°æ˜¯ Waiting for table metadata lock é”™è¯¯ã€‚ åˆ é™¤ mysql ä¸­è¡¨æ ¼é‡åˆ°é”å‡ºç°äº†Waiting for table metadata lock çš„åŸå› æ˜¯ï¼Œç¨‹åºä¸­å¯¹äºæ•°æ®åº“çš„ä¸€æ¬¡æ“ä½œå¹¶æ²¡æœ‰æˆåŠŸå…³é—­ï¼Œå¯¼è‡´æ•°æ®åº“ä¸Šé”åï¼Œæ²¡æœ‰è§£é”ã€‚æŒ‰ç…§å¦‚ä¸‹æ“ä½œå³å¯è§£å†³é—®é¢˜ã€‚ 12345show PROCESSLIST; # æ˜¾ç¤ºæ‰€æœ‰çš„æ“ä½œselect * from information_schema.innodb_trx # æŸ¥çœ‹æœªæäº¤äº‹åŠ¡kill sid # åˆ é™¤é”ä½çš„æ“ä½œset session lock_wait_timeout = 1800; set global lock_wait_timeout = 1800;# è°ƒæ•´é”è¶…æ—¶é˜ˆå€¼ lock_wait_timeout è¡¨ç¤ºè·å–metadata lockçš„è¶…æ—¶ï¼ˆå•ä½ä¸ºç§’ï¼‰ï¼Œå…è®¸çš„å€¼èŒƒå›´ä¸º1åˆ°31536000ï¼ˆ1å¹´ï¼‰ã€‚ é»˜è®¤å€¼ä¸º31536000ã€‚ å‚è€ƒèµ„æ–™ï¼šMySQLå‡ºç°Waiting for table metadata lockçš„åŸå› ä»¥åŠè§£å†³æ–¹æ³• å‚è€ƒèµ„æ–™","categories":[{"name":"mysql","slug":"mysql","permalink":"http://ppsteven.github.io/categories/mysql/"}],"tags":[{"name":"mysql error","slug":"mysql-error","permalink":"http://ppsteven.github.io/tags/mysql-error/"}]},{"title":"Pythonè£…é¥°å™¨ï¼šå°†è£…é¥°å™¨å®šä¹‰ä¸ºç±»","slug":"define-decorators-as-class","date":"2020-02-08T16:18:59.000Z","updated":"2020-02-15T17:53:24.593Z","comments":false,"path":"2020/02/09/define-decorators-as-class/","link":"","permalink":"http://ppsteven.github.io/2020/02/09/define-decorators-as-class/","excerpt":"æœ€è¿‘åœ¨å¼ºåŒ–è¡¥é½ Python çš„åŸºç¡€çŸ¥è¯†ï¼Œå‘é«˜é˜¶ç©å®¶è¿›å‘ã€‚ä¸»æ”»ã€ŠPython CookBook 3rdã€‹ï¼Œä¸Šé¢çš„çŸ¥è¯†ç‚¹æ¯”è¾ƒå¤šï¼Œæˆ‘æŒ‘é‡ç‚¹çœ‹è¿™å‡ ä¸ªæ–¹é¢ã€‚ yield + åç¨‹ è£…é¥°å™¨ å¤šçº¿ç¨‹ é¢å‘å¯¹è±¡ æœ¬ç¯‡åšå®¢è®¨è®ºçš„ä¸»é¢˜æ˜¯ è£…é¥°å™¨ ï¼Œè£…é¥°å™¨å…¶å®ä¹Ÿä¸æ˜¯ä»€ä¹ˆæ–°é²œçš„ç”¨æ³•ï¼Œå°±æ˜¯ä¼ å…¥çš„å‚æ•°æ˜¯ å‡½æ•° ï¼Œè¿™ä¸€ç‚¹ä¸Šï¼Œå®ƒæ›´åƒæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ã€‚è£…é¥°å™¨çš„ä½œç”¨æ˜¯å¯ä»¥ç»™æˆ‘ä»¬åŸæœ¬ç¼–å†™å¥½çš„å‡½æ•°å†ä¸€æ¬¡çš„åŠ ä¸Šé¢å¤–çš„åŠŸèƒ½ï¼ˆæ¯”å¦‚ç»Ÿè®¡æ—¶é—´ï¼Œæ‰“æ—¥å¿—ï¼‰ã€‚ è£…é¥°å™¨å¯ä»¥ç»™æˆ‘ä»¬çš„å‡½æ•°åŠ ä¸Šæ­¦å™¨ï¼Œä½¿å®ƒä»¬æ›´åŠ å¼ºå¤§ã€‚å¦‚æœæ˜¯åˆ©ç”¨ Python è¿›è¡Œ Web å¼€å‘çš„å°ä¼™ä¼´å¯¹è£…é¥°å™¨å¹¶ä¸é™Œç”Ÿï¼Œåœ¨ Flask å’Œ Django ä¸­ @ ç¬¦å·åº”è¯¥ä¸å°‘è§äº†","text":"æœ€è¿‘åœ¨å¼ºåŒ–è¡¥é½ Python çš„åŸºç¡€çŸ¥è¯†ï¼Œå‘é«˜é˜¶ç©å®¶è¿›å‘ã€‚ä¸»æ”»ã€ŠPython CookBook 3rdã€‹ï¼Œä¸Šé¢çš„çŸ¥è¯†ç‚¹æ¯”è¾ƒå¤šï¼Œæˆ‘æŒ‘é‡ç‚¹çœ‹è¿™å‡ ä¸ªæ–¹é¢ã€‚ yield + åç¨‹ è£…é¥°å™¨ å¤šçº¿ç¨‹ é¢å‘å¯¹è±¡ æœ¬ç¯‡åšå®¢è®¨è®ºçš„ä¸»é¢˜æ˜¯ è£…é¥°å™¨ ï¼Œè£…é¥°å™¨å…¶å®ä¹Ÿä¸æ˜¯ä»€ä¹ˆæ–°é²œçš„ç”¨æ³•ï¼Œå°±æ˜¯ä¼ å…¥çš„å‚æ•°æ˜¯ å‡½æ•° ï¼Œè¿™ä¸€ç‚¹ä¸Šï¼Œå®ƒæ›´åƒæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ã€‚è£…é¥°å™¨çš„ä½œç”¨æ˜¯å¯ä»¥ç»™æˆ‘ä»¬åŸæœ¬ç¼–å†™å¥½çš„å‡½æ•°å†ä¸€æ¬¡çš„åŠ ä¸Šé¢å¤–çš„åŠŸèƒ½ï¼ˆæ¯”å¦‚ç»Ÿè®¡æ—¶é—´ï¼Œæ‰“æ—¥å¿—ï¼‰ã€‚ è£…é¥°å™¨å¯ä»¥ç»™æˆ‘ä»¬çš„å‡½æ•°åŠ ä¸Šæ­¦å™¨ï¼Œä½¿å®ƒä»¬æ›´åŠ å¼ºå¤§ã€‚å¦‚æœæ˜¯åˆ©ç”¨ Python è¿›è¡Œ Web å¼€å‘çš„å°ä¼™ä¼´å¯¹è£…é¥°å™¨å¹¶ä¸é™Œç”Ÿï¼Œåœ¨ Flask å’Œ Django ä¸­ @ ç¬¦å·åº”è¯¥ä¸å°‘è§äº† ç”¨ç±»æ¥å®ç°è£…é¥°å™¨Python å¯¹æŸä¸ªå¯¹è±¡æ˜¯å¦èƒ½é€šè¿‡è£…é¥°å™¨ï¼ˆ@decoratorï¼‰å½¢å¼ä½¿ç”¨åªæœ‰ä¸€ä¸ªè¦æ±‚ï¼šdecorator å¿…é¡»æ˜¯ä¸€ä¸ªâ€œå¯è¢«è°ƒç”¨ï¼ˆcallableï¼‰çš„å¯¹è±¡ã€‚ç±»ä¹Ÿå¯ä»¥é€šè¿‡å®ç° __call__ æ–¹æ³•ï¼Œå˜å¾—å’Œå‡½æ•°ä¸€æ ·å¯è°ƒç”¨ 123456789class Foo: def __call__(self): print('__call__ has been called')foo = Foo()# OUTPUT: __call__ has been calledfoo()# OUTPUT: Trueprint(callable(foo)) è¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥å¼€å§‹ç”¨ç±»æ¥å®ç°è£…é¥°å™¨äº† 123456789101112131415161718class Profiled: def __init__(self, func): self.func = func self.ncalls = 0 def __call__(self, *args, **kwargs): self.ncalls += 1 return self.func(*args, **kwargs)@Profileddef add(x, y): return x + y# 3 add(1,2)# 7add(3,4)# OUTPUT:2 æ€»å…±è°ƒç”¨äº†2æ¬¡è£…é¥°å™¨print(add.ncalls) é—®é¢˜ä¸€ï¼šè£…é¥°å™¨æ— æ³•è£…é¥°ç±»å†…çš„æ–¹æ³•è¿™æ—¶å€™å‡ºç°äº†ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œå½“è£…é¥°å™¨å°è¯•è£…é¥°ç±»å†…çš„æ–¹æ³•çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¸¸å¸¸ä¼šå‡ºç° å‚æ•°è¾“å…¥ä¸æ­£ç¡®çš„æç¤º 12345678class Spam: @Profiled def bar(self, x): print(self, x)s = Spam()# TypeError: bar() missing 1 required positional argument: 'x's.bar(1) è¿™ä¸ªé—®é¢˜ä¼šè®©å¾ˆå¤šäººæ„Ÿåˆ°å›°æƒ‘ï¼Œæ˜æ˜æˆ‘å·²ç»è¾“å…¥äº†å‚æ•°xï¼Œèµ‹å€¼ä¸º1ï¼Œä½†æ˜¯å´æç¤ºæ²¡æœ‰æ”¶åˆ°å‡½æ•°ã€‚æˆ‘å½“æ—¶å›°æƒ‘äº†å¾ˆä¹…ã€‚ç»ˆäºå‘ç°äº†ä¸€ä¸ªæˆ‘ä»¬ä¸å®¹æ˜“æ³¨æ„åˆ°çš„ç»†èŠ‚ï¼šå‡½æ•°å’Œæ–¹æ³•çš„åŠŸèƒ½ç›¸ä¼¼ï¼Œå½“æ—¶å®ç°æ–¹å¼ä¸åŒã€‚ æˆ‘çš„ç†è§£æ˜¯ï¼šä¸å®ä¾‹ç»‘å®šçš„å‡½æ•°ï¼Œå«åšè¿‡ç¨‹ã€‚ä¸ä¸å®ä¾‹ç»‘å®šçš„å«åšå‡½æ•°ã€‚è¿™é‡Œçš„å®ä¾‹ï¼Œåœ¨ä»£ç é‡Œé¢å°±æ˜¯ selfç±»å†…çš„æ–¹æ³•ï¼Œéœ€è¦å¤šä¼ ä¸€ä¸ª self ï¼Œå®ƒæœ¬è´¨ä¸Šå¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªæŒ‡å‘å®ä¾‹çš„æŒ‡é’ˆã€‚ 123456# æˆ‘ä»¬åœ¨ __call__ é‡Œé¢å¤šåŠ ä¸€è¡Œï¼Œçœ‹çœ‹è¾“å‡ºä¼šæ˜¯ä»€ä¹ˆdef __call__(self, *args, **kwargs): self.ncalls += 1+ print(self, *args, **kwargs) return self.func(*args, **kwargs)# &lt;__main__.Profiled object at 0x10faf1128&gt; 1 self å°±æ˜¯ &lt;__main__.Profiled object at 0x10faf1128&gt; ï¼Œè€Œè¾“å…¥çš„å‚æ•°æ˜¯ 1 ã€‚ Self åˆ°ä½æ˜¯ä¸€ä¸ªä»€ä¹ˆç©æ„ï¼Ÿ ä¸ºäº†æ¢å¯» self çš„æœ¬è´¨ï¼Œæˆ‘åˆå¤šåšäº†ä¸€ä¸ªå®éªŒã€‚å‘ç° self ï¼ŒSpam.bar ï¼Œs.bar éƒ½æ˜¯ä¸€ä¸ªä¸œè¥¿ï¼Œç›¸äº’æ›¿æ¢çš„è¯ï¼Œä¹Ÿæ˜¯OKçš„ï¼Œå®ƒå°±æ˜¯ç±»çš„ä¸€ä¸ªå®ä¾‹ã€‚éœ€è¦æ³¨æ„çš„æ˜¯@Profiled ç­‰ä»·äº bar = Profiled(bar) ï¼Œæ‰€ä»¥è¿™ä¸ªå®ä¾‹ä¹Ÿå°±æ˜¯ Spam.bar ã€‚ 123456self&lt;__main__.Profiled object at 0x10aaf5470&gt;Spam.bar&lt;__main__.Profiled object at 0x10aaf5470&gt;s.bar&lt;__main__.Profiled object at 0x10aaf5470&gt; ä¸‹é¢çš„ä¾‹å­ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½çš„ç†è§£ å¯¹è±¡çš„æ–¹æ³• å’Œ ç±»çš„æ–¹æ³• 1234567891011121314# å¸¦ self çš„æ„æ€æ˜¯å¯¹è±¡çš„æ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»ä¼ å…¥ä¸€ä¸ªå¯¹è±¡class Spam: def bar(self, x): print(self, x)# æ­£å¸¸ç”¨æ³•ï¼Œå®ä¾‹åŒ–å¯¹è±¡ï¼Œç„¶åè°ƒç”¨å¯¹è±¡çš„æ–¹æ³•# OUTPUT: &lt;__main__.Spam object at 0x10b3470b8&gt; 111s = Spam()s.bar(111)# ç›´æ¥ä½¿ç”¨ Spam.bar æ–¹æ³•Spam.bar(123) # é”™è¯¯ç”¨æ³•ï¼Œå› ä¸ºè¿™é‡Œå½“åšç±»çš„æ–¹æ³•å»ä½¿ç”¨äº†# OUTPUT: &lt;__main__.Spam object at 0x10b3470b8&gt; 123Spam.bar(Spam(),123) # æ­£ç¡®ç”¨æ³• æ›´è¿›ä¸€æ­¥ï¼Œæˆ‘ä»¬å‘ç°ï¼Œå®šä¹‰ç±»çš„æ–¹æ³•çš„æ—¶å€™ï¼Œç±»å¹¶ä¸å…³å¿ƒä½ ä¼ å…¥çš„å®ä¾‹åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œå¯ä»¥æ˜¯ self ï¼Œä¹Ÿå¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å®ä¾‹ã€‚ 12345678# &lt;__main__.Spam object at 0x107bcc128&gt; 123Spam.bar(Spam(),123)# &lt;__main__.Spam object at 0x107bc2e80&gt; 123Spam.bar(s,123)# &lt;function Spam.bar at 0x107badea0&gt; 123Spam.bar(Spam.bar,123)# ä»»ä½•ç±»å‹çš„å¯¹è±¡éƒ½å¯ä»¥ 123Spam.bar(\"ä»»ä½•ç±»å‹çš„å¯¹è±¡éƒ½å¯ä»¥\",123) è§£å†³æ–¹æ¡ˆå›åˆ°æ­£é¢˜ï¼Œæˆ‘ä»¬ç»ˆäºæ‰¾åˆ°äº†åŸå…ˆé”™è¯¯çš„åŸå› ï¼Œå°±æ˜¯æ¼æ‰äº† self ã€‚ 1234567891011121314151617181920212223class Profiled: def __init__(self, func): self.func = func self.ncalls = 0 def __call__(self, *args, **kwargs): self.ncalls += 1- return self.func(*args, **kwargs)+ return self.func(self, *args, **kwargs)class Spam: @Profiled def bar(self, x): print(self, x)s = Spam()s.bar(1)s.bar(2)print(Spam.bar.ncalls)# OUTPUT&lt;__main__.Profiled object at 0x104168eb8&gt; 1&lt;__main__.Profiled object at 0x104168eb8&gt; 22 è§£å†³å®Œè¿™ä¸ªé—®é¢˜ï¼Œé™„å¸¦çš„æˆ‘ä»¬å¯¹ self çš„ç†è§£å°±åŠ æ·±äº†ä¸€å±‚ã€‚ ç±»æ–¹æ³• å’Œ å®ä¾‹æ–¹æ³•1234567891011121314class Spam: \"\"\"å®ä¾‹æ–¹æ³•\"\"\" def bar(self, x): print(self, x)class Swam: \"\"\"ç±»æ–¹æ³•\"\"\" @classmethod def bar(cls, x): print(cls, x)# OUTPUT: &lt;__main__.Spam object at 0x1102080f0&gt; 1Spam().bar(1)# OUTPUT: &lt;class '__main__.Swam'&gt; 1Swam.bar(1) é—®é¢˜äºŒï¼šå¦‚ä½•å…¼é¡¾ç±»å†…ç±»å¤–çš„å‡½æ•°åˆšåˆšçš„é—®é¢˜ä¸€è§£å†³åï¼Œæˆ‘ä»¬å‘ç°ï¼Œå¯¹åŸæ¥ç±»å¤–çš„å‡½æ•°åˆå¤±æ•ˆäº†ï¼ŒåŸå› æ˜¯å®ƒå¹¶æ²¡æœ‰ self è¿™ä¸ªå‚æ•°ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦èŠ±ä¸€ç•ªåŠŸå¤«ï¼Œå…¶å®ç®€å•æ¥è¯´ï¼Œæœ‰å®ä¾‹çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦å¡«å……å®ä¾‹åˆ° self å‚æ•°çš„ä½ç½®ã€‚ è¿™é‡Œæˆ‘ä»¬å€ŸåŠ© types.MethodTpye å’Œ __get__ è§£å†³æ–¹æ³•ï¼ˆå®Œç¾ç‰ˆï¼‰12345678910111213141516171819202122232425262728293031323334import typesfrom functools import wrapsclass Profiled: def __init__(self, func): self.func = func self.ncalls = 0 def __call__(self, *args, **kwargs): self.ncalls += 1 return self.func(*args, **kwargs) def __get__(self, instance, cls): if instance is None: return self else: return types.MethodType(self, instance)@Profileddef add(x, y): return x + yclass Spam: @Profiled def bar(self, x): print(self, x)add(1,2)add(3,4)print(add.ncalls)s = Spam()s.bar(1)s.bar(2)print(Spam.bar.ncalls) __get__ æ˜¯æ€ä¹ˆä½¿ç”¨å½“ä¸€ä¸ªç±»ä¸­å®ç°äº†ä»»æ„çš„ __get__()ã€__set__() å’Œ__delete__() ä¸‰ä¸ªç‰¹æ®Šçš„æ–¹æ³•åï¼Œ è¿™ä¸ªç±»å°±æ˜¯ä¸€ä¸ªæè¿°å™¨ç±»ã€‚å½“è¿™ä¸ªæè¿°å™¨åœ¨å¦ä¸€ä¸ªç±»ä¸­è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œå°±ä¼šè°ƒç”¨ä»¥ä¸Šçš„ä¸‰ä¸ªæ–¹æ³•ã€‚ 123456789101112131415161718# å®šä¹‰ä¸€ä¸ªæè¿°å™¨ç±»class Integer: def __init__(self, name): self.name = name def __get__(self, instance, cls): if instance is None: return self else: return instance.__dict__[self.name] def __set__(self, instance, value): if not isinstance(value, int): raise TypeError('Expected an int') instance.__dict__[self.name] = value def __delete__(self, instance): del instance.__dict__[self.name] ä¸ºäº†ä½¿ç”¨ä¸€ä¸ªæè¿°å™¨ï¼Œè¿™ä¸ªç±»å¿…é¡»ä½œä¸ºå¦å¤–ä¸€ä¸ªç±»çš„å±æ€§ 1234567891011121314151617# x, y éƒ½æ˜¯ Point çš„æè¿°å™¨å±æ€§# éœ€è¦æ³¨æ„çš„æ˜¯: x, y æ˜¯ç±»çš„å±æ€§ï¼Œéœ€è¦åœ¨æ–¹æ³•å‰å®šä¹‰class Point: x = Integer('x') y = Integer('y') def __init__(self, x, y): self.x = x self.y = y# ä¸‹é¢çš„å®šä¹‰æ˜¯é”™è¯¯çš„class Point: def __init__(self, x, y): self.x = Integer('x') # No! Must be a class variable self.y = Integer('y') self.x = x self.y = y ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ 1234&gt;&gt;&gt; p = Point(2, 3)&gt;&gt;&gt; p.x # Calls Point.x.__get__(p,Point)2&gt;&gt;&gt; p.y = 5 # Calls Point.y.__set__(p, 5) æˆ‘ä»¬ä¼šå‘ç° __get__ æ–¹æ³•å®ç°èµ·æ¥æ¯”è¾ƒå¤æ‚ 12345def __get__(self, instance, cls): if instance is None: return self else: return instance.__dict__[self.name] self, instance, cls åˆ†åˆ«ä»£è¡¨ä»€ä¹ˆæ„æ€ï¼Ÿself æ˜¯ Integer ç±»çš„å®ä¾‹ï¼Œè¿™é‡Œ xã€y éƒ½å¯ä»¥çœ‹åšæ˜¯selfã€‚instance æ˜¯ Point ç±»çš„å®ä¾‹ï¼Œä¹Ÿå°±æ˜¯ pã€‚clsï¼ˆä¹Ÿå¯ä»¥å†™æˆ ownerï¼‰æ˜¯ç±»æœ¬èº«ï¼Œè¿™é‡Œå°±æ˜¯ Point ç±»ã€‚ å¦‚æœä¸€ä¸ªæè¿°å™¨è¢«å½“åšä¸€ä¸ªç±»å˜é‡æ¥è®¿é—®ï¼Œé‚£ä¹ˆ instance å‚æ•°è¢«è®¾ç½®æˆ None ã€‚ è¿™ç§æƒ…å†µä¸‹ï¼Œæ ‡å‡†åšæ³•å°±æ˜¯ç®€å•çš„è¿”å›è¿™ä¸ªæè¿°å™¨æœ¬èº«å³å¯(å°½ç®¡ä½ è¿˜å¯ä»¥æ·»åŠ å…¶ä»–çš„è‡ªå®šä¹‰æ“ä½œ)ã€‚ 1234&gt;&gt;&gt; p.x # Calls Point.x.__get__(p, Point)2&gt;&gt;&gt; Point.x # Calls Point.x.__get__(None, Point)&lt;__main__.Integer object at 0x100671890&gt; types.MethodType è¯¦è§£Python æ˜¯åŠ¨æ€çš„ç¼–ç¨‹è¯­è¨€ï¼Œå¯ä»¥åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œç»™ç±»åŠ¨æ€çš„æ·»åŠ æ–¹æ³•ã€‚ ä¸‹é¢ä¸¾ä¸€ä¸ªç»å…¸ç”¨æ³• 123456789import types def fn_get_name(self): return self.nameclass Person(object): def __init__(self, name, score): self.name = name self.score = score æ·»åŠ å‡½æ•°åˆ° Person ç±»çš„æ–¹æ³•ä¸Šã€‚ 12345678&gt;&gt;&gt; p1 = Person('Bob', 90) &gt;&gt;&gt; p1.get_name = types.MethodType(fn_get_name, p1) &gt;&gt;&gt; print p1.get_name() Bob&gt;&gt;&gt; p2 = Person('Alice', 65) &gt;&gt;&gt; print p2.get_name() # ERROR: AttributeError: 'Person' object has no attribute 'get_name' # å› p2å®ä¾‹æ²¡æœ‰ç»‘å®šget_nameæ–¹æ³•ï¼Œæ‰€ä»¥å‡ºç°é”™è¯¯ã€‚ ä¸‹é¢æˆ‘ä»¬æ·±å…¥ç†è§£ä¸€ä¸‹ p1.get_name = types.MethodType(fn_get_name, p1)types.MethodType æ¥å—ä¸¤ä¸ªå‚æ•°ï¼ˆå¥½åƒPython2 æ˜¯3 ä¸ªå‚æ•°ï¼Ÿï¼‰ ç¬¬ä¸€ä¸ªå‚æ•°ï¼šç»‘å®šçš„å‡½æ•° ç¬¬äºŒä¸ªå‚æ•°ï¼šéœ€è¦ç»‘å®šçš„å®ä¾‹ å­¤ç«‹çš„çœ‹ä¸¤ä¸ªå‚æ•°å’Œå®ç°çš„ç»“æœå¹¶ä¸èƒ½å¾ˆå¥½çš„ç†è§£å…¶ä¸­çš„åŸç†ï¼Œå®é™…ä¸Šï¼Œæ‰€è°“çš„ç»‘å®šçš„å®è´¨ä¸Šæ˜¯ï¼šç¬¬äºŒä¸ªå®ä¾‹æ˜¯ä½œä¸ºå‚æ•°ï¼Œä¼ å…¥åˆ°ç»‘å®šå‡½æ•°(ç°åœ¨æ˜¯ç±»çš„è¿‡ç¨‹)çš„ self ä¸­å»ã€‚ å¦‚æœç†è§£äº†è¿™ä¸€å¥è¯ï¼Œé‚£ä¹ˆåº”è¯¥ä¸éš¾ç†è§£ä¸‹é¢çš„ç¨‹åºã€‚æ˜æ˜æ˜¯ p1 è°ƒç”¨è‡ªå·±çš„æ–¹æ³•ï¼Œæœ€åè¾“å‡ºçš„æ˜¯ p2 çš„ç»“æœ 12345p1 = Person('Bob', 90) p2 = Person('Tom', 0)p1.get_name = types.MethodType(fn_get_name, p2) print (p1.get_name())# OUTPUT: Tom åŸå› æ˜¯æˆ‘ä»¬çš„ç±»æœ€ç»ˆæ˜¯å˜æˆäº†ä¸‹é¢çš„æ ·å­ 12345678910111213141516import types def fn_get_name(self): return self.nameclass Person(object): def __init__(self, name, score): self.name = name self.score = score def get_name(self): self = p2 return self.namep1 = Person('Bob', 90) p2 = Person('Tom', 0)print (p1.get_name())# OUTPUT: TOM å›é¡¾æœ‰äº†ä¸Šé¢çš„å„ç§é“ºå«åï¼Œæˆ‘ä»¬å†ä¸€æ¬¡çš„å›é¡¾ __get__, __call__ ä¸¤ä¸ªæ–¹æ³•ï¼Œå°±ç¬é—´äº†ç„¶ã€‚ 1234567891011def __get__(self, instance, cls): if instance is None: return self else: return types.MethodType(self, instance) # è¯¥å®ä¾‹ä¼šä½œä¸ºå‚æ•°ä¼ å…¥ self ä¸­def __call__(self, *args, **kwargs): # å½“å®ä¾‹å‘ç”Ÿè°ƒç”¨çš„æ—¶å€™ï¼Œ__call__(self, self, 1) # args = (self, 1) self.ncalls += 1 return self.func(*args, **kwargs) # self.func(self, 1) åˆ©ç”¨ wrapper å†æ¬¡åŒ…è£…ä¸€ä¸‹wrapper çš„ä½œç”¨éå¸¸ç®€å•ï¼Œå°±æ˜¯è®©å¤åˆ¶è¢«åŒ…è£…å‡½æ•°çš„å…ƒä¿¡æ¯ã€‚ä¸‹é¢çš„ä»£ç å°±æ˜¯ Python Cookbook ç»™å‡ºçš„ç­”æ¡ˆã€‚ 12345678910111213141516171819import typesfrom functools import wrapsclass Profiled: def __init__(self, func):- self.func = func+ wraps(func)(self) self.ncalls = 0 def __call__(self, *args, **kwargs): self.ncalls += 1- return self.func(*args, **kwargs)+ return self.__wrapped__(*args, **kwargs) def __get__(self, instance, cls): if instance is None: return self else: return types.MethodType(self, instance) å°ç»“èŠ±äº†ç›¸å½“é•¿çš„ä¸€ä¸ªç¯‡å¹…å»è®¨è®º Python Cookbook çš„ä¸€ä¸ªç« èŠ‚ï¼Œè™½ç„¶æœ‰ç‚¹å°é¢˜å¤§åšã€‚ä¸è¿‡ä¹Ÿæ˜¯æŠŠå¾ˆå¤šä¸æ‡‚çš„åœ°æ–¹ç†æ¸…æ¥šäº†ã€‚ç‰¹åˆ«æ˜¯å¯¹äº å‡½æ•°å’Œæ–¹æ³• çš„è®¤è¯†æ›´æ·±ä¸€æ­¥äº†ã€‚ åç»­ä¼šåˆ©ç”¨è£…é¥°å™¨å»åšä¸€ä¸ªåº”ç”¨ï¼Œè®¡åˆ’æ˜¯åšä¸€ä¸ª requests åŒ…çš„ä¸€ä¸ªå°è£…ï¼Œä½¿å¾— request è¯·æ±‚çš„æ—¶å€™è‡ªåŠ¨åŠ ä¸Šä»£ç†ï¼ŒæŠŠå®ƒå°è£…æˆä¸€ä¸ª Util å·¥å…·ã€‚ å‚è€ƒèµ„æ–™Python å·¥åŒ ï¼šä½¿ç”¨è£…é¥°å™¨çš„æŠ€å·§ pythonä¸­å‡½æ•°å’Œæ–¹æ³•åŒºåˆ«ï¼Œä»¥åŠå¦‚ä½•ç»™pythonç±»åŠ¨æ€ç»‘å®šæ–¹æ³•å’Œå±æ€§ï¼ˆæ¶‰åŠtypes.MethodType()å’Œslotsï¼‰ Python Cookbook 8.9 åˆ›å»ºæ–°çš„ç±»æˆ–å®ä¾‹å±æ€§ Python Cookbook 9.9 å°†è£…é¥°å™¨å®šä¹‰ä¸ºç±»","categories":[{"name":"python","slug":"python","permalink":"http://ppsteven.github.io/categories/python/"}],"tags":[{"name":"pythoné«˜çº§","slug":"pythoné«˜çº§","permalink":"http://ppsteven.github.io/tags/python%E9%AB%98%E7%BA%A7/"}]},{"title":"å¦‚ä½•åœ¨pythoné¡¹ç›®ä¸­ä½¿ç”¨importå¯¼å…¥è‡ªç¼–æ¨¡å—","slug":"how-to-import-module-in-python-project","date":"2020-01-26T09:06:02.000Z","updated":"2020-02-15T17:54:37.443Z","comments":false,"path":"2020/01/26/how-to-import-module-in-python-project/","link":"","permalink":"http://ppsteven.github.io/2020/01/26/how-to-import-module-in-python-project/","excerpt":"èƒŒæ™¯æ˜¯åœ¨pythoné¡¹ç›®ä¸­å¯¼å…¥æ¨¡å—æ—¶ç¢°åˆ°çš„é—®é¢˜ï¼Œå½“éœ€è¦å¯¼å…¥çš„æ¨¡å—æ˜¯ä½äºé¡¹ç›®çš„ä¸åŒå±‚çº§çš„æ—¶å€™ï¼Œå¯¼å…¥æ–‡ä»¶å°±å˜æˆäº†ä¸€ä¸ªéå¸¸éº»çƒ¦çš„äº‹æƒ…ã€‚ ä¸‹é¢ä¸¾ä¸€ä¸ªä¾‹å­ 123456789. # å½“å‰å·¥ä½œç›®å½•â”œâ”€â”€ DB â”‚ â”œâ”€â”€ MySQLClient.pyâ”‚ â””â”€â”€ RedisClient.pyâ””â”€â”€ Utilâ”‚ â””â”€â”€ LogHandler.pyâ”œâ”€â”€ Emailâ”‚ â””â”€â”€ SendEmail.py # æœ¬æ–‡ä»¶â”‚ â””â”€â”€ Email_setting.py # å¾…å¯¼å…¥æ–‡ä»¶ DB å’Œ Util æ˜¯æˆ‘ä»¬ç»å¸¸ä½¿ç”¨åˆ°çš„æ¨¡å—ï¼Œè‹¥æ˜¯æˆ‘ä»¬çš„å·¥ä½œç›®å½•ä½äºé¡¹ç›®æ–‡ä»¶çš„ç¬¬ä¸€å±‚çš„è¯ï¼Œå½“æˆ‘ä»¬å¯¼å…¥ Email_setting.py çš„æ—¶å€™ï¼Œæˆ‘ä»¬åº”è¯¥æ˜¯ 1234from DB.MySQLClient import MySQLClassfrom Util.LogHandler import LogHandlerfrom Email_setting import * # è¿™æ˜¯é”™è¯¯çš„ä¾‹å­from Email.Email_setting import * ä¸‹é¢æˆ‘ä»¬è®¨è®ºä¸€ä¸‹å¦‚ä½•åœ¨pythonä¸­å¯¼å…¥æ¨¡å— å‚è€ƒè‡ª: Python 101: All about imports","text":"èƒŒæ™¯æ˜¯åœ¨pythoné¡¹ç›®ä¸­å¯¼å…¥æ¨¡å—æ—¶ç¢°åˆ°çš„é—®é¢˜ï¼Œå½“éœ€è¦å¯¼å…¥çš„æ¨¡å—æ˜¯ä½äºé¡¹ç›®çš„ä¸åŒå±‚çº§çš„æ—¶å€™ï¼Œå¯¼å…¥æ–‡ä»¶å°±å˜æˆäº†ä¸€ä¸ªéå¸¸éº»çƒ¦çš„äº‹æƒ…ã€‚ ä¸‹é¢ä¸¾ä¸€ä¸ªä¾‹å­ 123456789. # å½“å‰å·¥ä½œç›®å½•â”œâ”€â”€ DB â”‚ â”œâ”€â”€ MySQLClient.pyâ”‚ â””â”€â”€ RedisClient.pyâ””â”€â”€ Utilâ”‚ â””â”€â”€ LogHandler.pyâ”œâ”€â”€ Emailâ”‚ â””â”€â”€ SendEmail.py # æœ¬æ–‡ä»¶â”‚ â””â”€â”€ Email_setting.py # å¾…å¯¼å…¥æ–‡ä»¶ DB å’Œ Util æ˜¯æˆ‘ä»¬ç»å¸¸ä½¿ç”¨åˆ°çš„æ¨¡å—ï¼Œè‹¥æ˜¯æˆ‘ä»¬çš„å·¥ä½œç›®å½•ä½äºé¡¹ç›®æ–‡ä»¶çš„ç¬¬ä¸€å±‚çš„è¯ï¼Œå½“æˆ‘ä»¬å¯¼å…¥ Email_setting.py çš„æ—¶å€™ï¼Œæˆ‘ä»¬åº”è¯¥æ˜¯ 1234from DB.MySQLClient import MySQLClassfrom Util.LogHandler import LogHandlerfrom Email_setting import * # è¿™æ˜¯é”™è¯¯çš„ä¾‹å­from Email.Email_setting import * ä¸‹é¢æˆ‘ä»¬è®¨è®ºä¸€ä¸‹å¦‚ä½•åœ¨pythonä¸­å¯¼å…¥æ¨¡å— å‚è€ƒè‡ª: Python 101: All about imports å¯¼å…¥ Python æ¨¡å—çš„å„ç§å§¿åŠ¿ Regular imports Using from Relative imports Optional imports Local imports import Pitfalls å¸¸è§„å¯¼å…¥æˆ‘ä»¬æœ€å¸¸è§çš„å¯¼å…¥æ–¹å¼æ˜¯ import module ï¼Œæˆ‘ä»¬ä¸€èˆ¬ç”¨æ¥å¯¼å…¥ å®˜æ–¹åº“ å’Œ ç¬¬ä¸‰æ–¹åº“ ã€‚ 123import math # å®˜æ–¹åº“from bs4 import Beautfiul # ç¬¬ä¸‰æ–¹åº“import pandas as pd ä»¥ä¸Šä¸¤ä¸ªæ¥æºçš„åº“ç”¨èµ·æ¥æ¯”è¾ƒçœå¿ƒï¼Œå› ä¸ºå®ƒä»¬çš„ç›®å½•å·²ç»åŠ å…¥äº†ç¯å¢ƒå˜é‡ä¸­äº† 1234# æŸ¥çœ‹ç¯å¢ƒå˜é‡çš„æ–¹å¼&gt;&gt;&gt; import sys&gt;&gt;&gt; sys.path['', '/Users/ppsteven/anaconda3/lib/python37.zip', '/Users/ppsteven/anaconda3/lib/python3.7', '/Users/ppsteven/anaconda3/lib/python3.7/lib-dynload', '/Users/ppsteven/anaconda3/lib/python3.7/site-packages', '/Users/ppsteven/anaconda3/lib/python3.7/site-packages/aeosa', '/Users/ppsteven/anaconda3/lib/python3.7/site-packages/xgboost-1.0.0_SNAPSHOT-py3.7.egg'] ä»æ¨¡å—å¯¼å…¥12from functools import lru_cachelru_cache(*args) åŒæ ·ï¼Œä½ ä¹Ÿå¯ä»¥å¯¼å…¥è¯¥æ¨¡å—ä¸­çš„æ‰€æœ‰å‡½æ•°å’Œå˜é‡ï¼Œåªæ˜¯è¿™ç§å¯¼å…¥æ–¹å¼æ˜¯ä¸è¢«æ¨èçš„ 1from os import * å®˜æ–¹å»ºè®®æˆ‘ä»¬ï¼Œéœ€è¦å¯¹ import çš„å‡½æ•°ï¼Œè¦æ˜¾å¼çš„å†™å‡ºï¼Œä½†æ˜¯å½“å‡½æ•°è¿‡å¤šçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯èƒ½å†™æˆå¤šè¡Œçš„å½¢å¼ 12from os import path, walk, unlinkfrom os import uname, remove ä¸ºäº†èƒ½ç”¨ä¸€ä¸ª import å®ç°ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ æ‹¬å· å¸®åŠ©ï¼Œæˆ–è€… \\ 1234from os import (path, walk, unlink, uname, remove, rename)from os import path, walk, unlink, uname, \\ remove, rename ç›¸å¯¹å¯¼å…¥å½“ä½¿ç”¨çš„æ˜¯ç»å¯¹è·¯å¾„æ—¶ï¼Œå®¹æ˜“å‡ºç°çš„é—®é¢˜æ˜¯ï¼Œåœ¨å¤§å‹çš„é¡¹ç›®ä¸­ï¼Œå½“ä½ æ”¹å˜åŒ…ç»“æ„çš„æ—¶å€™ï¼Œä½ éœ€è¦å¯¹ä½ çš„ä»£ç è¿›è¡Œå¤§å¹…åº¦çš„ä¿®æ”¹ã€‚ å¦å¤–ï¼Œå¦‚æœæ²¡æœ‰ç›¸å¯¹è·¯å¾„ï¼Œé‚£ä¹ˆåŒ…å†…çš„æ¨¡å—æ— æ³•è½»æ¾å¯¼å…¥è‡ªèº«ã€‚ ä¸€äº›ä¾‹å­12from .foo import barfrom ...foo import bar è¿™ä¸¤ç§å½¢å¼æœ‰ä¸¤ç§ä¸åŒçš„å»ºè®®è¯­ä¹‰ã€‚ä¸€ç§è¯­ä¹‰æ˜¯ä½¿æ¯ä¸ªç‚¹ä»£è¡¨ä¸€ä¸ªçº§åˆ«ã€‚ä½†æ˜¯æ•°éœ€è¦å¤šå°‘ä¸ªç‚¹ä¹Ÿæ˜¯ä¸€ä»¶éº»çƒ¦äº‹ã€‚ å¦ä¸€ç§é€‰æ‹©æ˜¯åªå…è®¸ä¸€ä¸ªç›¸å¯¹å¯¼å…¥çº§åˆ«ï¼Œè¿™æ ·çš„è¯åˆä¼šåˆ¶çº¦æ¨¡å—çš„åŠŸèƒ½ã€‚ æœ€åçš„é€‰æ‹©æ˜¯å®šä¹‰ä¸€ç§ç®—æ³•ï¼Œç”¨äºæŸ¥æ‰¾ç›¸å…³çš„æ¨¡å—å’Œè½¯ä»¶åŒ…ã€‚ è¿™é‡Œçš„åå¯¹æ„è§æ˜¯â€œæ˜ç¡®èƒœäºéšå«â€ã€‚ ï¼ˆå»ºè®®çš„ç®—æ³•æ˜¯â€œä»å½“å‰ç¨‹åºåŒ…ç›®å½•ä¸­æœç´¢ï¼Œç›´åˆ°æœ€ç»ˆçš„çˆ¶ç¨‹åºåŒ…è¢«å‘½ä¸­ä¸ºæ­¢ã€‚â€ï¼‰ åªå¯¼å…¥å…„å¼Ÿæ¨¡å—ä¸€ç§å»ºè®®æ˜¯ï¼Œåªå¯¼å…¥ å…„å¼Ÿ æ¨¡å—ã€‚æ¢è¨€ä¹‹ï¼Œå¯¹äºæ›´é«˜å±‚çº§çš„æ¨¡å—ï¼Œä½¿ç”¨ç»å¯¹è·¯å¾„ 12from .spam import eggsimport .spam.eggs ä½¿ç”¨ç´¢å¼•çˆ¶èŠ‚ç‚¹12from -2.spam import eggs # é«˜å±‚çº§from .spam import eggs # æœ¬åœ° æŠŠä»£ç ç»„ç»‡æˆå¾ˆå¤šåˆ†å±‚æ¨¡å—çš„åŒ…ä½¿ç”¨ä¸€ä¸ª leading dot ä½œä¸ºç›¸å¯¹è·¯å¾„ï¼Œä¸¤ä¸ªæˆ–ä»¥ä¸Šä»£è¡¨çˆ¶ç›®å½•ã€‚ è¿™é‡Œæˆ‘ä»¬æŠŠæ•´ä¸ªé¡¹ç›®ä½œä¸ºä¸€ä¸ªåŒ…æ¥çœ‹å¾…ï¼Œéœ€è¦å¯¹æ¯ä¸€å±‚å†™ä¸€ä¸ª __init__.py æ–‡ä»¶è¿™é‡Œï¼Œæˆ‘ä»¬æ•´ä¸ªé¡¹ç›®å¯ä»¥çœ‹æˆ package åŒ…ï¼Œå’Œ subpackage1 å’Œ subpackage2 ä¸¤ä¸ªå­åŒ…ã€‚ å®ç°çš„æ–¹æ³•å¾ˆç®€å•ï¼Œå°±æ˜¯ç¡®ä¿åœ¨æ¯ä¸€å±‚ç›®å½•ä¸Šæ·»åŠ ä¸€ä¸ª __init__.py æ–‡ä»¶ ä¸‹é¢æ˜¯æˆ‘ä»¬çš„ç›®å½•ç»“æ„ 12345678910package/ __init__.py subpackage1/ __init__.py moduleX.py # å½“å‰æ–‡ä»¶ moduleY.py subpackage2/ __init__.py # å½“å‰æ–‡ä»¶ moduleZ.py moduleA.py å‡è®¾ moduleX.py å’Œ __init__.py æ˜¯æˆ‘ä»¬çš„å½“å‰æ–‡ä»¶ï¼Œé‚£ä¹ˆæ­£ç¡®çš„å¯¼å…¥çš„åšæ³•æ˜¯ 12345678from .moduleY import spamfrom .moduleY import spam as hamfrom . import moduleYfrom ..subpackage1 import moduleYfrom ..subpackage2.moduleZ import eggsfrom ..moduleA import foofrom ...package import barfrom ...sys import path ç›¸å¯¹è·¯å¾„å¿…é¡»ä½¿ç”¨ from &lt;&gt; import ç»å¯¹è·¯å¾„ä½¿ç”¨ import &lt;&gt; 12345678910111213141516# my_package/__init__.pyfrom . import subpackage1from . import subpackage2# my_package/subpackage1/__init__.pyfrom . import module_xfrom . import module_y# my_package/subpackage1/module_x.pyfrom .module_y import spam as ham def main(): ham()# my_package/subpackage1/module_y.pydef spam(): print('spam ' * 3) æˆ‘ä»¬åˆ‡æ¢åˆ° my_package ä¸Šä¸€å±‚çš„ç›®å½•ï¼Œè¿è¡Œä¸‹é¢ä»£ç æ˜¯æ­£å¸¸çš„ã€‚ 1234567In [1]: import my_package In [2]: my_package.subpackage1.module_xOut[2]: &lt;module 'my_package.subpackage1.module_x' from 'my_package/subpackage1/module_x.py'&gt; In [3]: my_package.subpackage1.module_x.main()spam spam spam å¯é€‰å¯¼å…¥å¯é€‰å¯¼å…¥ç”¨çš„æƒ…å†µæ¯”è¾ƒå°‘ï¼Œä¸€èˆ¬æ˜¯ç”¨åœ¨éœ€è¦å¯¼å…¥ä¸€ä¸ªæ¨¡å—ï¼Œä½†æ˜¯è¿™ä¸ªæ¨¡å—å¹¶ä¸ä¸€å®šå­˜åœ¨çš„æƒ…å†µã€‚æ¯”å¦‚æˆ‘ä»¬ä½¿ç”¨çš„python ç‰ˆæœ¬ä¸ä¸€è‡´çš„æ—¶å€™ï¼Œéœ€è¦å¯¼å…¥çš„æ¨¡å—ä¹Ÿä¼šæœ‰æ‰€ä¸åŒï¼Œè¿™æ ·çš„å†™æ³•èƒ½åŠ å¼ºæ¨¡å—çš„å¥å£®æ€§= github2ä¸‹é¢æ˜¯ä¸€æ®µæ¥è‡ª github2 çš„ä¾‹å­ 123456789try: # For Python 3 from http.client import responsesexcept ImportError: # For Python 2.5-2.7 try: from httplib import responses # NOQA except ImportError: # For Python 2.4 from BaseHTTPServer import BaseHTTPRequestHandler as _BHRH responses = dict([(k, v[0]) for k, v in _BHRH.responses.items()]) lxmlä¸‹é¢æ˜¯ä¸€æ®µæ¥è‡ª lxml package çš„ä¾‹å­ 1234567try: from urlparse import urljoin from urllib2 import urlopenexcept ImportError: # Python 3 from urllib.parse import urljoin from urllib.request import urlopen æœ¬åœ°å¯¼å…¥å¯¼å…¥çš„æ¨¡å—åˆ†ä¸º local scope å’Œ global scope ç©ºé—´ã€‚å½“ä½ åœ¨ python script çš„å¤´éƒ¨å¯¼å…¥çš„æ—¶å€™ï¼Œä½œç”¨åœ¨å…¨å±€åŸŸã€‚å½“åœ¨å‡½æ•°ä¸­å¯¼å…¥çš„æ—¶å€™æ˜¯æœ¬åœ°åŸŸã€‚ 1234567891011121314import sys # global scope def square_root(a): # This import is into the square_root functions local scope import math return math.sqrt(a) def my_pow(base_num, power): # è¿™é‡Œç›´æ¥ä½¿ç”¨ math ä¼šæŠ¥é”™çš„ return math.pow(base_num, power) if __name__ == '__main__': print(square_root(49)) print(my_pow(2, 3)) å¯¼å…¥çš„æ³¨æ„äº‹é¡¹å®¹æ˜“çŠ¯é”™è¯¯çš„ä¸»è¦æœ‰ä¸¤ç‚¹ å¾ªç¯å¯¼å…¥ Shadowed imports å¾ªç¯å¯¼å…¥ç®€è¨€ä¹‹ï¼Œå°±æ˜¯æ¨¡å—ç›¸äº’å¯¼å…¥ 12345678# a.pyimport b def a_test(): print(\"in a_test\") b.b_test() a_test() æˆ‘ä»¬åœ¨ç›¸åŒçš„æ–‡ä»¶å¤¹ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ b.py 1234567import a def b_test(): print('In test_b\"') a.a_test() b_test() å¦‚æœæ˜¯ä½ è¿è¡Œè¿™äº›æ¨¡å—çš„è¯ï¼Œä½ å°†ä¼šè·å¾— AttributeError æŠ¥é”™ã€‚è™½ç„¶æœ‰ä¸€äº›æ—é—¨å·¦é“çš„å˜é€šæ–¹æ³•å¯ä»¥è§£å†³ï¼Œä½†æ˜¯è¿˜æ˜¯å»ºè®®é‡æ„ä»£ç ã€‚ è¦†ç›–å¯¼å…¥(Shadowed imports)è¦†ç›–å¯¼å…¥æ˜¯æŒ‡å¯¼å…¥ä¸€ä¸ªå’Œå®˜æ–¹åº“èµ·åä¸€æ ·çš„æ¨¡å—ï¼Œä¼šæŠ¥é”™ã€‚ ä¸»è¦çš„åŸå› æ˜¯ï¼Œpython ä¼šé¦–å…ˆæœç´¢æœ¬åœ°æ–‡ä»¶å¤¹ä¸‹çš„æ¨¡å—ï¼Œå…¶æ¬¡æ˜¯æœç´¢å…¶ä»–è·¯å¾„ã€‚ 123456import math def square_root(number): return math.sqrt(number) square_root(72) å‚è€ƒèµ„æ–™Python 101: All about imports","categories":[{"name":"python","slug":"python","permalink":"http://ppsteven.github.io/categories/python/"}],"tags":[{"name":"python","slug":"python","permalink":"http://ppsteven.github.io/tags/python/"},{"name":"import","slug":"import","permalink":"http://ppsteven.github.io/tags/import/"}]},{"title":"Pythonç¼–ç è§„èŒƒ","slug":"pythonç¼–ç è§„èŒƒ","date":"2020-01-12T09:37:56.000Z","updated":"2020-06-07T03:34:26.557Z","comments":false,"path":"2020/01/12/pythonç¼–ç è§„èŒƒ/","link":"","permalink":"http://ppsteven.github.io/2020/01/12/python%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/","excerpt":"Pythonç¼–ç è§„èŒƒ Python ç¼–ç è§„èŒƒ(Google Python Style Guide ç›®å‰å†™äº†: å‡½æ•°ã€æ¨¡å—ã€å˜é‡ç­‰å‘½å å‡½æ•°æ³¨é‡Š å­—ç¬¦ä¸²ç¼–ç è§„èŒƒ TODO æ¨¡å—çš„å¯¼å…¥è§„èŒƒï¼Œé¡¹ç›®çš„ç»“æ„","text":"Pythonç¼–ç è§„èŒƒ Python ç¼–ç è§„èŒƒ(Google Python Style Guide ç›®å‰å†™äº†: å‡½æ•°ã€æ¨¡å—ã€å˜é‡ç­‰å‘½å å‡½æ•°æ³¨é‡Š å­—ç¬¦ä¸²ç¼–ç è§„èŒƒ TODO æ¨¡å—çš„å¯¼å…¥è§„èŒƒï¼Œé¡¹ç›®çš„ç»“æ„ å‘½ååº”è¯¥é¿å…çš„åç§° å•å­—ç¬¦åç§°, é™¤äº†è®¡æ•°å™¨å’Œè¿­ä»£å™¨. åŒ…/æ¨¡å—åä¸­çš„è¿å­—ç¬¦(-) åŒä¸‹åˆ’çº¿å¼€å¤´å¹¶ç»“å°¾çš„åç§°(Pythonä¿ç•™, ä¾‹å¦‚init) å‘½åçº¦å®š æ‰€è°“â€å†…éƒ¨(Internal)â€è¡¨ç¤ºä»…æ¨¡å—å†…å¯ç”¨, æˆ–è€…, åœ¨ç±»å†…æ˜¯ä¿æŠ¤æˆ–ç§æœ‰çš„. ç”¨å•ä¸‹åˆ’çº¿(_)å¼€å¤´è¡¨ç¤ºæ¨¡å—å˜é‡æˆ–å‡½æ•°æ˜¯protectedçš„(ä½¿ç”¨import * fromæ—¶ä¸ä¼šåŒ…å«). ç”¨åŒä¸‹åˆ’çº¿(__)å¼€å¤´çš„å®ä¾‹å˜é‡æˆ–æ–¹æ³•è¡¨ç¤ºç±»å†…ç§æœ‰. å°†ç›¸å…³çš„ç±»å’Œé¡¶çº§å‡½æ•°æ”¾åœ¨åŒä¸€ä¸ªæ¨¡å—é‡Œ. ä¸åƒJava, æ²¡å¿…è¦é™åˆ¶ä¸€ä¸ªç±»ä¸€ä¸ªæ¨¡å—. å¯¹ç±»åä½¿ç”¨å¤§å†™å­—æ¯å¼€å¤´çš„å•è¯(å¦‚CapWords, å³Pascalé£æ ¼), ä½†æ˜¯æ¨¡å—ååº”è¯¥ç”¨å°å†™åŠ ä¸‹åˆ’çº¿çš„æ–¹å¼(å¦‚lower_with_under.py). å°½ç®¡å·²ç»æœ‰å¾ˆå¤šç°å­˜çš„æ¨¡å—ä½¿ç”¨ç±»ä¼¼äºCapWords.pyè¿™æ ·çš„å‘½å, ä½†ç°åœ¨å·²ç»ä¸é¼“åŠ±è¿™æ ·åš, å› ä¸ºå¦‚æœæ¨¡å—åç¢°å·§å’Œç±»åä¸€è‡´, è¿™ä¼šè®©äººå›°æ‰°. Pythonä¹‹çˆ¶Guidoæ¨èçš„è§„èŒƒ Type Public Internal Modules lower_with_under _lower_with_under Packages lower_with_under Classes CapWords _CapWords Exceptions CapWords Functions lower_with_under() _lower_with_under() Global/Class Constants CAPS_WITH_UNDER _CAPS_WITH_UNDER Global/Class Variables lower_with_under _lower_with_under Instance Variables lower_with_under _lower_with_under (protected) or __lower_with_under (private) Method Names lower_with_under() _lower_with_under() (protected) or __lower_with_under() (private) Function/Method Parameters lower_with_under Local Variables lower_with_under æ³¨æ„ æ¨¡å—å°½é‡ä½¿ç”¨å°å†™å‘½åï¼Œé¦–å­—æ¯ä¿æŒå°å†™ï¼Œå°½é‡ä¸è¦ç”¨ä¸‹åˆ’çº¿ ç±»åä½¿ç”¨é©¼å³°(CamelCase)å‘½åé£æ ¼ï¼Œé¦–å­—æ¯å¤§å†™ï¼Œç§æœ‰ç±»å¯ç”¨ä¸€ä¸ªä¸‹åˆ’çº¿å¼€å¤´ å‡½æ•°åä¸€å¾‹å°å†™ï¼Œå¦‚æœ‰å¤šä¸ªå•è¯ï¼Œç”¨ä¸‹åˆ’çº¿éš”å¼€ ç§æœ‰å‡½æ•°å¯ç”¨ä¸€ä¸ªä¸‹åˆ’çº¿å¼€å¤´ å˜é‡åå°½é‡å°å†™, å¦‚æœ‰å¤šä¸ªå•è¯ï¼Œç”¨ä¸‹åˆ’çº¿éš”å¼€ å¸¸é‡é‡‡ç”¨å…¨å¤§å†™ï¼Œå¦‚æœ‰å¤šä¸ªå•è¯ï¼Œä½¿ç”¨ä¸‹åˆ’çº¿éš”å¼€ å‡½æ•°æ³¨é‡ŠreST å‚è€ƒï¼špythonä»£ç è§„èŒƒä»¥åŠå‡½æ•°æ³¨é‡Šè§„èŒƒ 12345678\"\"\"This is a reST style. :param param1: this is a first param:param param2: this is a second param:returns: this is a description of what is returned:raises keyError: raises an exception\"\"\" ä¸‹é¢çš„ä¸€ä¸ªä¾‹å­ï¼Œæ¥è‡ªï¼šè¿™é‡Œ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546def pinyin(hans, style=Style.TONE, heteronym=False, errors='default', strict=True): \"\"\"å°†æ±‰å­—è½¬æ¢ä¸ºæ‹¼éŸ³. :param hans: æ±‰å­—å­—ç¬¦ä¸²( ``'ä½ å¥½å—'`` )æˆ–åˆ—è¡¨( ``['ä½ å¥½', 'å—']`` ). å¯ä»¥ä½¿ç”¨è‡ªå·±å–œçˆ±çš„åˆ†è¯æ¨¡å—å¯¹å­—ç¬¦ä¸²è¿›è¡Œåˆ†è¯å¤„ç†, åªéœ€å°†ç»è¿‡åˆ†è¯å¤„ç†çš„å­—ç¬¦ä¸²åˆ—è¡¨ä¼ è¿›æ¥å°±å¯ä»¥äº†ã€‚ :type hans: unicode å­—ç¬¦ä¸²æˆ–å­—ç¬¦ä¸²åˆ—è¡¨ :param style: æŒ‡å®šæ‹¼éŸ³é£æ ¼ï¼Œé»˜è®¤æ˜¯ :py:attr:`~pypinyin.Style.TONE` é£æ ¼ã€‚ æ›´å¤šæ‹¼éŸ³é£æ ¼è¯¦è§ :class:`~pypinyin.Style` :param errors: æŒ‡å®šå¦‚ä½•å¤„ç†æ²¡æœ‰æ‹¼éŸ³çš„å­—ç¬¦ * ``'default'``: ä¿ç•™åŸå§‹å­—ç¬¦ * ``'ignore'``: å¿½ç•¥è¯¥å­—ç¬¦ * ``'replace'``: æ›¿æ¢ä¸ºå»æ‰ ``\\\\u`` çš„ unicode ç¼–ç å­—ç¬¦ä¸² (``'\\\\u90aa'`` =&gt; ``'90aa'``) * callable å¯¹è±¡: å›è°ƒå‡½æ•°ä¹‹ç±»çš„å¯è°ƒç”¨å¯¹è±¡ã€‚å¦‚æœ ``errors`` å‚æ•° çš„å€¼æ˜¯ä¸ªå¯è°ƒç”¨å¯¹è±¡ï¼Œé‚£ä¹ˆç¨‹åºä¼šå›è°ƒè¿™ä¸ªå‡½æ•°: ``func(char)``:: def foobar(char): return 'a' pinyin('ã‚', errors=foobar) :param heteronym: æ˜¯å¦å¯ç”¨å¤šéŸ³å­— :param strict: æ˜¯å¦ä¸¥æ ¼éµç…§ã€Šæ±‰è¯­æ‹¼éŸ³æ–¹æ¡ˆã€‹æ¥å¤„ç†å£°æ¯å’ŒéŸµæ¯ï¼Œè¯¦è§ :ref:`strict` :return: æ‹¼éŸ³åˆ—è¡¨ :rtype: list Usage:: &gt;&gt;&gt; from pypinyin import pinyin, Style &gt;&gt;&gt; import pypinyin &gt;&gt;&gt; pinyin('ä¸­å¿ƒ') [['zhÅng'], ['xÄ«n']] &gt;&gt;&gt; pinyin('ä¸­å¿ƒ', heteronym=True) # å¯ç”¨å¤šéŸ³å­—æ¨¡å¼ [['zhÅng', 'zhÃ²ng'], ['xÄ«n']] &gt;&gt;&gt; pinyin('ä¸­å¿ƒ', style=Style.FIRST_LETTER) # è®¾ç½®æ‹¼éŸ³é£æ ¼ [['z'], ['x']] &gt;&gt;&gt; pinyin('ä¸­å¿ƒ', style=Style.TONE2) [['zho1ng'], ['xi1n']] &gt;&gt;&gt; pinyin('ä¸­å¿ƒ', style=Style.CYRILLIC) [['Ñ‡Ğ¶ÑƒĞ½1'], ['ÑĞ¸Ğ½ÑŒ1']] \"\"\" # å¯¹å­—ç¬¦ä¸²è¿›è¡Œåˆ†è¯å¤„ç† if isinstance(hans, text_type): .pyæ–‡ä»¶å¤´æ–‡ä»¶12345678910111213# -*- encoding:utf-8 -*-\"\"\"------------------------------------------------- File Nameï¼š $&#123;NAME&#125; Description : Author : $&#123;USER&#125; dateï¼š $&#123;DATE&#125; $&#123;HOUR&#125;:$&#123;MINUTE&#125;------------------------------------------------- Change Activity: $&#123;DATE&#125;: -------------------------------------------------\"\"\"# ä¸Šé¢çš„ä»£ç åŠ å…¥ PyCharm ä¸­ æ ·ä¾‹ä»£ç è¿™é‡Œæˆ‘ä»¬å‚è€ƒ å´”åº†æ‰ ä¹¦ä¸­ Scrapy å¾®åšçˆ¬è™« çš„ç¼–ç é£æ ¼ é¡¹ç›®ç»“æ„123456789101112Weiboâ”œâ”€â”€ README.mdâ”œâ”€â”€ scrapy.cfgâ””â”€â”€ weibo â”œâ”€â”€ __init__.py â”œâ”€â”€ items.py â”œâ”€â”€ middlewares.py â”œâ”€â”€ pipelines.py â”œâ”€â”€ settings.py â””â”€â”€ spiders â”œâ”€â”€ __init__.py â””â”€â”€ weibocn.py weibocn.py æ–‡ä»¶12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849import json+ from scrapy import Request, Spider # å¯ä»¥çœ‹åˆ°å¯¼å…¥çš„æ¨¡å—åä¹Ÿæ˜¯ åŒé©¼å³° from weibo.items import *+ class WeiboSpider(Spider): # ç±»ååŒé©¼å³° WebioSpider name = 'weibocn' + allowed_domains = ['m.weibo.cn'] # å˜é‡å…¨éƒ¨å°å†™ï¼Œç”¨ä¸‹åˆ’çº¿_ è¿æ¥ ... + start_users = ['3217179555', '1742566624', '2282991915', '1288739185', '3952070245', '5878659096'] + def start_requests(self): # å‡½æ•°åå…¨éƒ¨å°å†™ï¼Œç”¨ä¸‹åˆ’çº¿_ è¿æ¥ for uid in self.start_users: yield Request(self.user_url.format(uid=uid), callback=self.parse_user) def parse_user(self, response): + \"\"\"+ è§£æç”¨æˆ·ä¿¡æ¯ ä»£ç æ³¨é‡Šé£æ ¼+ :param response: Responseå¯¹è±¡+ \"\"\" self.logger.debug(response) result = json.loads(response.text) if result.get('data').get('userInfo'): user_info = result.get('data').get('userInfo') user_item = UserItem() field_map = &#123; 'id': 'id', 'name': 'screen_name', 'avatar': 'profile_image_url', 'cover': 'cover_image_phone', 'gender': 'gender', 'description': 'description', 'fans_count': 'followers_count', 'follows_count': 'follow_count', 'weibos_count': 'statuses_count', 'verified': 'verified', 'verified_reason': 'verified_reason', 'verified_type': 'verified_type' &#125; for field, attr in field_map.items(): user_item[field] = user_info.get(attr) yield user_item+ # å…³æ³¨ uid = user_info.get('id') yield Request(self.follow_url.format(uid=uid, page=1), callback=self.parse_follows, meta=&#123;'page': 1, 'uid': uid&#125;)+ # ç²‰ä¸ yield Request(self.fan_url.format(uid=uid, page=1), callback=self.parse_fans, meta=&#123;'page': 1, 'uid': uid&#125;)+ # å¾®åš yield Request(self.weibo_url.format(uid=uid, page=1), callback=self.parse_weibos, meta=&#123;'page': 1, 'uid': uid&#125;)....","categories":[{"name":"åŸºç¡€æŠ€èƒ½","slug":"åŸºç¡€æŠ€èƒ½","permalink":"http://ppsteven.github.io/categories/%E5%9F%BA%E7%A1%80%E6%8A%80%E8%83%BD/"}],"tags":[{"name":"python","slug":"python","permalink":"http://ppsteven.github.io/tags/python/"}]},{"title":"Centos ç¯å¢ƒé…ç½®ï¼ˆæŒç»­æ€»ç»“ï¼‰","slug":"centos-install-introduction","date":"2020-01-12T08:35:50.000Z","updated":"2020-06-18T11:16:53.311Z","comments":false,"path":"2020/01/12/centos-install-introduction/","link":"","permalink":"http://ppsteven.github.io/2020/01/12/centos-install-introduction/","excerpt":"æœ¬ç« èŠ‚æ”¶é›†ä¸€ä¸‹é…ç½®ä¸€ä¸ªcentos ç¯å¢ƒæ‰€éœ€è¦çš„æ“ä½œ git wget MiniConda(python) mysql â€¦ web-vscode phpredisAdmin(redis web ç®¡ç†å·¥å…·)","text":"æœ¬ç« èŠ‚æ”¶é›†ä¸€ä¸‹é…ç½®ä¸€ä¸ªcentos ç¯å¢ƒæ‰€éœ€è¦çš„æ“ä½œ git wget MiniConda(python) mysql â€¦ web-vscode phpredisAdmin(redis web ç®¡ç†å·¥å…·) åŸºç¡€é…ç½®æ˜¾ç¤ºå®Œæ•´æ–‡ä»¶è·¯å¾„123456å‘½ä»¤è¡Œæç¤ºç¬¦å®Œå…¨æ˜¾ç¤ºå®Œæ•´çš„å·¥ä½œç›®å½•åç§°:ï¼ˆæ¨èç”¨æ³•ï¼‰export PS1='[\\u@\\h $PWD]$ 'å‘½ä»¤è¡Œæç¤ºç¬¦åªåˆ—å‡ºæœ€åä¸€ä¸ªç›®å½•ï¼šexport PS1='[\\u@\\h \\W]$'å‘½ä»¤è¡Œæç¤ºç¬¦æ˜¾ç¤ºå®Œæ•´å·¥ä½œç›®å½•ï¼Œå½“å‰ç”¨æˆ·ç›®å½•ä¼šä»¥ ~ä»£æ›¿ï¼šexport PS1='[\\u@\\h \\w]$' å‘½ä»¤é‡Šä¹‰ 123456\\u æ˜¾ç¤ºå½“å‰ç”¨æˆ·è´¦å·\\h æ˜¾ç¤ºå½“å‰ä¸»æœºå\\W åªæ˜¾ç¤ºå½“å‰è·¯å¾„æœ€åä¸€ä¸ªç›®å½•\\w æ˜¾ç¤ºå½“å‰ç»å¯¹è·¯å¾„ï¼ˆå½“å‰ç”¨æˆ·ç›®å½•ä¼šä»¥ ~ä»£æ›¿ï¼‰$PWD æ˜¾ç¤ºå½“å‰å…¨è·¯å¾„\\$ æ˜¾ç¤ºå‘½ä»¤è¡Œâ€™$&apos;æˆ–è€…â€™#&apos;ç¬¦å· å‚è€ƒèµ„æ–™ï¼šlinuxä¸‹æ˜¾ç¤ºå®Œæ•´è·¯å¾„ï¼Œlinuxä¸‹æ˜¾ç¤ºç»å¯¹è·¯å¾„ å¿…è¦è½¯ä»¶å®‰è£…ifconfig1234$ yum search ifconfig============================== åŒ¹é…ï¼šifconfig ============================================net-tools.x86_64 : Basic networking tools$ yum install net-tools.x86_64 git1$ yum install -y git wget1$ yum install -y wget 7zå‹ç¼©1$ yum install p7zip ä½¿ç”¨æ–¹æ³• 12345678910117za test -t7z -r test.7z test#a ä»£è¡¨æ·»åŠ æ–‡ä»¶ï¼æ–‡ä»¶å¤¹åˆ°å‹ç¼©åŒ…-t æ˜¯æŒ‡å®šå‹ç¼©ç±»å‹ï¼Œè¿™é‡Œå®šä¸º7zï¼Œå¯ä¸æŒ‡å®šï¼Œå› ä¸º7zaé»˜è®¤å‹ç¼©ç±»å‹å°±æ˜¯7zã€‚-r è¡¨ç¤ºé€’å½’æ‰€æœ‰çš„å­æ–‡ä»¶å¤¹7za x test.7z -r -o./# x ä»£è¡¨è§£å‹ç¼©æ–‡ä»¶ï¼Œå¹¶ä¸”æ˜¯æŒ‰åŸå§‹ç›®å½•æ ‘è§£å‹ï¼ˆè¿˜æœ‰ä¸ªå‚æ•° e ä¹Ÿæ˜¯è§£å‹ç¼©æ–‡ä»¶ï¼Œä½†å…¶ä¼šå°†æ‰€æœ‰æ–‡ä»¶éƒ½è§£å‹åˆ°æ ¹ä¸‹ï¼Œè€Œä¸æ˜¯è‡ªå·±åŸæœ‰çš„æ–‡ä»¶å¤¹ä¸‹ï¼‰# -r è¡¨ç¤ºé€’å½’è§£å‹ç¼©æ‰€æœ‰çš„å­æ–‡ä»¶å¤¹# -o æ˜¯æŒ‡å®šè§£å‹åˆ°çš„ç›®å½•ï¼Œ-oåæ˜¯æ²¡æœ‰ç©ºæ ¼çš„ï¼Œç›´æ¥æ¥ç›®å½•ã€‚è¿™ä¸€ç‚¹éœ€è¦æ³¨æ„ã€‚# FRE COMMAND7za test test.7z7za x test.7z sz, rzæœåŠ¡å™¨ä¸Šä¼ ï¼Œä¸‹è½½æ–‡ä»¶ï¼Œé™¤äº†ä½¿ç”¨FTPè½¯ä»¶å¤–ï¼Œlrzszæ˜¯ä¸€ä¸ªunixé€šä¿¡å¥—ä»¶æä¾›çš„Xï¼ŒYï¼Œå’ŒZModemæ–‡ä»¶ä¼ è¾“åè®®,æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„æ–‡ä»¶ä¼ è¾“å·¥å…·ï¼Œå®‰è£…æ–¹ä¾¿ï¼Œä½¿ç”¨ç®€å•ã€‚ rzsz å®˜ç½‘å…¥å£ï¼šhttp://freecode.com/projects/lrzsz/ 123$ yum -y install lrzszsz filename # ä¸‹è½½æ–‡ä»¶ filenamerz # ä¸Šä¼ æ–‡ä»¶ è¿›ç¨‹æ ‘12yum -y install psmiscpstree MiniCondaç½‘å€https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda/ ä¸‹è½½æœ€æ–°çš„ç‰ˆæœ¬ï¼Œä¸€èˆ¬æ¥è¯´æ˜¯ Miniconda-latest-Linux 123456789$ wget https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda/Miniconda-latest-Linux-x86_64.sh$ yum -y install bzip2 # ä¸‹è½½è§£å‹è½¯ä»¶$ bash Miniconda-latest-Linux-x86_64.sh# æ·»åŠ ç¯å¢ƒå˜é‡$ echo \"export PATH=/root/miniconda2/bin:$PATH\" &gt;&gt; .bashrc$ source ~/.bashrc# æ£€æŸ¥æ˜¯å¦æˆåŠŸå®‰è£…$ /root/miniconda2/bin/conda -Vconda 4.0.5 é…ç½® Anaconda ä»“åº“é•œåƒæº123conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/conda config --set show_channel_urls yes è®¾ç½®å¿«æ·å‘½ä»¤12345alias conl=\"conda env list\"alias conc=\"conda create -n\"alias cona=\"source activate\"alias cond=\"source deactivate\"alias conr=\"conda remove --all -n\" æ–°å»º python ç¯å¢ƒ123456789101112# åˆ›å»ºæ–°ç¯å¢ƒ base å¹¶å®‰è£…python3.6$ conda create -n base python=3.6# æŸ¥çœ‹å½“å‰ç¯å¢ƒ$ conl# conda environments:#base /root/miniconda2/envs/baseroot * /root/miniconda2# åˆ‡æ¢ä¸º base ç¯å¢ƒ$ cona base$ which python /root/miniconda2/envs/base/bin/python # å½“å‰pythonçš„åœ°å€ å®‰è£…å¿…è¦çš„åº“ 12$ pip install --upgrade pip$ pip install numpy pandas jsonpath pymysql requests datetime dateutil å‚è€ƒæ¥æºï¼šCentos7å®‰è£…MinicondaåŠé…ç½®jupyter shadowsocksshadowsocks éœ€è¦åˆ©ç”¨ pip å®‰è£… 1$ sudo pip install shadowsocks åˆ›å»ºé…ç½®æ–‡ä»¶ss.json 12345678910# vim ss.json&#123; \"server\":\"*.*.*.*\", \"server_port\":***, \"local_server\":\"0.0.0.0\", # é»˜è®¤127.0.0.1 \"local_port\":1081, \"password\":\"*****\", \"timeout\":600, \"method\":\"aes-256-cfb\"&#125; å¯åŠ¨sséš§é“ 1234# å‰å°æ–¹å¼è¿è¡Œ/root/miniconda2/envs/base/bin/sslocal -c ss.json# åå°è¿è¡Œnohup /root/miniconda2/envs/base/bin/sslocal -c ss.json &gt;&gt; ss.log 1&gt;2&amp; mysqlMariaDB æ˜¯ç”± MySQL å¼€å‘çš„ MySQLçš„æ›¿ä»£ç‰ˆæœ¬ã€‚å¦‚æœæˆ‘ä»¬ç›´æ¥åœ¨ Centos ä¸Š yum install mysql ç¬¬é›¶æ­¥ï¼šæŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬å·12$ cat /etc/redhat-releaseCentOS Linux release 7.6.1810 (Core) ç¬¬ä¸€æ­¥ï¼šå®‰è£…MySQLéœ€è¦åˆ°å¦‚ä¸‹ç½‘ç«™ä¸Šå»å®šä½éœ€è¦å®‰è£…çš„ç‰ˆæœ¬å· https://dev.mysql.com/downloads/repo/yum/ æ³¨æ„ï¼šæˆ‘ä»¬ä½¿ç”¨çš„CentOs Linux 7 é€‰æ‹©ä¸‹é¢çš„ç¬¬äºŒä¸ª ä¸ç”¨è¯•å›¾å»ç‚¹å‡»å³æ‰‹è¾¹çš„ Download æŒ‰é’®ï¼Œå› ä¸ºè¿™ä¸ªä¼šå¯¼å‘ä¸€ä¸ªç™»é™†ç•Œé¢ã€‚è·å–ç‰ˆæœ¬å·åï¼Œç›´æ¥ç”¨ wget ä¸‹è½½ 12345678910$ wget https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm# ä¸‹è½½å®Œäº†ä»¥åï¼Œè¿˜æ˜¯å¯ä»¥æ£€æŸ¥ä¸€ä¸‹æ˜¯å¦æ­£å¸¸ä¸‹è½½$ md5sum mysql80-community-release-fc30-1.noarch.rpm$ rpm -ivh mysql80-community-release-fc30-1.noarch.rpmè­¦å‘Šï¼šmysql80-community-release-fc30-1.noarch.rpm: å¤´V3 DSA/SHA1 Signature, å¯†é’¥ ID 5072e1f5: NOKEYå‡†å¤‡ä¸­... ################################# [100%]æ­£åœ¨å‡çº§/å®‰è£…... 1:mysql80-community-release-fc30-1 ################################# [100%] è‹¥æ˜¯å®‰è£…é”™è¯¯ repo æºäº†æ€ä¹ˆåŠï¼Ÿæˆ‘å¾ˆä¸å¹¸å°±å¹²è¿‡ 12345# æŸ¥çœ‹æ‰€æœ‰ mysql æº$ rpm -qa|grep mysql# åˆ æ‰å®‰è£…é”™è¯¯çš„ mysql æº$ rpm -e mysql80-community-release-fc30-1.noarch --nodeps å®‰è£… MySQL 1$ sudo yum install mysql-server ç¬¬äºŒæ­¥ï¼šå¯åŠ¨ mysql æœåŠ¡1sudo systemctl start mysqld è¯¥å‘½ä»¤ä¸ä¼šè¿”å›æŠ¥é”™ï¼Œä¸ºäº†è¿›ä¸€æ­¥ç¡®è®¤ mysql æœåŠ¡ç¡®å®å¯åŠ¨ 123456789101112$ sudo systemctl status mysqldLoaded: loaded (/usr/lib/systemd/system/mysqld.service; enabled; vendor preset: disabled) Active: active (running) since äºŒ 2020-01-28 20:07:00 CST; 6s ago Docs: man:mysqld(8) http://dev.mysql.com/doc/refman/en/using-systemd.html Process: 12281 ExecStartPre=/usr/bin/mysqld_pre_systemd (code=exited, status=0/SUCCESS) Main PID: 12402 (mysqld) Status: \"Server is operational\" Tasks: 39 Memory: 616.5M CGroup: /system.slice/mysqld.service â””â”€12402 /usr/sbin/mysqld ç¬¬ä¸‰æ­¥ï¼šä¿®æ”¹é»˜è®¤é…ç½®é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹ MySQL ç»™æˆ‘ä»¬çš„é»˜è®¤å¯†ç ï¼Œè¿™ä¸ªç›´æ¥ä»æ—¥å¿—ä¸­è·å–å³å¯ 12cat /var/log/mysqld.log | grep \"temporary password\"2020-01-28T12:06:55.699956Z 5 [Note] [MY-010454] [Server] A temporary password is generated for root@localhost: 5H(?khVdysDW åˆå§‹å¯†ç åªèƒ½ç”¨äºç™»å½•ï¼Œä½†æ˜¯æ­¤æ—¶ä½ ä¸èƒ½è¿›è¡Œä»»ä½•æ“ä½œï¼Œå¿…é¡»ä¿®æ”¹æ–°çš„å¯†ç  åœ¨ä¿®æ”¹å¯†ç ä¹‹å‰ï¼Œä½ éœ€è¦åšçš„æ˜¯ä¿®æ”¹å¯†ç çš„è§„æ ¼ï¼ˆé»˜è®¤çš„è§„æ ¼Â·Â·Â·å¤ªä¸¥æ ¼äº†ï¼‰ 12345# validate_password_policyä»£è¡¨å¯†ç ç­–ç•¥ï¼Œé»˜è®¤æ˜¯1ï¼šç¬¦åˆé•¿åº¦ï¼Œä¸”å¿…é¡»å«æœ‰æ•°å­—ï¼Œå°å†™æˆ–å¤§å†™å­—æ¯ï¼Œç‰¹æ®Šå­—ç¬¦ã€‚è®¾ç½®ä¸º0åˆ¤æ–­å¯†ç çš„æ ‡å‡†å°±åŸºäºå¯†ç çš„é•¿åº¦äº†ã€‚ä¸€å®šè¦å…ˆä¿®æ”¹ä¸¤ä¸ªå‚æ•°å†ä¿®æ”¹å¯†ç set global validate_password.policy=0;# validate_password_lengthä»£è¡¨å¯†ç é•¿åº¦ï¼Œæœ€å°å€¼ä¸º4set global validate_password.length=4; æœ€åï¼Œä¿®æ”¹ä¸ºåˆé€‚çš„å¯†ç  1ALTER USER 'root'@'localhost' IDENTIFIED BY 'new password'; å¦‚æœæˆ‘ä»¬å®‰è£…çš„æ˜¯ MySQL8.0 ä»¥ä¸Šçš„ç‰ˆæœ¬ï¼ŒåŠ å¯†è§„åˆ™æ˜¯mysql_native_password,è€Œåœ¨mysql8ä¹‹å,åŠ å¯†è§„åˆ™æ˜¯caching_sha2_passwordã€‚ä¸ºäº†è§£å†³å…¼å®¹æ€§é—®é¢˜ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘é€‰æ‹©æŠŠåŠ å¯†ç­‰çº§è°ƒä½ä¸€ç‚¹ã€‚ 1mysql&gt; select host,user,plugin,authentication_string from mysql.user; æœ€åéœ€è¦ä¿®æ”¹ä¸€ä¸‹ï¼ŒåŠ å¯†è§„åˆ™ å’Œ è¿œç¨‹ç™»å½• 12345USE mysql;UPDATE user SET host = &apos;%&apos; where user = &apos;root&apos;;ALTER USER &apos;root&apos;@&apos;%&apos; IDENTIFIED WITH mysql_native_password BY &apos;password&apos;;FLUSH PRIVILEGES; å‚è€ƒèµ„æ–™:CentOS7 å®‰è£…å¹¶é…ç½®MySQL8.0How To Install MySQL on CentOS 7centoså½»åº•å¸è½½mysqlï¼ˆä¸ä¿ç•™æ•°æ®ï¼‰ Redis12# ç”¨yum å®‰è£…$ yum install -y redis é»˜è®¤æ˜¯ä¸è®¾ç½®å¯†ç çš„ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä¸Šé¢è¿›è¡Œæ›´è¿›ä¸€æ­¥çš„å®‰å…¨ç­–ç•¥é…ç½®ã€‚ä¹‹å‰è…¾è®¯äº‘ä¸Šçš„ä¸€å°æœåŠ¡å™¨ï¼Œç”±äºæš´éœ²äº†æ— å¯†ç çš„redisæ¥å£ï¼Œå°±ä¸­äº† æŒ–çŸ¿æœ¨é©¬ 1234567891011121314151617# /etc/redis.conf# bindï¼šç»‘å®šä¸»æœºIPï¼Œé»˜è®¤å€¼ä¸º127.0.0.1bind 127.0.0.1 # å°†è¿™ä¸€è¡ŒæŒ‡æ³¨é‡Šæ‰ï¼Œå¯ä»¥è¿è¡Œè¿œç¨‹è®¿é—®ã€‚ä¸æ³¨é‡Šï¼Œåªè¿è¡Œæœ¬åœ°è®¿é—®ï¼Œå®‰å…¨æ€§å¾ˆé«˜# daemonizeï¼šæ˜¯å¦ä»¥åå°è¿›ç¨‹è¿è¡Œï¼Œé»˜è®¤ä¸ºnoã€‚Windowsä¸‹ä¸æ”¯æŒä¿®æ”¹ ã€‚Linuxå¹³å°ä¸‹å¯ä»¥æ”¹ä¸ºyesï¼Œè¿™æ ·å°±ä¸ç”¨ä¸ºäº†å¯åŠ¨Redisè€Œå•ç‹¬ä¿ç•™ä¸€ä¸ªshellçª—å£ã€‚# pidfileï¼šå¦‚ä»¥åå°è¿›ç¨‹è¿è¡Œï¼Œåˆ™éœ€æŒ‡å®šä¸€ä¸ªpidï¼Œé»˜è®¤ä¸º/var/run/redis.pidã€‚Windowsä¸‹ä¸æ”¯æŒä¿®æ”¹ã€‚daemonize yesport 6379 # ç›‘å¬ç«¯å£ï¼Œé»˜è®¤ä¸º6379timeout 300 # è¶…æ—¶æ—¶é—´ï¼Œè®¾ç½®ä¸º300ï¼ˆç§’ï¼‰dbfilename dump.rdb # æœ¬åœ°æ•°æ®åº“æ–‡ä»¶åï¼Œé»˜è®¤å€¼ä¸ºdump.rdbdir /var/lib/redis # æœ¬åœ°æ•°æ®åº“å­˜æ”¾è·¯å¾„ï¼Œé»˜è®¤å€¼ä¸º /var/lib/redisrequirepass ABCD123 # å¼ºçƒˆå»ºè®®è®¾ç½® è¿æ¥å¯†ç appendonly yes # æ˜¯å¦åœ¨æ¯æ¬¡æ›´æ–°æ“ä½œåè¿›è¡Œæ—¥å¿—è®°å½•ï¼Œå¦‚æœä¸å¼€å¯ï¼Œå¯èƒ½ä¼šåœ¨æ–­ç”µæ—¶å¯¼è‡´ä¸€æ®µæ—¶é—´å†…çš„æ•°æ®ä¸¢å¤±ã€‚å› ä¸ºredisæœ¬èº«åŒæ­¥æ•°æ®æ–‡ä»¶æ˜¯æŒ‰ä¸Šé¢saveæ¡ä»¶æ¥åŒæ­¥çš„ï¼Œæ‰€ä»¥æœ‰çš„æ•°æ®ä¼šåœ¨ä¸€æ®µæ—¶é—´å†…åªå­˜åœ¨äºå†…å­˜ä¸­ã€‚é»˜è®¤å€¼ä¸ºno# æ¯ä¸ªé…ç½®é€‰é¡¹å‰éƒ½æœ‰è¯¦ç»†çš„è‹±æ–‡æ³¨é‡Šï¼Œå¦‚æœ‰éœ€è¦å¯è‡ªè¡ŒæŸ¥é˜…é…ç½®ã€‚ ä»¥ä¸Šåªæ˜¯é€‰æ‹©äº†æˆ‘è®¤ä¸ºçš„ä¸€äº›å¸¸ç”¨çš„è®¾ç½®ï¼Œå‚è€ƒæ¥æºï¼šé‚»å±…å°é»‘ å’Œ redis èœé¸Ÿæ•™ç¨‹æ›´å¤šçš„å®‰å…¨ç­–ç•¥ï¼Œå¯ä»¥å€Ÿé‰´ RedisæœåŠ¡å®‰å…¨åŠ å›º yum å®‰è£…ä¸‹æ¥çš„æœåŠ¡ï¼Œå·²ç»å¸®æˆ‘ä»¬åˆ›å»ºå¥½äº†æœåŠ¡ã€‚æˆ‘ä»¬ç›´æ¥ä½¿ç”¨é‡å¯å°±å¯ä»¥äº† 12345678910111213141516$ systemctl restart redis â— redis.service - Redis persistent key-value database Loaded: loaded (/usr/lib/systemd/system/redis.service; disabled; vendor preset: disabled) Drop-In: /etc/systemd/system/redis.service.d â””â”€limit.conf Active: active (running) since å…­ 2020-03-07 13:39:44 CST; 35s ago Main PID: 12655 (redis-server) Tasks: 3 Memory: 1.0M CGroup: /system.slice/redis.service â””â”€12655 /usr/bin/redis-server 127.0.0.1:6379$ redis-cli127.0.0.1:6379&gt; get abc(error) NOAUTH Authentication required.# å†ä¸€æ¬¡çš„è¿è¡Œ redis-cli å‘ç°å·²ç»éœ€è¦äº†å¯†ç 127.0.0.1:6379&gt; auth YOURPASSWORD dockerdocker å®‰è£…å…¶å®æ¯”è¾ƒéº»çƒ¦çš„ï¼Œæ„Ÿè°¢ å›¾çµ:Dockerå¼€å‘æŒ‡å— ç»™çš„å®‰è£…å»ºè®®ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ç”¨åˆ«äººå†™å¥½çš„è„šæœ¬ã€‚ 123456curl https://get.docker.com &gt; install.shchmod +x install.shcat install.sh # æ„Ÿå…´è¶£çš„è¯ï¼Œå¯ä»¥ç ”ç©¶ä¸€ä¸‹ shell ç©¶ç«Ÿå†™äº†å•¥./install.sh # å®‰è£…å®Œäº†ï¼Œè®°å¾—å¯åŠ¨ docker æœåŠ¡sudo systemctl start docker linuxä¸‹ docker åŠ é€Ÿ123456789101112131415$ sudo touch /etc/docker/daemon.json # æ·»åŠ å›½å†…ç«™ç‚¹&#123; \"registry-mirrors\": [\"https://registry.docker-cn.com\",\"http://hub-mirror.c.163.com\",\"https://mirror.ccs.tencentyun.com\",\"https://dockerhub.azk8s.cn\"]&#125;# é‡å¯docker daemon$ sudo systemctl restart docker # æŸ¥çœ‹æ˜¯å¦æœ‰ä¿®æ”¹æˆåŠŸ$ docker info # æŸ¥çœ‹Register Mirrorsçš„ä¿¡æ¯Registry Mirrors: https://registry.docker-cn.com/ http://hub-mirror.c.163.com/ docker-compose(github å®‰è£…) æœ‰æ¡ä»¶çš„è¯ï¼Œå‚è€ƒ dockerå®˜æ–¹æ•™ç¨‹è¿™ä¸€ç§æ–¹æ³•æ˜¯å®˜æ–¹æ¨èï¼Œä½†æ˜¯é‰´äºä¸­å›½å¢™ï¼Œé€Ÿåº¦æœ‰å¯èƒ½éå¸¸æ„Ÿäºº 1. ä» github ä¸Šä¸‹è½½ docker-compose å‘½ä»¤1sudo curl -L \"https://github.com/docker/compose/releases/download/1.25.3/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose 2. èµ‹äºˆå¯æ‰§è¡Œæƒé™1sudo chmod +x /usr/local/bin/docker-compose 3. éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ1docker-compose --version docker-compose(pip å®‰è£…) ä¸€èˆ¬å®¹æ˜“å‡ºé—®é¢˜çš„æ˜¯ pip çš„ç‰ˆæœ¬ï¼Œå¦‚æœæ˜¯ä½¿ç”¨äº†condaä½œä¸ºåŒ…ç®¡ç†çš„è¯ï¼Œå¯èƒ½ä¸»è¦æ³¨æ„pipçš„ç‰ˆæœ¬ã€‚æˆ‘ä¸€å¼€å§‹æ˜¯ä½¿ç”¨baseç¯å¢ƒçš„pipä½œä¸‹è½½ï¼Œç„¶åå°†å®‰è£…çš„docker-compose è½¯è¿æ¥è‡³ /usr/local/bin ä¸­ 1pip install docker-compose Selenium + Chrome ç¯å¢ƒé…ç½®linux æ˜¯æ— å›¾å½¢åŒ–ç•Œé¢ï¼Œselenium éœ€è¦å€ŸåŠ©å›¾å½¢åŒ–çš„å·¥å…·ï¼Œä¸‹é¢æˆ‘ä»¬ç›´æ¥çœ‹å¦‚ä½•é…ç½®ã€‚ å‚è€ƒæ•™ç¨‹ï¼šcentos7å®‰è£…selenium å®‰è£…selenium1pip install selenium å®‰è£…chrome-browser1234567wget https://dl.google.com/linux/direct/google-chrome-stable_current_x86_64.rpm --no-check-certificateyum install ./google-chrome-stable_current_x86_64.rpm# æˆ–è€…ç›´æ¥ä½¿ç”¨yum å®‰è£…yum install google-chrome# å®‰è£…åï¼Œæ³¨æ„è¦æŸ¥çœ‹ä¸€ä¸‹ chrome çš„ç‰ˆæœ¬å·$ google-chrome --versionGoogle Chrome 80.0.3987.87 ä¸‹è½½chromedriver å»ºè®®åˆ° æ·˜å®é•œåƒä¸‹è½½ æ›´å…¨ä¸€ç‚¹çš„è¯ï¼Œæœ‰ å®˜æ–¹é•œåƒ 12345$ wget https://npm.taobao.org/mirrors/chromedriver/80.0.3987.16/chromedriver_linux64.zip# è§£å‹æ­¤æ–‡ä»¶ï¼Œå¹¶å°†æ–‡ä»¶ç§»åŠ¨åˆ°/usr/binç›®å½•ä¸‹unzip chromedriver_linx64.zip# ç§»åˆ° /usr/bin ä¸‹åï¼Œä¹‹åè¿è¡Œçš„æ—¶å€™å°±ä¸å¿…ç‰¹æ„åˆ¶å®š chromedriver è·¯å¾„äº†mv chromedriver /usr/bin/ ä½¿ç”¨selenium12345678from selenium import webdriverurl='http://bing.com'option = webdriver.ChromeOptions()option.add_argument('--no-sandbox')option.add_argument('--headless')driver = webdriver.Chrome(chrome_options=option)driver.get(url)print(driver.page_source)","categories":[{"name":"centos","slug":"centos","permalink":"http://ppsteven.github.io/categories/centos/"}],"tags":[{"name":"centos","slug":"centos","permalink":"http://ppsteven.github.io/tags/centos/"}]},{"title":"git å®æˆ˜ï¼ˆæŒç»­æ›´æ–°ï¼‰","slug":"git-skill-in-learning","date":"2020-01-12T08:35:50.000Z","updated":"2020-02-19T09:12:22.397Z","comments":false,"path":"2020/01/12/git-skill-in-learning/","link":"","permalink":"http://ppsteven.github.io/2020/01/12/git-skill-in-learning/","excerpt":"ä¸»è¦è®°å½• git åœ¨å®é™…ä½¿ç”¨ä¸­ç¢°åˆ°çš„é—®é¢˜ï¼Œä¼šé€æ­¥æ…¢æ…¢ç§¯ç´¯ é—®é¢˜ä¸€ï¼šæ–°é¡¹ç›®å¦‚ä½•ä¸è¿œç«¯åŒæ­¥ï¼Ÿ12345$ git init$ git remote add origin git@e.coding.net:datamate/pujiangjiaoye.git # æ·»åŠ è¿œç«¯ä»“åº“$ git branch --set-upstream-to=origin/master # è®¾ç½®åˆ†æ”¯å¯¹åº”å…³ç³»$ git push --set-upstream origin master # è®¾ç½®push å¯¹åº”çš„è¿œç¨‹ä»“åº“ï¼Œå»ºç«‹æœ¬åœ°åˆ†æ”¯çš„ä¸Šæ¸¸$ git remote -v # æŸ¥çœ‹åˆ†æ”¯ å½“æˆ‘ä»¬å°è¯•pushçš„æ—¶å€™åˆä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜","text":"ä¸»è¦è®°å½• git åœ¨å®é™…ä½¿ç”¨ä¸­ç¢°åˆ°çš„é—®é¢˜ï¼Œä¼šé€æ­¥æ…¢æ…¢ç§¯ç´¯ é—®é¢˜ä¸€ï¼šæ–°é¡¹ç›®å¦‚ä½•ä¸è¿œç«¯åŒæ­¥ï¼Ÿ12345$ git init$ git remote add origin git@e.coding.net:datamate/pujiangjiaoye.git # æ·»åŠ è¿œç«¯ä»“åº“$ git branch --set-upstream-to=origin/master # è®¾ç½®åˆ†æ”¯å¯¹åº”å…³ç³»$ git push --set-upstream origin master # è®¾ç½®push å¯¹åº”çš„è¿œç¨‹ä»“åº“ï¼Œå»ºç«‹æœ¬åœ°åˆ†æ”¯çš„ä¸Šæ¸¸$ git remote -v # æŸ¥çœ‹åˆ†æ”¯ å½“æˆ‘ä»¬å°è¯•pushçš„æ—¶å€™åˆä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ 12345678error: æ¨é€ä¸€äº›å¼•ç”¨åˆ° 'git@e.coding.net:datamate/pujiangjiaoye.git' å¤±è´¥æç¤ºï¼šæ›´æ–°è¢«æ‹’ç»ï¼Œå› ä¸ºæ‚¨å½“å‰åˆ†æ”¯çš„æœ€æ–°æäº¤è½åäºå…¶å¯¹åº”çš„è¿œç¨‹åˆ†æ”¯ã€‚æç¤ºï¼šå†æ¬¡æ¨é€å‰ï¼Œå…ˆä¸è¿œç¨‹å˜æ›´åˆå¹¶ï¼ˆå¦‚ 'git pull ...'ï¼‰ã€‚è¯¦è§æç¤ºï¼š'git push --help' ä¸­çš„ 'Note about fast-forwards' å°èŠ‚ã€‚# æŒ‰ç…§æç¤ºï¼Œå°è¯•ç”¨git pull åˆå¹¶,åˆå¤±è´¥$ git pullfatal: æ‹’ç»åˆå¹¶æ— å…³çš„å†å² åŸå› æ˜¯æˆ‘ä»¬æœ¬åœ°ä¸è¿œç¨‹çš„ç‰ˆæœ¬ä¸ä¸€è‡´ï¼Œä½†æ˜¯æˆ‘ä»¬æ˜¯æ–°æäº¤ï¼Œæ€ä¹ˆä¼šå‡ºç°è¿™æ ·çš„é—®é¢˜å‘¢ï¼Ÿå› ä¸ºå¾ˆå¤šå¹³å°åœ¨æˆ‘ä»¬åˆ›å»ºé¡¹ç›®çš„æ—¶å€™ï¼Œè‡ªåŠ¨å¸®æˆ‘ä»¬åˆ›å»ºäº†README.mdæ–‡ä»¶ï¼Œæ‰€ä»¥ä¼šæœ‰ä¸ä¸€è‡´çš„æƒ…å†µå­˜åœ¨ã€‚git pull å¤±è´¥çš„åŸå› æ˜¯ï¼Œä¸¤ä¸ªä¸ä¸€è‡´çš„æ–‡ä»¶æ²¡æœ‰å…±åŒç¥–å…ˆçš„å†å²ã€‚ è§£å†³æ–¹æ³•ä¹Ÿå¾ˆç®€å• 1git pull origin master --allow-unrelated-histories é—®é¢˜äºŒï¼šå¦‚ä½•ä¿®æ”¹ä¸Šä¸€æ¬¡çš„æäº¤ï¼Ÿgit æ˜¯åˆ†æ”¯ç®¡ç†çš„å·¥å…·ï¼Œæˆ‘ä»¬çš„å·¥ä½œæœ€å¥½åœ¨ä¸€ä¸ª commit ä¸­æäº¤ç›¸åº”çš„ä»£ç ï¼Œå®Œæˆä¸€ä¸ªåŠŸèƒ½ï¼ˆå¦‚ bugfix æˆ–è€… feature_add ï¼‰ã€‚ä½†æ˜¯æœ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„æäº¤ç»è¿‡ Code Review ä¹‹åï¼Œå¯èƒ½ä¼šè¢«æ‰“å›æ¥ã€‚è¿™æ ·é¢å¯¹æ–°çš„ä¿®æ”¹ï¼Œä¸åº”è¯¥é‡å¤æäº¤ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬å¯ä»¥å…ˆå»ºç«‹ä¸€ä¸ªæäº¤ã€‚é¢å¯¹ç¬¬äºŒä¸ªæ–‡ä»¶ï¼ˆè¿™é‡Œæˆ‘ä»¬ç»™ a æ–°å¢äº† Hello world again ï¼‰ ç¬¬ä¸€ç§é€‰æ‹©ï¼Œæˆ‘ä»¬æäº¤ä¸¤ä¸ª commit 12git add .git commit -m \"second commit\" ç¬¬äºŒç§é€‰æ‹©ï¼Œæˆ‘ä»¬ç›´æ¥ä¿®æ”¹ä¸Šä¸€æ¬¡çš„ä¿®æ”¹ï¼ˆæ¨èï¼‰ å·¥ä½œæµå¦‚ä¸‹ 123git add .git commit --amend # ä»£è¡¨ç›´æ¥åœ¨ä¸Šä¸€æ¬¡çš„æäº¤ä¿®æ”¹ï¼Œè¿™é‡Œä¼šå¼¹å‡ºä¸Šä¸€æ¬¡ commit çš„ä¿¡æ¯ã€‚git push -f # ç”±äºæˆ‘ä»¬åªæ˜¯æ”¹äº†æœ¬åœ°ï¼Œæäº¤çš„æ—¶å€™ä½¿ç”¨ -f å¼ºåˆ¶æ¨é€ä¸€ä¸‹ è¿™é‡Œå¼ºçƒˆå»ºè®®ï¼Œä½¿ç”¨ â€“amend çš„æ–¹æ³•çš„æ—¶å€™ï¼Œä¸€å®šè¦æ£€æŸ¥ commit çš„ä¿¡æ¯ï¼Œç¡®å®šä¸æ˜¯æŠŠåˆ«äººçš„ç»™å†²æ‰äº†ã€‚ é—®é¢˜ä¸‰ï¼šæœåŠ¡å™¨ç«¯å¼ºåˆ¶åŒæ­¥è¿œç«¯ git ä»“åº“ï¼Ÿ1234git fetch git reset --hard origin/master # è¦å¼ºåˆ¶åŒæ­¥çš„åˆ†æ”¯ï¼--hard æ˜¯ä¸¢å¼ƒåˆ†æ”¯çš„ä¿®æ”¹git pullAlready up-to-date. é—®é¢˜å››ï¼šä¸ºä»€ä¹ˆä¿®æ”¹äº† .gitignore æ–‡ä»¶ï¼Œå¿½ç•¥é¡¹è¿˜æ˜¯ä¸èµ·ä½œç”¨æ–°å»ºçš„æ–‡ä»¶åœ¨gitä¸­ä¼šæœ‰ç¼“å­˜ï¼Œå¦‚æœæŸäº›æ–‡ä»¶å·²ç»è¢«çº³å…¥äº†ç‰ˆæœ¬ç®¡ç†ä¸­ï¼Œå°±ç®—æ˜¯åœ¨.gitignoreä¸­å·²ç»å£°æ˜äº†å¿½ç•¥è·¯å¾„ä¹Ÿæ˜¯ä¸èµ·ä½œç”¨çš„ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±åº”è¯¥å…ˆæŠŠæœ¬åœ°ç¼“å­˜åˆ é™¤ï¼Œç„¶åå†è¿›è¡Œgitçš„push gitæ¸…é™¤æœ¬åœ°ç¼“å­˜å‘½ä»¤å¦‚ä¸‹ï¼š 12git rm -r --cached .git add . ä¸‹é¢é™„ä¸Šæˆ‘çš„ .gitignore æ–‡ä»¶ 12345678910111213141516171819# Windows:Thumbs.dbehthumbs.dbDesktop.ini# MAC:*.DS_Store# Python:*.py[cod]*.so*.egg*.egg-infodistbuild# My configurations:*.log*.log.* å¦‚ä½•ä½¿ç”¨ git merge 123456789101112131415# å¼€å‘åˆ†æ”¯ï¼ˆdevï¼‰ä¸Šçš„ä»£ç è¾¾åˆ°ä¸Šçº¿çš„æ ‡å‡†åï¼Œè¦åˆå¹¶åˆ° master åˆ†æ”¯git checkout devgit pullgit checkout mastergit pull git merge devgit push -u origin master# å½“masterä»£ç æ”¹åŠ¨äº†ï¼Œéœ€è¦æ›´æ–°å¼€å‘åˆ†æ”¯ï¼ˆdevï¼‰ä¸Šçš„ä»£ç git checkout master git pull git checkout dev # è¿™é‡Œé»˜è®¤dev è¿œç«¯æ²¡æœ‰åŠ¨git merge master git push -u origin dev å‚è€ƒ: git mergeæœ€ç®€æ´ç”¨æ³• æ¨èä¸€ä¸ª git merge æ¯”è¾ƒå¥½çš„æ•™ç¨‹ï¼š mergeï¼šåˆå¹¶ commits","categories":[{"name":"git","slug":"git","permalink":"http://ppsteven.github.io/categories/git/"}],"tags":[{"name":"git","slug":"git","permalink":"http://ppsteven.github.io/tags/git/"}]},{"title":"å¦‚ä½•é…ç½®å¤šä¸ªgitè´¦å·","slug":"how-to-manage-multipul-git","date":"2020-01-12T07:02:00.000Z","updated":"2020-02-22T13:20:09.591Z","comments":false,"path":"2020/01/12/how-to-manage-multipul-git/","link":"","permalink":"http://ppsteven.github.io/2020/01/12/how-to-manage-multipul-git/","excerpt":"éšç€å­¦ä¹ å’Œå·¥ä½œçš„æ·±å…¥ï¼Œä¸å¯é¿å…çš„ä¼šåœ¨ç”µè„‘ä¸Šæœ‰å¤šä¸ª git è´¦å·ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç¢°åˆ°çš„ä¸€ä¸ªæ£˜æ‰‹çš„é—®é¢˜æ˜¯å¦‚ä½•ç®¡ç†æˆ‘ä»¬çš„ git è´¦å·ã€‚ æœ¬ç¯‡æ•™ç¨‹å°±æ˜¯è®²è¿°å¦‚ä½•å¤„ç†è¿™ä¸€ç±»é—®é¢˜ã€‚","text":"éšç€å­¦ä¹ å’Œå·¥ä½œçš„æ·±å…¥ï¼Œä¸å¯é¿å…çš„ä¼šåœ¨ç”µè„‘ä¸Šæœ‰å¤šä¸ª git è´¦å·ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç¢°åˆ°çš„ä¸€ä¸ªæ£˜æ‰‹çš„é—®é¢˜æ˜¯å¦‚ä½•ç®¡ç†æˆ‘ä»¬çš„ git è´¦å·ã€‚ æœ¬ç¯‡æ•™ç¨‹å°±æ˜¯è®²è¿°å¦‚ä½•å¤„ç†è¿™ä¸€ç±»é—®é¢˜ã€‚ ä»‹ç»Gitå…±æœ‰ä¸‰ä¸ªçº§åˆ«çš„ config æ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯ system ã€global å’Œ localã€‚global çš„åœ¨$home\\.gitconfigï¼Œlocalçš„åœ¨ä»“åº“ç›®å½•ä¸‹çš„.git\\configã€‚è¿™ä¸‰ä¸ªçº§åˆ«éƒ½åˆ†åˆ«é…ç½®äº†ç”¨æˆ·ä¿¡æ¯ï¼Œå½“git commitæ—¶ï¼Œä¼šä¾æ¬¡ä»localã€globalã€systemé‡Œè¯»å–ç”¨æˆ·ä¿¡æ¯ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åˆ©ç”¨localçš„é…ç½®æ¥è®¾ç½®ä¸åŒçš„ç”¨æˆ·ä¿¡æ¯ ç”Ÿæˆå…¬é’¥12345678910111213141516# æŸ¥çœ‹gitè´¦å·ï¼Œä¼šæŒ‰é¡ºåºè¯»å–local,globalçš„ç”¨æˆ·ä¿¡æ¯git config user.namegit config user.email# è‹¥æ˜¯åœ¨ç©ºä»“åº“ä¸­ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ä¼šå‡ºé”™ï¼Œæˆ‘ä»¬åœ¨ä»“åº“ä¸­ä½¿ç”¨--localï¼Œæå‰è¿è¡Œgit initgit config --local -lfatal: --local åªèƒ½åœ¨ä¸€ä¸ªä»“åº“å†…ä½¿ç”¨# æ›´æ”¹æœ¬åœ°è´¦å·git config --local/--global user.name \"Your name\"git config --local/--global user.email \"Your email\"# ç”Ÿæˆå…¬é’¥ssh-keygen -t rsa -C \"your_email@example.com\" -f ./-t rsa çº¦å®šåŠ å¯†ç±»å‹-C æ·»åŠ è¯„è®º-f ä¿å­˜ç§˜é’¥çš„åœ°å€ï¼ˆé»˜è®¤æ˜¯ ~/.ssh/id_rsaï¼‰ ç”Ÿæˆå…¬é’¥çš„åœ°æ–¹éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”Ÿæˆçš„å…¬é’¥ä¼šè‡ªåŠ¨ç”Ÿæˆåœ¨~/.ssh/id_rsaä¸­ï¼Œè‹¥æ˜¯ä½ æœ‰å¤šä¸ªè´¦å·çš„è¯ï¼Œæ— ç–‘ä¼šæŠŠåŸå…ˆçš„ç§˜é’¥è¦†ç›–ã€‚å¯ä»¥åœ¨åç»­å¼¹å‡ºçš„æç¤ºä¸­çº¦å®škeyä¿å­˜çš„åœ°å€ 12Enter file in which to save the key (/Users/you/.ssh/id_rsa): [Press enter] // æ¨èä½¿ç”¨é»˜è®¤åœ°å€Enter passphrase (empty for no passphrase): //æ­¤å¤„ç‚¹å‡» Enter é”®å³å¯ï¼Œä¹Ÿå¯ä»¥å¡«å†™å¯†ç ï¼Œå¡«å†™å¯†ç åæ¯æ¬¡ä½¿ç”¨ SSH æ–¹å¼æ¨é€ä»£ç æ—¶éƒ½ä¼šè¦æ±‚è¾“å…¥å¯†ç ï¼Œç”±äºè¿™ä¸ª Key ä¹Ÿä¸æ˜¯ç”¨äºå†›äº‹ç›®çš„ï¼Œæ‰€ä»¥ä¹Ÿæ— éœ€è®¾ç½®å¯†ç ã€‚ ä¹Ÿå¯ä»¥åœ¨ssh-keygenä¸­çº¦å®šå¥½ 1234567ssh-keygen -t rsa -C \"your_email@example.com\" -f ~/.ssh/coding -f ä¿å­˜åœ¨yonä¸‹çš„.ssh/codingæ–‡ä»¶ä¸­Your identification has been saved in /Users/ppsteven/.ssh/coding.Your public key has been saved in /Users/ppsteven/.ssh/coding.pub.The key fingerprint is:SHA256:P6R/Fo70VkCyKsQsFXXX... XXX@outlook.com .ssh æ–‡ä»¶å¤¹ä¸‹ä¹Ÿå¤šäº†codingå’Œcoding.pubä¸¤ä¸ªæ–‡ä»¶ codingæ˜¯ä½ çš„ç§é’¥ï¼Œéœ€è¦å¥½å¥½ä¿ç®¡ï¼Œåœ¨ä¸‹é¢çš„é…ç½®æ–‡ä»¶ä¸­è¿˜éœ€è¦ä½¿ç”¨ï¼Œç”¨ä»¥è¯æ˜ä½ è‡ªå·±çš„èº«ä»½ï¼Œcoding.pubæ˜¯å…¬é’¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸Šä¼ åˆ°githubï¼Œcodingï¼Œç äº‘ç­‰å¹³å°ä¸Šå»ã€‚ ä¸Šä¼ å…¬é’¥è¿™é‡Œåªè¦æ‰¾åˆ°å¯¹åº”ä¸Šä¼ çš„åœ°æ–¹ä¸Šä¼ å³å¯ï¼Œä¸€èˆ¬å¹³å°éƒ½æœ‰å¯¹åº”çš„æ•™ç¨‹ï¼Œä¸‹é¢æˆ‘ä»¬copyä¸€ä¸‹codingçš„æ“ä½œã€‚ mac å¤åˆ¶æ–‡ä»¶å°æŠ€å·§ 1cat coding.pub | pbcopy # è¾“å‡ºåˆ°å‰ªåˆ‡æ¿ pbcopy : è¡¨ç¤ºå¤åˆ¶å‰ªåˆ‡ç‰ˆpbpaste ï¼šè¡¨ç¤ºç²˜è´´å‰ªåˆ‡ç‰ˆ é…ç½®configæ–‡ä»¶å’Œæ·»åŠ ç§é’¥è‹¥æ˜¯æ‹¥æœ‰å¤šä¸ªè´¦å·ï¼Œéœ€è¦åœ¨ .ssh ä¸‹é…ç½®å¤šä¸ªè´¦å·çš„é…ç½®æ–‡ä»¶ config ï¼Œè¿™ä¸ªé…ç½®æ–‡ä»¶æ˜¯ç”¨æ¥ä½œä¸ºè·¯ç”±ä½¿ç”¨ã€‚æˆ‘ä»¬éœ€è¦æ£€æŸ¥æ˜¯å¦å­˜åœ¨ ~/.ssh/config æ–‡ä»¶ï¼Œä¸å­˜åœ¨çš„è¯å°±åˆ›å»ºå¦‚ä¸‹æ–‡ä»¶ã€‚ 123456789101112131415161718192021222324# ~/.ssh/config# github è´¦å·Host github # HostNameçš„åˆ«å,è¿™ä¸ªå¯ä»¥éšä¾¿èµ·HostName github.com # HostName: è¿œç¨‹ä»“åº“çš„åŸŸåAddKeysToAgent yes UseKeychain yes # Mac ä¸Šç§˜é’¥è¢«æŒä¹…åŒ–åˆ°&quot;é’¥åŒ™ä¸²&quot;ä¸­ï¼Œä»£è¡¨ä»é’¥åŒ™ä¸²ä¸­ä½¿ç”¨ä¿å­˜çš„ç§˜é’¥IdentityFile ~/.ssh/id_rsa # ç§é’¥å­˜å‚¨çš„åœ°å€User git # git åªæ˜¯sshçš„ä¸€ä¸ªåº”ç”¨ï¼Œä¼šæŠŠ User å’Œ HostName æ‹¼æ¥ # coding è´¦å·Host codingHostName git@e.coding.net # å¦‚æœä¸å¡«å†™Userï¼Œå¯ä»¥ç›´æ¥æ‹¼æ¥AddKeysToAgent yesUseKeychain yesIdentityFile ~/.ssh/coding # github_work githubå·¥ä½œè´¦å·Host github-workerHostName github.com AddKeysToAgent yesUseKeychain yesIdentityFile ~/.ssh/github_work User git ä¸ºäº†è®©SSHè¯†åˆ«æ–°çš„ç§é’¥ï¼Œéœ€å°†å…¶æ·»åŠ åˆ°SSH agentä¸­ 12345ssh-agent bashssh-add -D # åˆ é™¤ä¹‹å‰å­˜å‚¨çš„keyssh-add -l # æŸ¥çœ‹å­˜å‚¨çš„keyï¼Œè¿™é‡Œåº”è¯¥æ˜¯ç©ºçš„ssh-add ~/.ssh/id_rsassh-add ~/.ssh/coding æµ‹è¯•sshæ˜¯å¦è®¾ç½®æˆåŠŸ123456789# ssh -T åé¢çš„åå­—å¯ä»¥æ˜¯ä¸Šé¢çš„åˆ«å$ ssh -T githubHi PPsteven! You've successfully authenticated, but GitHub does not provide shell access.(base)$ ssh -T codingCoding æç¤º: Hello ppsteven, You've connected to Coding.net via SSH. This is a personal key.ppstevenï¼Œä½ å¥½ï¼Œä½ å·²ç»é€šè¿‡ SSH åè®®è®¤è¯ Coding.net æœåŠ¡ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸ªäººå…¬é’¥(base) è‡ªåŠ¨æ·»åŠ  ç§˜é’¥ çš„å‡ ç§æ–¹æ³•ssh-add è¿™ä¸ªå‘½ä»¤æ˜¯æ‰‹åŠ¨æŠŠç§é’¥æ·»åŠ åˆ° ssh-agent æ‰€ç®¡ç†çš„ session ä¸­ï¼Œssh-agent æ˜¯ä¸€ä¸ªç”¨äºå­˜å‚¨ç§é’¥çš„ä¸´æ—¶æ€§çš„ session æœåŠ¡ã€‚æ‰€ä»¥å½“æˆ‘ä»¬é‡å¯æœºå™¨çš„æ—¶å€™ï¼Œssh-agent çš„æœåŠ¡ä¹Ÿä¼šé‡ç½®ã€‚ æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨ keychainï¼ˆMacæ¨èï¼‰keychain æ˜¯ Mac ç”µè„‘ä¸Šçš„é’¥åŒ™ä¸²æœåŠ¡ï¼Œä½œç”¨æ˜¯å­˜å‚¨å¯†ç ã€ç§˜é’¥ï¼Œè¯ä¹¦ç­‰ä¿¡æ¯ã€‚Win å’Œ Linux ä¹Ÿæœ‰å¯¹åº”çš„æœºåˆ¶ï¼Œæ²¡æœ‰ç ”ç©¶ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬è¦ä¿è¯ config é‡Œé¢æœ‰è¿™æ ·ä¸¤æ®µä»£ç ï¼ŒMac OS 10.12.2 ä»¥ä¸Šç³»ç»Ÿéœ€è¦ï¼Œä¸ç„¶çš„è¯ï¼Œæ— æ³•æŒä¹…åŒ–çš„æ·»åŠ åˆ°é’¥åŒ™ä¸²ä¸­ã€‚ 123456789# ~/.ssh/config# github è´¦å·Host github # HostNameçš„åˆ«å,è¿™ä¸ªå¯ä»¥éšä¾¿èµ·HostName github.com # HostName: è¿œç¨‹ä»“åº“çš„åŸŸå+ AddKeysToAgent yes # æ˜¯å¦æŠŠ+ UseKeychain yes # Mac ä¸Šç§˜é’¥è¢«æŒä¹…åŒ–åˆ°\"é’¥åŒ™ä¸²\"ä¸­ï¼Œä»£è¡¨ä»é’¥åŒ™ä¸²ä¸­ä½¿ç”¨ä¿å­˜çš„ç§˜é’¥IdentityFile ~/.ssh/id_rsa # ç§é’¥å­˜å‚¨çš„åœ°å€User git # git åªæ˜¯sshçš„ä¸€ä¸ªåº”ç”¨ï¼Œä¼šæŠŠ User å’Œ HostName æ‹¼æ¥ ç„¶åï¼Œåˆ©ç”¨ ssh-add -K ~/.ssh/[your file] å­˜å‚¨åˆ° keychain ä¸­ã€‚ 1ssh-add -K Store passphrases in your keychain. è¿™æ—¶å€™ï¼Œä½ å¯èƒ½åœ¨ä½ çš„ é’¥åŒ™ä¸² ä¸­å¹¶æ²¡æœ‰å‘ç°æˆåŠŸæ·»åŠ ï¼Œä½ å¯ä»¥åˆ©ç”¨ ssh -T github/coding/.. ä¹Ÿå°±æ˜¯ä¸Šé¢æåˆ°çš„æµ‹è¯•çš„æ–¹æ³•å»æµ‹ä¸€ä¸‹ï¼Œå¦‚ä½•æˆåŠŸçš„è¯ï¼Œä½ ä¼šå‘ç°é’¥åŒ™ä¸²ä¸­å¤šäº†å¦‚ä¸‹ä¿¡æ¯ã€‚ æ–¹æ¡ˆäºŒï¼šæ·»åŠ åˆ°å¯åŠ¨é…ç½®ä¸­å»ï¼ˆLinuxæ¨èï¼‰æˆ‘çš„ linux ä¸Šæ˜¯ç›´æ¥æŠŠ ç§é’¥æ·»åŠ åˆ° ssh-agent ä¸­å»çš„ï¼Œå°½ç®¡ä¼šå¤±æ•ˆï¼Œä½†æ˜¯åªè¦æ¯æ¬¡ç™»é™†çš„æ—¶å€™ï¼Œéƒ½ä¼šæ·»åŠ ä¸€ä¸‹å°±å¥½ï¼Œè¿™ä¸ªæ¯”è¾ƒç®€å•ï¼Œé€‚åˆæ‡’äººã€‚ 123$ eval \"$(ssh-agent -s)\"&gt; Agent pid 59566$ ssh-add ~/.ssh/id_rsa ä¸‹ä¸€ä¸ªé—®é¢˜ï¼Œåº”è¯¥æŠŠè¿™ä¸€æ®µä»£ç æ·»åŠ åˆ°å“ªé‡Œã€‚è¿™é‡Œçš„å»ºè®®æ˜¯åŠ åˆ° .bashrc æˆ–è€… .bashrc_profile è¿™ä¸¤ä¸ªåŒºåˆ«æ˜¯å‰è€…æ˜¯æ¯æ¬¡æ‰“å¼€æ–° shell çš„æ—¶å€™è¿è¡Œã€‚åè€…æ˜¯ä»…åœ¨ç™»å½•çš„æ—¶å€™æ‰§è¡Œä¸€æ¬¡ã€‚ æ›´å¤šçš„åœ°æ–¹å‚è€ƒæˆ‘çš„å¦ä¸€ç¯‡æ•™ç¨‹ï¼šlinux ç¯å¢ƒå˜é‡æ‰§è¡Œé¡ºåº å‚è€ƒèµ„æ–™å¦‚ä½•æ·»åŠ å¤šè´¦å·å¦‚ä½•è®¾ç½®å¤šä¸ªGitå¸å· codingå¸®åŠ©ä¸­å¿ƒ ä¸‹é¢ä¸¤ä¸ªæ˜¯ google å‡ºæ¥çš„è§£ç­”ï¼Œè´¨é‡å¾ˆé«˜ï¼Œå»ºè®®å‚è€ƒ How to manage multiple GitHub accounts on a single machine with SSH keys è‡ªåŠ¨æ·»åŠ sshè´¦å·æ˜¯å¦å¿…é¡»æ¯æ¬¡æ·»åŠ ssh-add (æ¨èçœ‹) Generating a new SSH key and adding it to the ssh-agent (github å®˜æ–¹æ¨èæµç¨‹)","categories":[{"name":"åŸºç¡€æŠ€èƒ½","slug":"åŸºç¡€æŠ€èƒ½","permalink":"http://ppsteven.github.io/categories/%E5%9F%BA%E7%A1%80%E6%8A%80%E8%83%BD/"}],"tags":[{"name":"git","slug":"git","permalink":"http://ppsteven.github.io/tags/git/"}]},{"title":"dockerå‘½ä»¤å¤§å…¨","slug":"docker-cheetsheet","date":"2019-12-31T09:09:15.000Z","updated":"2020-01-26T08:59:10.833Z","comments":false,"path":"2019/12/31/docker-cheetsheet/","link":"","permalink":"http://ppsteven.github.io/2019/12/31/docker-cheetsheet/","excerpt":"æœ€è¿‘åœ¨å®ä¹ çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦å°†ç°æœ‰çš„æœåŠ¡ä¸Šäº‘ï¼Œä½¿ç”¨åˆ°äº†å®¹å™¨åŒ–çš„æ“ä½œã€‚éœ€è¦è‡ªå·±åˆ¶ä½œDockerfileæ–‡ä»¶ï¼Œå®Œæˆéƒ¨ç½²ã€‚é‰´äºå¯¹äºdockeræŠ€æœ¯çš„ä¸ç†Ÿç»ƒï¼Œç”¨äº†å‡ å¤©æ—¶é—´å¥½å¥½æŠŠè¿™ä¸ªçŸ¥è¯†æ¢³ç†äº†ä¸€ä¸‹ã€‚ å®‰è£…å’ŒåŸºç¡€å‘½ä»¤è¯¦è§ä¸Šä¸€ç¯‡æ–‡ç«  Dockerå®‰è£…åŠåŸºç¡€å‘½ä»¤ P.S. è¿™ç¯‡åšå®¢åˆåˆ‡æ¢å›äº†next ä¸»é¢˜ï¼Œä¸»è¦çš„åŸå› æ˜¯è¿™ç¯‡æ–‡ç« ä¸­ä¸€äº›ä»£ç ä¸Butterflyä¸»é¢˜æœ‰æ‰€å†²çªï¼Œæ‰€ä»¥åˆæ”¹ç”¨å…¼å®¹æ€§æ¯”è¾ƒå¥½çš„hexoã€‚ä»Šå¤©å‘ç°åŸæ¥WordPressæ˜¯ç”¨phpå†™çš„ï¼Œä½œä¸ºä¸€ä¸ªphpç¨‹åºå‘˜è‚¯å®šè¦æä¸€æŠŠï¼Œä¹‹åæœ‰æ—¶é—´å†ç ”ç©¶ä¸€ä¸‹ã€‚","text":"æœ€è¿‘åœ¨å®ä¹ çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦å°†ç°æœ‰çš„æœåŠ¡ä¸Šäº‘ï¼Œä½¿ç”¨åˆ°äº†å®¹å™¨åŒ–çš„æ“ä½œã€‚éœ€è¦è‡ªå·±åˆ¶ä½œDockerfileæ–‡ä»¶ï¼Œå®Œæˆéƒ¨ç½²ã€‚é‰´äºå¯¹äºdockeræŠ€æœ¯çš„ä¸ç†Ÿç»ƒï¼Œç”¨äº†å‡ å¤©æ—¶é—´å¥½å¥½æŠŠè¿™ä¸ªçŸ¥è¯†æ¢³ç†äº†ä¸€ä¸‹ã€‚ å®‰è£…å’ŒåŸºç¡€å‘½ä»¤è¯¦è§ä¸Šä¸€ç¯‡æ–‡ç«  Dockerå®‰è£…åŠåŸºç¡€å‘½ä»¤ P.S. è¿™ç¯‡åšå®¢åˆåˆ‡æ¢å›äº†next ä¸»é¢˜ï¼Œä¸»è¦çš„åŸå› æ˜¯è¿™ç¯‡æ–‡ç« ä¸­ä¸€äº›ä»£ç ä¸Butterflyä¸»é¢˜æœ‰æ‰€å†²çªï¼Œæ‰€ä»¥åˆæ”¹ç”¨å…¼å®¹æ€§æ¯”è¾ƒå¥½çš„hexoã€‚ä»Šå¤©å‘ç°åŸæ¥WordPressæ˜¯ç”¨phpå†™çš„ï¼Œä½œä¸ºä¸€ä¸ªphpç¨‹åºå‘˜è‚¯å®šè¦æä¸€æŠŠï¼Œä¹‹åæœ‰æ—¶é—´å†ç ”ç©¶ä¸€ä¸‹ã€‚ docker é•œåƒæ‹‰å–é•œåƒ12$ docker pull alpine$ docker pull registry.hub.docker.com/alpine:latest æŒ‡å®šé»˜è®¤çš„ä»“åº“å’Œç‰ˆæœ¬å· 123456[root@VM_118_62_centos ~]# docker pull alpineUsing default tag: latestlatest: Pulling from library/alpinee6b0cf9c0882: Pull complete Digest: sha256:2171658620155679240babee0a7714f6509fae66898db422ad803b951257db78Status: Downloaded newer image for alpine:latest åˆ—å‡ºé•œåƒ12$ docker images$ docker image ls ç»™é•œåƒåŠ tag1$ docker tag alpine test èµ·åˆ°äº†é“¾æ¥çš„ä½œç”¨ æŸ¥çœ‹é•œåƒ12$ docker inspect IMAGE # è¿”å›json æ ¼å¼$ docker inspect -f &#123;&#123; .\"DockerVersion\"&#125;&#125; IMAGE # ä»¥GO æ¨¡èŒƒè¿”å›æ ¼å¼åŒ–çš„ä¿¡æ¯ æœç´¢é•œåƒ123docker search IMAGE # æœç´¢é•œåƒdocker search --filter=starts=4 IMAGE # è¿”å›æ”¶è—è¶…è¿‡4çš„é•œåƒdocker search --filter=is-official=true IMAGE # è¿”å›å®˜æ–¹é•œåƒ ç§»é™¤é•œåƒ123456789docker rmi IMAGE # åˆ é™¤é•œåƒdocker image rm IMAGE # åˆ é™¤é•œåƒdocker image rm ubuntu:latest # åˆ é™¤æŒ‡å®štag çš„é•œåƒ-f --force # å¼ºåˆ¶åˆ é™¤docker image prune -a, --all Remove all unused images, not just dangling ones ï¼ˆä¸´æ—¶é•œåƒï¼‰ --filter filter Provide filter values (e.g. 'until=&lt;timestamp&gt;') -f, --force Do not prompt for confirmation åˆ›å»ºé•œåƒ commit import build ä¸‰ä¸ªå­å‘½ä»¤ commit åŸºäºç°æœ‰å®¹å™¨åˆ›å»ºdocker run -it alpine /bash/sh 1234# add a new file to this container [root@VM_118_62_centos ~]# docker run -it alpine /bin/sh / # touch text/ # exit docker [container] commit -m â€œadd a new fileâ€ -a â€œjohnjhwangâ€ CONTAINER æ³¨ï¼šæ–¹æ‹¬å·ä¸­çš„ container æ˜¯å¯ä»¥çœç•¥ä¸å†™çš„ã€‚è¿™é‡ŒæŒ‡å‡ºæ˜¯è¯´æ˜commit è¿™ä¸ªå‘½ä»¤æ˜¯ å®¹å™¨ç›¸å…³çš„å‘½ä»¤æ¯”è¾ƒå»ºè®®å†™å…¨ï¼Œæ¯”å¦‚rm åœ¨image å’Œ container ä¸­éƒ½æœ‰ï¼Œé¿å…æ­§ä¹‰ -m: è¡¨ç¤º Comment -a: è¡¨ç¤º Authorç”±äºæ˜¯æ·»åŠ äº†ä¸€ä¸ªæ–‡ä»¶ï¼Œæ‰€ä»¥é•œåƒçš„ IAMGE ID å‘ç”Ÿäº†å˜åŒ– å½“æˆ‘ä»¬æŸ¥çœ‹æ–°çš„é•œåƒçš„æ—¶å€™ï¼Œèƒ½çœ‹åˆ°æˆ‘ä»¬åç»­è¿½åŠ çš„ä¿¡æ¯ 1234567891011[root@VM_118_62_centos ~]# docker inspect 764a657de081[ &#123; &quot;Id&quot;: &quot;sha256:764a657de08117c11b3af9720efe2310386fa99074802ad13f68973081972819&quot;, &quot;Parent&quot;: &quot;sha256:cc0abc535e36a7ede71978ba2bbd8159b8a5420b91f2fbc520cdf5f673640a34&quot;, &quot;Comment&quot;: &quot;add a new file &quot;, ...... &quot;Author&quot;: &quot;johnjhwang&quot;, ...... &#125;] åŸºäºDockerfileåˆ›å»ºé¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªæ–‡ä»¶Dockerfile æ–‡ä»¶åå¿…é¡»æ˜¯Dockerfile ç¼–è¾‘Dockerfile 12345FROM ununtu:latestLABEL version='1.0' maintainer='johnjhwang@tencent.com'RUN apt-get update &amp;&amp;\\ apt-get install -y python3 \\ apt-get clean 1docker [image] build -t python:3 .(å°æ•°ç‚¹:è¿™æ˜¯ä¸Šä¸‹æ–‡ç¯å¢ƒä¸ºå½“å‰ç›®å½•) python æ˜¯é•œåƒåï¼Œ3æ˜¯ç‰ˆæœ¬å·æ³¨æ„ï¼Œæœ€åæœ‰ä¸€ä¸ªç‚¹ï¼Œä»£è¡¨çš„æ˜¯ä¸Šä¸‹æ–‡ç¯å¢ƒ(å½“å‰ç›®å½•) åŸºäºæœ¬åœ°æ¨¡æ¿å¯¼å…¥// TO DO å­˜å‡ºå’Œè½½å…¥é•œåƒ12docker [image] save -o ubuntu_18.04.tar ubuntu:18.04 # æœ¬åœ°ä¼šå‡ºç°ubuntu_18.04.tar æ–‡ä»¶docker [image] load -i ubuntu_18.04.tar # å¯¼å…¥æœ¬åœ°çš„æ–‡ä»¶ï¼Œä¹‹åæŸ¥çœ‹é•œåƒåº“ï¼Œå‘ç°å‡ºç°äº†è¯¥é•œåƒ è¿™é‡Œæˆ‘ä»¬å¯ä»¥ç”¨æ›´åŠ ç®€ä¾¿çš„å†™æ³• 12docker save alpine &gt; alpine.tardocker load alpine &lt; alpine.tar ä¸Šä¼ é•œåƒ push// TO DO docker å®¹å™¨æ–°å»ºå®¹å™¨&amp;&amp;å¯åŠ¨å®¹å™¨ createã€startã€run docker create/start123docker [container] create -it alpine # ç”¨createåˆ›å»ºçš„å®¹å™¨å¤„äºåœæ­¢çŠ¶æ€ Created ï¼ŒåŠ -it ä½¿ç”¨çš„æ˜¯é»˜è®¤çš„shdocker [container] start CONTAINER # è¿è¡Œåçš„å®¹å™¨çŠ¶æ€è½¬ä¸º Up æŸ¥çœ‹çŠ¶æ€ 1234[root@VM_118_62_centos ~/desktop]# docker start 77a32260848[root@VM_118_62_centos ~/desktop]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES77a32260848e alpine \"/bin/sh\" 2 minutes ago Up 5 seconds naughty_lamport è¿˜æœ‰ä¸€ä¸ªæ›´åŠ æ–¹ä¾¿çš„å¯åŠ¨æ–¹å¼ï¼Œç­‰ä»·äº å…ˆæ‰§è¡Œcreate åæ‰§è¡Œ start docker run1234docker [container] run -it alpine /bin/sh-t, --tty Allocate a pseudo-TTY åˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯ -i, --interactive Keep STDIN open even if not attached æ ‡å‡†è¾“å…¥ä¿æŒæ‰“å¼€ -d, --detach Run container in background and print container ID æš‚åœç»ˆæ­¢å®¹å™¨æš‚åœ/æ¢å¤å®¹å™¨ çŠ¶æ€å˜ä¸ºï¼š Up (Paused) 1docker [container] pause/unpause CONTAINER ç»ˆæ­¢/å¯åŠ¨å®¹å™¨ stopã€killã€è¿è¡Œç»“æŸä¼šä½¿å®¹å™¨çŠ¶æ€å˜ä¸ºï¼š Exited 1234docker [container] stop/start CONTAINER -t, --time int Seconds to wait for stop before killing it (default 10)docker [container] kill CONTAINER stop æ˜¯ä¸»åŠ¨å‘å®¹å™¨å‘é€ SIGTERM ä¿¡å·ï¼Œç­‰å¾…ä¸€æ®µæ—¶å€™åï¼Œå†å‘é€SIGKILLä¿¡å·æ¥ç»ˆæ­¢å®¹å™¨ã€‚é»˜è®¤10kill æ˜¯ç›´æ¥å‘é€SIGKILLä¿¡å·å»ç»ˆæ­¢å®¹å™¨ã€‚ æœ‰ä¸€ç§æƒ…å†µï¼Œå½“å®¹å™¨è¿è¡Œç»“æŸåï¼ŒçŠ¶æ€ä¹Ÿä¼šå˜ä¸ºExited 123456[root@VM_118_62_centos ~]# docker attach test/ # psPID USER TIME COMMAND 1 root 0:00 /bin/sh 6 root 0:00 ps/ # exit // é€€å‡ºåå®¹å™¨ä¼šç»ˆæ­¢ å¯ä»¥çœ‹åˆ°å®¹å™¨ä¸­åªæœ‰ /bin/sh å‘½ä»¤è¿è¡Œï¼Œæ­¤æ—¶ä½¿ç”¨ exit æˆ–è€… ctrl+d é€€å‡ºå®¹å™¨ï¼Œè¯¥å®¹å™¨ä¼šç»ˆæ­¢ æ¸…é™¤å®¹å™¨prune12docker container prune # Remove all stopped containers -f, --force Do not prompt for confirmation rm1234docker container rm \\&lt;CONTAINER ID&gt; # Remove one or more containers -f, --force Force the removal of a running container (uses SIGKILL) -l, --link Remove the specified link -v, --volumes Remove the volumes associated with the container é‡å¯å®¹å™¨ å…ˆåœæ­¢å®¹å™¨åé‡å¯å®¹å™¨ 1docker restart CONTAINER è¿›å…¥å®¹å™¨attach1docker attach CONTAINER exec exec ç›¸è¾ƒäº attach çš„ä¼˜åŠ¿æ˜¯å¯ä»¥åœ¨è¿è¡Œçš„å®¹å™¨å†…æ‰§è¡Œä»»æ„å‘½ä»¤Run a command in a running container 123456docker exec -it CONTAINER /bin/sh --detach-keys string Override the key sequence for detaching a container // é‡è½½é€€å‡ºå®¹å™¨çš„æ–¹æ³•,é»˜è®¤æ˜¯ctrl+q -e, --env list Set environment variables -u, --user string Username or UID (format: &lt;name|uid&gt;[:&lt;group|gid&gt;]) -w, --workdir string Working directory inside the container å¯¼å…¥/å¯¼å‡ºå®¹å™¨12docker [container] export -o test.tar test docker [image] import test.tar test01/test02:v1.0 æ³¨æ„: docker export æ˜¯ container ä¸‹çš„æ–¹æ³• docker import æ˜¯ image ä¸‹çš„æ–¹æ³•ï¼Œä¸è¦ä»¥ä¸ºimport åå¯¼å…¥åˆ°çš„å®¹å™¨åº“ã€‚ å¯ä»¥çœ‹åˆ° docker [image] save å’Œ dokcer [image] load æ˜¯ä¸€å¯¹ã€‚docker [container] export å’Œ docker [image] import æ˜¯ä¸€å¯¹ã€‚ä½†æ˜¯ load å’Œ import åŒæ ·éƒ½æ˜¯å¯¼å…¥åˆ° é•œåƒåº“ï¼ŒåŒºåˆ«åœ¨ä»€ä¹ˆåœ°æ–¹? docker save images_nameï¼šå°†ä¸€ä¸ªé•œåƒå¯¼å‡ºä¸ºæ–‡ä»¶ï¼Œå†ä½¿ç”¨docker loadå‘½ä»¤å°†æ–‡ä»¶å¯¼å…¥ä¸ºä¸€ä¸ªé•œåƒï¼Œä¼šä¿å­˜è¯¥é•œåƒçš„çš„æ‰€æœ‰å†å²è®°å½•ã€‚æ¯”docker exportå‘½ä»¤å¯¼å‡ºçš„æ–‡ä»¶å¤§ï¼Œå¾ˆå¥½ç†è§£ï¼Œå› ä¸ºä¼šä¿å­˜é•œåƒçš„æ‰€æœ‰å†å²è®°å½•ã€‚ docker export container_idï¼šå°†ä¸€ä¸ªå®¹å™¨å¯¼å‡ºä¸ºæ–‡ä»¶ï¼Œå†ä½¿ç”¨docker importå‘½ä»¤å°†å®¹å™¨å¯¼å…¥æˆä¸ºä¸€ä¸ªæ–°çš„é•œåƒï¼Œä½†æ˜¯ç›¸æ¯”docker saveå‘½ä»¤ï¼Œå®¹å™¨æ–‡ä»¶ä¼šä¸¢å¤±æ‰€æœ‰å…ƒæ•°æ®å’Œå†å²è®°å½•ï¼Œä»…ä¿å­˜å®¹å™¨å½“æ—¶çš„çŠ¶æ€ï¼Œç›¸å½“äºè™šæ‹Ÿæœºå¿«ç…§ã€‚ æŸ¥çœ‹å®¹å™¨123docker [container] inspect CONTAINRERdocker [container] top CONTAINER # æ˜¾ç¤ºdocker å†…è¿è¡Œçš„è¿›ç¨‹ docker [container] stats CONTAINER # æ˜¾ç¤ºdockerçš„çŠ¶æ€ï¼ŒCPUï¼Œå†…å­˜ï¼Œå­˜å‚¨ï¼Œç½‘ç»œç­‰å®æ—¶ç›‘æ§ * å…¶ä»–å®¹å™¨å‘½ä»¤ åˆ¶ä½œDockerfileæ‰€éœ€æŒæ¡çš„å‘½ä»¤ docker cp å¤åˆ¶æ–‡ä»¶123Usage: docker cp [OPTIONS] CONTAINER:SRC_PATH DEST_PATH|- docker cp [OPTIONS] SRC_PATH|- CONTAINER:DEST_PATH# FROM å·¦ TO å³ docker [container] cp data test:/temp è¿™æ˜¯å°†æœ¬åœ°è·¯å¾„ä¸‹çš„ data å¤åˆ¶åˆ° test å®¹å™¨çš„/temp è·¯å¾„ä¸‹ï¼Œæ³¨æ„åªæ˜¯å¤åˆ¶æ–‡ä»¶å†…å®¹ï¼Œä¸æ²¡æœ‰åŒ…å«æ–‡ä»¶å¤¹ã€‚ docker [container] cp data test:/temp/data è¿™æ ·æ‰æ˜¯æŠŠdataæ–‡ä»¶å¤¹ç§»åˆ°äº†ç›®æ ‡å®¹å™¨çš„æ–‡ä»¶å¤¹ä¸‹ docker container å‘½ä»¤å¤§å…¨12345678910111213141516171819202122232425attach Attach local standard input, output, and error streams to a running containercommit Create a new image from a container&apos;s changescp Copy files/folders between a container and the local filesystemcreate Create a new containerdiff Inspect changes to files or directories on a container&apos;s filesystemexec Run a command in a running containerexport Export a container&apos;s filesystem as a tar archiveinspect Display detailed information on one or more containerskill Kill one or more running containerslogs Fetch the logs of a containerls List containerspause Pause all processes within one or more containersport List port mappings or a specific mapping for the containerprune Remove all stopped containersrename Rename a containerrestart Restart one or more containersrm Remove one or more containersrun Run a command in a new containerstart Start one or more stopped containersstats Display a live stream of container(s) resource usage statisticsstop Stop one or more running containerstop Display the running processes of a containerunpause Unpause all processes within one or more containersupdate Update configuration of one or more containerswait Block until one or more containers stop, then print their exit codes docker å®¹å™¨å·æœ¬ç« ä¸å†è¯¦è¿°å‘½ä»¤ç»†èŠ‚ï¼Œåªå…³æ³¨äºå¸¸ç”¨å‘½ä»¤ å®¹å™¨ä¸­å¯¹æ•°æ®è¿›è¡ŒæŒä¹…åŒ–çš„æ“ä½œï¼Œéœ€è¦å€ŸåŠ©æ•°æ®ç®¡ç†æ“ä½œã€‚ ä¸€èˆ¬æœ‰ä¸¤ç§ç®¡ç†æ–¹å¼: Data Volumes Data Volume Containers æ•°æ®å·(Data Volumes)åˆ›å»ºä¸€ä¸ªæœ¬åœ°æ•°æ®å· docker volume create -d local â€“name haha 12-d, --driver string Specify volume driver name (default \"local\") --name é‡å‘½å docker volumn create åˆ›å»ºå®Œæˆçš„æ•°æ®å·æ˜¯åœ¨ /var/lib/docker/volumes ä¸‹çš„ï¼Œå¯ä»¥é€šè¿‡ ls ï¼ˆæŸ¥çœ‹ï¼‰ inspect(è¯¦ç»†ä¿¡æ¯) prune å’Œ rm å»åšè¿›ä¸€æ­¥çš„æ“ä½œã€‚ 123$ docker volume lsDRIVER VOLUME NAMElocal haha è¿™é‡Œmacéœ€è¦æ³¨æ„ï¼Œå› ä¸ºåœ¨macä¸Šç”¨dockerä¼šåœ¨macä¸Šå¯åŠ¨ä¸€ä¸ªè™šæ‹Ÿæœºè¿è¡Œdockerï¼Œå› æ­¤volumeåˆ›å»ºçš„directoryå¹¶ä¸åœ¨ä½ çš„machineä¸Šï¼Œè€Œæ˜¯åœ¨è™šæ‹Ÿæœºä¸­ã€‚ macç”¨æˆ·å¦‚ä½•æŸ¥çœ‹æ•°æ®å·åœ°å€å¦‚ä½•è¿›å…¥macä¸Šçš„è™šæ‹Ÿæœºçš„åŠæ³•è¯·å‚è€ƒ:è¿™ç¯‡æ•™ç¨‹ å…·ä½“çš„åšæ³•æ˜¯æ‰§è¡Œï¼šscreen ~/Library/Containers/com.docker.docker/Data/vms/0/tty ç„¶åæŸ¥çœ‹/var/lib/docker/volumesé‡Œé¢çš„å®¹å™¨ æ•°æ®å·çš„ç±»å‹ volume : æ™®é€šæ•°æ®å·ï¼Œæ˜ å°„åˆ° /var/lib/docker/volumesä¸‹ bind: ç»‘å®šæ•°æ®å·ï¼Œæ˜¯è‡ªå·±åˆ¶å®šçš„ç›®å½• tmpfs: ä¸´æ—¶æ•°æ®å·ï¼Œåªå­˜åœ¨äºå†…å­˜ä¸­ï¼Œç›®å‰æ²¡æœ‰ä½¿ç”¨è¿‡ docker run -d â€“name test â€“mount type=bind,source=/mydata,destination=/opt/mydata CONTAINER COMMAND è¿™å¥è¯æ˜¯ç»‘å®šå½“å‰ç›®å½•ä¸‹çš„mydataæ–‡ä»¶å¤¹è‡³dockerå®¹å™¨ä¸‹çš„/opt/mydataæ–‡ä»¶å¤¹ è¿˜æœ‰ä¸€ä¸ªç®€æ´çš„æ–¹å¼ -v docker run -d â€“name test -v /mydata:/opt/mydata CONTAINER COMMAND æ•°æ®å®¹å™¨(Data Volume Containers)åˆ›å»ºä¸€ä¸ªæ•°æ®å·å®¹å™¨ï¼Œèµ·åˆ«å dbtestï¼Œå¹¶æŒ‚è½½ ~/Desktop/dbfile åˆ°å½“å‰å®¹å™¨ docker run -it â€“name dbtest -v ~/Desktop/dbfile:/dbfile alpine:latest ç„¶åï¼Œå¯ä»¥åœ¨å…¶ä»–å®¹å™¨ä¸­ä½¿ç”¨ â€“volumes-from æŒ‚è½½dbtest ä¸­çš„æ•°æ®å· docker run -it â€“name db1 â€“volumes-from dbtest alpinedocker run -it â€“name db2 â€“volumes-from dbtest alpine æ•°æ®å·é«˜çº§ç”¨æ³•ï¼šè¿ç§»æ•°æ®æ•°æ®çš„è¿ç§»æœ‰ä¸¤æ­¥æ„æˆï¼šå¤‡ä»½+è¿ç§» é¦–å…ˆæˆ‘ä»¬ä½¿ç”¨äº†ä¸Šé¢å»ºç«‹å¥½çš„ dbtest æ•°æ®å·å®¹å™¨ï¼Œè¯¥å®¹å™¨å’Œ ~/Desktop/dbfile ç»‘å®šï¼Œå…¶ä¸­åŒ…å«äº†æˆ‘ä»¬éœ€è¦ä¿å­˜çš„é‡è¦çš„æ•°æ®ã€‚ å¤‡ä»½ docker run â€“volumes-from dbtest -v $(pwd):/backup â€“name worker alpine tar cvf /backup/backup.tar /dbfile è¿™é‡Œæˆ‘ä»¬æŠŠç»‘å®šçš„æœ¬åœ°å’Œå®¹å™¨å†…çš„/backupç»‘å®šï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨å‹ç¼©æ–¹æ³•ï¼ŒæŠŠdbfile å†…çš„æ•°æ®æ‰“åŒ…æ”¾å…¥äº†/backupæ–‡ä»¶å¤¹ä¸­ï¼Œç›´è§‚çš„æ¥è¯´ï¼Œåœ¨å½“å‰ç›®å½•ä¸‹ä¼šçœ‹åˆ°backup.tar æ–‡ä»¶ã€‚ è¿ç§» å…ˆåˆ›å»ºä¸€ä¸ªæ–°çš„æ•°æ®å·å®¹å™¨dbtest2 docker run -v ~/Desktop/dbfile2:/dbfile â€“name dbtest2 alpine åˆ›å»ºæ–°å®¹å™¨ï¼ŒæŒ‚è½½dbtest2çš„å®¹å™¨ï¼Œå¹¶ä½¿ç”¨untarè§£å‹æ”¾åœ¨/backup/backup.tar æ–‡ä»¶ docker run â€“volumes-from dbtest2 -v $(pwd):/backup â€“name worker2 ubuntu tar xvf /backup/backup.tar docker ç«¯å£æ˜ å°„å¯åŠ¨ä¸€ä¸ªwebæœåŠ¡ 12345docker run -d -P straining/webapp python app.py // éšæœºæ˜ å°„ç«¯å£ï¼Œ49000~49900åˆ°å®¹å™¨å†…éƒ¨ç«¯å£docker run -d -p 5000:5000 training/webapp python app.py// HostPort:ContainerPortdocker run -d -p 127.0.0.1:5000:5000 training/webapp python app.py// IP:HostPort:ContainerPortdocker run -d -p 127.0.0.1::5000 training/webapp python app.py // è‡ªåŠ¨åˆ†é…ä¸€ä¸ªç«¯å£docker run -d -p 127.0.0.1::5000/udp training/webapp python app.py // åˆ¶å®šUDP ç¨åæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ˜ å°„ç»“æœï¼ˆä¸‹é¢æ˜¯ä¸¾ä¾‹ï¼‰ 123127.0.0.1:32768-&gt;5000/tcp 0.0.0.0:3306-&gt;3306/tcp127.0.0.1:32768-&gt;5000/udp å®¹å™¨äº’è”â€“link name:aliasname:è¿æ¥çš„å®¹å™¨ alias å®¹å™¨çš„åˆ«å å®¹å™¨é—´çš„äº’è”æ˜¯ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„çŸ¥è¯†ç‚¹ï¼Œåç»­ä¼šå†™ä¸€ç¯‡åšå®¢å®Œå–„ å‚è€ƒèµ„æ–™docker loadä¸docker import","categories":[{"name":"åŸºç¡€æŠ€èƒ½","slug":"åŸºç¡€æŠ€èƒ½","permalink":"http://ppsteven.github.io/categories/%E5%9F%BA%E7%A1%80%E6%8A%80%E8%83%BD/"}],"tags":[{"name":"æ—¥å¸¸å­¦ä¹ ç¬”è®°","slug":"æ—¥å¸¸å­¦ä¹ ç¬”è®°","permalink":"http://ppsteven.github.io/tags/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"Docker","slug":"Docker","permalink":"http://ppsteven.github.io/tags/Docker/"}]},{"title":"Hexoè¿›é˜¶:åšå®¢è½¬è½½æ–‡ç« è®¾ç½®","slug":"Hexoè¿›é˜¶:åšå®¢è½¬è½½æ–‡ç« è®¾ç½®","date":"2019-12-22T07:10:44.000Z","updated":"2020-01-26T09:02:08.612Z","comments":false,"path":"2019/12/22/Hexoè¿›é˜¶:åšå®¢è½¬è½½æ–‡ç« è®¾ç½®/","link":"","permalink":"http://ppsteven.github.io/2019/12/22/Hexo%E8%BF%9B%E9%98%B6:%E5%8D%9A%E5%AE%A2%E8%BD%AC%E8%BD%BD%E6%96%87%E7%AB%A0%E8%AE%BE%E7%BD%AE/","excerpt":"é‡è§å¥½çš„åšå®¢æ–‡ç« æ€ä¹ˆåŠï¼š1. æ‰“ä¸Šä¹¦ç­¾ï¼Œè®©å®ƒæ°¸è¿œçš„ç•™åœ¨ä½ çš„ä¹¦ç­¾å¤¹ä¸­ã€‚2. åœ¨åšå®¢ä¸­è½¬è½½åœ¨åšå®¢ä¸­è½¬è½½çš„ç›®çš„æ˜¯æŠŠä¸€äº› å·¥å…·ç±»çš„ç½‘ç«™ï¼Œå¿«æ·é”®çš„æ•´ç†è®°å½•ä¸‹æ¥ã€‚ä½†æ˜¯Hexoæ˜¯ç”¨Markdownç¼–å†™çš„ï¼Œæ²¡æœ‰åšå®¢è½¬è½½çš„åŠŸèƒ½ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦å€ŸåŠ© HTML çš„ iframe å»å®ç°æˆ‘ä»¬çš„åŠŸèƒ½äº†ã€‚è¿™ä¸€éƒ¨åˆ†çŸ¥è¯†å±äºå‰ç«¯çš„èŒƒç•´äº†ï¼Œä¹Ÿç®—æ˜¯å¯¹äºçŸ¥è¯†é¢çš„ä¸€ä¸ªè¡¥å……ã€‚","text":"é‡è§å¥½çš„åšå®¢æ–‡ç« æ€ä¹ˆåŠï¼š1. æ‰“ä¸Šä¹¦ç­¾ï¼Œè®©å®ƒæ°¸è¿œçš„ç•™åœ¨ä½ çš„ä¹¦ç­¾å¤¹ä¸­ã€‚2. åœ¨åšå®¢ä¸­è½¬è½½åœ¨åšå®¢ä¸­è½¬è½½çš„ç›®çš„æ˜¯æŠŠä¸€äº› å·¥å…·ç±»çš„ç½‘ç«™ï¼Œå¿«æ·é”®çš„æ•´ç†è®°å½•ä¸‹æ¥ã€‚ä½†æ˜¯Hexoæ˜¯ç”¨Markdownç¼–å†™çš„ï¼Œæ²¡æœ‰åšå®¢è½¬è½½çš„åŠŸèƒ½ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦å€ŸåŠ© HTML çš„ iframe å»å®ç°æˆ‘ä»¬çš„åŠŸèƒ½äº†ã€‚è¿™ä¸€éƒ¨åˆ†çŸ¥è¯†å±äºå‰ç«¯çš„èŒƒç•´äº†ï¼Œä¹Ÿç®—æ˜¯å¯¹äºçŸ¥è¯†é¢çš„ä¸€ä¸ªè¡¥å……ã€‚ Same-Domain &amp;&amp; Cross-Domainæˆ‘ä»¬çš„éœ€æ±‚æ˜¯åœ¨ç”¨ iframe å¼•ç”¨åˆ«äººçš„ç½‘ç«™çš„æ—¶å€™ï¼Œéœ€è¦æ ¹æ®è¿™ä¸ªç½‘ç«™çš„å¤§å°è‡ªåŠ¨è°ƒèŠ‚æˆ‘ä»¬ç½‘ç«™çš„å¤§å°ã€‚ä½†æ˜¯å› ä¸ºchrome çš„å®‰å…¨é™åˆ¶ï¼Œæˆ‘ä»¬æ˜¯æ— æ³•ç›´æ¥è·å–åˆ«çš„ç½‘ç«™çš„å¤§å°çš„ã€‚ &lt;iframe&gt;â€™s which display content from different domains have security measures in place to prevent all sorts of stuff. For example, you canâ€™t have JavaScript access anything inside it. It can be very frustrating, for example, if you just want to do something normal and white-hat like adjust the height of the iframe to fit the content inside it. These security measures are in place to prevent all the black-hat kind of things you could do if you did have JavaScript access to the innards of an iframe. ç®€è¨€ä¹‹ï¼Œå°±æ˜¯æ¸¸è§ˆå™¨ä¼šé˜»æ­¢JavaScript å»åšä¸€äº›é«˜å±æ“ä½œï¼Œå¦‚æœæ˜¯ä¸ä¸€æ ·çš„domian çš„è¯ï¼Œè·å–ç½‘ç«™å†…éƒ¨ä¿¡æ¯çš„è¡Œä¸ºå°±ä¼šè¢«è®¤ä¸ºæ˜¯å±é™©çš„ã€‚ Same-DomianSame-Domain çš„è§£å†³æ–¹æ³•éå¸¸å¤šï¼Œå¯ä»¥è¯´ï¼Œç™¾åº¦ä¸Šæœåˆ°çš„å¤§éƒ¨åˆ†æ–¹æ³•éƒ½æ˜¯é’ˆå¯¹è¿™ä¸€æƒ…å†µçš„ã€‚ æˆ‘ä»¬ç›´æ¥é™„ä¸Šä»£ç  &amp;&amp; å®ä¾‹ 123456789101112131415161718&lt;style&gt; iframe &#123; width: 100px; min-width: 100%; &#125;&lt;/style&gt;&lt;script type=\"text/javascript\"&gt; function resizeIframe(obj) &#123; obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px'; obj.style.width = obj.contentWindow.document.documentElement.scrollWidth + 'px'; alert(obj.style.height); alert(obj.style.width); &#125;&lt;/script&gt;&lt;iframe src=\"https://ppsteven.github.io/about/\"frameborder=\"0\" scrolling=\"no\" onload=\"resizeIframe(this)\" id = \"myiframe\"&gt;&lt;/iframe&gt; ä¸‹é¢æ˜¯å®ä¾‹ï¼Œè¿™é‡Œæœªäº†æ–¹ä¾¿å±•ç¤ºï¼Œæˆ‘ä»¬ç›´æ¥é™åˆ¶äº†Heightæœ€å¤§ä¸º400 iframe { width: 100px; min-width: 100%; } function resizeIframe(obj) { obj.style.width = obj.contentWindow.document.documentElement.scrollWidth + 'px'; var height = obj.contentWindow.document.documentElement.scrollHeight; if (height > 400) height = 400; obj.style.height = height + 'px'; //alert(obj.style.height); //æç¤ºå¤§å° //alert(obj.style.width); } Cross domainæ‰‹åŠ¨å®šä¹‰Sizeæˆ‘ä»¬å°è¯•ä½¿ç”¨ä¸Šé¢Same-domain çš„ä»£ç å»è·å–ç™¾åº¦çš„ä¿¡æ¯ 1234&lt;iframe src=&quot;http://www.baidu.com&quot;frameborder=&quot;0&quot; scrolling=&quot;no&quot; onload=&quot;resizeIframe(this)&quot; id = &quot;abc&quot;&gt;&lt;/iframe&gt; æœ€ç»ˆæˆ‘ä»¬ä¼šå¾—åˆ° æ¸¸è§ˆå™¨ Block çš„ è­¦å‘Š è¿™ä¸ªè­¦å‘Šçš„é¡µé¢æ˜¯ åœ¨ Chrome å¼€å‘è€…å·¥å…·çš„Console ä¸­è·å¾—çš„ï¼Œä»¥åæˆ‘ä»¬éœ€è¦å¤šæ¬¡å€ŸåŠ©è¿™ä¸ªå·¥å…· 123Uncaught DOMException: Blocked a frame with origin &quot;http://localhost:4000&quot; from accessing a cross-origin frame. at resizeIframe (http://localhost:4000/2019/12/21/test/:32:42) at HTMLIFrameElement.onload (http://localhost:4000/2019/12/21/test/:39:2) å…¶å®æœ€é‡è¦çš„é—®é¢˜å°±æ˜¯è·å– é¡µé¢çš„å¤§å°ï¼Œè¿™ä¸ªè¿‡ç¨‹å¦‚æœä¸è®©æ¸¸è§ˆå™¨è‡ªå·±å»å®Œæˆçš„è¯ï¼Œæˆ‘ä»¬äººæ‰‹å·¥ä¹Ÿå¯ä»¥å®Œæˆï¼Œåªæ˜¯è´¹åŠ²ä¸€ç‚¹ï¼ˆå½“ç„¶å’Œå†™ä¸€ç¯‡åšå®¢æ¯”ï¼Œè¿™ä¸ªè¿‡ç¨‹å¯èƒ½åªèŠ±è´¹ä¸åˆ°ä¸€åˆ†é’Ÿï¼‰ åªè¦åœ¨Console ä¸­è¾“å…¥ 12document.body.scrollHeightdocument.body.scrollWidth 12345&lt;iframe src=\"http://www.laruence.com/2015/05/28/3038.html\"frameborder=\"0\" scrolling=\"no\"width=\"855px\"highth=\"26012px\"&gt;&lt;/iframe&gt; Autoziseç¬¬äºŒç§æ–¹æ³•å°±æ˜¯åˆ©ç”¨postMessage çš„æ–¹å¼ï¼Œè¿™ä¸€ç§æ–¹æ³•æˆ‘ä¹Ÿäº²è‡ªç”¨è¿‡äº†ï¼Œä½†æ˜¯ç¹çç¨‹åº¦æ¯”è¾ƒé«˜ã€‚ éœ€è¦åœ¨ Host.html å’Œ Frame.html ä¸­éƒ½éœ€è¦æ’å…¥Js ä»£ç  Host.html å°±æ˜¯ &lt;iframe&gt; æ‰€åœ¨htmlï¼Œè´Ÿè´£æ¥å— Frame.html ä¼ é€’è¿‡æ¥çš„å‚æ•° Frame.html ä¹Ÿå¯ä»¥çœ‹åš source web çš„ç½‘ç«™ï¼Œè´Ÿè´£ ä¼ é€æ•°æ®ã€‚ è¿™è¦æ±‚æˆ‘ä»¬ä¸»åŠ¨çš„å»ä¿®æ”¹ç›®æ ‡çš„html ä»£ç ï¼Œä»ä¸­æ’å…¥Jsï¼Œè¿™æ ·çš„è¯ï¼Œæ„Ÿè§‰ä¸æ˜¯å¾ˆä¾¿æ·ï¼Œè€Œä¸”Js ä»£ç ä¹Ÿè¿‡äºè´Ÿè´£ï¼Œç›®å‰ä¸æƒ³æ•´ç†è¿™ä¸€å—çš„å†…å®¹ã€‚ å…·ä½“æ“ä½œè¯·ç§»æ­¥ å‚è€ƒèµ„æ–™ 2 é™æ€æ–‡æœ¬è¿™ä¸€æ®µæ˜¯ååŠ çš„, æˆ‘ä»¬å¯ä»¥ç›´æ¥å­˜å‚¨html æ ¼å¼çš„æ–‡ä»¶ï¼Œç„¶ååœ¨å¤´éƒ¨åŠ ä¸Šyaml æ ¼å¼å³å¯å®Œæˆå’Œmarkdownä¸€æ ·çš„æ“ä½œ 123---layout: false--- å‚è€ƒèµ„æ–™ Cross Domain iframe Resizingè¿™ç¯‡æ–‡ç« ç®—æ˜¯å›½å¤–æ•™ç¨‹ä¸­æ•´ç†çš„ç›¸å½“ä¸é”™çš„æ–‡ç« äº†ï¼Œä»‹ç»äº†åœ¨ same-domain å’Œ cross-domian ä¸¤ç§æƒ…å†µä¸‹çš„åº”å¯¹æ–¹å¼ã€‚ http://geekswithblogs.net/rashid/archive/2007/01/13/103518.aspxç¬¬ä¸€ç¯‡çš„æ•™ç¨‹å°±æ˜¯å‚è€ƒè¿™ä¸€ç¯‡æ–‡ç« çš„ä»£ç ï¼ŒåŸåˆ›çº§åˆ«","categories":[{"name":"ç”µè„‘åŸºæœ¬é…ç½®","slug":"ç”µè„‘åŸºæœ¬é…ç½®","permalink":"http://ppsteven.github.io/categories/%E7%94%B5%E8%84%91%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"http://ppsteven.github.io/tags/Hexo/"},{"name":"iframe","slug":"iframe","permalink":"http://ppsteven.github.io/tags/iframe/"}]},{"title":"PHP+phpstorm+xdebug ç¯å¢ƒé…ç½®","slug":"PHP+phpstorm+xdebug ç¯å¢ƒé…ç½®","date":"2019-12-14T15:19:51.000Z","updated":"2020-01-26T08:59:20.781Z","comments":false,"path":"2019/12/14/PHP+phpstorm+xdebug ç¯å¢ƒé…ç½®/","link":"","permalink":"http://ppsteven.github.io/2019/12/14/PHP+phpstorm+xdebug%20%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/","excerpt":"php ç¯å¢ƒæ­å»ºæ˜¯ä¸€ä»¶ç›¸å½“éº»çƒ¦çš„äº‹æƒ…ï¼Œæœ¬ç¯‡åšå®¢è®°å½•äº†åœ¨Mac ç³»ç»Ÿä¸‹çš„ç¯å¢ƒé…ç½®ã€‚ Winä¸Šçš„php ç¯å¢ƒæ­å»ºï¼Œå»ºè®®ä½¿ç”¨XAMPPï¼Œä¸€é”®æ­å»ºï¼Œè€Œä¸”è‡ªå¸¦xdebug.dllï¼Œç”¨è¿‡å°±çŸ¥é“ã€‚Mac ä¸Šçš„php ç¯å¢ƒï¼Œæˆ‘ä¸€å¼€å§‹ä¹Ÿä½¿ç”¨äº† XAMPP ä½œä¸ºç¯å¢ƒï¼Œä½†æ˜¯å‘ç°Mac ä¸Šçš„æ˜¯é˜‰å‰²ç‰ˆçš„ï¼Œä¹Ÿæ²¡æœ‰xdebugã€‚ ç›®å‰ä»‹ç»çš„ç¯å¢ƒæ­å»ºæ–¹æ³•æ˜¯: brew å’Œ pecl","text":"php ç¯å¢ƒæ­å»ºæ˜¯ä¸€ä»¶ç›¸å½“éº»çƒ¦çš„äº‹æƒ…ï¼Œæœ¬ç¯‡åšå®¢è®°å½•äº†åœ¨Mac ç³»ç»Ÿä¸‹çš„ç¯å¢ƒé…ç½®ã€‚ Winä¸Šçš„php ç¯å¢ƒæ­å»ºï¼Œå»ºè®®ä½¿ç”¨XAMPPï¼Œä¸€é”®æ­å»ºï¼Œè€Œä¸”è‡ªå¸¦xdebug.dllï¼Œç”¨è¿‡å°±çŸ¥é“ã€‚Mac ä¸Šçš„php ç¯å¢ƒï¼Œæˆ‘ä¸€å¼€å§‹ä¹Ÿä½¿ç”¨äº† XAMPP ä½œä¸ºç¯å¢ƒï¼Œä½†æ˜¯å‘ç°Mac ä¸Šçš„æ˜¯é˜‰å‰²ç‰ˆçš„ï¼Œä¹Ÿæ²¡æœ‰xdebugã€‚ ç›®å‰ä»‹ç»çš„ç¯å¢ƒæ­å»ºæ–¹æ³•æ˜¯: brew å’Œ pecl PHP å®‰è£…å®‰è£…è¿‡ç¨‹Mac ä¸Šæ˜¯è‡ªå¸¦phpå’ŒApacheçš„ 12$ whereis php/usr/bin/php æˆ‘è¿™é‡Œå‡†å¤‡ç”¨brew è£…ä¸€ä¸ªæœ€æ–°çš„ 12345678910$ brew search php==&gt; Formulaebrew-php-switcher php@7.2 phpmyadminphp php@7.3 âœ” phpstanphp-code-sniffer phplint phpunitphp-cs-fixer phpmd==&gt; Caskseclipse-php netbeans-php phpstorm(base) å®‰è£…æœ€æ–°çš„ php 7.3 1234567891011121314151617$ brew install php@7.3# å®‰è£…åï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ ç¯å¢ƒå˜é‡php@7.3 is keg-only, which means it was not symlinked into /usr/local,because this is an alternate version of another formula.If you need to have php@7.3 first in your PATH run: echo 'export PATH=\"/usr/local/opt/php@7.3/bin:$PATH\"' &gt;&gt; ~/.zshrc echo 'export PATH=\"/usr/local/opt/php@7.3/sbin:$PATH\"' &gt;&gt; ~/.zshrcFor compilers to find php@7.3 you may need to set: export LDFLAGS=\"-L/usr/local/opt/php@7.3/lib\" export CPPFLAGS=\"-I/usr/local/opt/php@7.3/include\"To have launchd start php@7.3 now and restart at login: brew services start php@7.3Or, if you don't want/need a background service you can just run: php-fpm brew å®‰è£…é‡åˆ°çš„é—®é¢˜brew å®‰è£…php@7.3 çš„è¿‡ç¨‹ä¸­ï¼Œä¸­é—´ä¸€æ¡å‘½ä»¤æ˜¯ brew clean äº§ç”Ÿäº†é—®é¢˜ 12345$ brew cleanupWarning: Skipping opam: most recent version 2.0.3 not installedWarning: Skipping python: most recent version 3.7.2_2 not installedWarning: Skipping sqlite: most recent version 3.27.1 not installedError: Permission denied @ unlink_internal - /usr/local/lib/node_modules/@angular/cli/node_modules/.bin/in-install æ—¢ç„¶è¯´æˆ‘ä»¬æƒé™ä¸å¤Ÿï¼Œç¬¬ä¸€ååº”æ˜¯ä½¿ç”¨ sudo å‘½ä»¤ï¼Œä½†æ˜¯brew ä¸å…è®¸ç”¨æˆ·è¿™ä¹ˆåšã€‚ ç»è¿‡æŸ¥è¯¢åï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼Œå¯ä»¥ç»™æ²¡æœ‰æƒé™çš„æ–‡ä»¶å¤¹ï¼Œæ›´æ”¹æƒé™ã€‚ 1$ sudo chown -R \"$(whoami)\":admin /usr/local # è¿™é‡Œæ–‡ä»¶å¤¹å¡«å†™éœ€è¦çš„ å®‰è£… xdebugxdebug çš„å®‰è£…æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œè‹¥æ˜¯æ²¡æœ‰xdebug éœ€è¦çš„æ­¥éª¤å¤åˆ¶å¾ˆå¤šã€‚æ¶‰åŠåˆ°è‡ªå·±ç¼–è¯‘ï¼ˆè‡ªå·±ç¼–è¯‘çš„è¯ï¼Œç”±äºè®¡ç®—æœºç¯å¢ƒä¸åŒåˆä¼šäº§ç”Ÿå¾ˆå¤šé—®é¢˜ï¼‰ XAMPP ç¯å¢ƒçš„å®‰è£…è¿™é‡ŒXAMPPç¯å¢ƒçš„è¯æˆ‘å»ºè®®å‚è€ƒä¸‹é¢çš„æ•™ç¨‹ Macä¸‹XAMPP+PhpStormä¸­é›†æˆxdebug ç®€å•çš„æè¿°ä¸€ä¸‹è¿‡ç¨‹å°±æ˜¯ï¼š ç”Ÿæˆ phpinfo ï¼Œå¤åˆ¶åˆ° xdebug å®˜ç½‘å®˜ç½‘ä¸‹è½½xdebug.so ä¸‹è½½xdebug.tgz è§£å‹æ–‡ä»¶: tar -xvzf xdebug.tgz ç¼–è¯‘è¿‡ç¨‹å®˜æ–¹æ•™ç¨‹(æœ‰å‘) å‘ä¸€ï¼šä½¿ç”¨å¯¹phpize å‘½ä»¤ã€‚å¦‚æœä½ ç”µè„‘ä¸­å®‰è£…çš„æ˜¯XAMPPç¯å¢ƒï¼Œä½ éœ€è¦ä½¿ç”¨XAMPPç¯å¢ƒçš„phpize /Applications/XAMPP/xamppfiles/bin/phpize å‘äºŒï¼šå‡ºç°Cannot find autoconf é”™è¯¯ brew install autoconf å‘ä¸‰ï¼š./configure ç¼–è¯‘é—®é¢˜ ./configure --with-php-config=/Applications/XAMPP/xamppfiles/bin/php-config make è·å¾— xdebug.so æ–‡ä»¶ Pecl æ–¹æ³•å®‰è£…ï¼ˆé‡‡ç”¨çš„æ–¹æ³•ï¼‰æˆ‘ä»¬ä½¿ç”¨çš„è¾ƒä¸ºç®€å•çš„æ–¹æ³•ï¼Œå°±æ˜¯ä½¿ç”¨peclå‘½ä»¤ï¼Œå¦‚æœæˆ‘ä»¬æˆåŠŸçš„å®‰è£…äº† php çš„è¯ï¼Œpecl æ˜¯è‡ªå¸¦çš„ã€‚pecl ç›¸å½“äºä¸ºæˆ‘ä»¬çœå»äº†ç¼–è¯‘çš„è¿‡ç¨‹ï¼Œä¹Ÿå¸®æˆ‘ä»¬é¿å…äº†å¾ˆå¤šçš„å‘ pecl ä¹‹äº php ç›¸å½“äº pip ä¹‹äº python å’Œ npm ä¹‹äº node.jsï¼Œç®¡ç†çš„æ˜¯ php çš„æ‰©å±•(æˆ–è€…å«æ’ä»¶ï¼Ÿ) é…ç½®php.iniæ‰¾åˆ°php.ini åœ°å€ 12345$ php --iniConfiguration File (php.ini) Path: /usr/local/etc/php/7.3Loaded Configuration File: /usr/local/etc/php/7.3/php.iniScan for additional .ini files in: /usr/local/etc/php/7.3/conf.dAdditional .ini files parsed: /usr/local/etc/php/7.3/conf.d/ext-opcache.ini æ·»åŠ å¦‚ä¸‹ä»£ç  12345678910[xdebug]zend_extension=/Applications/XAMPP/xamppfiles/lib/php/extensions/no-debug-non-zts-20160303/xdebug.so # xdebug å­˜æ”¾è·¯å¾„xdebug.remote_autostart=onxdebug.remote_enable=onxdebug.remote_mode=\"req\"xdebug.remote_host=localhostxdebug.remote_port=9000 # ç«¯å£å·ï¼Œè®°ä½xdebug.remote_handler=\"dbgp\"xdebug.idekey=\"PhpStorm\"xdebug.profiler_enable = Off æŸ¥çœ‹xdebug æ˜¯å¦æˆåŠŸå®‰è£…ï¼Œä½¿ç”¨ php -m æŸ¥çœ‹æ‰€æœ‰å·²å®‰è£…çš„æ‰©å±•ï¼Œå­˜åœ¨xdebug åˆ™è¡¨æ˜å®‰è£…æˆåŠŸã€‚å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ phpinfo() æŸ¥çœ‹xdebugã€‚ æ³¨æ„: é‡å¯Apache æœåŠ¡æ‰èƒ½çœ‹åˆ° phpinfo è¾“å‡ºçš„æƒ…å†µ é…ç½®phpstorm ç¯å¢ƒxdebug åœ¨phpstorm ä¸­çš„è®¾ç½®ï¼Œæœ‰å¤§é‡å›¾ï¼Œä¸æƒ³é‡å¤é€ è½®å­ã€‚çœ‹ä¸‹é¢ä¸¤ä¸ªæ•™ç¨‹è¶³å¤Ÿäº†ã€‚ å²ä¸Šæœ€ä½³ Mac+PhpStorm+XAMPP+Xdebug é›†æˆå¼€å‘å’Œæ–­ç‚¹è°ƒè¯•ç¯å¢ƒçš„é…ç½® Macä¸‹XAMPP+PhpStormä¸­é›†æˆxdebug å®è·µä¸‹æ¥ï¼Œç”±äºæˆ‘åªæ˜¯ä½œä¸ºphp åç«¯å¼€å‘ï¼Œä¸éœ€è¦ä¸å‰ç«¯äº¤äº’çš„è¯ï¼Œæˆ‘è¿™é‡Œåªéœ€è¦ä¿è¯ä¸‹é¢çš„ç«¯å£è®¾ç½®æ­£ç¡®å³å¯ã€‚ åè®°çœŸå®å·¥ä½œç¯å¢ƒä¸­ï¼Œå…¶å®ç”±äºé¡¹ç›®æ˜¯å¾ˆå¤§çš„ï¼Œå®é™…ä¸Šæ²¡æœ‰ç”¨åˆ°xdebugçš„æœºä¼šï¼ˆä¸»è¦é€šè¿‡æ—¥å¿—æ’æŸ¥é—®é¢˜ï¼‰ã€‚æˆ‘è¿™é‡Œå®‰è£…xdebug ä¸»è¦æ˜¯æƒ³è¦é€šè¿‡é€æ­¥è°ƒè¯•çš„è¿‡ç¨‹ï¼Œæ›´å¥½çš„ç†è§£php è¯­è¨€ï¼Œåç¨‹çš„ä½¿ç”¨æ–¹æ³•ç­‰ã€‚ å‚è€ƒèµ„æ–™xdebug å®˜æ–¹å®‰è£…æ•™ç¨‹ brew cleanup é—®é¢˜è§£å†³æ–¹æ³•â€“stackoverflow","categories":[{"name":"php","slug":"php","permalink":"http://ppsteven.github.io/categories/php/"}],"tags":[{"name":"php","slug":"php","permalink":"http://ppsteven.github.io/tags/php/"},{"name":"phpç¯å¢ƒé…ç½®","slug":"phpç¯å¢ƒé…ç½®","permalink":"http://ppsteven.github.io/tags/php%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"},{"name":"phpstorm","slug":"phpstorm","permalink":"http://ppsteven.github.io/tags/phpstorm/"}]},{"title":"phpåç¨‹ç¬”è®°","slug":"phpåç¨‹ç¬”è®°","date":"2019-12-07T10:19:13.000Z","updated":"2020-02-15T17:59:01.513Z","comments":false,"path":"2019/12/07/phpåç¨‹ç¬”è®°/","link":"","permalink":"http://ppsteven.github.io/2019/12/07/php%E5%8D%8F%E7%A8%8B%E7%AC%94%E8%AE%B0/","excerpt":"å‰è¨€åœ¨å®ä¹ çš„è¿‡ç¨‹ä¸­ä½¿ç”¨åˆ°äº†è…¾è®¯å¾®æœåŠ¡å¹³å°ï¼ˆTencent Service Frameworkï¼ŒTSFï¼‰æ¡†æ¶ï¼Œtsfä¸­ç»å¸¸çœ‹åˆ° $ret = (yield func(a,b)); è¿™æ ·çš„ç”¨æ³•ã€‚yield å¤–é¢åŒ…æ‹¬å·çš„ç”¨æ³•å¹¶ä¸å¸¸è§ï¼Œå®é™…ä¸Šè¿™æ˜¯yieldçš„ä¸€ç§ç‰¹æ®Šçš„ç”¨æ³•â€”â€”åç¨‹ã€‚è¿™é‡Œæˆ‘å‡†å¤‡é€šè¯»ä¸€ä¸‹è¿™ä¸€é¢†åŸŸçš„ç»å…¸æ•™ç¨‹ï¼Œå¥½å¥½ç†è§£yield å’Œ åç¨‹ æ˜¯å¦‚ä½•åœ¨PHP é¡¹ç›®å¼€å‘ä¸­èµ·åˆ°ä½œç”¨çš„ã€‚ åœ¨PHPä¸­ä½¿ç”¨åç¨‹å®ç°å¤šä»»åŠ¡è°ƒåº¦| é£é›ªä¹‹éš… ä½œè€…èƒŒæ™¯ï¼šé£é›ªä¹‹éš…ï¼ŒPHPå¼€å‘ç»„æ ¸å¿ƒæˆå‘˜ï¼Œé¸Ÿå”ï¼ŒPHP7çš„ä¸»è¦å¼€å‘è€…ã€‚æœ¬ç¯‡æ–‡ç« å…¶å®ä»–å¯¹ä¸€ç¯‡è‹±æ–‡æ•™ç¨‹çš„ç¿»è¯‘ä¹‹ä½œã€‚ ä¹‹æ‰€ä»¥æ ‡é¢˜èµ·ç¬”è®°ï¼ŒåŸå› æ˜¯åŸæ–‡ç†è§£èµ·æ¥ç¨æœ‰éš¾åº¦ï¼Œæ‰€ä»¥æˆ‘è¿™é‡ŒåŠ ä¸Šè‡ªå·±çš„ç†è§£ã€‚æœ¬ç¯‡å¯ä»¥åœ¨å¤§å®¶è¯»åŸæ–‡çš„è¿‡ç¨‹ä¸­åšä¸€ä¸ªå‚è€ƒã€‚","text":"å‰è¨€åœ¨å®ä¹ çš„è¿‡ç¨‹ä¸­ä½¿ç”¨åˆ°äº†è…¾è®¯å¾®æœåŠ¡å¹³å°ï¼ˆTencent Service Frameworkï¼ŒTSFï¼‰æ¡†æ¶ï¼Œtsfä¸­ç»å¸¸çœ‹åˆ° $ret = (yield func(a,b)); è¿™æ ·çš„ç”¨æ³•ã€‚yield å¤–é¢åŒ…æ‹¬å·çš„ç”¨æ³•å¹¶ä¸å¸¸è§ï¼Œå®é™…ä¸Šè¿™æ˜¯yieldçš„ä¸€ç§ç‰¹æ®Šçš„ç”¨æ³•â€”â€”åç¨‹ã€‚è¿™é‡Œæˆ‘å‡†å¤‡é€šè¯»ä¸€ä¸‹è¿™ä¸€é¢†åŸŸçš„ç»å…¸æ•™ç¨‹ï¼Œå¥½å¥½ç†è§£yield å’Œ åç¨‹ æ˜¯å¦‚ä½•åœ¨PHP é¡¹ç›®å¼€å‘ä¸­èµ·åˆ°ä½œç”¨çš„ã€‚ åœ¨PHPä¸­ä½¿ç”¨åç¨‹å®ç°å¤šä»»åŠ¡è°ƒåº¦| é£é›ªä¹‹éš… ä½œè€…èƒŒæ™¯ï¼šé£é›ªä¹‹éš…ï¼ŒPHPå¼€å‘ç»„æ ¸å¿ƒæˆå‘˜ï¼Œé¸Ÿå”ï¼ŒPHP7çš„ä¸»è¦å¼€å‘è€…ã€‚æœ¬ç¯‡æ–‡ç« å…¶å®ä»–å¯¹ä¸€ç¯‡è‹±æ–‡æ•™ç¨‹çš„ç¿»è¯‘ä¹‹ä½œã€‚ ä¹‹æ‰€ä»¥æ ‡é¢˜èµ·ç¬”è®°ï¼ŒåŸå› æ˜¯åŸæ–‡ç†è§£èµ·æ¥ç¨æœ‰éš¾åº¦ï¼Œæ‰€ä»¥æˆ‘è¿™é‡ŒåŠ ä¸Šè‡ªå·±çš„ç†è§£ã€‚æœ¬ç¯‡å¯ä»¥åœ¨å¤§å®¶è¯»åŸæ–‡çš„è¿‡ç¨‹ä¸­åšä¸€ä¸ªå‚è€ƒã€‚ è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹çš„åŒºåˆ«è¿›ç¨‹ è¿›ç¨‹æ˜¯ç¨‹åºæ‰§è¡Œçš„ä¸€ä¸ªå®ä¾‹ è¿›ç¨‹æ˜¯èµ„æºåˆ†é…çš„æœ€å°å•ä½ï¼Œèµ„æºåŒ…æ‹¬ï¼šCPUï¼Œå†…å­˜ï¼ŒI/Oç­‰ è¿›ç¨‹é—´çš„é€šè®¯æ–¹å¼ï¼ˆIPCï¼‰ &lt;â€”- æŠ„ï¼Œå‚è€ƒhttps://blog.csdn.net/daaikuaichuan/article/details/82951084 ç®¡é“ Pipe å‘½åç®¡é“ FIFO * æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMessage Queue) è…¾è®¯çš„hippo Kafka ä¿¡å·é‡ï¼ˆSemaphoreï¼‰ å…±äº«å†…å­˜ï¼ˆShared Memoryï¼‰ * å¥—æ¥å­—ï¼ˆSocketï¼‰ çº¿ç¨‹ è½»é‡çº§è¿›ç¨‹(Lightweight Processï¼ŒLWPï¼‰ CPUè°ƒåº¦çš„æœ€å°å•ä½ è¿›ç¨‹ç”±äºæ˜¯æ‹¥æœ‰ç³»ç»Ÿèµ„æºï¼Œæ‰€ä»¥åˆ‡æ¢æ—¶éœ€è¦ä¿å­˜ä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œå¼€é”€å¤§ã€‚çº¿ç¨‹å¼€é”€å° åç¨‹ åç¨‹æ˜¯ä¸€ç§æ¯”çº¿ç¨‹æ›´åŠ è½»é‡çº§çš„å­˜åœ¨ ä¸è¿›ç¨‹çº¿ç¨‹ä¸åŒçš„æ˜¯ï¼Œåç¨‹æ˜¯å®Œå…¨ç”±ç¨‹åºæ§åˆ¶åœ¨ï¼ˆç”¨æˆ·æ€æ‰§è¡Œï¼‰ ä¸¾ä¾‹ï¼š å½“æˆ‘ä»¬è¯»æ–‡ä»¶çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä¸»åŠ¨è®©å‡ºæ§åˆ¶æƒï¼Œè€Œä¸æ˜¯ç­‰å¾…I/Oæ“ä½œå®Œæˆã€‚ ç‰¹ç‚¹ æé«˜çš„æ‰§è¡Œæ•ˆç‡ï¼Œæ²¡æœ‰çº¿ç¨‹é‚£ä¹ˆå¤§çš„åˆ‡æ¢å¼€é”€ã€‚æˆ‘ä»¬çŸ¥é“æ¶‰åŠåˆ°å†…æ ¸å‚ä¸ç®¡ç†çš„ç¨‹åºï¼Œéœ€è¦ä»ç”¨æˆ·æ€é€šè¿‡ä¸­æ–­çš„æ–¹å¼åˆ‡æ¢åˆ°å†…æ ¸æ€ã€‚è¿™æ ·çš„å¼€é”€æ˜¯æå¤§çš„ã€‚ ä¸éœ€è¦å¤šçº¿ç¨‹çš„é”æœºåˆ¶ï¼Œåœ¨åç¨‹ä¸­æ§åˆ¶å…±äº«èµ„æºä¸åŠ é” å¯¹ç”¨æˆ·å¯è§ ååŒï¼Œå› ä¸ºæ˜¯ç”±ç¨‹åºå‘˜è‡ªå·±å†™çš„è°ƒåº¦ç­–ç•¥ï¼Œå…¶é€šè¿‡åä½œè€Œä¸æ˜¯æŠ¢å æ¥è¿›è¡Œåˆ‡æ¢ åç¨‹çš„æ€æƒ³æœ¬è´¨ä¸Šå°±æ˜¯æ§åˆ¶æµçš„ä¸»åŠ¨è®©å‡ºï¼ˆyieldï¼‰å’Œæ¢å¤ï¼ˆresumeï¼‰æœºåˆ¶ï¼ˆæ¥æºï¼šPHP7ä¸‹çš„åç¨‹å®ç°ï¼‰ è¿­ä»£ç”Ÿæˆå™¨è¿­ä»£ç”Ÿæˆå™¨æ˜¯æˆ‘ä»¬å¯¹äº yield æœ€å¸¸ç”¨çš„ä¸€ä¸ªåŠŸèƒ½ã€‚ç”¨ yield æ›¿ä»£ return ä½œä¸ºå‡½æ•°çš„è¿”å›æœ€å¤§çš„ä½œç”¨æ˜¯ï¼Œå®ƒè¿”å›çš„ä¸ä»…æ˜¯ä¸€ä¸ªå€¼ï¼Œè€Œæ˜¯ä¸€ä¸ªè¿­ä»£å™¨ã€‚è¿™ä¸€ä¼˜ç‚¹åœ¨é¢å¯¹æ— æ³•è½½å…¥åˆ°å†…å­˜çš„å¤§å‹æ•°æ®é›†æœ‰å¾ˆå¤§çš„ä½œç”¨ã€‚ å¦‚ä»¥ä¸‹ä»£ç  123456789function xrange($start,$end,$step = 1)&#123; for ($i = $start ; $i &lt;= $end ; $i += $step)&#123; yield $i; &#125;&#125;foreach (xrange(1,10000000000) as $num) &#123; echo $num .\"&lt;br&gt;\";&#125; å¾ˆæ˜æ˜¾ï¼Œè¿™é‡Œä½¿ç”¨returnçš„è¯ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªéå¸¸å¤§çš„æ•°ç»„ï¼Œå½“ä½ æ•°æ®é‡ç‰¹åˆ«å¤§çš„æ—¶å€™ä¼šé€ æˆæ•°æ®æº¢å‡ºçš„é—®é¢˜ã€‚yield çš„ç¥å¥‡ä¹‹å¤„åœ¨äºï¼Œå®ƒä¼šä¿æŒç”Ÿæˆå™¨çš„çŠ¶æ€ã€‚å‡½æ•°ä¼šä¸€ç›´è¿è¡Œï¼Œç›´åˆ°ä¸‹ä¸€ä¸ªyieldã€‚ç¨‹åºæ‰§è¡Œçš„æ§åˆ¶æµå¯ä»¥åœ¨ä¸»ä»£ç å’Œç”Ÿæˆå™¨å‡½æ•°ä¹‹é—´åˆ‡æ¢ï¼Œä¹Ÿä¸ç”¨ç”¨æˆ·æ‹…å¿ƒä¸Šä¸‹æ–‡ç¯å¢ƒçš„é—®é¢˜ã€‚ä¼˜ç‚¹ è¿è¡Œå¤§å‹æ•°æ®é›† ä¸ç”¨ç¼–å†™å°±èƒ½ç”Ÿæˆå¤æ‚çš„ç”Ÿæˆå™¨ å†™ä¸€ä¸ªç”Ÿæˆå™¨çš„æµç¨‹ï¼Œéœ€è¦ è¢«è¿­ä»£çš„ç±»å®ç° IteratorAggregate æ¥å£ å®šä¹‰ä¸€ä¸ªè¿”å›è¿­ä»£ç±»çš„æ–¹æ³•ï¼Œè¿™ä¸ªç±»å¿…é¡»å®ç°Iterator æ¥å£ æä¾›ä¸€ç³»åˆ—å¿…é¡»å®ç°çš„æ–¹æ³• rewind : å‡½æ•°å†…éƒ¨æŒ‡é’ˆè®¾ç½®å›åˆ°æ•°æ®å¼€å§‹å¤„ valid : åˆ¤è¯»æ˜¯å¦è¿˜æœ‰æ•°æ® key : è¿”å›æ•°æ®æŒ‡é’ˆå€¼ current : è¿”å›å½“å‰æŒ‡é’ˆæŒ‡å‘çš„å€¼ next : ç§»åŠ¨åˆ°ä¸‹ä¸€ä½yield å…³é”®å­—ç®€åŒ–äº†å®ç°è¿­ä»£å™¨çš„è¿‡ç¨‹ã€‚ TODO å®ç°ä¸€ä¸ªPHP Iterator å¯¹è±¡ åç¨‹yield çš„ä¸€ä¸ªç‰¹æ€§æ˜¯å‡½æ•°æ¯æ¬¡æ‰§è¡Œåˆ°yield çš„æ—¶å€™ï¼Œå°±ä¼šä¸»åŠ¨è®©å‡ºæ§åˆ¶æƒã€‚è¿™ä¸€ç‚¹å¯ä»¥å¾ˆå¥½çš„å¸®åŠ©æˆ‘ä»¬æ§åˆ¶ç¨‹åºçš„æ‰§è¡Œé¡ºåºã€‚ send å‡½æ•°public Generator::send ( mixed $value ) : mixed å‘ç”Ÿæˆå™¨ä¸­ä¼ å…¥ä¸€ä¸ªå€¼ï¼Œå¹¶ä¸”å½“åš yield è¡¨è¾¾å¼çš„ç»“æœã€‚ ç„¶åç»§ç»­æ‰§è¡Œç”Ÿæˆå™¨ã€‚ å¦‚æœå½“è¿™ä¸ªæ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œç”Ÿæˆå™¨ä¸åœ¨ yield è¡¨è¾¾å¼ï¼Œé‚£ä¹ˆåœ¨ä¼ å…¥å€¼ä¹‹å‰ï¼Œå®ƒä¼šå…ˆè¿è¡Œåˆ°ç¬¬ä¸€ä¸ª yield è¡¨è¾¾å¼ã€‚ä¼ å…¥ç”Ÿæˆå™¨çš„å€¼ã€‚è¿™ä¸ªå€¼å°†ä¼šè¢«ä½œä¸ºç”Ÿæˆå™¨å½“å‰æ‰€åœ¨çš„ yield çš„è¿”å›å€¼ã€‚ åˆ©ç”¨send å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„ä¸åç¨‹è¿›è¡Œäº¤äº’ï¼Œå…·ä½“å¦‚ä¸‹ã€‚ yield ä½œä¸ºå‚æ•°æ¥å—è€…12345678910111213&lt;?phpfunction logger($fileName) &#123; echo \"è¿™ä¸ªè¯­å¥åªä¼šæ‰§è¡Œä¸€æ¬¡\",\"\\n\"; while (true) &#123; echo yield . \"\\n\"; //å‡½æ•°æ¯æ¬¡éƒ½ä¼šæ‰§è¡Œè¦yield æš‚åœï¼Œç„¶åè®©å‡ºæ§åˆ¶æƒã€‚ &#125;&#125;$logger = logger(__DIR__ . '/log');$logger-&gt;send('Foo'); // è¾“å‡º \"è¿™ä¸ªè¯­å¥åªä¼šæ‰§è¡Œä¸€æ¬¡\", è¾“å‡º Foo \\n;$logger-&gt;send('Bar'); // è¾“å‡º Bar \\n;?&gt; yield ä½œç”¨ï¼š ç±»ä¼¼äºdebug æ—¶å€™çš„æ–­ç‚¹ï¼Œæ¯ä¸€æ¬¡éƒ½æ˜¯è¿è¡Œåˆ° yield åœæ­¢ å¯ä»¥åˆ©ç”¨sendæ–¹æ³•ç»™ yield ä¼ é€’æ•°æ® é‚£è‡ªç„¶ä¼šæœ‰ä¸€ä¸ªç–‘é—®ï¼Œæ­¤å¤„çš„ yield æœ‰æ²¡æœ‰æ¥å—æ•°æ®å›æ¥ï¼Ÿç»è¿‡è¯•éªŒï¼Œå‘ç°æ­¤å¤„çš„yield æ˜¯æ²¡æœ‰è¿”å›æ•°æ®çš„ã€‚ è¿™ä¸ªä¾‹å­å¯ä»¥çœ‹åˆ°yield å¹¶æ²¡æœ‰è¿”å›æ•°æ®ï¼Œæ˜¯NULL 12345678910111213&lt;?phpfunction logger($fileName) &#123; echo \"è¿™ä¸ªè¯­å¥åªä¼šæ‰§è¡Œä¸€æ¬¡\",\"\\n\"; while (true) &#123; echo yield . \"\\n\"; //å‡½æ•°æ¯æ¬¡éƒ½ä¼šæ‰§è¡Œè¦yield æš‚åœï¼Œç„¶åè®©å‡ºæ§åˆ¶æƒã€‚ &#125;&#125;$logger = logger(__DIR__ . '/log');$a = $logger-&gt;send('Foo'); // è¾“å‡º \"è¿™ä¸ªè¯­å¥åªä¼šæ‰§è¡Œä¸€æ¬¡\", è¾“å‡º Foo;var_dump($a); // è¿”å› NULL , è¿™é‡Œçš„yield å¹¶æ²¡æœ‰è¿”å›ä»»ä½•å€¼?&gt; yield åŒæ—¶æ¥å—å’Œå‘é€æ•°æ®123456789101112131415&lt;?phpfunction gen() &#123; $ret = (yield 'yield1'); var_dump($ret); $ret = (yield 'yield2'); var_dump($ret);&#125; $gen = gen();var_dump($gen-&gt;current()); // string(6) \"yield1\"var_dump($gen-&gt;send('ret1')); // string(4) \"ret1\" (the first var_dump in gen) // string(6) \"yield2\" (the var_dump of the -&gt;send() return value)var_dump($gen-&gt;send('ret2')); // string(4) \"ret2\" (again from within gen) // NULL (the return value of -&gt;send())?&gt; é€å¥åˆ†æ $ gen = gen() æŒ‡é’ˆæŒ‡å‘è¿™ä¸ªè¿­ä»£å™¨ $ gen-&gt; current() è¿è¡Œåˆ°ç¬¬ä¸€ä¸ªyield ï¼Œè¿”å› yield è¯­å¥çš„å€¼ yieldï¼Œå¹¶ è¾“å‡º ç±»å‹å’Œå€¼ $ gen -&gt;send(â€œret1â€) å½“å‰ç”Ÿæˆå™¨åœ¨ yield è¯­å¥ï¼Œäºæ˜¯æŠŠ â€œret1â€ å½“åš ï¼ˆyield â€œyield1â€ï¼‰çš„ç»“æœï¼Œå¹¶èµ‹å€¼ç»™ $ret1ã€‚è€Œä¸”è¿˜ä¼šæ‰§è¡Œä¸€ä¸ª gen-&gt;next() ç§»åˆ°ä¸‹ä¸€ä¸ªyield å¤„ï¼Œè¿”å›ç¬¬äºŒä¸ªyield è¯­å¥çš„è¿”å›å€¼ $ gen -&gt;send(â€œret2â€) å½“å‰ç”Ÿæˆå™¨åœ¨ç¬¬äºŒä¸ªyield è¯­å¥ï¼ŒæŠŠâ€ret2â€ å½“åš (yield â€œyield2â€) çš„ç»“æœï¼Œå¹¶èµ‹å€¼ç»™ $ret2 ã€‚ç»§ç»­å‘ä¸‹æ‰§è¡Œï¼Œæ­¤æ—¶æŒ‡é’ˆä¼šç§»è‡³è¿­ä»£å™¨æœ«å°¾ï¼Œæ­¤æ—¶å·²ç»æ²¡æœ‰yield ï¼Œæ‰€ä»¥è¿”å›NULL å¤šä»»åŠ¡åˆä½œä¸ºäº†å¸®åŠ©ç†è§£ åç¨‹å’Œä»»åŠ¡è°ƒåº¦çš„å…³æœºï¼Œyield åœ¨ ä»»åŠ¡è¿è¡Œçš„è¿‡ç¨‹ä¸­å¯ä»¥ä¸»åŠ¨ä¸­æ–­è‡ªèº«ï¼Œå¹¶æŠŠæ§åˆ¶æƒäº¤è¿˜ç»™è°ƒåº¦å™¨ã€‚ è¿™é‡Œæˆ‘ä»¬å…ˆéœ€è¦å®ç°: ä»»åŠ¡ã€è°ƒåº¦å™¨ ä»»åŠ¡1234567891011121314151617181920212223242526272829303132333435&lt;?phpclass Task &#123; //å®ç°ä¸€ä¸ªä»»åŠ¡ protected $taskId; //ä»»åŠ¡ID protected $coroutine;//åç¨‹ protected $sendValue = null;//send ä¼ é€çš„value protected $beforeFirstYield = true;//æ˜¯ä¸æ˜¯ç¬¬ä¸€æ¬¡ä¼ é€ // å› ä¸ºæ¯æ¬¡send è¿”å›çš„å€¼ï¼Œéƒ½æ˜¯å½“å‰yield çš„ä¸‹ä¸€ä¸ªyield çš„è¿”å›å€¼ï¼Œè¿™å¯¼è‡´äº†ç¬¬ä¸€ä¸ªyield çš„è¿”å›å€¼è¢«ä¸¢å¼ƒäº†ã€‚å¯¹äºç¬¬ä¸€ä¸ª yieldï¼Œæˆ‘ä»¬éœ€è¦ç”¨current()è·å–è¿”å›å€¼ï¼Œä»ç¬¬äºŒä¸ªå¾€åç”¨send()è·å–è¿”å›å€¼ã€‚ public function __construct($taskId, Generator $coroutine) &#123;//åç¨‹ç±»å‹æ˜¯ è¿­ä»£å™¨ $this-&gt;taskId = $taskId; $this-&gt;coroutine = $coroutine; &#125; public function getTaskId() &#123; return $this-&gt;taskId; &#125; public function setSendValue($sendValue) &#123; $this-&gt;sendValue = $sendValue; &#125; public function run() &#123; if ($this-&gt;beforeFirstYield) &#123;// å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡yieldï¼Œé‚£ä¹ˆå°±ç”¨current()è¿”å› $this-&gt;beforeFirstYield = false; return $this-&gt;coroutine-&gt;current(); &#125; else &#123;//å¦‚æœä¸æ˜¯ç¬¬ä¸€ä¸ªyieldï¼Œå°±ç”¨sendè®¾ç½®ä¸€ä¸ªvalueï¼Œå¹¶è¿”å›ä¸‹ä¸€ä¸ªyieldçš„å€¼ $retval = $this-&gt;coroutine-&gt;send($this-&gt;sendValue); $this-&gt;sendValue = null;//è®¾ç½®å®Œæ¯•æ¸…ç©ºvalue return $retval; &#125; &#125; public function isFinished() &#123; return !$this-&gt;coroutine-&gt;valid();// åˆ¤æ–­è¿­ä»£å™¨æ˜¯å¦è¿­ä»£å®Œæ¯• &#125;&#125; è¿­ä»£å™¨1234567891011121314151617181920212223242526272829303132333435363738&lt;?phpclass Scheduler &#123;//å®ç°ä¸€ä¸ªè°ƒåº¦å™¨ protected $maxTaskId = 0; // æœ€å¤§ä»»åŠ¡ protected $taskMap = []; // taskId =&gt; task protected $taskQueue;// ä»»åŠ¡é˜Ÿåˆ— public function __construct() &#123; $this-&gt;taskQueue = new SplQueue(); // å®ä¾‹åŒ–ä¸€ä¸ªé˜Ÿåˆ— &#125; public function newTask(Generator $coroutine) &#123; $tid = ++$this-&gt;maxTaskId;// ç”Ÿæˆä»»åŠ¡id $task = new Task($tid, $coroutine); // åˆ›å»ºä»»åŠ¡ $this-&gt;taskMap[$tid] = $task;// æ ‡è¯† taskId =&gt; task $this-&gt;schedule($task); return $tid; &#125; //ä»»åŠ¡å…¥é˜Ÿ public function schedule(Task $task) &#123; $this-&gt;taskQueue-&gt;enqueue($task); &#125; //ä»»åŠ¡è¿è¡Œ public function run() &#123; while (!$this-&gt;taskQueue-&gt;isEmpty()) &#123; $task = $this-&gt;taskQueue-&gt;dequeue();// å‡ºé˜Ÿ $task-&gt;run(); //ä»»åŠ¡è¿è¡Œ if ($task-&gt;isFinished()) &#123; //å½“å‰ä»»åŠ¡ç»“æŸï¼Œåˆ é™¤ unset($this-&gt;taskMap[$task-&gt;getTaskId()]); &#125; else &#123; $this-&gt;schedule($task);//æœªå®Œæˆçš„è¯ï¼Œæ”¾å…¥é˜Ÿå°¾ç»§ç»­æ‰§è¡Œ &#125; &#125; &#125;&#125;?&gt; ç”¨ä¸€ä¸ªä¾‹å­çœ‹çœ‹ç¨‹åºæ˜¯å¦æŒ‰ç…§æˆ‘ä»¬çš„æœŸæœ›åœ¨è¿è¡Œ 1234567891011121314151617181920212223242526272829303132333435363738394041&lt;?phpinclude (\"Task.php\"); // è½½å…¥å®šä¹‰å¥½çš„æ¨¡å—include(\"Scheduler.php\");function task1() &#123;// ç¨‹åºè¿è¡Œ10æ¬¡ for ($i = 1; $i &lt;= 10; ++$i) &#123; echo \"This is task 1 iteration $i.\\n\"; yield; &#125;&#125;function task2() &#123;// ç¨‹åºè¿è¡Œ5æ¬¡ for ($i = 1; $i &lt;= 5; ++$i) &#123; echo \"This is task 2 iteration $i.\\n\"; yield; &#125;&#125;$scheduler = new Scheduler;$scheduler-&gt;newTask(task1());$scheduler-&gt;newTask(task2());$scheduler-&gt;run();ç»“æœå¦‚ä¸‹:This is task 1 iteration 1.This is task 2 iteration 1.This is task 1 iteration 2.This is task 2 iteration 2.This is task 1 iteration 3.This is task 2 iteration 3.This is task 1 iteration 4.This is task 2 iteration 4.This is task 1 iteration 5.This is task 2 iteration 5.This is task 1 iteration 6.This is task 1 iteration 7.This is task 1 iteration 8.This is task 1 iteration 9.This is task 1 iteration 10. å‘ç°ç¨‹åºæ˜¯äº¤æ›¿è¿è¡Œçš„ï¼Œå’Œæˆ‘ä»¬çš„é¢„æœŸæ˜¯ç›¸åŒçš„ã€‚å› ä¸ºæˆ‘ä»¬ä½¿ç”¨äº†é˜Ÿåˆ—çš„ç»“æ„ï¼Œè‹¥æ˜¯ä¸€ä¸ªä»»åŠ¡ä»é˜Ÿåˆ—ä¸­å–å‡ºåå¹¶æ²¡æœ‰è¿è¡Œç»“æŸï¼Œæˆ‘ä»¬ä¼šæ”¾å…¥é˜Ÿå°¾ç»§ç»­è¿è¡Œã€‚ ä¸è°ƒåº¦å™¨ä¹‹é—´çš„é€šä¿¡æˆ‘ä»¬å†çœ‹ä¸€çœ¼ï¼Œä¸Šé¢ä¾‹å­ä¸­éœ€è¦è¿è¡Œçš„ç¨‹åº 123456function task1() &#123;// ç¨‹åºè¿è¡Œ10æ¬¡ for ($i = 1; $i &lt;= 10; ++$i) &#123; echo \"This is task 1 iteration $i.\\n\"; // &lt;-- è‹¥æ˜¯è¦åœ¨ç”¨è°ƒåº¦å™¨ä¸­çš„taskid æ›¿ä»£æ­¤å¥éœ€è¦æ€ä¹ˆåšã€‚ yield; &#125;&#125; å¦‚ä½•å®ç°ï¼šä»»åŠ¡ä¸è°ƒåº¦å™¨ä¹‹é—´çš„é€šä¿¡ã€‚ æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ è¿›ç¨‹ç”¨æ¥å’Œæ“ä½œç³»ç»Ÿä¼šè¯çš„åŒæ ·çš„æ–¹å¼æ¥é€šä¿¡ï¼šç³»ç»Ÿè°ƒç”¨ã€‚ è¦æ³¨æ„çš„æ˜¯ï¼Œä¸èƒ½ç®€å•çš„æŠŠè°ƒåº¦å™¨ä½œä¸ºä¸€ä¸ªå‚æ•°ï¼Œä¼ é€’ç»™ä»»åŠ¡ï¼Œä¸ç„¶å¾ˆå±é™©ã€‚è¿™é‡Œä½œè€…é€šè¿‡yieldè¡¨è¾¾å¼ï¼Œé…åˆsend æ¥ä¼ é€’ä¿¡æ¯ã€‚ é¦–å…ˆæ˜¯å¯¹å¯è°ƒç”¨çš„ç³»ç»Ÿè°ƒç”¨åšä¸€ä¸ªå°è£… 1234567891011121314151617&lt;?phpclass SystemCall &#123; protected $callback; // ä¼ å…¥çš„å€¼æ˜¯ ä¸€ä¸ªå¯è°ƒç”¨çš„ç±»/å‡½æ•° public function __construct(callable $callback) &#123; $this-&gt;callback = $callback; &#125; // __invoke:å½“ç±»å‘ç”Ÿè°ƒç”¨çš„ä½¿ç”¨ä½¿ç”¨ // è¿™æ ·ï¼Œç±»åœ¨ä½¿ç”¨çš„æ—¶å€™çœ‹ä¸Šå»å’Œä¸€ä¸ªå‡½æ•°ä¸€æ · // ä¼ å…¥çš„å‚æ•°æ˜¯ ä»»åŠ¡ å’Œ è°ƒåº¦å™¨ // ä½œç”¨æ˜¯è¿è¡Œ åˆå§‹åŒ–çš„å‡½æ•°/ç±» public function __invoke(Task $task, Scheduler $scheduler) &#123; $callback = $this-&gt;callback; return $callback($task, $scheduler); &#125;&#125;?&gt; ä¸‹é¢æˆ‘ä»¬éœ€è¦è¿›è¡Œæ¶ˆæ¯é€šè®¯ 1234567891011121314151617&lt;?phpfunction task($max) &#123; // æˆ‘ä»¬éœ€è¦ä¼ å…¥ $tid çš„å€¼ ä»è°ƒåº¦å™¨ä¸­ $tid = (yield getTaskId()); // &lt;-- here's the syscall! for ($i = 1; $i &lt;= $max; ++$i) &#123; echo \"This is task $tid iteration $i.\\n\"; yield; &#125;&#125; $scheduler = new Scheduler; $scheduler-&gt;newTask(task(10));$scheduler-&gt;newTask(task(5)); $scheduler-&gt;run();?&gt; è¿™é‡Œï¼Œæˆ‘ä»¬éœ€è¦å¯¹ä¼ å…¥çš„getTaskId è¿›è¡Œä¿®æ”¹ ä¼ å…¥çš„å€¼æ˜¯æ¥è‡ªä¸è°ƒåº¦å™¨å’Œä»»åŠ¡çš„ï¼Œç»“åˆä¹‹å‰çš„å°è£…çš„ç³»ç»Ÿè°ƒç”¨ 12345678910&lt;?phpfunction getTaskId() &#123; return new SystemCall(function(Task $task, Scheduler $scheduler) &#123; $task-&gt;setSendValue($task-&gt;getTaskId()); $scheduler-&gt;schedule($task); // è¿™é‡Œè¿”å›çš„æ˜¯ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨ // ä½œç”¨æ˜¯ç»™ä»»åŠ¡è®¾ç½® send çš„å€¼ï¼Œsendå€¼çš„å†…å®¹æ˜¯ taskid // æŠŠæ­¤ä»»åŠ¡åŠ å…¥è°ƒåº¦å™¨çš„é˜Ÿåˆ—ä¸­å» &#125;);&#125; è¿™é‡Œreturn çš„ä¸æ˜¯å¦‚å‡½æ•°åå†™çš„ taskidï¼Œè€Œæ˜¯ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨ã€‚ æœ€åç¨‹åºä¸­çš„ $tid = (yield getTaskId()); åˆä¼šæŠŠè¿™ä¸ªç³»ç»Ÿè°ƒç”¨ä¼ å…¥è°ƒåº¦å™¨çš„é˜Ÿåˆ—ä¸­ è¿›è¿‡è¿™æ ·çš„æ“ä½œï¼Œæˆ‘ä»¬è°ƒåº¦å™¨çš„é˜Ÿåˆ—ä¸­æœ‰ä¸¤ç§ç±»å‹çš„ä»»åŠ¡ SystemCallç±»å‹ï¼Œä½†æ˜¯å®ƒä¹Ÿå¯ä»¥å’Œå‡½æ•°ä¸€æ ·è°ƒç”¨ Task ç±»å‹ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„ä»»åŠ¡ç±»å‹ æ‰€ä»¥æˆ‘ä»¬å¿…é¡»è¿˜è¦ä¿®æ”¹ä¸€ä¸‹è°ƒåº¦å™¨çš„runæ–¹æ³•ï¼ˆå…¶å®å°±æ˜¯åŠ å…¥ä¸€æ®µå¯¹SystemCall çš„å¤„ç†ï¼‰ 12345678910111213141516171819202122public function run() &#123; while (!$this-&gt;taskQueue-&gt;isEmpty()) &#123; $task = $this-&gt;taskQueue-&gt;dequeue(); $retval = $task-&gt;run(); // è¿™ä¸€æ®µæ˜¯æ–°åŠ çš„,å¦‚æœå‡ºé˜Ÿçš„ç±»å‹æ˜¯ç³»ç»Ÿè°ƒç”¨ï¼Œå°±åœ¨è°ƒåº¦å™¨é‡Œé¢è°ƒç”¨å®ƒï¼Œä¼ å…¥ä»»åŠ¡ å’Œ è°ƒåº¦å™¨ // è°ƒç”¨çš„ç»“æœæ˜¯ // $task ä¼šè®¾ç½®ä¸€ä¸ª Send å€¼ // $this(è°ƒåº¦å™¨) ä¼šæŠŠè¿™ä¸ª $task åŠ å…¥åˆ°è°ƒåº¦å™¨çš„æœ«å°¾ if ($retval instanceof SystemCall) &#123; $retval($task, $this); continue; &#125; //-------------------------- if ($task-&gt;isFinished()) &#123; unset($this-&gt;taskMap[$task-&gt;getTaskId()]); &#125; else &#123; $this-&gt;schedule($task); &#125; &#125;&#125; åœ¨xdebug çš„å¸®åŠ©ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç¬¬ä¸€æ¬¡ $retval = $task-&gt;run() çš„è¿”å›å€¼ï¼Œä¼šèµ°åˆ° Task(line: 24) çš„$this-&gt;coroutine-&gt;current(); æœ€ç»ˆå–å¾—çš„ getTaskId() çš„è¿”å›å€¼(ç±»å‹ä¸º SystemCall) ç¬¬äºŒæ¬¡èµ°åˆ°$retval = $task-&gt;run() çš„æ—¶å€™ï¼Œæœ€ç»ˆæ˜¯è¿”å›task å‡½æ•°ä¸­çš„yield(); æ‰€ä»¥è¿”å›å€¼æ˜¯nullã€‚ è¿è¡Œçš„ç»“æœå°±æ˜¯ï¼Œä¸¤ä¸ªä»»åŠ¡äº¤æ›¿è¿è¡Œï¼ŒçŸ¥é“ç»“æŸã€‚ 123456789101112131415This is task 1 iteration 1.This is task 2 iteration 1.This is task 1 iteration 2.This is task 2 iteration 2.This is task 1 iteration 3.This is task 2 iteration 3.This is task 1 iteration 4.This is task 2 iteration 4.This is task 1 iteration 5.This is task 2 iteration 5.This is task 1 iteration 6.This is task 1 iteration 7.This is task 1 iteration 8.This is task 1 iteration 9.This is task 1 iteration 10. åç¨‹å †æ ˆåç¨‹å †æ ˆæ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„åº”ç”¨ï¼Œå½“ä½ çš„é¡¹ç›®å˜å¾—è¶Šæ¥è¶Šå¤§çš„æ—¶å€™ï¼Œä¼šå‡ºç°åç¨‹ä¸­å¥—ç”¨å¦ä¸€ä¸ªåç¨‹çš„æƒ…å†µã€‚æˆ‘ä»¬çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ã€‚ 123456789101112131415161718&lt;?phpfunction echoTimes($msg, $max) &#123; // å­åç¨‹ for ($i = 1; $i &lt;= $max; ++$i) &#123; echo \"$msg iteration $i\\n\"; yield; &#125;&#125; function task() &#123; echoTimes('foo', 10); // æœŸå¾…æ‰“å°10æ¬¡fooï¼Œå®é™…ä¸Šè¿”å›çš„åç¨‹ï¼Œå¹¶æ²¡æœ‰çœŸå®è¿è¡Œè¿‡ echo \"---\\n\"; echoTimes('bar', 5); // æœŸå¾…æ‰“å°5æ¬¡barï¼Œå®é™…ä¸Šè¿”å›çš„åç¨‹ï¼Œå¹¶æ²¡æœ‰çœŸå®è¿è¡Œè¿‡ yield; // force it to be a coroutine&#125; $scheduler = new Scheduler;$scheduler-&gt;newTask(task());$scheduler-&gt;run();// è¿è¡Œç»“æœï¼š ---\\n æœ€ç»ˆçš„ç»“æœåªè¿è¡Œäº†echo &quot;---\\n&quot;; åŸå› ä¹Ÿå¾ˆç®€å•ï¼Œå½“echoTimes(&#39;foo&#39;, 10) è¿è¡Œåï¼Œå®é™…ä¸Šè¿”å›çš„åç¨‹ï¼Œå¹¶æ²¡æœ‰å‚æ•°å»æ¥å—ï¼Œä¹Ÿæ²¡æœ‰å¯¹åç¨‹è¿›è¡Œè¿›ä¸€æ­¥çš„å¤„ç†ï¼ˆå¦‚ $this-&gt;current() $this-&gt;send ï¼‰è‡ªç„¶ä¹Ÿå°±ä¸ä¼šè¿è¡Œäº†ã€‚ ä½†æ˜¯è‹¥æ˜¯ç›´æ¥è°ƒç”¨ echoTimes å­åç¨‹ï¼Œä¹Ÿæ˜¯æ— æ³•è¿è¡Œ 123456function task() &#123; yield echoTimes('foo', 10); // æ·»åŠ äº† yield è¯­å¥ echo \"---\\n\"; yield echoTimes('bar', 5); // æ·»åŠ äº† yield è¯­å¥ yield; // force it to be a coroutine&#125; å› ä¸ºè¿™é‡Œyield echoTimes(&#39;foo&#39;, 10);è¿”å›çš„æ˜¯ä¸€ä¸ªGenerator ç±»å‹ï¼Œè€Œåœ¨æˆ‘ä»¬çš„Task ç±»çš„run æ–¹æ³•é‡Œé¢ï¼Œå¹¶æ²¡æœ‰å¯¹è¿™ä¸€ç±»å‹è¿›è¡Œå¤„ç†ã€‚è€Œä¸”æˆ‘ä»¬éœ€è¦çš„æ˜¯è¿›å…¥å‡½æ•°å†…æ‰§è¡Œ yield è¯­å¥ã€‚è¿™æ ·æ¥è¯´ï¼Œæˆ‘ä»¬åŸå…ˆçš„æ–¹æ³•å°±ä¸é€‚ç”¨äº†ã€‚å¦‚ä½•è§£å†³ï¼Ÿï¼Ÿ è§£å†³çš„æ–¹æ³•å°±æ˜¯ä½¿ç”¨â€”â€”åç¨‹æ ˆ é¦–å…ˆï¼Œæˆ‘ä»¬å¯¹ä¼ å…¥çš„ $coroutine è£¸åç¨‹ä¸Šå†™ä¸€ä¸ªå°å°çš„å°è£…ï¼ŒstackedCoroutineå°±æ˜¯ï¼šâ€œåç¨‹å †æ ˆâ€ã€‚ å› ä¸ºå®ƒå°†ç®¡ç†åµŒå¥—çš„åç¨‹è°ƒç”¨å †æ ˆã€‚è¿™å°†ä½¿å¾—é€šè¿‡ç”Ÿæˆåç¨‹æ¥è°ƒç”¨å­åç¨‹æˆä¸ºå¯èƒ½ã€‚ æ³¨æ„: stackedCoroutine ä¸­åŒ…å« yield è¯­å¥ï¼Œæ‰€ä»¥å®ƒä¹Ÿæ˜¯ä¸€ä¸ªåç¨‹ 1234567891011121314151617181920212223242526272829303132function stackedCoroutine(Generator $gen)&#123; $stack = new SplStack; // æ–°å»ºä¸€ä¸ªæ ˆ // ä¸æ–­éå†è¿™ä¸ªä¼ è¿›æ¥çš„ç”Ÿæˆå™¨ï¼Œä½œç”¨å’Œ while(True)ä¸€æ · for (; ;) &#123; // $genå¯ä»¥ç†è§£ä¸ºæŒ‡å‘å½“å‰è¿è¡Œçš„åç¨‹é—­åŒ…å‡½æ•°ï¼ˆç”Ÿæˆå™¨ï¼‰ $value = $gen-&gt;current(); // è·å–ä¸­æ–­ç‚¹ï¼Œä¹Ÿå°±æ˜¯yieldå‡ºæ¥çš„å€¼ if ($value instanceof Generator) &#123; // å¦‚æœæ˜¯ä¹Ÿæ˜¯ä¸€ä¸ªç”Ÿæˆå™¨ï¼Œè¿™å°±æ˜¯å­åç¨‹äº†ï¼ŒæŠŠå½“å‰è¿è¡Œçš„åç¨‹å…¥æ ˆä¿å­˜ $stack-&gt;push($gen); $gen = $value; // æŠŠå­åç¨‹å‡½æ•°ç»™genï¼Œç»§ç»­æ‰§è¡Œï¼Œæ³¨æ„æ¥ä¸‹æ¥å°±æ˜¯æ‰§è¡Œå­åç¨‹çš„æµç¨‹äº† continue; &#125; // æˆ‘ä»¬å¯¹å­åç¨‹è¿”å›çš„ç»“æœåšäº†å°è£… $isReturnValue = $value instanceof CoroutineReturnValue; // å­åç¨‹è¿”å›`$value`éœ€è¦ä¸»åç¨‹å¸®å¿™å¤„ç† if (!$gen-&gt;valid() || $isReturnValue) &#123;// åç¨‹æ ˆæ²¡æœ‰æ‰§è¡Œå®Œ æˆ–è€… å­˜åœ¨è¿”å›å€¼ if ($stack-&gt;isEmpty()) &#123; return; &#125; // å¦‚æœæ˜¯genå·²ç»æ‰§è¡Œå®Œæ¯•ï¼Œæˆ–è€…é‡åˆ°å­åç¨‹éœ€è¦è¿”å›å€¼ç»™ä¸»åç¨‹å»å¤„ç† $gen = $stack-&gt;pop(); //å‡ºæ ˆï¼Œå¾—åˆ°ä¹‹å‰å…¥æ ˆä¿å­˜çš„ä¸»åç¨‹ $gen-&gt;send($isReturnValue ? $value-&gt;getValue() : NULL); // è°ƒç”¨ä¸»åç¨‹å¤„ç†å­åç¨‹çš„è¾“å‡ºå€¼ continue; &#125; $gen-&gt;send(yield $gen-&gt;key() =&gt; $value); // ç»§ç»­æ‰§è¡Œå­åç¨‹ &#125;&#125; æˆ‘ä»¬å‘ç°è¿™æ®µè¯­å¥ä¸­ä½¿ç”¨äº†åˆ°äº†ä¸€ä¸ªæˆ‘ä»¬ä¹‹å‰æ²¡æœ‰ä½¿ç”¨åˆ°çš„ç±» CoroutineReturnValue å®ƒçš„ä½œç”¨æ˜¯æ¥å— yield çš„è¿”å›å€¼ï¼Œè¿™ä¸ªç±»æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯å¯¹è¿”å›çš„å€¼ï¼Œåšäº†ä¸€å±‚å°è£…ã€‚å­åç¨‹çš„è¿”å›çš„ç»“æœä¹Ÿéœ€è¦ä¸»åç¨‹å¸®åŠ©å¤„ç†ã€‚ åœ¨ $gen-&gt;send(yield â€‹$gen-&gt;key()=&gt;$value)ï¼› è°ƒç”¨è€…å’Œå½“å‰æ­£åœ¨è¿è¡Œçš„å­åç¨‹ä¹‹é—´æ‰®æ¼”ç€ç®€å•ä»£ç†çš„è§’è‰²ã€‚ 12345678910111213141516class CoroutineReturnValue &#123; protected $value; public function __construct($value) &#123; $this-&gt;value = $value; &#125; // è·å–èƒ½æŠŠå­åç¨‹çš„è¾“å‡ºå€¼ç»™ä¸»åç¨‹ï¼Œä½œä¸ºä¸»åç¨‹çš„sendå‚æ•° public function getValue() &#123; return $this-&gt;value; &#125;&#125;// è¿”å›çš„å€¼è¢«å°è£…æˆäº†ä¸€ä¸ªç±»ï¼Œè¿™ä¸ªç±»çš„è¯ä¹Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯å­˜å€¼ã€‚function retval($value) &#123; return new CoroutineReturnValue($value);&#125; å®šä¹‰å®Œäº†åç¨‹æ ˆï¼Œå¦‚ä½•å»ä½¿ç”¨å‘¢ï¼Ÿè¿™é‡Œéœ€è¦å°†Taskä¸­çš„åˆå§‹åŒ–æ–¹æ³•æ”¹ä¸€ä¸‹ã€‚ 1234567public function __construct($taskId, Generator $coroutine) &#123; $this-&gt;taskId = $taskId; // $this-&gt;coroutine = $coroutine; // æ¢æˆè¿™ä¸ªï¼Œå®é™…Task-&gt;runçš„å°±æ˜¯stackedCoroutineè¿™ä¸ªå‡½æ•°ï¼Œä¸æ˜¯$coroutineä¿å­˜çš„é—­åŒ…å‡½æ•°äº† $this-&gt;coroutine = stackedCoroutine($coroutine); &#125; ä¸»ç¨‹åºå¦‚ä¸‹ 123456789101112131415161718192021222324252627282930313233343536373839404142&lt;?phpinclude (\"Task.php\");include (\"Scheduler.php\");include (\"stackedCorountine.php\");function echoTimes($msg, $max) &#123; for ($i = 1; $i &lt;= $max; ++$i) &#123; echo \"$msg iteration $i\\n\"; yield ; &#125; yield retval(\"ç¨‹åºè¿è¡Œç»“æŸ\"); //æˆ‘ä»¬åœ¨è¿™é‡Œè®©å­åç¨‹ä¼ å€¼&#125;function task() &#123; $ret = yield echoTimes('foo', 5); // print foo ten times if ($ret)&#123; echo $ret; &#125; echo \"---\\n\"; $ret = (yield echoTimes('bar', 2)); // print bar five times if ($ret)&#123; echo $ret; &#125; yield; // force it to be a coroutine&#125;$scheduler = new Scheduler;$scheduler-&gt;newTask(task());$scheduler-&gt;run();ç»“æœ:foo iteration 1foo iteration 2foo iteration 3foo iteration 4foo iteration 5ç¨‹åºè¿è¡Œç»“æŸ---bar iteration 1bar iteration 2ç¨‹åºè¿è¡Œç»“æŸ è¿™ä¸ªç¨‹åºçœŸçš„æ˜¯ä¸å®¹æ˜“çœ‹æ‡‚ï¼Œæˆ‘æ˜¯åœ¨xdebug çš„é€æ­¥è°ƒè¯•çš„è¿‡ç¨‹ä¸­æ‰çœ‹æ‡‚äº†ä¸€ç‚¹ã€‚ è§£é‡Šä¸‹$gen-&gt;send(yield $gen-&gt;key()=&gt;$value)ï¼› è¿™ä¸ªè¯­å¥ä¸­send å’Œ yield äº¤å‰ï¼Œè€Œä¸”ç”¨äº† $gen-&gt;key =&gt; $value è¿™æ ·çš„ç”¨æ³•ã€‚ yield æœ‰ä¸‰ç§ç”¨æ³• å‚è€ƒï¼šphp manual: yield 123yield; // ç›¸å½“äº (yield null);$data = (yield $value); // å¿…é¡»ä½¿ç”¨åœ†æ‹¬å·æŠŠyieldç”³æ˜åŒ…å›´èµ·æ¥$data = (yield $key =&gt; $value); //è¿”å›çš„æ˜¯é”®å€¼å¯¹ï¼Œè¿­ä»£çš„æ—¶å€™ç”¨ foreach($data as $key =&gt; $value) é¦–å…ˆæˆ‘ä»¬æ‰¾åˆ° (yield $gen-&gt;key()=&gt;$value)ï¼› è¿”å›çš„åœ°æ–¹ 12345678910public function run() &#123; if ($this-&gt;beforeFirstYield) &#123; $this-&gt;beforeFirstYield = false; return $this-&gt;coroutine-&gt;current(); // &lt;-- è¿”å›çš„æ˜¯è¿™é‡Œ &#125; else &#123; $retval = $this-&gt;coroutine-&gt;send($this-&gt;sendValue); // &lt;-- è¿”å›çš„æ˜¯è¿™é‡Œ $this-&gt;sendValue = null; return $retval; &#125; &#125; è¿™é‡Œä¼šè®©äººå¾ˆå¥‡æ€ªï¼Œå› ä¸ºæˆ‘ä»¬è¿”å›çš„æ˜¯é”®å€¼å¯¹ï¼Œè¿™é‡Œç›´æ¥è°ƒç”¨current() ã€‚ç»è¿‡å®è·µå¯çŸ¥ æœ€ç»ˆçš„å€¼æ˜¯$value ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ç›´æ¥æŠŠè¯­å¥æ”¹æˆ (yield $value) ä¹Ÿæ˜¯æ­£ç¡®çš„ã€‚ æˆ‘çš„ç¬¬äºŒä¸ªç–‘é—®æ˜¯$gen-&gt;send(yield $gen-&gt;key()=&gt;$value)ï¼› ä¸­ send æ–¹æ³•åˆ°ä½å‘é€å‡ºå»äº†ä»€ä¹ˆâ“ send æ–¹æ³•ä¸­æ˜¯ä¸€ä¸ªyield è¯­å¥ã€‚é‚£æˆ‘ä»¬å°±å¯ä»¥æ‰¾æ‰¾åœ¨è¿™ä¸ªåç¨‹ä¸­æœ‰æ²¡æœ‰å¯¹åº”çš„send æ–¹æ³•å³å¯ã€‚ æœ€åï¼Œæˆ‘ä»¬æ‰¾åˆ°äº†è¿™ä¸ªåç¨‹çš„send æ–¹æ³•ï¼Œä½†æ˜¯$this-&gt;sendValue æˆ‘ä»¬æ˜¯ä¸€ç›´éƒ½æ²¡æœ‰è®¾ç½®è¿‡ï¼Œå§‹ç»ˆæ˜¯nullã€‚ åç¨‹å †æ ˆå°ç»“è¿™ä¸ªåç¨‹å †æ ˆå®ç°èµ·æ¥æ¯”è¾ƒè´¹è„‘å­ï¼Œç‰¹åˆ«æ˜¯ä¸»åç¨‹å’Œå­åç¨‹ä¹‹é—´çš„æ²Ÿé€šæ–¹å¼ã€‚å¯èƒ½ç°å®æƒ…å†µä¸‹åŠ¨æ‰‹å†™çš„æƒ…å†µå¾ˆå°‘ï¼ˆæˆ‘æ„Ÿè§‰æ˜¯æ¡†æ¶å·²ç»å®ç°å®Œæ¯•ï¼Œæˆ‘ä»¬åªéœ€è¦ç®€å•çš„ä½¿ç”¨ $ret = (yield readfile()); è¯­å¥å°±å¯ä»¥ï¼‰ã€‚ä½†æ˜¯å¦‚æœèƒ½è‡ªå·±å®ç°ä¸€éåç¨‹å †æ ˆï¼Œå¯¹yield çš„ç”¨æ³•è‚¯å®šæŒæ¡çš„æ›´å¥½ã€‚ è¿™ç¯‡æ•™ç¨‹å‚è€ƒäº†å¾ˆå¤šåšå®¢ PHP7ä¸‹çš„åç¨‹å®ç° æˆ‘æ˜¯è¿™ä¹ˆç†è§£åç¨‹yieldå¼‚æ­¥IOçš„ TO DO LIST yield from æ•™ç¨‹ä¸­çš„ éé˜»å¡IO æ¡ˆä¾‹ ä»£ç åˆ†æ æµ‹è¯• é…åˆæˆ‘æ˜¯è¿™ä¹ˆç†è§£åç¨‹yieldå¼‚æ­¥IOçš„ ç¨‹åºé™„å½•ç¨‹åºä¸€ï¼š ä¸è°ƒåº¦å™¨ä¹‹é—´çš„é€šè®¯Index.php 123456789101112131415161718192021222324252627&lt;?phpinclude (\"Task.php\");include (\"Scheduler.php\");include (\"SystemCall.php\");function getTaskId() &#123; return new SystemCall(function(Task $task, Scheduler $scheduler) &#123; $task-&gt;setSendValue($task-&gt;getTaskId()); $scheduler-&gt;schedule($task); &#125;);&#125;function task($max) &#123; $tid = (yield getTaskId()); // &lt;-- here's the syscall! for ($i = 1; $i &lt;= $max; ++$i) &#123; echo \"This is task $tid iteration $i.\\n\"; yield; &#125;&#125;$scheduler = new Scheduler;$scheduler-&gt;newTask(task(10));$scheduler-&gt;newTask(task(5));$scheduler-&gt;run();?&gt; Scheduler.php 12345678910111213141516171819202122232425262728293031323334353637383940414243&lt;?phpclass Scheduler &#123; protected $maxTaskId = 0; protected $taskMap = []; // taskId =&gt; task protected $taskQueue; public function __construct() &#123; $this-&gt;taskQueue = new \\SplQueue(); &#125; public function newTask(Generator $coroutine) &#123; $tid = ++$this-&gt;maxTaskId; $task = new Task($tid, $coroutine); $this-&gt;taskMap[$tid] = $task; $this-&gt;schedule($task); return $tid; &#125; public function schedule(Task $task) &#123; $this-&gt;taskQueue-&gt;enqueue($task); &#125; public function run() &#123; while (!$this-&gt;taskQueue-&gt;isEmpty()) &#123; $task = $this-&gt;taskQueue-&gt;dequeue(); $retval = $task-&gt;run(); if ($retval instanceof SystemCall) &#123; $retval($task, $this); continue; &#125; if ($task-&gt;isFinished()) &#123; unset($this-&gt;taskMap[$task-&gt;getTaskId()]); &#125; else &#123; $this-&gt;schedule($task); &#125; &#125; &#125;&#125;?&gt; SystemCall.php 12345678910111213&lt;?phpclass SystemCall &#123; protected $callback; public function __construct(callable $callback) &#123; $this-&gt;callback = $callback; &#125; public function __invoke(Task $task, Scheduler $scheduler) &#123; $callback = $this-&gt;callback; return $callback($task, $scheduler); &#125;&#125; Task.php 123456789101112131415161718192021222324252627282930313233343536&lt;?phpclass Task &#123; protected $taskId; protected $coroutine; protected $sendValue = null; protected $beforeFirstYield = true; public function __construct($taskId, Generator $coroutine) &#123; $this-&gt;taskId = $taskId; $this-&gt;coroutine = $coroutine; &#125; public function getTaskId() &#123; return $this-&gt;taskId; &#125; public function setSendValue($sendValue) &#123; $this-&gt;sendValue = $sendValue; &#125; public function run() &#123; if ($this-&gt;beforeFirstYield) &#123; $this-&gt;beforeFirstYield = false; return $this-&gt;coroutine-&gt;current(); &#125; else &#123; $retval = $this-&gt;coroutine-&gt;send($this-&gt;sendValue); $this-&gt;sendValue = null; return $retval; &#125; &#125; public function isFinished() &#123; return !$this-&gt;coroutine-&gt;valid(); &#125;&#125;?&gt; ç¨‹åºäºŒï¼š åç¨‹å †æ ˆindex.php 123456789101112131415161718192021222324252627282930&lt;?phpinclude (\"Task.php\");include (\"Scheduler.php\");include (\"stackedCorountine.php\");function echoTimes($msg, $max) &#123; for ($i = 1; $i &lt;= $max; ++$i) &#123; echo \"$msg iteration $i\\n\"; yield ; &#125; yield retval(\"ç¨‹åºè¿è¡Œç»“æŸ\\n\");&#125;function task() &#123; $ret = yield echoTimes('foo', 5); // print foo ten times if ($ret)&#123; echo $ret; &#125; echo \"---\\n\"; $ret = (yield echoTimes('bar', 2)); // print bar five times if ($ret)&#123; echo $ret; &#125; yield; // force it to be a coroutine&#125;$scheduler = new Scheduler;$scheduler-&gt;newTask(task());$scheduler-&gt;run(); stackedCoroutine.php 12345678910111213141516171819202122232425262728293031323334353637383940414243444546&lt;?phpfunction stackedCoroutine(Generator $gen) &#123; $stack = new SplStack; for (;;) &#123; $value = $gen-&gt;current(); if ($value instanceof Generator) &#123; $stack-&gt;push($gen); $gen = $value; continue; &#125; $isReturnValue = $value instanceof CoroutineReturnValue; if (!$gen-&gt;valid() || $isReturnValue) &#123; if ($stack-&gt;isEmpty()) &#123; return; &#125; $gen = $stack-&gt;pop(); $gen-&gt;send($isReturnValue ? $value-&gt;getValue() : NULL); continue; &#125; $gen-&gt;send( (yield $gen-&gt;key() =&gt; $value)); &#125;&#125;class CoroutineReturnValue &#123; protected $value; public function __construct($value) &#123; $this-&gt;value = $value; &#125; // è·å–èƒ½æŠŠå­åç¨‹çš„è¾“å‡ºå€¼ç»™ä¸»åç¨‹ï¼Œä½œä¸ºä¸»åç¨‹çš„sendå‚æ•° public function getValue() &#123; return $this-&gt;value; &#125;&#125;function retval($value) &#123; return new CoroutineReturnValue($value);&#125; Task.php å’Œ Scheduler.php ä¸å˜","categories":[{"name":"php","slug":"php","permalink":"http://ppsteven.github.io/categories/php/"}],"tags":[{"name":"php","slug":"php","permalink":"http://ppsteven.github.io/tags/php/"},{"name":"åç¨‹","slug":"åç¨‹","permalink":"http://ppsteven.github.io/tags/%E5%8D%8F%E7%A8%8B/"}]},{"title":"å¦‚ä½•åˆ©ç”¨SSHè¿æ¥å®¶ä¸­çš„æœåŠ¡å™¨:ngrok","slug":"å¦‚ä½•åˆ©ç”¨SSHè¿æ¥å®¶ä¸­çš„æœåŠ¡å™¨","date":"2019-12-01T05:23:30.000Z","updated":"2020-01-20T17:47:59.749Z","comments":false,"path":"2019/12/01/å¦‚ä½•åˆ©ç”¨SSHè¿æ¥å®¶ä¸­çš„æœåŠ¡å™¨/","link":"","permalink":"http://ppsteven.github.io/2019/12/01/%E5%A6%82%E4%BD%95%E5%88%A9%E7%94%A8SSH%E8%BF%9E%E6%8E%A5%E5%AE%B6%E4%B8%AD%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8/","excerpt":"å®¶ä¸­é—²ç½®äº†ä¸€å°ç”µè„‘ï¼Œå‡†å¤‡ç”¨æ¥å½“åšæœåŠ¡å™¨ã€‚ä¸€æ–¹é¢ä¹Ÿæ˜¯ä½œä¸ºlinux å­¦ä¹ ç»ƒç»ƒæ‰‹ï¼ŒäºŒæ˜¯å¯ä»¥è¿è¡Œä¸€äº›çˆ¬è™«å°ç¨‹åºæˆ–è€…æ˜¯ç½‘é¡µæœåŠ¡ã€‚ è¿™é‡Œæˆ‘ç”¨çš„manjaroï¼Œè¿™æ˜¯ç›®å‰æ¯”è¾ƒæµè¡Œçš„linux å‘è¡Œç‰ˆï¼Œæœ€çƒ­é—¨çš„linuxæ¡Œé¢å‘è¡Œç‰ˆä¹‹ä¸€ã€‚ æˆ‘é€‰æ‹©manjaroä¹Ÿæ˜¯æƒ³ä½œä¸ºæ›¿ä»£windows æ¥ç”¨ã€‚manjaroæ‹¥æœ‰ä¸€ä¸ªéå¸¸æ–¹ä¾¿çš„è½¯ä»¶ä»“åº“ï¼Œåˆ©ç”¨pacmanå’Œyayç­‰å‘½ä»¤å¯ä»¥ååˆ†æ–¹ä¾¿çš„å®‰è£…è½¯ä»¶ã€‚","text":"å®¶ä¸­é—²ç½®äº†ä¸€å°ç”µè„‘ï¼Œå‡†å¤‡ç”¨æ¥å½“åšæœåŠ¡å™¨ã€‚ä¸€æ–¹é¢ä¹Ÿæ˜¯ä½œä¸ºlinux å­¦ä¹ ç»ƒç»ƒæ‰‹ï¼ŒäºŒæ˜¯å¯ä»¥è¿è¡Œä¸€äº›çˆ¬è™«å°ç¨‹åºæˆ–è€…æ˜¯ç½‘é¡µæœåŠ¡ã€‚ è¿™é‡Œæˆ‘ç”¨çš„manjaroï¼Œè¿™æ˜¯ç›®å‰æ¯”è¾ƒæµè¡Œçš„linux å‘è¡Œç‰ˆï¼Œæœ€çƒ­é—¨çš„linuxæ¡Œé¢å‘è¡Œç‰ˆä¹‹ä¸€ã€‚ æˆ‘é€‰æ‹©manjaroä¹Ÿæ˜¯æƒ³ä½œä¸ºæ›¿ä»£windows æ¥ç”¨ã€‚manjaroæ‹¥æœ‰ä¸€ä¸ªéå¸¸æ–¹ä¾¿çš„è½¯ä»¶ä»“åº“ï¼Œåˆ©ç”¨pacmanå’Œyayç­‰å‘½ä»¤å¯ä»¥ååˆ†æ–¹ä¾¿çš„å®‰è£…è½¯ä»¶ã€‚ å®¶ä¸­çš„ç”µè„‘ï¼Œç”±äºæ²¡æœ‰å…¬ç½‘ipï¼Œåªèƒ½åœ¨å®¶ä¸­ç”¨ssh è®¿é—®ï¼Œä¸€æ—¦å‡ºé—¨ï¼Œå°±æ— æ³•è®¿é—®æœåŠ¡å™¨äº†ã€‚è¿™éå¸¸ä¸æ–¹ä¾¿ï¼Œå› ä¸ºå¯èƒ½è¦ä»ç”µè„‘ä¸Šè·å–èµ„æ–™ï¼Œè®¿é—®æ•°æ®åº“ï¼Œä¿®æ”¹ä»£ç ç­‰ç­‰æ“ä½œï¼Œä¸€æ—¦ç¦»å¼€æœ¬åœ°ç¯å¢ƒï¼Œä¹Ÿå¤ªä¸æ–¹ä¾¿äº†ã€‚ ç»è¿‡ç™¾åº¦åå‘ç°ï¼Œéœ€è¦åˆ©ç”¨ å†…ç½‘ç©¿é€ æŠ€æœ¯å®ç°ã€‚ åŸå› æ˜¯æˆ‘ä»¬çš„ipèµ„æºæ˜¯ç¨€ç¼ºçš„ï¼Œæˆ‘ä»¬æ™®é€šå®¶åº­ä¸­ä½¿ç”¨çš„ipéƒ½æ˜¯åŠ¨æ€åˆ†é…çš„ipåœ°å€ã€‚æ²¡æœ‰å›ºå®šçš„ipçš„æœåŠ¡å™¨æ˜¯æ— æ³•ä¸å¤–ç½‘è¿æ¥çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è‡³å°‘éœ€è¦ä¸€ä¸ªå…¬ç½‘ipã€‚ å†…ç½‘ç©¿é€æŠ€æœ¯æœ‰å¾ˆå¤šäº†ï¼Œæˆ‘è¿™é‡Œé€‰æ‹©çš„æ˜¯ngrok è¿™ä¸ªæ–¹æ¡ˆã€‚æˆ‘è¯•äº†ä¸€ä¸‹ä¸¤ç§æ–¹æ¡ˆï¼Œç¬¬ä¸€ä¸ªæ˜¯å¤–å›½çš„ngrokï¼Œæ²¡æœ‰å°è¯•æˆåŠŸï¼Œè€Œä¸”å…è´¹ç‰ˆæœ¬æ¯æ¬¡æ–­å¼€åï¼Œç”Ÿæˆçš„url æ˜¯éšæœºçš„ã€‚æ‰€ä»¥æ²¡æœ‰é‡‡ç”¨ã€‚ç¬¬äºŒä¸ªæ˜¯å›½å†…çš„Sunny-Ngrokï¼Œæœ‰å…è´¹ç‰ˆçš„ã€‚å…ˆå°è¯•ä¸€æ³¢ã€‚ ngrok ngrok.cc ï¼ˆSunny-Ngrokï¼‰ ä½¿ç”¨Sunny-Ngrokä¸€ä¸ªå¾ˆå¤§çš„å¥½å¤„å°±æ˜¯åœ¨å½“ä½ æ²¡æœ‰æœåŠ¡å™¨å’Œå…¬ç½‘ipçš„æ—¶å€™ï¼Œå®ƒä¼šæ˜¯ä¸€ä¸ªå¾ˆä¸é”™çš„è§£å†³æ–¹æ¡ˆã€‚å½“ç„¶è‹¥æ˜¯ä½ æœ‰æœåŠ¡å™¨çš„è¯ï¼Œè‡ªå·±æ­ä¸€ä¸ªngrokæœªå°ä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚ å±€åŸŸç½‘è¿æ¥æœåŠ¡å™¨è¿™é‡Œå…ˆç»™å‡ºç”¨å±€åŸŸç½‘è¿æ¥æœåŠ¡å™¨çš„æ–¹æ³• 1234# linux æŸ¥çœ‹ip åœ°å€ä¸€èˆ¬æ˜¯ä¸‹é¢ä¸‰ç§æ–¹æ³•ï¼ˆä¸åŒç³»ç»Ÿä¸ä¸€æ ·ï¼‰$ ifconfig$ ipconfig$ ip addr # &lt;--manjaro è¿è¡Œå¦‚ä¸‹ 123456$ ip addr | grep inet inet 127.0.0.1/8 scope host lo inet6 ::1/128 scope host inet 192.168.1.102/24 brd 192.168.1.255 scope global dynamic noprefixroute wlp2s0 inet6 fe80::1bd5:9435:6572:ffc7/64 scope link noprefixroute# ipåœ°å€æ˜¯ 192.168.1.102 å±€åŸŸç½‘ä¸­ä½¿ç”¨ 12ssh -p 22 ppsteven@192.168.1.l02# -p 22 ä¹Ÿå¯ä»¥çœç•¥ï¼Œå› ä¸ºssh çš„é»˜è®¤ç«¯å£å·å°±æ˜¯22 Sunny-Ngrokæ•™ç¨‹æ•™ç¨‹åŸºæœ¬ä¸Šéƒ½åœ¨ ngrok.ccå®˜æ–¹æ–‡æ¡£ å†™çš„å¾ˆæ¸…æ¥šäº†ï¼Œä½†æ˜¯æœ‰ä¸€äº›è¿˜æ˜¯éœ€è¦æ³¨æ„çš„ã€‚ å¼€é€šéš§é“ å¦‚æœä½ æ˜¯æƒ³ç”¨sshï¼Œå¼€é€šçš„å°±æ˜¯TCPè½¬å‘ã€‚è®°å¾—è¦æŠŠæœ¬åœ°ç«¯å£æ¢æˆ22ï¼ˆå½“ç„¶ä¸æ¢ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œåªè¦ä½ æœ€åè¿ssh çš„æ—¶å€™è®¾ç½®å¥½ç«¯å£å°±è¡Œäº†ï¼‰ æœ€åçœ‹åˆ°çš„ç»“æœæ˜¯è¿™æ ·çš„ 1$ ssh -p 10568 yourname@free.aa.com å°±å¯ä»¥è¿æ¥ä¸Šä½ çš„æœåŠ¡å™¨äº† Ngrok å¯åŠ¨ä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼Œåœ¨çŠ¶æ€æ æ˜¾ç¤º æ˜¯å¦æˆåŠŸå¼€å¯ngrok å¯åŠ¨çš„æ–¹æ³•ï¼Œå®˜ç½‘æ•™ç¨‹é‡Œé¢ä¹Ÿæœ‰å†™ï¼Œæœ¬äººæŒ‰ç…§æµç¨‹èµ°ä¸€éã€‚ ä¸‹è½½å®¢æˆ·ç«¯æˆ‘ç”¨çš„æ˜¯Mac ä¸‹è½½zipæ–‡ä»¶ï¼Œç„¶åä¸Šä¼ åˆ°æœåŠ¡å™¨çš„æ“ä½œã€‚æœ‰å›¾å½¢ç•Œé¢çš„åŒå­¦ï¼Œå¯ä»¥ç›´æ¥æŒ‰ç…§å®˜ç½‘æ“ä½œã€‚ 1234$ scp ~/Downloads/linux_amd64.zip ppsteven@192.168.1.102:~/Documents$ ssh 192.168.1.102$ cd ~/Documents$ unzip linux_amd64.zip å¯åŠ¨ngrok æœåŠ¡123# å½“å‰ç›®å½•åœ¨linux_amd64 ä¸‹$ ./sunny clientid éš§é“id # å¯åŠ¨éš§é“æœåŠ¡$ setsid ./sunny clientid 743acXXXX &amp; # åœ¨åå°å¯åŠ¨éš§é“æœåŠ¡ å¯åŠ¨æœåŠ¡åï¼Œæˆ‘ä»¬åœ¨å®˜ç½‘çš„åç«¯å°±å¯ä»¥çœ‹åˆ°ç»“æœã€‚ä¸ºäº†è®©æˆ‘ä»¬çš„æœåŠ¡å™¨èƒ½ä¸æ–­çš„åœ¨åå°è¿è¡Œï¼Œæˆ‘ä»¬éœ€è¦ç™»å½•æœåŠ¡å™¨åï¼Œè¿è¡Œç¬¬äºŒè¡Œçš„å‘½ä»¤ &amp; ä½œç”¨æ˜¯åå°è¿è¡Œç¨‹åº setsid ä½œç”¨æ˜¯å½“ç»ˆç«¯å…³é—­çš„æ—¶å€™å‘½ä»¤ä¸€ç›´ä¸ä¼šå…³é—­ é«˜çº§æ•™ç¨‹â€”â€”å¼€æœºè‡ªåŠ¨è¿è¡Œå®˜ç½‘ä¸­å·²ç»ç»™å‡ºäº† Ngrokå¼€æœºè‡ªå¯åŠ¨ çš„æ•™ç¨‹ï¼Œæˆ‘ä»¬è¿™é‡Œç”±äºä½¿ç”¨çš„æ˜¯manjaroï¼Œå®˜ç½‘çš„æ•™ç¨‹æ— æ³•ç›´æ¥å‚è€ƒï¼Œæˆ‘ä»¬è¿™é‡Œç»™å‡ºè‡ªå·±çš„è§£å†³æ–¹æ¡ˆã€‚ ç¬¬ä¸€æ­¥ï¼šç§»åŠ¨å‘½ä»¤ï¼Œå¹¶ä½¿ä¹‹å¯æ‰§è¡Œ12sudo mv sunny /usr/local/bin/sunnysudo chmod +x /usr/local/bin/sunny ç¬¬äºŒæ­¥ï¼šç¼–å†™å¯åŠ¨è„šæœ¬æˆ‘ä»¬è¿™é‡Œç›´æ¥ä¸Šæ‰‹ä¿®æ”¹å®˜ç½‘çš„shellè¯­è¨€ sunny_auto.sh 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647#!/bin/bash -e### BEGIN INIT INFO# Provides: ngrok.cc# Required-Start: $network $remote_fs $local_fs# Required-Stop: $network $remote_fs $local_fs# Default-Start: 2 3 4 5# Default-Stop: 0 1 6# Short-Description: autostartup of ngrok for Linux### END INIT INFONAME=sunnyDAEMON=/usr/local/bin/$NAMEPIDFILE=/var/run/$NAME.pid# åˆ¤æ–­ sunny æ˜¯å¦å¯æ‰§è¡Œ[ -x \"$DAEMON\" ] || exit 0case \"$1\" in start) # æ ¹æ®/var/run/sunny.pid æ–‡ä»¶åˆ¤æ–­sunnyæ˜¯å¦æ­£åœ¨è¿è¡Œ if [ -f $PIDFILE ]; then echo \"$NAME already running...\" echo -e \"\\033[1;35mStart Fail\\033[0m\" else echo \"Starting $NAME...\" # start-stop-daemon -S -p $PIDFILE -m -b -o -q -x $DAEMON -- clientid éš§é“id || return 2 # ä¸ä½¿ç”¨start-stop-daemonï¼Œä½¿ç”¨å¸¸è§„çš„æ–¹æ³•åå°è¿è¡Œ setsid sunny clientid 1cb52410136cfe34 &amp; echo -e \"\\033[1;32mStart Success\\033[0m\" fi ;; stop) echo \"Stoping $NAME...\" # start-stop-daemon -K -p $PIDFILE -s TERM -o -q || return 2 # pkill æ˜¯ kill å’Œ pgrep çš„ç»“åˆï¼Œåˆ é™¤æ‰€æœ‰ä¸­å¸¦sunnyçš„è¿›ç¨‹ pkill -9 sunny rm -rf $PIDFILE echo -e \"\\033[1;32mStop Success\\033[0m\" ;; restart) $0 stop &amp;&amp; sleep 2 &amp;&amp; $0 start ;; *) echo \"Usage: $0 &#123;start|stop|restart&#125;\" exit 1 ;;esacexit 0 å†™å®Œä¹‹åï¼Œæˆ‘ä»¬éœ€è¦æµ‹è¯•ä¸€ä¸‹ 12345chmod a+x sunny_auto.sh./sunny_auto.sh # ä¼šè¾“å‡ºä½¿ç”¨æ–¹æ³•./sunny_auto.sh start ./sunny_auto.sh stop./sunny_auto.sh restart æµ‹è¯•æˆåŠŸåï¼Œæˆ‘ä»¬éœ€è¦è®©ç³»ç»Ÿè‡ªå·±å¯åŠ¨ã€‚æˆ‘çœ‹äº†ä¸€ä¸‹ï¼Œç›®å‰ç½‘ä¸Šå¤§éƒ¨åˆ†æ•™ç¨‹éƒ½æ˜¯ç›´æ¥ç»™äº†ä»£ç ï¼Œå¹¶æ²¡æœ‰è§£é‡Šæ¸…æ¥šè‡ªå¯åŠ¨çš„åŸç†ã€‚æˆ‘è®¤ä¸ºè¿™æ˜¯å¯ä»¥é€šè¿‡æŸ¥çœ‹å®˜æ–¹æ•™ç¨‹ä¸€æ­¥æ­¥è®²æ¸…æ¥šçš„ã€‚æŠ±ç€â€œæˆäººä»¥é±¼ä¸å¦‚æˆäººä»¥æ¸”â€ çš„æ€åº¦ï¼Œæˆ‘å‡†å¤‡å†™çš„ä»”ç»†ä¸€ç‚¹ã€‚ ç¬¬ä¸‰æ­¥ï¼šè‡ªåŠ¨è·‘èµ·æ¥æˆ‘ä»¬çš„ç³»ç»Ÿæ˜¯manjaroï¼Œæ˜¯arch linux çš„è¡ç”Ÿç‰ˆæœ¬ï¼Œæ‰€ä»¥æˆ‘ä»¬ç¬¬ä¸€æƒ³åˆ°çš„å°±æ˜¯å» https://wiki.archlinux.org/ ä¸Šæ‰¾ã€‚ archlinux ä¸Šï¼Œåœ¨å¦‚ä¸‹ä¹ä¸ªæ–¹é¢ï¼Œæˆ‘ä»¬å¯ä»¥å®Œæˆâ€autostartâ€ æ“ä½œ å¼€å…³æœº ç™»å½•ç™»å‡º æ’å…¥æ‹”å‡ºè®¾å¤‡ è®¡æ—¶äº‹ä»¶ æ–‡ä»¶ç³»ç»Ÿäº‹ä»¶ shellç™»å½•ç™»å‡º Xorg æ¡Œé¢ç¯å¢ƒ çª—å£ç®¡ç†å¯åŠ¨ è¿™é‡Œï¼Œæˆ‘ä»¬éœ€è¦ç¬¬ä¸€é¡¹å¼€å…³æœº Systemd ä½œä¸ºæˆ‘ä»¬è‡ªå¯åŠ¨çš„æ–¹å¼ï¼Œå…¶å®å¾ˆå¤šæ•™ç¨‹ä¸­ä¹Ÿæ˜¯é‡‡ç”¨çš„è¿™ä¸ªæ–¹å¼ã€‚ å•å…ƒæ–‡ä»¶ä¸€ä¸ªæœåŠ¡å¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªunitï¼Œæ¯ä¸ªunitéœ€è¦ç¼–å†™è‡ªå·±çš„å•å…ƒæ–‡ä»¶ã€‚systemd å•å…ƒæ–‡ä»¶çš„è¯­æ³•æ¥æºäº XDG æ¡Œé¢é¡¹é…ç½®æ–‡ä»¶.desktopæ–‡ä»¶ï¼Œæœ€åˆçš„æºå¤´åˆ™æ˜¯Microsoft Windowsçš„.iniæ–‡ä»¶ã€‚ å•å…ƒæ–‡ä»¶æ“ä½œç«‹å³æ¿€æ´»å•å…ƒï¼š 1# systemctl start &lt;å•å…ƒ&gt; ç«‹å³åœæ­¢å•å…ƒï¼š 1# systemctl stop &lt;å•å…ƒ&gt; é‡å¯å•å…ƒï¼š 1# systemctl restart &lt;å•å…ƒ&gt; é‡æ–°åŠ è½½é…ç½®ï¼š 1# systemctl reload &lt;å•å…ƒ&gt; è¾“å‡ºå•å…ƒè¿è¡ŒçŠ¶æ€ï¼š 1$ systemctl status &lt;å•å…ƒ&gt; æ£€æŸ¥å•å…ƒæ˜¯å¦é…ç½®ä¸ºè‡ªåŠ¨å¯åŠ¨ï¼š 1$ systemctl is-enabled &lt;å•å…ƒ&gt; å¼€æœºè‡ªåŠ¨æ¿€æ´»å•å…ƒï¼š 1# systemctl enable &lt;å•å…ƒ&gt; è®¾ç½®å•å…ƒä¸ºè‡ªåŠ¨å¯åŠ¨å¹¶ç«‹å³å¯åŠ¨è¿™ä¸ªå•å…ƒ: 1# systemctl enable --now unit å–æ¶ˆå¼€æœºè‡ªåŠ¨æ¿€æ´»å•å…ƒï¼š 1# systemctl disable &lt;å•å…ƒ&gt; ç¼–è¾‘æˆ‘ä»¬çš„å•å…ƒæ–‡ä»¶å•å…ƒæ–‡ä»¶çš„è¯­æ³•ï¼Œå¯ä»¥å‚è€ƒç³»ç»Ÿå·²ç»å®‰è£…çš„å•å…ƒï¼Œä¹Ÿå¯ä»¥å‚è€ƒ systemd.service(5) ä¸­çš„EXAMPLESç« èŠ‚ã€‚è‹±æ–‡ä¸å¥½çš„åŒå­¦ï¼Œæœ‰ä¸€ä½çƒ­å¿ƒçš„å¤§ç‰›ï¼Œå·²ç»å†™å¥½äº†ä¸­æ–‡æ•™ç¨‹ systemd.index ä¸­æ–‡æ‰‹å†Œ å•å…ƒæ–‡ä»¶çš„åœ°å€å¦‚ä¸‹ /usr/lib/systemd/system/ ï¼šè½¯ä»¶åŒ…å®‰è£…çš„å•å…ƒ /etc/systemd/system/ ï¼šç³»ç»Ÿç®¡ç†å‘˜å®‰è£…çš„å•å…ƒ ä»ç½‘ä¸Šçš„æ•™ç¨‹çœ‹ä¸‹æ¥ï¼Œå¤§å®¶æœ€å–œæ¬¢çš„ä¸€ä¸ªåšæ³•å°±æ˜¯åˆ›å»ºä¸€ä¸ªrc.local æ–‡ä»¶ï¼Œå’Œä¸€ä¸ªrc-local.service æœåŠ¡ã€‚ç„¶åæŠŠæˆ‘ä»¬éœ€è¦è¿è¡Œçš„è„šæœ¬åŠ å…¥rc.localä¸­ã€‚ æˆ‘è®¤ä¸ºè¿™æ ·çš„åšæ³•å¾ˆçœäº‹ï¼Œä¹Ÿæ¯”è¾ƒç®€å•ï¼Œä¸è¿‡ç¼ºç‚¹æ˜¯æ‰€æœ‰çš„å¼€æœºè‡ªå¯æœåŠ¡éƒ½æ”¾ä¸€èµ·äº†ï¼Œæ¯”è¾ƒä¹±ä¸å¥½ç®¡ç†ã€‚è¿™é‡Œæˆ‘å‡†å¤‡æŒ‰ç…§è‡ªå·±çš„æƒ³æ³•æ¥åˆ›å»ºä¸€ä¸ªæœåŠ¡ï¼Œæˆ‘è¿™é‡Œå€Ÿé‰´äº†docker.serviceã€‚ sunny.service 1234567891011121314151617[Unit]Description=ngrok sunny[Service]Type=forkingUser=ppsteven# è‡ªåŠ¨é‡å¯æœåŠ¡# Restart=always# RestartSec=30# æ‰§è¡Œå‘½ä»¤Restart=on-failureExecStart=/etc/sunny.sh startExecStop=/etc/sunny.sh stop# ExecReload=/bin/kill -s HUP $MAINPID[Install]WantedBy=multi-user.target è¿æ¥è¿œç¨‹æœåŠ¡å™¨ngrok çš„ä½œç”¨ç›´è§‚çš„æ¥è¯´ï¼Œå°±æ˜¯ç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå…¬ç½‘ipï¼Œä½¿æˆ‘ä»¬å¯ä»¥è®¿é—®å†…ç½‘åœ°å€ã€‚ngrokçš„ä½œç”¨å°±æ˜¯ï¼Œå°†æˆ‘ä»¬ä¼ ç»™www.abc.com:12345 çš„ç«¯å£è½¬å‘ç»™æˆ‘ä»¬æœ¬åœ°æœåŠ¡å™¨127.0.0.1:22ç«¯å£ä¸Šï¼Œå®ç°äº†sshåŠŸèƒ½ã€‚ 1$ ssh -p 12345 yourname@www.abc.com .zshrc é…ç½®å°ç»“12$ alias localDell=\"ssh ppsteven@192.168.1.102\"$ alias remoteDell=\"ssh -p 10568 yourname@free.aa.com\" å‚è€ƒèµ„æ–™æœ‰äº†å†…ç½‘ç©¿é€ç¥å™¨ ngrok ï¼Œä¸ªäººç”µè„‘ä¹Ÿèƒ½åšæœåŠ¡å™¨","categories":[{"name":"ç¯å¢ƒæ­å»º","slug":"ç¯å¢ƒæ­å»º","permalink":"http://ppsteven.github.io/categories/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"}],"tags":[{"name":"ssh","slug":"ssh","permalink":"http://ppsteven.github.io/tags/ssh/"},{"name":"sunny-ngrok","slug":"sunny-ngrok","permalink":"http://ppsteven.github.io/tags/sunny-ngrok/"}]},{"title":"Dockerå®‰è£…åŠåŸºç¡€å‘½ä»¤","slug":"docker-installation-and-basic-command","date":"2019-11-21T12:22:30.000Z","updated":"2020-05-22T13:49:45.242Z","comments":false,"path":"2019/11/21/docker-installation-and-basic-command/","link":"","permalink":"http://ppsteven.github.io/2019/11/21/docker-installation-and-basic-command/","excerpt":"æœ€è¿‘çš„å·¥ä½œ php å­¦ä¹ ï¼Œè®¾è®¡åˆ°LAMPçš„ç¯å¢ƒæ­å»ºã€‚è™½ç„¶æ˜¯Macä¸ŠApache å’Œ php éƒ½æ˜¯è‡ªå¸¦çš„ï¼Œä½†æ˜¯ç¯å¢ƒä¸Šè¿˜æ˜¯ä¸è¶³ï¼Œæ‰€ä»¥è¦ç”¨Dockerã€‚DAMP çˆ¬è™«ip æ± æ­å»ºï¼Œå‘ç°åˆ«äººé€ å¥½çš„è½®å­ä¸Šéœ€è¦å¦‚redisï¼Œflaskç­‰ç¯å¢ƒã€‚è€Œä¸”é…ç½®å®Œäº†ï¼Œæœ€ç»ˆä¹Ÿæ˜¯è¦éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šå»çš„ï¼Œæ‰€ä»¥docker æ˜¯å¿…ä¸å¯å°‘çš„ æœ€è¿‘çš„å·¥ä½œï¼Œè®©æˆ‘æ„Ÿåˆ°Dockerçš„å­¦ä¹ ä¸€å®šè¦æå‰äº†ã€‚å› ä¸ºåªæ˜¯å…ˆç”¨èµ·æ¥ï¼Œé¦–å…ˆè®°å½•ä¸€äº›å¸¸ç”¨çš„å‘½ä»¤ï¼Œäº‰å–ä¸€å¤©æå®šã€‚","text":"æœ€è¿‘çš„å·¥ä½œ php å­¦ä¹ ï¼Œè®¾è®¡åˆ°LAMPçš„ç¯å¢ƒæ­å»ºã€‚è™½ç„¶æ˜¯Macä¸ŠApache å’Œ php éƒ½æ˜¯è‡ªå¸¦çš„ï¼Œä½†æ˜¯ç¯å¢ƒä¸Šè¿˜æ˜¯ä¸è¶³ï¼Œæ‰€ä»¥è¦ç”¨Dockerã€‚DAMP çˆ¬è™«ip æ± æ­å»ºï¼Œå‘ç°åˆ«äººé€ å¥½çš„è½®å­ä¸Šéœ€è¦å¦‚redisï¼Œflaskç­‰ç¯å¢ƒã€‚è€Œä¸”é…ç½®å®Œäº†ï¼Œæœ€ç»ˆä¹Ÿæ˜¯è¦éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šå»çš„ï¼Œæ‰€ä»¥docker æ˜¯å¿…ä¸å¯å°‘çš„ æœ€è¿‘çš„å·¥ä½œï¼Œè®©æˆ‘æ„Ÿåˆ°Dockerçš„å­¦ä¹ ä¸€å®šè¦æå‰äº†ã€‚å› ä¸ºåªæ˜¯å…ˆç”¨èµ·æ¥ï¼Œé¦–å…ˆè®°å½•ä¸€äº›å¸¸ç”¨çš„å‘½ä»¤ï¼Œäº‰å–ä¸€å¤©æå®šã€‚ Docker å®‰è£…æˆ‘çš„ä¸»åŠ›æœºå­æ˜¯Macï¼Œå®¶é‡Œç”¨æ—§ç”µè„‘æ­äº† manjaro ï¼Œæ‰€ä»¥æˆ‘éœ€è¦ä¸¤ä¸ªå®‰è£…æ•™ç¨‹ Mac Dockerå®‰è£…Mac ä¸Šé…ç½®dockeræœ€ä¸ºæ–¹ä¾¿ è¿™é‡Œå‚è€ƒ èœé¸Ÿæ•™ç¨‹:MacOS Docker å®‰è£… 1234brew cask install docker # æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸdocker info docker -v é•œåƒåŠ é€Ÿé‰´äºå›½å†…ç½‘ç»œé—®é¢˜ï¼Œåç»­æ‹‰å– Docker é•œåƒååˆ†ç¼“æ…¢ï¼Œæˆ‘ä»¬å¯ä»¥éœ€è¦é…ç½®åŠ é€Ÿå™¨æ¥è§£å†³ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯ç½‘æ˜“çš„é•œåƒåœ°å€ï¼šhttp://hub-mirror.c.163.comã€‚è¿˜æœ‰ https://registry.docker-cn.com æ˜¯å®˜æ–¹çš„ä¸­å›½ç«™ç‚¹ã€‚è¿™äº›ç«™ç‚¹å­˜å‚¨çš„æ˜¯docker hub çš„å®˜æ–¹çƒ­é—¨é•œåƒï¼Œå¦‚æœæ˜¯ç§äººçš„é•œåƒï¼Œè¿˜æ˜¯éœ€è¦å»ç¾å›½ç«™ç‚¹ä¸‹è½½ã€‚ åœ¨ä»»åŠ¡æ ç‚¹å‡» Docker for mac åº”ç”¨å›¾æ ‡ -&gt; Perferencesâ€¦ -&gt; Daemon -&gt; Registry mirrorsã€‚åœ¨åˆ—è¡¨ä¸­å¡«å†™åŠ é€Ÿå™¨åœ°å€å³å¯ã€‚ä¿®æ”¹å®Œæˆä¹‹åï¼Œç‚¹å‡» Apply &amp; Restart æŒ‰é’®ï¼ŒDocker å°±ä¼šé‡å¯å¹¶åº”ç”¨é…ç½®çš„é•œåƒåœ°å€äº†ã€‚ Manjaro docker å®‰è£…Manjaro ä¹Ÿæ‹¥æœ‰éå¸¸å¼ºå¤§çš„åŒ…ç®¡ç†è½¯ä»¶ pacman å’Œ yayè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨pacmanï¼Œè¿™é‡Œé¢çš„è½¯ä»¶éƒ½æ˜¯æ¥è‡ªå®˜æ–¹åº“ 12345678# å®‰è£…docker$ sudo pacman -S docker# å¯åŠ¨docker æœåŠ¡$ sudo systemctl start docker # æŸ¥çœ‹dockeræœåŠ¡çŠ¶æ€$ sudo systemctl status docker# è®¾ç½®dockerå¼€å¯å¯åŠ¨æœåŠ¡$ sudo systemctl enable docker è¿™é‡ŒLinux æœ‰ä¸€ä¸ªæ¯”Mac éº»çƒ¦ä¸€ç‚¹çš„åœ°æ–¹ï¼Œå°±æ˜¯æ¯æ¬¡ä½¿ç”¨docker éœ€è¦ç”¨sudo è¶…çº§ç®¡ç†å‘˜æƒé™ 12345678# å¦‚æœè¿˜æ²¡æœ‰ docker group å°±æ·»åŠ ä¸€ä¸ªsudo groupadd docker# å°†è‡ªå·±çš„ç™»å½•å($&#123;USER&#125; )åŠ å…¥è¯¥ group å†…ã€‚ç„¶åé€€å‡ºå¹¶é‡æ–°ç™»å½•å°±ç”Ÿæ•ˆå•¦sudo gpasswd -aG $&#123;USER&#125; docker# é‡å¯ docker æœåŠ¡sudo systemctl restart docker Linux é•œåƒåŠ é€Ÿ 12345678910111213141516# æ–°å»ºé…ç½®æ–‡ä»¶$ sudo touch /etc/docker/daemon.json # æ·»åŠ å›½å†…ç«™ç‚¹&#123; \"registry-mirrors\": [\"https://registry.docker-cn.com\",\"http://hub-mirror.c.163.com\"]&#125;# é‡å¯docker daemon$ sudo systemctl restart docker # æŸ¥çœ‹æ˜¯å¦æœ‰ä¿®æ”¹æˆåŠŸ$ docker info # æŸ¥çœ‹Register Mirrorsçš„ä¿¡æ¯Registry Mirrors: https://registry.docker-cn.com/ http://hub-mirror.c.163.com/ Centos dockerä½¿ç”¨è„šæœ¬å®‰è£…docker å®‰è£…å…¶å®æ¯”è¾ƒéº»çƒ¦çš„ï¼Œæ„Ÿè°¢ å›¾çµ:Dockerå¼€å‘æŒ‡å— ç»™çš„å®‰è£…å»ºè®®ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ç”¨åˆ«äººå†™å¥½çš„è„šæœ¬ã€‚ 123456curl https://get.docker.com &gt; install.shchmod +x install.shcat install.sh # æ„Ÿå…´è¶£çš„è¯ï¼Œå¯ä»¥ç ”ç©¶ä¸€ä¸‹ shell ç©¶ç«Ÿå†™äº†å•¥./install.sh # å®‰è£…å®Œäº†ï¼Œè®°å¾—å¯åŠ¨ docker æœåŠ¡sudo systemctl start docker docker-compose(github å®‰è£…) æœ‰æ¡ä»¶çš„è¯ï¼Œå‚è€ƒ dockerå®˜æ–¹æ•™ç¨‹è¿™ä¸€ç§æ–¹æ³•æ˜¯å®˜æ–¹æ¨èï¼Œä½†æ˜¯é‰´äºä¸­å›½å¢™ï¼Œé€Ÿåº¦æœ‰å¯èƒ½éå¸¸æ„Ÿäºº 1. ä» github ä¸Šä¸‹è½½ docker-compose å‘½ä»¤1sudo curl -L \"https://github.com/docker/compose/releases/download/1.25.3/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose 2. èµ‹äºˆå¯æ‰§è¡Œæƒé™1sudo chmod +x /usr/local/bin/docker-compose 3. éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ1docker-compose --version docker-compose(pip å®‰è£…) ä¸€èˆ¬å®¹æ˜“å‡ºé—®é¢˜çš„æ˜¯ pip çš„ç‰ˆæœ¬ï¼Œå¦‚æœæ˜¯ä½¿ç”¨äº†condaä½œä¸ºåŒ…ç®¡ç†çš„è¯ï¼Œå¯èƒ½ä¸»è¦æ³¨æ„pipçš„ç‰ˆæœ¬ã€‚æˆ‘ä¸€å¼€å§‹æ˜¯ä½¿ç”¨baseç¯å¢ƒçš„pipä½œä¸‹è½½ï¼Œç„¶åå°†å®‰è£…çš„docker-compose è½¯è¿æ¥è‡³ /usr/local/bin ä¸­ 1pip install docker-compose Docker é•œåƒä½¿ç”¨12345678910111213141516171819202122232425# åˆ—å‡ºæœ¬åœ°çš„é•œåƒ images$docker images$docker image ls REPOSITORY TAG IMAGE ID CREATED SIZEubuntu latest 775349758637 2 weeks ago 64.2MB# æ ‡ç­¾çš„å«ä¹‰- REPOSTITORYï¼šè¡¨ç¤ºé•œåƒçš„ä»“åº“æº- TAGï¼šé•œåƒçš„æ ‡ç­¾- IMAGE IDï¼šé•œåƒID- CREATEDï¼šé•œåƒåˆ›å»ºæ—¶é—´- SIZEï¼šé•œåƒå¤§å°# è·å–é•œåƒ$docker pull ubuntu:13.10# æŸ¥æ‰¾é•œåƒ$docker search ubuntu- NAME:é•œåƒä»“åº“æºçš„åç§°- DESCRIPTION:é•œåƒçš„æè¿°- OFFICIAL:æ˜¯å¦dockerå®˜æ–¹å‘å¸ƒ# åˆ é™¤é•œåƒ$docker rmi# åˆ é™¤æ‰€æœ‰é•œåƒ åˆ›å»ºå¹¶å¯åŠ¨å®¹å™¨docker run æ˜¯docker å‘½ä»¤ä¸­æ¯”è¾ƒå¤æ‚çš„ä¸€ä¸ªå‘½ä»¤ 12345678$docker run &lt;images&gt; &lt;command&gt;$docker run busybox echo hello world$docker run Ubuntu:16.01 /bin/bash$docker run -t-i Ubuntu:16.01 /bin/bash-t-i: äº¤äº’å¼ä¼šè¯-d: åå°æ–¹å¼--rm: è¿è¡Œå®Œæˆåå°±ä¼šåˆ é™¤$docker exec -ti &lt;CONTAINER ID&gt; /bin/bash å®¹å™¨ä¿¡æ¯12345# ä¸‹é¢æ‰€æœ‰çš„&lt;CONTAINER ID&gt; éƒ½å¯ä»¥ç”¨å®¹å™¨çš„NAME æ›¿ä»£# docker å¾ˆè´´å¿ƒçš„ä¸ºæˆ‘ä»¬çš„å®¹å™¨èµ·äº†åå­—# åˆ—å‡ºè¿è¡Œå®¹å™¨$docker ps $docker ps -a # åŒ…å«åœæ­¢ä½†æ²¡æœ‰æ¶ˆå¤±çš„å®¹å™¨ å®¹å™¨ç®¡ç†12345678910111213141516# åœæ­¢æ­£åœ¨è¿è¡Œçš„å®¹å™¨$docker kill &lt;CONTAINER ID&gt;$docker stop &lt;CONTAINER ID&gt; # ä¸¤ä¸ªå‘½ä»¤éƒ½æ˜¯ä¼šåœæ­¢å®¹å™¨è¿è¡Œ# åœæ­¢æ²¡æœ‰æ¶ˆå¤±çš„å®¹å™¨$docker restart &lt;CONTAINER ID&gt;$docker start &lt;CONTAINER ID&gt;# å¯åŠ¨å¹¶è¿›å…¥äº¤äº’ç•Œé¢$docker start -it &lt;CONTAINER ID&gt; /bin/bash# åˆ é™¤æ— ç”¨çš„å®¹å™¨$docker rm &lt;CONTAINER ID&gt;# åˆ é™¤æ‰€æœ‰å·²åœæ­¢çš„å®¹å™¨$docker rm -v $(docker ps -aq -f status=exited)# åˆ é™¤æ‰€æœ‰å®¹å™¨$docker rm $(docker ps -a) æŸ¥çœ‹dockerè¾“å‡ºç”¨äºæŸ¥çœ‹docker çš„è¾“å‡ºï¼Œå¯¹äºæ²¡æœ‰äº¤äº’(-ti)çš„å®¹å™¨çš„æ—¶å€™ï¼Œéœ€è¦ç”¨è¿™ä¸ªå‘½ä»¤æŸ¥çœ‹å®¹å™¨è¾“å‡º 1$docker logs &lt;CONTAINER ID&gt; æ–‡ä»¶æ‹·è´1$docker cp &lt;CONTAINER ID&gt;:[/path/to/file] å‚è€ƒèµ„æ–™ DockerCheatSheetLinux(Manjaro) -Docker å®‰è£…åŠåŸºæœ¬é…ç½®","categories":[{"name":"åŸºç¡€æŠ€èƒ½","slug":"åŸºç¡€æŠ€èƒ½","permalink":"http://ppsteven.github.io/categories/%E5%9F%BA%E7%A1%80%E6%8A%80%E8%83%BD/"}],"tags":[{"name":"æ—¥å¸¸å­¦ä¹ ç¬”è®°","slug":"æ—¥å¸¸å­¦ä¹ ç¬”è®°","permalink":"http://ppsteven.github.io/tags/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"Docker","slug":"Docker","permalink":"http://ppsteven.github.io/tags/Docker/"}]},{"title":"Github æœç´¢æŠ€å·§","slug":"github-search-tips","date":"2019-11-21T12:12:42.000Z","updated":"2020-02-18T18:39:29.477Z","comments":false,"path":"2019/11/21/github-search-tips/","link":"","permalink":"http://ppsteven.github.io/2019/11/21/github-search-tips/","excerpt":"å‰è¨€å› ä¸ºæœ€è¿‘æ‰‹å¤´ä¸Šçš„ä¸œè¥¿å¾ˆå¤šï¼Œè¦æœ€å¿«çš„åœ¨å¾ˆçŸ­çš„æ—¶é—´å†…å®Œæˆä¸€ä¸ªé¡¹ç›®ï¼Œéœ€è¦å¤šå¤šå‚è€ƒåˆ«äººçš„ä¼˜ç§€çš„ä»£ç ã€‚å¾ˆå¤šä¸œè¥¿ï¼Œåœ¨github ä¸Šéƒ½å¼€æºäº†ï¼Œåå¤é€ è½®å­æµªè´¹æ—¶é—´ï¼Œç”¨å¥½åˆ«äººä¸œè¥¿æ‰æ˜¯æœ€é«˜æ•ˆçš„æ–¹æ³•ã€‚","text":"å‰è¨€å› ä¸ºæœ€è¿‘æ‰‹å¤´ä¸Šçš„ä¸œè¥¿å¾ˆå¤šï¼Œè¦æœ€å¿«çš„åœ¨å¾ˆçŸ­çš„æ—¶é—´å†…å®Œæˆä¸€ä¸ªé¡¹ç›®ï¼Œéœ€è¦å¤šå¤šå‚è€ƒåˆ«äººçš„ä¼˜ç§€çš„ä»£ç ã€‚å¾ˆå¤šä¸œè¥¿ï¼Œåœ¨github ä¸Šéƒ½å¼€æºäº†ï¼Œåå¤é€ è½®å­æµªè´¹æ—¶é—´ï¼Œç”¨å¥½åˆ«äººä¸œè¥¿æ‰æ˜¯æœ€é«˜æ•ˆçš„æ–¹æ³•ã€‚ çé€›é€› GitHub Trend é¡µé¢æ€»ç»“äº†æ¯å¤©/æ¯å‘¨/æ¯æœˆå‘¨æœŸçš„çƒ­é—¨ Repositories å’Œ Developersï¼Œä½ å¯ä»¥çœ‹åˆ°åœ¨æŸä¸ªå‘¨æœŸå¤„äºçƒ­é—¨çŠ¶æ€çš„å¼€å‘é¡¹ç›®å’Œå¼€å‘è€…ã€‚ GitHub Topic å±•ç¤ºäº†æœ€æ–°å’Œæœ€æµè¡Œçš„è®¨è®ºä¸»é¢˜ï¼Œåœ¨è¿™é‡Œä½ ä¸ä»…èƒ½å¤Ÿçœ‹åˆ°å¼€å‘é¡¹ç›®ï¼Œè¿˜èƒ½çœ‹åˆ°æ›´å¤šéå¼€å‘æŠ€æœ¯çš„è®¨è®ºä¸»é¢˜ï¼Œæ¯”å¦‚ Jobã€Chrome æµè§ˆå™¨ç­‰ã€‚ æœç´¢æŠ€å·§12345678910in:name xx //æœç´¢åå­—ä¸­å¸¦æœ‰&quot;xx&quot;çš„in:readme xx //æœç´¢readmeä¸­å¸¦æœ‰&quot;xx&quot;çš„in:description xx //æœç´¢æè¿°ä¸­å¸¦æœ‰&quot;xx&quot;çš„stars:&gt;1000 //æœç´¢stars&gt;1000çš„forks:&gt;1000 //æœç´¢forks&gt;1000çš„pushed:&gt;2019-09-01 //æœç´¢æœ€è¿‘æ›´æ–°äº2019å¹´9æœˆ1æ—¥ä¹‹åçš„language:xx //æœç´¢xxçš„é¡¹ç›®pushed:&gt;2019-09-01 //2019å¹´9æœˆ1æ—¥åæœ‰æ›´æ–°çš„language:java //ç”¨Javaç¼–å†™çš„é¡¹ç›®user:ppsteven forks:&gt;100 //ppstevenç”¨æˆ·ä¸‹forks&gt;100 çš„é¡¹ç›® æœ‰å½±å“åŠ›çš„é¡¹ç›® free-programming-booksï¼šæ•´ç†äº†æ‰€æœ‰å’Œç¼–ç¨‹ç›¸å…³çš„å…è´¹ä¹¦ç±ï¼ŒåŒæ—¶ä¹Ÿæœ‰ ä¸­æ–‡ç‰ˆé¡¹ç›®ã€‚ github-cheat-sheetï¼šé›†åˆäº†ä½¿ç”¨ GitHub çš„å„ç§æŠ€å·§ã€‚ åç»­ä¼šé€æ­¥æ›´æ–°æ·»åŠ  å‚è€ƒ æŒæ¡ 3 ä¸ªæœç´¢æŠ€å·§ï¼Œåœ¨ GitHub ä¸Šå¿«é€Ÿæ‰¾åˆ°å®ç”¨è½¯ä»¶èµ„æº","categories":[{"name":"åŸºç¡€æŠ€èƒ½","slug":"åŸºç¡€æŠ€èƒ½","permalink":"http://ppsteven.github.io/categories/%E5%9F%BA%E7%A1%80%E6%8A%80%E8%83%BD/"}],"tags":[{"name":"Github","slug":"Github","permalink":"http://ppsteven.github.io/tags/Github/"}]},{"title":"PHPå­¦ä¹ ç¬”è®°","slug":"phpå­¦ä¹ ç¬”è®°","date":"2019-11-19T11:17:08.000Z","updated":"2020-02-15T18:02:05.494Z","comments":false,"path":"2019/11/19/phpå­¦ä¹ ç¬”è®°/","link":"","permalink":"http://ppsteven.github.io/2019/11/19/php%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","excerpt":"php å…¥é—¨æ•™ç¨‹ï¼Œä¸»è¦æ¥è‡ªäºèœé¸Ÿæ•™ç¨‹ï¼Œå…¥é—¨çº§åˆ«ï¼Œæ—¥å¸¸å­¦ä¹ ç¬”è®°ã€‚æ‰¾äº†ä¸€ä¸ª php çš„å®ä¹ ï¼Œå¿…é¡»é©¬ä¸ŠæŒæ¡å•Šã€‚","text":"php å…¥é—¨æ•™ç¨‹ï¼Œä¸»è¦æ¥è‡ªäºèœé¸Ÿæ•™ç¨‹ï¼Œå…¥é—¨çº§åˆ«ï¼Œæ—¥å¸¸å­¦ä¹ ç¬”è®°ã€‚æ‰¾äº†ä¸€ä¸ª php çš„å®ä¹ ï¼Œå¿…é¡»é©¬ä¸ŠæŒæ¡å•Šã€‚ ç¤ºä¾‹123456789101112&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;body&gt;&lt;h1&gt;My first PHP page&lt;/h1&gt;&lt;?phpecho \"Hello World!\";?&gt;&lt;/body&gt;&lt;/html&gt; æ³¨é‡Š123456&lt;?php// php ä»£ç ï¼Ÿ&gt;// å•è¡Œæ³¨é‡Š/**/ å¤šè¡Œæ³¨é‡Š echo/printecho // å¤šä¸ªprint // ä¸€ä¸ª 12345&lt;?php //ä¸¤è¡Œæ˜¯ç›¸åŒæ•ˆæœï¼Œ&lt;br&gt; çœ‹åšå›è½¦ echo \"Hello world! from:\",\"Elen\",\"&lt;br&gt;\"; print \"Hello world! from:\".\"Elen\".'&lt;br&gt;'; ?&gt; Echo,print,print_r,var_dump åŒºåˆ« 1.echo è¾“å‡ºä¸€ä¸ªæˆ–è€…å¤šä¸ªå­—ç¬¦ä¸²ã€‚ 2.print å’Œ echo æœ€ä¸»è¦çš„åŒºåˆ«ï¼š print ä»…æ”¯æŒä¸€ä¸ªå‚æ•°ï¼Œå¹¶æ€»æ˜¯è¿”å› 1ã€‚ 3.print_r æ‰“å°å…³äºå˜é‡çš„æ˜“äºç†è§£çš„ä¿¡æ¯,å¦‚æœç»™å‡ºçš„æ˜¯ stringã€integer æˆ– floatï¼Œå°†æ‰“å°å˜é‡å€¼æœ¬èº«ã€‚å¦‚æœç»™å‡ºçš„æ˜¯ arrayï¼Œå°†ä¼šæŒ‰ç…§ä¸€å®šæ ¼å¼æ˜¾ç¤ºé”®å’Œå…ƒç´ ã€‚object ä¸æ•°ç»„ç±»ä¼¼ã€‚ è®°ä½ï¼Œprint_r() å°†æŠŠæ•°ç»„çš„æŒ‡é’ˆç§»åˆ°æœ€åè¾¹ã€‚ä½¿ç”¨ reset() å¯è®©æŒ‡é’ˆå›åˆ°å¼€å§‹å¤„ã€‚ 4.var_dump æ­¤å‡½æ•°æ˜¾ç¤ºå…³äºä¸€ä¸ªæˆ–å¤šä¸ªè¡¨è¾¾å¼çš„ç»“æ„ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¡¨è¾¾å¼çš„ç±»å‹ä¸å€¼ã€‚æ•°ç»„å°†é€’å½’å±•å¼€å€¼ï¼Œé€šè¿‡ç¼©è¿›æ˜¾ç¤ºå…¶ç»“æ„ã€‚ 5.var_dump å’Œ print_r çš„åŒºåˆ« var_dump è¿”å›è¡¨è¾¾å¼çš„ç±»å‹ä¸å€¼è€Œ print_r ä»…è¿”å›ç»“æœï¼Œç›¸æ¯”è°ƒè¯•ä»£ç ä½¿ç”¨ var_dump æ›´ä¾¿äºé˜…è¯»ã€‚ EOF å®šä¹‰å­—ç¬¦ä¸²1234567&lt;?php$name=\"Sally\";$a= &lt;&lt;&lt;EOF \"hername : \" $name \"123\"EOF;echo $a; output: 1&quot;hername : &quot; Sally &quot;123&quot; ç»“æŸéœ€è¦ç‹¬ç«‹ä¸€è¡Œä¸”å‰åä¸èƒ½ç©ºæ ¼ $name ç»è¿‡äº†è®¡ç®— ç©ºæ ¼å’Œæ¢è¡Œéƒ½è¢«å¤„ç†ä¸ºä¸€ä¸ªç©ºæ ¼ PHP ç±»å‹Stringï¼ˆå­—ç¬¦ä¸²ï¼‰, Integerï¼ˆæ•´å‹ï¼‰, Floatï¼ˆæµ®ç‚¹å‹ï¼‰, Booleanï¼ˆå¸ƒå°”å‹ï¼‰, Arrayï¼ˆæ•°ç»„ï¼‰, Objectï¼ˆå¯¹è±¡ï¼‰, NULLï¼ˆç©ºå€¼ï¼‰ 1234567891011121314151617181920212223242526272829303132333435363738394041424344&lt;?php// String$a = \"Hello world\";// Integer $b = 3;// Float$c = 3.0;$d = (float)$a;// Boolean$e = '3.0'==3; //$e çš„å€¼åº”è¯¥æ˜¯ä¸ºtrueï¼Œå› ä¸º== æ˜¯å¼±æ¯”è¾ƒï¼Œä¸å…³å¿ƒç­‰å¼å·¦å³çš„ç±»å‹$f = true; // Array$g = array('name'=&gt;'wang','year'=&gt;2000);// Objectclass Car&#123; var $color; function __construct($color=\"green\") &#123; $this-&gt;color = $color; &#125; function what_color() &#123; return $this-&gt;color; &#125;&#125;$h = new Car();// NULL$i = null;function print_($obj) &#123; echo $obj,'=&gt;',var_dump($obj),'&lt;br&gt;';&#125;// è¾“å‡ºprint_($a);print_($b);print_($c);print_($d);print_($e);print_($f);print_($g);var_dump($h);echo \"&lt;br&gt;\";print_($i);?&gt; ç»“æœå¦‚ä¸‹ 123456789Hello world=&gt;string(11) &quot;Hello world&quot;3=&gt;int(3)3=&gt;float(3)0=&gt;float(0)1=&gt;bool(true)1=&gt;bool(true)Array=&gt;array(2) &#123; [&quot;name&quot;]=&gt; string(4) &quot;wang&quot; [&quot;year&quot;]=&gt; int(2000) &#125;object(Car)#1 (1) &#123; [&quot;color&quot;]=&gt; string(5) &quot;green&quot; &#125;=&gt;NULL å¸¸é‡1234bool define ( string $name , mixed $value [, bool $case_insensitive = false ] )$name:å¸¸é‡å$value:å€¼$case_insensitive:æ˜¯å¦å¯¹å¤§å°å†™æ•æ„Ÿ,true ä»£è¡¨ä¸æ•æ„Ÿ define(â€œGREETINGâ€, â€œæ¬¢è¿è®¿é—® Runoob.comâ€);echo GREETING; // è¾“å‡º â€œæ¬¢è¿è®¿é—®å¸¸é‡é»˜è®¤æ˜¯å…¨å±€å˜é‡ å­—ç¬¦ä¸²ç›¸å…³123456//å­—ç¬¦ä¸²åˆå¹¶$txt .&quot;+&quot;.$txt2 //å­—ç¬¦ä¸²é•¿åº¦strlen()//å­—ç¬¦ä¸²æŸ¥æ‰¾ï¼Œæœªæ‰¾åˆ°è¿”å›Falsestrpos(&quot;æ–‡æœ¬&quot;,&quot;æŸ¥æ‰¾å­—ç¬¦&quot;) // è¿”å›å­—ç¬¦ä¸²ä½ç½®ï¼Œä»0å¼€å§‹ æ¡ä»¶è¯­å¥1234567891011121314151617181920212223242526272829303132&lt;?php$age = 18;$stage = array('é’å°‘å¹´','æˆå¹´','è€å¹´');if ($age &gt;=60)&#123; $title = $stage[2];&#125;elseif ($age &gt;=18)&#123; $title = $stage[1];&#125;else&#123; $title = $stage[0];&#125;echo $title,'&lt;br&gt;&lt;br&gt;';$favcolor=\"red\";switch ($favcolor)&#123;case \"red\": echo \"ä½ å–œæ¬¢çš„é¢œè‰²æ˜¯çº¢è‰²!\"; break;case \"blue\": echo \"ä½ å–œæ¬¢çš„é¢œè‰²æ˜¯è“è‰²!\"; break;case \"green\": echo \"ä½ å–œæ¬¢çš„é¢œè‰²æ˜¯ç»¿è‰²!\"; break;default: echo \"ä½ å–œæ¬¢çš„é¢œè‰²ä¸æ˜¯ çº¢, è“, æˆ–ç»¿è‰²!\";&#125;?&gt; å¾ªç¯while/do while/for /foreach while/do while123456789101112131415&lt;?php// while echo \"while &lt;br&gt;\";$x = 5;while ($x) &#123; echo $x--,'&lt;br&gt;';&#125;// do .. while echo \"do..while &lt;br&gt;\";$x = 5;do echo $x,'&lt;br&gt;';while ($x--)?&gt; è¾“å‡ºï¼š 12345678910111213while54321do..while543210 for/ foreach123456789101112&lt;?phpfor ($i=1; $i&lt;=5; $i++)&#123; echo \"The number is \" . $i . \"&lt;br&gt;\";&#125;$x=array(\"one\"=&gt;1,\"two\"=&gt;2,\"three\"=&gt;3);foreach ($x as $key =&gt; $value)&#123; echo $key,\" : \",$value,\"&lt;br&gt;\";&#125;?&gt; è¾“å‡º 12345678The number is 1The number is 2The number is 3The number is 4The number is 5one : 1two : 2three : 3 é­”æœ¯å¸¸é‡12345678__LINE__: è¯­å¥æ‰€å¤„çš„è¡Œå·__FILE__: æ–‡ä»¶çš„å®Œæ•´è·¯å¾„ï¼ˆå«æ–‡ä»¶åï¼‰__DIR__: æ–‡ä»¶çš„ç›®å½•__FUNCTION__: å‡½æ•°å__CLASS__: ç±»å__TRAIT__: Trait å__METHOD__:ç±»çš„æ–¹æ³•å__NAMESPACE__:å‘½åç©ºé—´ 1234567891011121314151617181920&lt;?phpnamespace MyProject;// å¿…é¡»æ˜¯åœ¨é¦–è¡Œ// é­”æœ¯å¸¸é‡echo &apos;è¿™æ˜¯ç¬¬ &quot; &apos; . __LINE__ . &apos; &quot; è¡Œ&apos;,&apos;&lt;br&gt;&apos;;echo &apos;è¯¥æ–‡ä»¶ä½äº &quot; &apos; . __FILE__ . &apos; &quot; &apos;,&apos;&lt;br&gt;&apos;;echo &apos;è¯¥æ–‡ä»¶ä½äº &quot; &apos; . __DIR__ . &apos; &quot; &apos;,&apos;&lt;br&gt;&apos;;echo &apos;å‘½åç©ºé—´ä¸ºï¼š&quot;&apos;, __NAMESPACE__, &apos;&quot;&apos;; // è¾“å‡º &quot;MyProject&quot;class test &#123; function _print() &#123; echo &apos;ç±»åä¸ºï¼š&apos; . __CLASS__ . &quot;&lt;br&gt;&quot;; echo &apos;å‡½æ•°åä¸ºï¼š&apos; . __FUNCTION__ .&quot;&lt;br&gt;&quot;; echo &apos;ç±»çš„æ–¹æ³•åï¼š&apos; . __METHOD__ ; &#125;&#125;$t = new test();$t-&gt;_print();?&gt; è¾“å‡º 123456è¿™æ˜¯ç¬¬ &quot; 4 &quot; è¡Œè¯¥æ–‡ä»¶ä½äº &quot; /Library/WebServer/Documents/a.php &quot;è¯¥æ–‡ä»¶ä½äº &quot; /Library/WebServer/Documents &quot;å‘½åç©ºé—´ä¸ºï¼š&quot;MyProject&quot;ç±»åä¸ºï¼šMyProject\\testå‡½æ•°åä¸ºï¼š_printç±»çš„æ–¹æ³•åï¼šMyProject\\test::_print æ³¨ï¼šPHPä¸­çš„å‘½åç©ºé—´ï¼Œå¯ä»¥è§£å†³çš„é—®é¢˜ï¼š ç”¨æˆ·ç¼–å†™çš„ä»£ç ä¸PHPå†…éƒ¨çš„ç±»/å‡½æ•°/å¸¸é‡åå­—å†²çª ä¸ºå¾ˆé•¿çš„æ ‡è¯†ç¬¦åˆ›å»ºä¸€ä¸ªæ›´åŠ å¯è¯»çš„åˆ«å æ•°ç»„æ•°ç»„å®šä¹‰ è‡ªåŠ¨åˆ†é…id 1$cars = array(\"Volvo\",\"BMW\",\"Toyota\"); 12345$a = array( 'a',3 =&gt; 'b',1 =&gt; 'c', 'd');var_dump($a)// è¾“å‡º//array(4) &#123; [0]=&gt; string(1) \"a\" [3]=&gt; string(1) \"b\" [1]=&gt; string(1) \"c\" [4]=&gt; string(1) \"d\" &#125; å…³è”æ•°ç»„ 1$age = array(\"Peter\"=&gt;\"35\",\"Ben\"=&gt;\"37\",\"Joe\"=&gt;\"43\"); éå†æ•°ç»„ 123456&lt;?php$age = array(\"Peter\"=&gt;\"35\",\"Ben\"=&gt;\"37\",\"Joe\"=&gt;\"43\");foreach ($age as $key =&gt; $value) &#123; echo $key,' =&gt; ',$value,' type: ',var_dump($key),'&lt;br&gt;';&#125;?&gt; æ•°ç»„æ’åº sort() &lt;â€“&gt; rsort()asort() &lt;â€“&gt; arsort() //å…³è”æ•°ç»„ksort() &lt;â€“&gt; krsort() //å…³è”æ•°ç»„ 1234567891011121314151617&lt;?php$age=array(\"a\"=&gt;\"5\",\"c\"=&gt;\"37\",\"b\"=&gt;\"-1\",\"e\"=&gt;\"1\");echo \"åŸå§‹æ•°ç»„:\";print_r($age);echo \"&lt;br&gt;\";echo \"æŒ‰key æ’åº\";ksort($age);print_r($age);echo \"&lt;br&gt;\";echo \"æŒ‰value æ’åº\";asort($age);print_r($age);echo \"&lt;br&gt;\";?&gt; PHP é¢å‘å¯¹è±¡123456789101112131415161718192021222324252627282930313233343536373839&lt;?phpclass Site &#123; /* æˆå‘˜å˜é‡ */ var $url; var $title; function __construct($par1,$par2)&#123; $this-&gt;url = $par1; $this-&gt;title = $par2; &#125; function __destruct()&#123; echo __FUNCTION__.\" å·²ç»è¿è¡Œ\"; &#125; /* æˆå‘˜å‡½æ•° */ function setUrl($par)&#123; $this-&gt;url = $par; &#125; function getUrl()&#123; echo $this-&gt;url . PHP_EOL; &#125; function setTitle($par)&#123; $this-&gt;title = $par; &#125; function getTitle()&#123; echo $this-&gt;title . PHP_EOL; &#125;&#125;$siteobj = new Site('www.baidu.com','baidu');print $siteobj-&gt;url;$siteobj-&gt;setUrl('ppsteven.github.io');$siteobj-&gt;setTitle('learnPHP');$siteobj-&gt;getUrl();$siteobj-&gt;getTitle();?&gt; å‡½æ•°ä½œç”¨åŸŸ12345678910111213141516171819202122232425262728&lt;?php$y = \"globals varibale\"; //å…¨å±€å˜é‡function myTest($z=null)&#123; global $y; // $y ä¸ºå…¨å±€å˜é‡ï¼Œæœ‰ä¸¤ç§æ–¹å¼ä½¿ç”¨ echo $y,'&lt;br&gt;'; echo $GLOBALS['y'],'&lt;br&gt;'; echo 'å‚æ•°ä½œç”¨åŸŸ',$z; static $x1=0; $x2 = 0; // å±€éƒ¨å˜é‡ echo $x1.'('.$x2.\"ï¼‰\";// é™æ€å˜é‡æ˜¯ä¸ä¼šéšç€å‡½æ•°å®Œæˆè€Œåˆ é™¤ $x1++; $x2++;&#125; myTest();myTest();myTest();/*x2(x1)0(0)0(1)0(2)*/?&gt; å…¶ä»–åŒ…å«ä¸€äº›å°çš„çŸ¥è¯†ç‚¹å’Œæœªç³»ç»Ÿæ•´ç†çš„çŸ¥è¯† ä¸‰å…ƒï¼šexpr1 ? expr2 : expr3 12345678&lt;?php $var = true ? 1 : false ? 2 : 3; $varx = (true ? 1 : false)? 2 : 3; $vary = true ? 1 : (false ? 2 : 3);echo $var.'&lt;br&gt;';echo $varx.'&lt;br&gt;';echo $vary.'&lt;br&gt;';// ç»“æœæ˜¯ 2 2 1 , è¿™é‡Œçš„ä¸‰å…ƒè¿ç®—éœ€è¦æ³¨æ„æ‰§è¡Œçš„é¡ºåº null == false : è¿”å›çš„æ˜¯false 1/2 (0.5) PHPä¸­æ²¡æœ‰æ•´é™¤ç®—æ³•ï¼Œæœ‰æ•´é™¤å‡½æ•°intdiv(1/2) php ä½œç”¨åŸŸ local global static parameter // å‚æ•°ä½œç”¨åŸŸ 1234567891011121314&lt;?phpfunction myTest()&#123; static $x=0; echo $x; $x++; echo PHP_EOL; // æ¢è¡Œç¬¦&#125;// è¿™é‡Œçš„ static ä½¿å¾—$x çš„å€¼ä¼šä¸€ç›´ç´¯åŠ myTest(); // 0 myTest(); // 1myTest(); // 2?&gt; echo PHP_EOL; // æ¢è¡Œç¬¦ == å¼±æ¯”è¾ƒ=== å¼ºæ¯”è¾ƒ","categories":[{"name":"php","slug":"php","permalink":"http://ppsteven.github.io/categories/php/"}],"tags":[{"name":"php","slug":"php","permalink":"http://ppsteven.github.io/tags/php/"},{"name":"æ—¥å¸¸å­¦ä¹ ç¬”è®°","slug":"æ—¥å¸¸å­¦ä¹ ç¬”è®°","permalink":"http://ppsteven.github.io/tags/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}]},{"title":"git cheetsheet","slug":"git-cheetsheet","date":"2019-11-14T11:20:00.000Z","updated":"2020-02-15T18:09:58.285Z","comments":true,"path":"2019/11/14/git-cheetsheet/","link":"","permalink":"http://ppsteven.github.io/2019/11/14/git-cheetsheet/","excerpt":"cheetsheetå…¥é—¨çº§åˆ«çš„git åŸºç¡€æ“ä½œï¼Œä»…ä»…æ”¶å½•ç†è§£äº†çš„ï¼Œå¸¸ç”¨çš„å‘½ä»¤ã€‚è´Ÿè´£çš„å‘½ä»¤ï¼Œåœ¨é™„å½•çš„å¤§å…¨é‡Œé¢å¯ä»¥æ‰¾åˆ° git configGit æœ‰ä¸‰å±‚çš„é…ç½®æ–‡ä»¶ ä»“åº“çº§çš„é…ç½®æ–‡ä»¶ï¼šåœ¨ä»“åº“çš„ .git/config ç›®å½•ä¸‹ï¼Œåªå¯¹æœ¬ä»“åº“æœ‰æ•ˆ å…¨å±€çº§çš„é…ç½®æ–‡ä»¶ï¼šMacåœ¨ ~/.gitconfig ç›®å½• ç³»ç»Ÿçº§çš„é…ç½®æ–‡ä»¶ï¼šåœ¨Git çš„ å®‰è£…ç›®å½•ä¸‹ (ç»è¿‡æŸ¥æ‰¾ï¼Œæˆ‘çš„ç›®å½•ä¸º/usr/local/Cellar/git/2.23.0_1/.bottle/etc)","text":"cheetsheetå…¥é—¨çº§åˆ«çš„git åŸºç¡€æ“ä½œï¼Œä»…ä»…æ”¶å½•ç†è§£äº†çš„ï¼Œå¸¸ç”¨çš„å‘½ä»¤ã€‚è´Ÿè´£çš„å‘½ä»¤ï¼Œåœ¨é™„å½•çš„å¤§å…¨é‡Œé¢å¯ä»¥æ‰¾åˆ° git configGit æœ‰ä¸‰å±‚çš„é…ç½®æ–‡ä»¶ ä»“åº“çº§çš„é…ç½®æ–‡ä»¶ï¼šåœ¨ä»“åº“çš„ .git/config ç›®å½•ä¸‹ï¼Œåªå¯¹æœ¬ä»“åº“æœ‰æ•ˆ å…¨å±€çº§çš„é…ç½®æ–‡ä»¶ï¼šMacåœ¨ ~/.gitconfig ç›®å½• ç³»ç»Ÿçº§çš„é…ç½®æ–‡ä»¶ï¼šåœ¨Git çš„ å®‰è£…ç›®å½•ä¸‹ (ç»è¿‡æŸ¥æ‰¾ï¼Œæˆ‘çš„ç›®å½•ä¸º/usr/local/Cellar/git/2.23.0_1/.bottle/etc) 12345678910111213141516171819# --local: ä»“åº“çº§ , --glocal: å…¨å±€çº§ , --system: ç³»ç»Ÿçº§# æ·»åŠ é…ç½®$ git config --global user.name \"Name\" # æ·»åŠ ç”¨æˆ·å --global ä»£è¡¨é…ç½®çš„å…¨å±€çš„å‚æ•°$ git config --global user.email \"email@example.com\" # æ·»åŠ é‚®ç®±# æŸ¥çœ‹é…ç½®$ git config --list/ -l # æŸ¥çœ‹å…¨éƒ¨gité…ç½®$ git config --get user.name/user.email # æŸ¥çœ‹å•ä¸ªé…ç½®# åˆ é™¤é…ç½®$ git config --unset user.name# ç¼–è¾‘é…ç½®$ git config -e --global# æ·»åŠ åˆ«åï¼Œå¯¹äºä¸€äº›æ¯”è¾ƒé•¿çš„åˆ«åï¼Œå¯ä»¥ç®€åŒ–# ä¹Ÿå¯ä»¥é€šè¿‡git config $ git config --global alias.lg \"log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset' --abbrev-commit\"$ git config --global alias.graph \"log --graph --oneline\" git init12$ git init # åˆ›å»ºç©ºçš„gitä»£ç åº“$ git init Myfolder # åˆ›å»ºæ–‡ä»¶å¤¹Myfolderï¼Œå¹¶åˆ›å»ºgitä»£ç åº“ æ–‡ä»¶ï¼ˆå¢åˆ æ”¹æï¼‰git add å¢123456789101112131415# æŠŠæŒ‡å®šçš„æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒºä¸­$ git add &lt;æ–‡ä»¶è·¯å¾„&gt;# æ·»åŠ æ‰€æœ‰ä¿®æ”¹ã€å·²åˆ é™¤çš„æ–‡ä»¶åˆ°æš‚å­˜åŒºä¸­$ git add -u [&lt;æ–‡ä»¶è·¯å¾„&gt;]$ git add --update [&lt;æ–‡ä»¶è·¯å¾„&gt;]# æ·»åŠ æ‰€æœ‰ä¿®æ”¹ã€å·²åˆ é™¤ã€æ–°å¢çš„æ–‡ä»¶åˆ°æš‚å­˜åŒºä¸­ï¼Œçœç•¥ &lt;æ–‡ä»¶è·¯å¾„&gt; å³ä¸ºå½“å‰ç›®å½•$ git add -A [&lt;æ–‡ä»¶è·¯å¾„&gt;]$ git add --all [&lt;æ–‡ä»¶è·¯å¾„&gt;]$ git add . # å½“å‰ç›®å½•ï¼ˆé€’å½’å­ç›®å½•ï¼‰# æŸ¥çœ‹æ‰€æœ‰ä¿®æ”¹ã€å·²åˆ é™¤ä½†æ²¡æœ‰æäº¤çš„æ–‡ä»¶ï¼Œè¿›å…¥ä¸€ä¸ªå­å‘½ä»¤ç³»ç»Ÿ$ git add -i [&lt;æ–‡ä»¶è·¯å¾„&gt;]$ git add --interactive [&lt;æ–‡ä»¶è·¯å¾„&gt;] git commit æäº¤123456789101112131415# æŠŠæš‚å­˜åŒºä¸­çš„æ–‡ä»¶æäº¤åˆ°æœ¬åœ°ä»“åº“ï¼Œè°ƒç”¨æ–‡æœ¬ç¼–è¾‘å™¨è¾“å…¥è¯¥æ¬¡æäº¤çš„æè¿°ä¿¡æ¯$ git commit# æŠŠæš‚å­˜åŒºä¸­çš„æ–‡ä»¶æäº¤åˆ°æœ¬åœ°ä»“åº“ä¸­å¹¶æ·»åŠ æè¿°ä¿¡æ¯$ git commit -m \"&lt;æäº¤çš„æè¿°ä¿¡æ¯&gt;\"# æŠŠæ‰€æœ‰ä¿®æ”¹ã€å·²åˆ é™¤çš„æ–‡ä»¶æäº¤åˆ°æœ¬åœ°ä»“åº“ä¸­# ä¸åŒ…æ‹¬æœªè¢«ç‰ˆæœ¬åº“è·Ÿè¸ªçš„æ–‡ä»¶ï¼Œç­‰åŒäºå…ˆè°ƒç”¨äº† \"git add -u\"$ git commit -a -m \"&lt;æäº¤çš„æè¿°ä¿¡æ¯&gt;\"# ä¿®æ”¹ä¸Šæ¬¡æäº¤çš„æè¿°ä¿¡æ¯$ git commit --amend -m \"desc\"# æ‹¿372a* æäº¤çš„ä¿¡æ¯ï¼ˆä½œè€…ã€æäº¤è€…ã€æ³¨é‡Šã€æ—¶é—´æˆ³ç­‰ï¼‰æ¥æäº¤å½“å‰ä¿®æ”¹$ git commit -c 372a git reset è¿˜åŸ12345678910111213141516# é‡ç½®æš‚å­˜åŒºï¼Œä½†æ–‡ä»¶ä¸å—å½±å“# ç›¸å½“äºå°†ç”¨ \"git add\" å‘½ä»¤æ›´æ–°åˆ°æš‚å­˜åŒºçš„å†…å®¹æ’¤å‡ºæš‚å­˜åŒºï¼Œå¯ä»¥æŒ‡å®šæ–‡ä»¶# æ²¡æœ‰æŒ‡å®š commit ID åˆ™é»˜è®¤ä¸ºå½“å‰ HEAD# ä¸¢å¼ƒæš‚å­˜åŒºä¸­çš„æ‰€æœ‰æ–‡ä»¶çš„ä¿®æ”¹ï¼ˆå·¥ä½œåŒºä¸å—å½±å“ï¼‰$ git reset $ git reset --mixed $ git reset &lt;æ–‡ä»¶è·¯å¾„,commit ID&gt;$ git reset --mixed &lt;æ–‡ä»¶è·¯å¾„,commit ID&gt;$ git reset --hard HEAD^ # å›åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ï¼ˆHEAD: å½“å‰ç‰ˆæœ¬ï¼ŒHEAD^: ä¸Šä¸€ä¸ªç‰ˆæœ¬ï¼ŒHEAD~100: å¾€ä¸Š100ä¸ªç‰ˆæœ¬ï¼‰$ git reset --hard 1234567 # å›åˆ°æŒ‡å®šç‰ˆæœ¬å·commit idï¼ˆæ­¤å¤„ï¼šcommit id å‡è®¾ä¸º1234567******ï¼ŒGitä¼šæ ¹æ®commit idçš„å‰å‡ ä½è‡ªåŠ¨å¯»æ‰¾å¯¹åº”çš„ç‰ˆæœ¬ï¼‰$ git reset --soft HEAD~ # hard å’Œ soft çš„åŒºåˆ«åœ¨ä¸ softï¼ˆæš‚å­˜åŒºå’Œå·¥ä½œåŒºä¸­çš„æ‰€æœ‰æ–‡ä»¶çš„ä¿®æ”¹éƒ½ä¸ä¸¢å¼ƒï¼‰$ git reset --merge &lt;commit&gt; // åœ¨è¢«æ±¡æŸ“çš„å·¥ä½œåŒºä¸­å›æ»šmergeæˆ–è€…$ git reflog # æŸ¥çœ‹å‘½ä»¤å†å² git revert ååš12# ç”Ÿæˆä¸€ä¸ªæ–°çš„æäº¤æ¥æ’¤é”€æŸæ¬¡æäº¤ï¼Œæ­¤æ¬¡æäº¤ä¹‹å‰çš„æ‰€æœ‰æäº¤éƒ½ä¼šè¢«ä¿ç•™ã€‚$ git revert &lt;commit ID&gt; æ¯”è¾ƒä¸€ä¸‹ git revert å’Œ git reset çš„åŒºåˆ«ï¼š git resetæ˜¯æŠŠHEADå‘åç§»åŠ¨æ¥åˆ é™¤æäº¤ï¼Œè€Œgit revertæ˜¯ç”¨ä¸€æ¬¡æ–°çš„æäº¤æ¥å›æ»šä¹‹å‰çš„æäº¤ï¼ˆHEADä¼šç»§ç»­å‰è¿›ï¼‰ã€‚ä¸‹é¢ä¸€å¹…å›¾æ¯”è¾ƒå½¢è±¡ç”ŸåŠ¨ã€‚ å…³äºgit çš„ç‰ˆæœ¬å›é€€çš„é—®é¢˜ï¼Œå»–é›ªå³°çš„åšå®¢ï¼šæ—¶å…‰ç©¿æ¢­æœºå·²ç»è®²çš„å¾ˆå¥½äº†ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡git log æŸ¥çœ‹â€œå½“å‰â€ç‰ˆæœ¬åº“çš„çŠ¶æ€ï¼Œä½†æ˜¯å¦‚ä½•æŸ¥çœ‹â€œæœªæ¥â€çš„ç‰ˆæœ¬åº“å‘¢ï¼Ÿå¯ä»¥é€šè¿‡git reflog æŸ¥çœ‹ã€‚ git remove åˆ é™¤1234$ git rm &lt;æ–‡ä»¶è·¯å¾„&gt; # åˆ é™¤å·¥ä½œåŒºæ–‡ä»¶ï¼Œè‹¥æ–‡ä»¶åœ¨å·¥ä½œåŒºæˆ–ç¼“å­˜åŒºä¸­æœ‰ä¿®æ”¹ï¼Œä¼šå¤±è´¥ã€‚æœ‰ä¸¤ç§è§£å†³æ–¹å¼ï¼š1ã€å¼ºåˆ¶åˆ é™¤ 2ã€åªåˆ é™¤æš‚å­˜åŒºçš„æ–‡ä»¶$ git rm -f &lt;æ–‡ä»¶è·¯å¾„&gt; # 1.æ— è®ºæœ‰æ²¡æœ‰åœ¨å·¥ä½œåŒºæˆ–æš‚å­˜åŒºä¿®æ”¹ï¼Œå¼ºåˆ¶åˆ é™¤$ git rm --cached &lt;æ–‡ä»¶è·¯å¾„&gt; # 2.ç§»é™¤æš‚å­˜åŒºçš„æ–‡ä»¶ï¼Œåœ¨æœ¬åœ°ä»“åº“çš„æ–‡ä»¶å¤¹ä¸­ä¿ç•™è¯¥æ–‡ä»¶$ git rm -r &lt;æ–‡ä»¶å¤¹è·¯å¾„&gt; # ç§»é™¤æ–‡ä»¶å¤¹ git diff12345678910111213141516171819# æ¯”è¾ƒå½“å‰æ–‡ä»¶å’Œæš‚å­˜åŒºä¸­æ–‡ä»¶çš„å·®å¼‚ï¼Œæ˜¾ç¤ºæ²¡æœ‰æš‚å­˜èµ·æ¥çš„æ›´æ”¹$ git diff# æ¯”è¾ƒæš‚å­˜åŒºä¸­çš„æ–‡ä»¶å’Œä¸Šæ¬¡æäº¤æ—¶çš„å·®å¼‚$ git diff --cached$ git diff --staged# æ¯”è¾ƒå½“å‰æ–‡ä»¶å’Œä¸Šæ¬¡æäº¤æ—¶çš„å·®å¼‚$ git diff HEAD# æŸ¥çœ‹ä»æŒ‡å®šçš„ç‰ˆæœ¬ä¹‹åæ”¹åŠ¨çš„å†…å®¹$ git diff &lt;commit ID&gt;# æ¯”è¾ƒä¸¤ä¸ªåˆ†æ”¯ä¹‹é—´çš„å·®å¼‚$ git diff &lt;åˆ†æ”¯åç§°&gt; &lt;åˆ†æ”¯åç§°&gt;# æŸ¥çœ‹ä¸¤ä¸ªåˆ†æ”¯åˆ†å¼€åå„è‡ªçš„æ”¹åŠ¨å†…å®¹$ git diff &lt;åˆ†æ”¯åç§°&gt;...&lt;åˆ†æ”¯åç§°&gt;# å¯ä»¥ä½¿ç”¨ Beyond Compare4 è½¯ä»¶ * git checkout æ¢å¤12345678910# å½“åœ¨æš‚å­˜åŒºä¸­æœ‰ä¿®æ”¹æ—¶ï¼Œä½¿ç”¨æš‚å­˜åŒºä¸­çš„ä¿®æ”¹è¦†ç›–å·¥ä½œåŒºä¸­çš„ &lt;æ–‡ä»¶è·¯å¾„&gt;# å½“ä¸åœ¨æš‚å­˜åŒºä¸­æ—¶ï¼Œä½¿ç”¨æœ¬åœ°ç‰ˆæœ¬åº“ä¸­çš„HEADæŒ‡é’ˆå¤„çš„ä¿®æ”¹è¦†ç›–å·¥ä½œåŒºä¸­çš„&lt;æ–‡ä»¶è·¯å¾„&gt;$ git checkout -- &lt;æ–‡ä»¶è·¯å¾„&gt;# ç”¨æœ¬åœ°ç‰ˆæœ¬åº“ä¸­ HEADå¤„æäº¤çš„æ–‡ä»¶ï¼Œè¦†ç›– æš‚å­˜åŒºå’Œå·¥ä½œåŒºçš„æ–‡ä»¶$ git checkout HEAD &lt;æ–‡ä»¶è·¯å¾„&gt;# ç”¨æœ¬åœ°ç‰ˆæœ¬åº“ä¸­ 93efå¤„æäº¤çš„æ–‡ä»¶ï¼Œè¦†ç›– æš‚å­˜åŒºå’Œå·¥ä½œåŒºçš„æ–‡ä»¶$ git checkout 93ef &lt;æ–‡ä»¶è·¯å¾„&gt;# æ›¿æ¢æ‰æœ¬åœ°çš„æ”¹åŠ¨ï¼Œæ–°å¢çš„æ–‡ä»¶å’Œå·²ç»æ·»åŠ åˆ°æš‚å­˜åŒºçš„å†…å®¹ä¸å—å½±å“$ git checkout &lt;æ–‡ä»¶è·¯å¾„&gt; æ¢å¤æ–‡ä»¶ä¸¾ä¾‹ a æ–‡ä»¶è¢«ä¿®æ”¹è¿‡ï¼Œcheckout å»é™¤ä¿®æ”¹ 123456789$ cat a Hello worldorphan`$ git checkout aUpdated 1 path from the index$ cat aHello worldadd a line git æ—¥å¿—ä¸æ–‡ä»¶çŠ¶æ€git status çŠ¶æ€12345678910# æŸ¥çœ‹å½“å‰æ‰€å¤„çš„åˆ†æ”¯æš‚å­˜åŒºå’Œå·¥ä½œåŒºçš„æ–‡ä»¶ï¼ˆä¼šæ˜¾ç¤ºå½“å‰æ‰€å¤„åˆ†æ”¯ï¼‰# æ³¨1ï¼šå¤„äºæš‚å­˜åŒºçš„æ–‡ä»¶çŠ¶æ€:ï¼šstaged(å·²æš‚å­˜)ï¼›å¤„äºå·¥ä½œåŒºçš„æ–‡ä»¶çŠ¶æ€:ï¼šuntrack(æœªè·Ÿè¸ª)ã€modified(å·²ä¿®æ”¹)# æ³¨2ï¼šå·¥ä½œåŒºä¸­çš„ç©ºç›®å½•ä¸ä¼šè¢«gitè¿½è¸ª$ git status$ git status &lt;branch name&gt;# ä»¥ç®€çŸ­æ¨¡å¼æŸ¥çœ‹æš‚å­˜åŒºå’Œå·¥ä½œåŒºçš„æ–‡ä»¶# ä¼šæ˜¾ç¤ºä¸¤åˆ—ï¼Œç¬¬ä¸€åˆ—æ˜¯æ–‡ä»¶çš„çŠ¶æ€ï¼Œç¬¬äºŒåˆ—æ˜¯å¯¹åº”çš„æ–‡ä»¶# æ–‡ä»¶çŠ¶æ€ï¼šA æ–°å¢ï¼ŒM ä¿®æ”¹ï¼ŒD åˆ é™¤ï¼Œ?? æœªæ·»åŠ åˆ°Gitä¸­$ git status -s git log æ—¥å¿—12345678910111213141516171819202122# æ‰“å°æ‰€æœ‰çš„æäº¤è®°å½•$ git log# æ‰“å°ä»ç¬¬ä¸€æ¬¡æäº¤åˆ°æŒ‡å®šçš„æäº¤çš„è®°å½•$ git log &lt;commit ID&gt;$ git log -- &lt;æ–‡ä»¶&gt;# æ‰“å°æŒ‡å®šæ•°é‡çš„æœ€æ–°æäº¤çš„è®°å½•$ git log -&lt;æŒ‡å®šçš„æ•°é‡&gt;# é«˜çº§åŠŸèƒ½# è®°ä¸ä½å¯ä»¥è®¾ç½®åˆ«å$ git log -p &lt;æ–‡ä»¶&gt; # æ˜¾ç¤ºå‡ºæ¯æ¬¡ä¿®æ”¹çš„å†…å®¹$ --graph # å›¾å½¢åŒ–çš„æ–¹å¼æ˜¾ç¤º$ --graph --oneline # å›¾å½¢åŒ–ç®€æ´æ¨¡å¼$ --graph --oneline --name-only # å›¾åƒåŒ–ç®€æ´æ¨¡å¼ï¼ˆåªæ˜¾ç¤ºæ–‡ä»¶åæ¸…å•ï¼‰$ --author = leon # é™å®šä½œè€…leon$ --grep = \"test\" # é™å®šæ³¨é‡Š$ --since=\"2018-10-7\" --until='2019-10-12'# since,until æ ‡è®°å¯¹å’Œ afterï¼Œbefore æ ‡è®°å¯¹æ˜¯ç­‰ä»·çš„$ --after=\"2018-10-7\" --before='2018-10-12'$ --since=2.weeks # æœ€è¿‘2å‘¨çš„æäº¤è®°å½• git show æ˜¾ç¤ºä¿®æ”¹1234567# ç»Ÿè®¡å„ä¸ªæäº¤è€…çš„æ¬¡æ•°$ git shortlog -sn # æ˜¾ç¤ºä¿®æ”¹å†…å®¹(è¯¦ç»†)$ git show 3a6c$ git show HEAD# æ˜¾ç¤ºæœ€è¿‘ä¸€æ¬¡æäº¤çš„ä¿®æ”¹å†…å®¹ï¼ˆä¸æ˜¾ç¤ºå…·ä½“çš„ä¿®æ”¹å†…å®¹ï¼‰$ git show --name-only HEAD åˆ†æ”¯ç®¡ç†git branch1234567891011121314151617181920212223242526272829303132# åˆ—å‡ºæœ¬åœ°çš„æ‰€æœ‰åˆ†æ”¯ï¼Œå½“å‰æ‰€åœ¨åˆ†æ”¯ä»¥ \"*\" æ ‡å‡º$ git branch# åˆ—å‡ºæœ¬åœ°çš„æ‰€æœ‰åˆ†æ”¯å¹¶æ˜¾ç¤ºæœ€åä¸€æ¬¡æäº¤ï¼Œå½“å‰æ‰€åœ¨åˆ†æ”¯ä»¥ \"*\" æ ‡å‡º$ git branch -v$ git branch -r # åˆ—å‡ºæ‰€æœ‰è¿œç¨‹åˆ†æ”¯ cache$ git branch -a # åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯cache$ git branch -av # åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯cacheï¼ˆå«ç®€å•è¯´æ˜ï¼‰$ git branch -vv # æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯cacheçš„è¿½è¸ªå…³ç³»# åˆ›å»ºæ–°åˆ†æ”¯ï¼Œæ–°çš„åˆ†æ”¯åŸºäºä¸Šä¸€æ¬¡æäº¤å»ºç«‹$ git branch &lt;åˆ†æ”¯å&gt;# ä¿®æ”¹åˆ†æ”¯åç§°# å¦‚æœä¸æŒ‡å®šåŸåˆ†æ”¯åç§°åˆ™ä¸ºå½“å‰æ‰€åœ¨åˆ†æ”¯$ git branch -m [&lt;åŸåˆ†æ”¯åç§°&gt;] &lt;æ–°çš„åˆ†æ”¯åç§°&gt;# å¼ºåˆ¶ä¿®æ”¹åˆ†æ”¯åç§°$ git branch -M [&lt;åŸåˆ†æ”¯åç§°&gt;] &lt;æ–°çš„åˆ†æ”¯åç§°&gt;# åˆ é™¤æŒ‡å®šçš„æœ¬åœ°åˆ†æ”¯# åˆ é™¤çš„æ—¶å€™éœ€è¦ä»è¢«åˆ é™¤çš„åˆ†åŒºåˆ‡æ¢å‡ºå»$ git branch -d &lt;åˆ†æ”¯åç§°&gt;# å¼ºåˆ¶åˆ é™¤æŒ‡å®šçš„æœ¬åœ°åˆ†æ”¯$ git branch -D &lt;åˆ†æ”¯åç§°&gt;# å»ºç«‹è¿½è¸ªå…³ç³»ï¼Œåœ¨ç°æœ‰åˆ†æ”¯ä¸æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯ä¹‹é—´$ git branch --set-upstream hexo origin:hexo ??# å¦‚æœåœ¨æœ¬åœ°æ–°å»ºäº†åˆ†æ”¯ï¼Œè¿œç¨‹æ²¡æœ‰åˆ†æ”¯çš„æƒ…å†µ$ git branch --set-upstream origin master # å»ºç«‹è”ç³»$ git branch -vv # æŸ¥çœ‹æœ¬åœ°å’Œè¿œç¨‹çš„è¿½è¸ªå…³ç³» git checkout åˆ†æ”¯åˆ‡æ¢123456# git æäº¤æµç¨‹ å·¥ä½œåŒº-&gt; æš‚å­˜åŒº -&gt; ç‰ˆæœ¬åº“$ git checkout &lt;åˆ†æ”¯åç§°&gt; # åˆ‡æ¢åˆ†æ”¯$ git checkout -- &lt;file&gt; # æ’¤é”€ä¿®æ”¹ï¼š1. æ–‡ä»¶åœ¨æ·»åŠ åˆ°ç¼“å­˜åŒºå‰ä¿®æ”¹ï¼Œåˆ™å›é€€åˆ°åŸå·¥ä½œåŒºçŠ¶æ€ï¼›2. æ–‡ä»¶åœ¨æ·»åŠ åˆ°ç¼“å­˜åŒºåä¿®æ”¹ï¼Œåˆ™å›é€€åˆ°åŸç¼“å­˜åŒºçŠ¶æ€ã€‚ä¹Ÿå³æ˜¯å°†&lt;file&gt;æ’¤å›åˆ°æœ€è¿‘ä¸€æ¬¡git addæˆ–git commitçŠ¶æ€ï¼ˆæ³¨ï¼š--è¡¨ç¤ºåœ¨å½“å‰åˆ†æ”¯ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™åˆ‡æ¢åˆ°å¦ä¸€ä¸ªåˆ†æ”¯ï¼‰$ git checkout -b &lt;åˆ†æ”¯åç§°&gt; # åˆ›å»ºå¹¶åˆ‡æ¢$ git checkout --orphan &lt;åˆ†æ”¯åç§°&gt;# åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æŒ‡å®šçš„åˆ†æ”¯ï¼Œåˆ é™¤æ‰€æœ‰çš„æäº¤è®°å½•$ git checkout -# åˆ‡æ¢åˆ°ä¸Šä¸€æ¬¡åˆ†æ”¯ git merge/rebase åˆ†æ”¯åˆå¹¶ 12345678# æŠŠæŒ‡å®šçš„åˆ†æ”¯åˆå¹¶åˆ°å½“å‰æ‰€åœ¨çš„åˆ†æ”¯ä¸‹$ git merge &lt;åˆ†æ”¯åç§°&gt; # æ— å†²çªæ—¶ä¼šç›´æ¥æäº¤$ git merge --no-commit &lt;åˆ†æ”¯åç§°&gt; # ä¸è‡ªåŠ¨æäº¤$ git merge --no-ff -m \"merge with no-ff\" &lt;name&gt; # åˆå¹¶åçš„åˆ†æ”¯æœ‰å†å²è®°å½•ï¼Œè€ŒFast-Forwardåˆå¹¶ä¹‹åï¼Œåˆ†æ”¯æ²¡æœ‰å†å²è®°å½•# Fast-Forwar çš„åˆå¹¶çš„æ–¹æ³•æ˜¯æŒ‡é’ˆçš„ç§»åŠ¨ã€‚$ git rebase &lt;åˆ†æ”¯åç§°&gt; # rebase èƒ½ä¿æŒæ¸…æ™°çš„æäº¤è®°å½•ï¼Œä½†æ˜¯åˆå¹¶çš„æ“ä½œæ²¡æœ‰è®°å½•ä¸‹æ¥ï¼ˆmerge åˆ™æ˜¯ä¼šæ–°å»ºä¸€ä¸ªæäº¤ï¼‰ è¿œç¨‹æ“ä½œgit clone å…‹éš†12345678910111213141516# å…‹éš†æ–‡ä»¶# Gitæ”¯æŒå¤šç§åè®®ï¼ŒåŒ…æ‹¬httpsï¼Œä½†é€šè¿‡sshæ”¯æŒçš„åŸç”Ÿgitåè®®é€Ÿåº¦æœ€å¿«ï¼Œhttps æ¯æ¬¡æ¨é€éƒ½å¿…é¡»è¾“å…¥å£ä»¤ã€‚git clone https://github.com/XXX/learngit.git Yourfilepath # httpsgit clone git@github.com:XXX/learngit.git ./lesson01 # sshï¼ˆæ¨èï¼‰# é»˜è®¤åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºå’Œç‰ˆæœ¬åº“åç›¸åŒçš„æ–‡ä»¶å¤¹å¹¶ä¸‹è½½ç‰ˆæœ¬åˆ°è¯¥æ–‡ä»¶å¤¹ä¸‹$ git clone &lt;è¿œç¨‹ä»“åº“çš„ç½‘å€&gt;# æŒ‡å®šæœ¬åœ°ä»“åº“çš„ç›®å½•$ git clone &lt;è¿œç¨‹ä»“åº“çš„ç½‘å€&gt; &lt;æœ¬åœ°ç›®å½•&gt;# -b æŒ‡å®šè¦å…‹éš†çš„åˆ†æ”¯ï¼Œé»˜è®¤æ˜¯masteråˆ†æ”¯$ git clone -b &lt;åˆ†æ”¯åç§°&gt; &lt;è¿œç¨‹ä»“åº“çš„ç½‘å€&gt; &lt;æœ¬åœ°ç›®å½•&gt;# -o è®¾ç½®è¿œç¨‹ä»“åº“ä¸ºorigin$ git clone -o &lt;orgin name&gt; https://github.com/kekec/Test.git git remote1234567891011121314151617181920212223242526272829303132333435363738# åˆ—å‡ºå·²ç»å­˜åœ¨çš„è¿œç¨‹ä»“åº“$ git remoteorigin # åˆ—å‡ºè¿œç¨‹ä»“åº“çš„è¯¦ç»†ä¿¡æ¯ï¼Œåœ¨åˆ«ååé¢åˆ—å‡ºURLåœ°å€$ git remote -v$ git remote --verboseorigin https://github.com/kekec/Test.git (fetch)origin https://github.com/kekec/Test.git (push)# æ·»åŠ è¿œç¨‹ä»“åº“$ git remote add &lt;è¿œç¨‹ä»“åº“çš„åˆ«å&gt; &lt;è¿œç¨‹ä»“åº“çš„URLåœ°å€&gt;# ä¿®æ”¹è¿œç¨‹ä»“åº“çš„åˆ«å$ git remote rename &lt;åŸè¿œç¨‹ä»“åº“çš„åˆ«å&gt; &lt;æ–°çš„åˆ«å&gt;# åˆ é™¤æŒ‡å®šåç§°çš„è¿œç¨‹ä»“åº“$ git remote remove/rm &lt;è¿œç¨‹ä»“åº“çš„åˆ«å&gt;# ä¿®æ”¹/æ˜¾ç¤ºè¿œç¨‹ä»“åº“çš„ URL åœ°å€$ git remote set-url &lt;è¿œç¨‹ä»“åº“çš„åˆ«å&gt; &lt;æ–°çš„è¿œç¨‹ä»“åº“URLåœ°å€&gt;$ git remoter get-url &lt;è¿œç¨‹ä»“åº“çš„åˆ«å&gt;# æ˜¾ç¤ºè¿œç¨‹ä»“åº“çš„ä¿¡æ¯ï¼ˆä¸¾ä¾‹ï¼‰$ git remote show origin * remote origin Fetch URL: https://github.com/kekec/Test.git Push URL: https://github.com/kekec/Test.git HEAD branch: master Remote branches: master tracked v3.1 trackedLocal branch configured for 'git pull': master merges with remote masterLocal refs configured for 'git push': master pushes to master (fast-forwardable) v3.1 pushes to v3.1 (up to date)# å¯ä»¥æŸ¥çœ‹ git pull å’Œ git push çš„å…·ä½“ä¿¡æ¯ git fetch ä»è¿œç¨‹ä»“åº“è·å–æœ€æ–°çš„ç‰ˆæœ¬åˆ°æœ¬åœ°åˆ†æ”¯ä¸Š 12345# å°†è¿œç¨‹ä»“åº“æ‰€æœ‰åˆ†æ”¯çš„æœ€æ–°ç‰ˆæœ¬å…¨éƒ¨å–å›åˆ°æœ¬åœ°$ git fetch origin# å°†è¿œç¨‹ä»“åº“æŒ‡å®šåˆ†æ”¯çš„æœ€æ–°ç‰ˆæœ¬å–å›åˆ°æœ¬åœ°$ git fetch orgin master/dev * git pull git pull &lt;è¿œç¨‹ä»“åº“å&gt; &lt;è¿œç¨‹åˆ†æ”¯å&gt;:&lt;æœ¬åœ°åˆ†æ”¯å&gt; ä»è¿œç¨‹ä»“åº“è·å–æœ€æ–°ç‰ˆæœ¬å¹¶åˆå¹¶åˆ°æœ¬åœ°ã€‚é¦–å…ˆä¼šæ‰§è¡Œ git fetchï¼Œç„¶åæ‰§è¡Œ git mergeï¼ŒæŠŠè·å–çš„åˆ†æ”¯çš„ HEAD åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ã€‚ 1234# å…ˆæ‰§è¡Œfetchï¼Œç„¶åå°†è¿œç¨‹origin/masteråˆ†æ”¯mergeåˆå¹¶åˆ°å½“å‰åˆ†æ”¯ï¼ˆæœ€åä¼šæ›´æ–°origin/master, origin/HEADæŒ‡é’ˆåˆ°æœ€æ–°æäº¤ï¼‰$ git pull origin master$ git pull -r origin master # å…ˆæ‰§è¡Œfetchï¼Œç„¶åå°†è¿œç¨‹origin/masteråˆ†æ”¯rebaseåˆå¹¶åˆ°masteråˆ†æ”¯$ git pull origin master:dev # å…ˆæ‰§è¡Œfetchï¼Œç„¶åå°†è¿œç¨‹origin/master åˆ†æ”¯mergeåˆå¹¶åˆ°æœ¬åœ°devåˆ†æ”¯ * git push æŠŠæœ¬åœ°ä»“åº“çš„æäº¤æ¨é€åˆ°è¿œç¨‹ä»“åº“ã€‚ git push &lt;è¿œç¨‹ä»“åº“çš„åˆ«å&gt; &lt;æœ¬åœ°åˆ†æ”¯å&gt;:&lt;è¿œç¨‹åˆ†æ”¯å&gt; 1234567891011# å°†æœ¬åœ°ä»“åº“çš„ä¿®æ”¹pushåˆ°originæ‰€æŒ‡å‘çš„è¿œç¨‹ä»“åº“URLçš„masteråˆ†æ”¯ä¸Šï¼Œå¹¶åœ¨.git/configæ–‡ä»¶ä¸­è®°å½•å½“å‰åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯masterçš„å¯¹åº”å…³ç³»$ git push -u origin master # -u åœ¨ç¬¬ä¸€æ¬¡pushçš„æ—¶å€™ä½¿ç”¨å³å¯$ git push origin -f # å½“åˆå…¥å¯¹åº”çš„è¿œç«¯ä»“åº“æœ‰å†²çªçš„æ—¶å€™ï¼Œä½¿ç”¨å½“å‰åˆ†æ”¯æ›´æ–°$ git push origin --all # æ¨é€æœ¬åœ°çš„æ‰€æœ‰çš„åˆ†æ”¯åˆ°å„è‡ªçš„è¿œç«¯åˆ†æ”¯# åˆ é™¤æŒ‡å®šçš„è¿œç¨‹ä»“åº“çš„åˆ†æ”¯$ git push &lt;è¿œç¨‹ä»“åº“çš„åˆ«å&gt; :&lt;è¿œç¨‹åˆ†æ”¯å&gt;$ git push &lt;è¿œç¨‹ä»“åº“çš„åˆ«å&gt; --delete/-d &lt;è¿œç¨‹åˆ†æ”¯å&gt;$ git push origin:dev # åˆ é™¤è¿œç«¯åˆ†æ”¯ dev$ git push origin -d dev # æ•ˆæœåŒä¸Š å­˜å‚¨æ–‡ä»¶çš„åŒºå—è´®è—åŒº git stash123456789101112131415161718$ git stash # å°†å·¥ä½œåŒºä¸­æ‰€æœ‰æ–‡ä»¶çš„ä¿®æ”¹å¤‡ä»½å‹æ ˆåˆ°å‚¨è—åŒºï¼Œç„¶åä¸¢å¼ƒå·¥ä½œåŒºä¸æš‚å­˜åŒºçš„æ‰€æœ‰æ–‡ä»¶çš„ä¿®æ”¹ã€‚# ç»è¿‡è¯•éªŒï¼Œgit stash ä¼šä¸¢å¼ƒå·²æœ‰æ–‡ä»¶çš„ä¿®æ”¹çš„ï¼Œä¸ä¼šåˆ é™¤æ–°å»ºçš„æ–‡ä»¶ã€‚$ git stash pop # æ¢å¤å·¥ä½œåŒºï¼Œå¹¶å°†è´®è—åŒºçš„å¤‡ä»½åˆ é™¤$ git stash list # æŸ¥çœ‹è´®è—åŒºstash@&#123;0&#125;: WIP on master: 30e5191 add a$ git stash show -p stash@&#123;0&#125; # æŸ¥çœ‹æ ˆé¡¶æ–‡ä»¶çš„ä¿®æ”¹diff --git a/a b/aindex 11817a2..399e9b0 100644--- a/a+++ b/a@@ -1,3 +1,4 @@ Hello world add a line+add a line$ git stash drop # ç›´æ¥ç§»é™¤å‚¨è—åŒºçš„æ ˆé¡¶å¤„å¤‡ä»½ï¼ˆä¸ç”¨äºæ¢å¤å½“å‰åˆ†æ”¯çš„å·¥ä½œåŒºï¼‰$ git stash clear # æ¸…é™¤å‚¨è—åŒºæ ˆåˆ—è¡¨$ git stash apply stash@&#123;0&#125; # ä½¿ç”¨stash@&#123;0&#125;æ¥æ¢å¤å½“å‰åˆ†æ”¯çš„å·¥ä½œåŒºï¼Œä½†ä¸ç§»é™¤å‚¨è—åŒºä¸­ä»»ä½•å¤‡ä»½ å·¥ä½œåŒº git clean12$ git clean -nd # æ¢æµ‹å·¥ä½œåŒºä¸­æœ‰å“ªäº›æœªè¿½è¸ªçŠ¶æ€çš„æ–‡ä»¶å’Œç›®å½•$ git clean -fd # åˆ é™¤å·¥ä½œåŒºä¸­æœªè¿½è¸ªçŠ¶æ€çš„æ–‡ä»¶å’Œç›®å½• æš‚å­˜åŒº git ls-files1234$ git ls-files # æŸ¥è¯¢æš‚å­˜åŒºä¸­çš„æ–‡ä»¶åˆ—è¡¨ï¼ˆé€’å½’å­ç›®å½•ï¼‰# ä¸‹é¢æ˜¯æŠ„çš„$ git ls-files -s // æŸ¥çœ‹æš‚å­˜åŒºä¸­æ‰€æœ‰æ–‡ä»¶çš„blobæ•°æ®å—ä¿¡æ¯$ git ls-files -s -- README.md // æŸ¥çœ‹æš‚å­˜åŒºä¸­çš„README.mdæ–‡ä»¶çš„blobæ•°æ®å—ä¿¡æ¯ æ‰“åŒ… git archive12# å°†å½“å‰masteråˆ†æ”¯æ‰€æœ‰æ–‡ä»¶ä½¿ç”¨zipå‹ç¼©æ–¹å¼æ‰“åŒ…åˆ°d:/file.zip$ git archive --format zip --output ./file.zip master å›¢é˜Ÿåˆä½œåˆ†æ”¯ TO DO LIST çœ‹å®Œæ•™ç¨‹git æ•™ç¨‹ è¡¥å…… å‚è€ƒèµ„æ–™ å»–é›ªå³°gitæ•™ç¨‹ GitåŸç†ä¸å‘½ä»¤å¤§å…¨ Gitå‘½ä»¤å¤§å…¨","categories":[{"name":"cheetsheet","slug":"cheetsheet","permalink":"http://ppsteven.github.io/categories/cheetsheet/"}],"tags":[{"name":"æ—¥å¸¸å­¦ä¹ ç¬”è®°","slug":"æ—¥å¸¸å­¦ä¹ ç¬”è®°","permalink":"http://ppsteven.github.io/tags/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"git","slug":"git","permalink":"http://ppsteven.github.io/tags/git/"},{"name":"cheetsheet","slug":"cheetsheet","permalink":"http://ppsteven.github.io/tags/cheetsheet/"}]},{"title":"Pine Script å­¦ä¹ ç¬”è®°(äºŒ)â€”â€”åŸºæœ¬ç‰¹ç‚¹","slug":"Pine Script å­¦ä¹ ç¬”è®°(äºŒ)","date":"2019-11-04T13:45:13.000Z","updated":"2020-02-15T18:07:54.202Z","comments":false,"path":"2019/11/04/Pine Script å­¦ä¹ ç¬”è®°(äºŒ)/","link":"","permalink":"http://ppsteven.github.io/2019/11/04/Pine%20Script%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(%E4%BA%8C)/","excerpt":"å‰è¨€è¿™æ˜¯Pine Script å­¦ä¹ ç¬”è®°çš„ç¬¬äºŒç¯‡ï¼Œç®€å•æŒ‘æ•™ç¨‹ä¸Šé‡è¦çš„è®°å½•äº†ä¸€ä¸‹ã€‚","text":"å‰è¨€è¿™æ˜¯Pine Script å­¦ä¹ ç¬”è®°çš„ç¬¬äºŒç¯‡ï¼Œç®€å•æŒ‘æ•™ç¨‹ä¸Šé‡è¦çš„è®°å½•äº†ä¸€ä¸‹ã€‚ Context switching and the security functionsecurity å‡½æ•°å¯ä»¥ç”¨äºæŒ‰ç…§ç‰¹å®šè¦æ±‚è¯·æ±‚æ•°æ® 1234//@version=4study(&quot;Example security 1&quot;, overlay=true)ibm_15 = security(&quot;NYSE:IBM&quot;, &quot;15&quot;, close)plot(ibm_15) 1security(symbol, resolution, expression, gaps, lookahead) symbol (string) å•†å“ä»£ç ã€‚ å•†å“ä»£ç å¯ä»¥åŒ…å«æ•°æ®æä¾›å•†ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥ä¸å« å¦‚ â€œNYSE:IBMâ€,â€BATS:IBMâ€,â€IBMâ€(å¦‚ä¸æä¾›ï¼Œé»˜è®¤ä½¿ç”¨BATS) syminfo.ticker and syminfo.tickeridæ˜¯è¡¨ç¤ºå½“å‰å›¾æ ‡ä¸Šçš„å•†å“ä»£ç ï¼Œsyminfo.tickeræ˜¯ä¸å«æ•°æ®ä¾›åº”å•†ä¿¡æ¯ï¼Œsyminfo.tickeridæ˜¯åŒ…å«ä¾›åº”å•†ä¿¡æ¯ã€‚Pineæ•™ç¨‹å»ºè®®ä½¿ç”¨åè€…ï¼Œä¸ºäº†é¿å…æ•°æ®çš„æ¨¡ç³Šæ€§ resolution (string) åˆ†è¾¨ç‡/ timeframeæ—¶é—´å‘¨æœŸ åˆ†é’Ÿçº§ï¼š1ï¼Œ5ï¼Œ10ï¼Œ21ï¼Œ60ï¼Œ120ï¼Œç­‰ç­‰ æ—¥çº§: D,1D,2D ç­‰ç­‰ å‘¨çº§ï¼šWï¼Œ1Wï¼Œ2W æœˆçº§ï¼šMï¼Œ1Mï¼Œ2M timeframe.period è®°å½•å½“å‰å›¾æ ‡æ—¶é—´å‘¨æœŸ expression (series) è®¡æ•°å¹¶ä» securityè°ƒç”¨è¿”å›çš„è¡¨è¾¾å¼ã€‚ å¦‚æœä»…ä»…æ˜¯è·å–æ”¶ç›˜ä»·æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨security(&#39;EURUSD&#39;,&#39;D&#39;,close) ä½†æ˜¯ï¼Œexpressionèƒ½ç»™æˆ‘ä»¬æä¾›æ›´åŠ ä¸°å¯Œçš„æ“ä½œï¼Œæ¯”å¦‚ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ï¼ŒEURUSDç›¸å¯¹äºGBPUSD ä¸Šæ¶¨çš„å¹…åº¦ 1234567//@version=4study(title = &quot;Advance Decline Ratio&quot;, shorttitle=&quot;ADR&quot;)ratio(t1, t2, source) =&gt; s1 = security(t1, timeframe.period, source) s2 = security(t2, timeframe.period, source) s1 / s2plot(ratio(&quot;GBPUSD&quot;, &quot;EURUSD&quot;, close-open)) å¦‚ä¸Šå›¾æ‰€ä»¥ï¼ŒGBPUSDä¸Šæ¶¨å¹…åº¦/EURUSD çš„ä¸Šæ¶¨å¹…åº¦æˆ‘ä»¬å¯ä»¥å¾ˆè½»æ¾çš„é€šè¿‡7è¡Œä»£ç å®ç°ã€‚åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä¸¤è€…æ˜¯åŒæ¯”ä¾‹å˜åŠ¨ï¼Œä½†æ˜¯åœ¨æŸäº›ç‰¹ç­‰æƒ…å†µä¸‹ï¼Œå˜åŒ–æ˜¯ç›¸åçš„ã€‚è¿™å¯¹äºç ”ç©¶è¿™ä¸¤ç§è´§å¸å¯¹çš„èµ°åŠ¿å…³ç³»æœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚ åœ¨securityæ•°æ®åº”ç”¨åˆ°å½“å‰å›¾è¡¨ä¸Šçš„æ—¶å€™ï¼Œæœ‰ä¸¤ä¸ªæ§åˆ¶ï¼Œä¸€ä¸ªæ˜¯gapsï¼Œå¦ä¸€ä¸ªæ˜¯lookahead gaps (const bool) é»˜è®¤å€¼ä¸ºbarmerge.gaps_offã€‚å¯ä»¥ç†è§£ä¸ºæ•°æ®å¹³æ»‘çš„æ“ä½œï¼Œå› ä¸ºæ•°æ®ä¸­ä¼šå­˜åœ¨ç©ºå€¼ï¼ˆnaï¼‰ï¼Œåœ¨gaps_offçš„æƒ…å†µä¸‹ï¼Œnaä¼šè¢«ç¦»å®ƒæœ€è¿‘çš„éç©ºå€¼æ‰€æ›¿ä»£ï¼Œä¹Ÿå°±ä¸ä¼šå‡ºç°é—´éš”ï¼ˆgapï¼‰çš„æƒ…å†µ lookahead (const bool) é»˜è®¤å€¼ä¸ºbarmerge.lookahead_offã€‚ åˆå¹¶æ‰€è¯·æ±‚æ•°æ®ä½ç½®çš„ç­–ç•¥ã€‚ è¯·æ±‚çš„æ¡å½¢å›¾ä¸å½“å‰çš„æ¡å½¢å›¾æŒ‰ç…§kçº¿å¼€ç›˜æ—¶é—´åˆå¹¶ã€‚ è¿™ç§åˆå¹¶ç­–ç•¥å¯èƒ½å¯¼è‡´ä»â€œæœªæ¥â€è·å–æ•°æ®è®¡ç®—å†å²çš„ä¸è‰¯å½±å“ã€‚ è¿™åœ¨å›æº¯æµ‹è¯•ç­–ç•¥ä¸­ä¸è¢«æ¥å—ï¼Œä½†åœ¨æŒ‡æ ‡ä¸­å¯ä½¿ç”¨ã€‚ 123456//@version=4study(&apos;My Script&apos;, overlay=true)a = security(syminfo.tickerid, &apos;60&apos;, low, lookahead=barmerge.lookahead_off)plot(a, color=color.red)b = security(syminfo.tickerid, &apos;60&apos;, low, lookahead=barmerge.lookahead_on)plot(b, color=color.lime) çº¢è‰²æ˜¯lookahead_offï¼Œç»¿è‰²æ˜¯lookahead_onã€‚ æˆ‘ä»¬å‘ç°å¼€å¯äº†lookaheadåŠŸèƒ½åï¼Œæ‰€äº§ç”Ÿçš„æœ€ä½ä»·æ˜¯æ•´ä¸ªæ—¶é—´æ®µçš„æœ€ä½ä»·ï¼Œè€ŒåŸå…ˆæ˜¯å¼€ç›˜Kç‚¹çš„æœ€ä½ä»·ã€‚ bar state.* å˜é‡ barstate.isfirst å½“å‰kçº¿ä¸ºkçº¿ç»„çš„ç¬¬ä¸€æ¡kçº¿ barstate.islast å½“å‰kçº¿ä¸ºkçº¿ç»„çš„æœ€åä¸€æ¡kçº¿ barstate.ishistory å½“å‰kçº¿ä¸ºå†å²kçº¿ batstate.isrealtime å½“å‰kçº¿ä¸ºå®æ—¶kçº¿ barstate.isnew æ–°Kçº¿çš„ç¬¬ä¸€æ¬¡æ›´æ–° batstate.isconfirmed =å½“å‰kçº¿çš„æœ€å(å…³é—­)æ›´æ–° ä¸å»ºè®®åœ¨securityè¡¨è¾¾å¼ä¸­ä½¿ç”¨barstate.isconfirmed æ‰€æœ‰çš„å†å²æŸ±çº¿éƒ½æ›¾è¢«è®¤ä¸ºæ˜¯æ–°çš„æŸ±çº¿ï¼Œå› ä¸ºè„šæœ¬æ˜¯ä¾æ¬¡æ‰§è¡Œçš„ã€‚å½“æŸ±çº¿ç¬¬ä¸€æ›´å¼€ç›˜ä»·ç”Ÿæˆçš„æ—¶å€™ï¼Œè®¤ä¸ºæ­¤æŸ±çº¿æ˜¯æ–°çš„ã€‚ ä¼šè¯å’Œæ—¶é—´ä¿¡æ¯Pine æä¾›æ–¹æ³•æ¥ç”Ÿæˆ äº¤æ˜“åŒºé—´ï¼Œæ—¶é—´å’Œæ—¥æœŸçš„ä¿¡æ¯ã€‚ time(å˜é‡): è¿”å›çš„æ˜¯æ—¶é—´æˆ³æ ¼å¼ time(å‡½æ•°)ï¼štime(resolution, session) â†’ series è¿”å›çš„æ˜¯æŒ‰ç…§session æ ¼å¼è¿”å›çš„æ—¶é—´ï¼Œå¦‚æœä¸åœ¨sessionæ—¶é—´æ®µçš„è¯ä¾¿ä¼šè¿”å›naå€¼ 1234//@version=4study(&quot;Time&quot;, overlay=true)t1 = time(timeframe.period, &quot;0000-0000&quot;)bgcolor(t1 ? color.blue : na) session = â€œ0000-0000:23456â€ å³24hï¼Œå»é™¤å‘¨å…­æ—¥ï¼Œè¿è¡Œç»“æœå¦‚ä¸‹ å¯ä»¥çœ‹åˆ°ï¼Œå‘¨ä¸€è‡³å‘¨äº”èƒŒæ™¯éƒ½å˜æˆäº†è“è‰²ï¼Œå› ä¸ºt1 ä¸åœ¨sessionçš„èŒƒå›´å†…çš„æ—¶å€™è¿”å›naå€¼ äº¤æ˜“åŒºé—´çš„æ ¼å¼æœ‰ 0000-0000:1234567 24å°æ—¶äº¤æ˜“ï¼Œæ—¶é—´ä»åˆå¤œ0ç‚¹å¼€å§‹ 0000-0000:23456 å·¥ä½œæ—¥24å°æ—¶äº¤æ˜“ 1700-1700ï¼š24å°æ—¶äº¤æ˜“ï¼Œæ—¶é—´ä»17ç‚¹å¼€å§‹ 0930-1700:146 äº¤æ˜“æ—¶é—´ä¸º09:30~17:00ï¼Œäº¤æ˜“æ—¶é—´åœ¨å‘¨æ—¥ï¼ˆ1ï¼‰ï¼Œå‘¨ä¸‰ï¼ˆ4ï¼‰ï¼Œå‘¨äº”ï¼ˆ6ï¼‰ 24x7 ç­‰ä»·äº 0000-0000:1234567 1234567// åˆ¤æ–­æ˜¯å¦ä¸º30minçš„æ–°æŸ±çº¿//@version=4study(&quot;new 30 min bar&quot;)is_newbar(res) =&gt; t = time(res) not na(t) and (na(t[1]) or t &gt; t[1])plot(is_newbar(&quot;30&quot;) ? 1 : 0) ç”¨åˆ°çš„å‡½æ•°å˜é‡å’Œç±»å‹ timeï¼šUNIXæ ¼å¼çš„å½“å‰kçº¿æ—¶é—´ timenowï¼šUNIXæ ¼å¼çš„å½“å‰æ—¶é—´ syminfo.timezoneï¼šæ—¶åŒº å½“å‰Kçº¿ç”¨åˆ°çš„å˜é‡ year/month/weekofyear dayofmonth dayofweekï¼ˆsunday,monday ç­‰ï¼‰ hour/minute/second åˆ›å»ºæ—¶é—´ timestamp(year, month, day, hour, minute) ç­–ç•¥ç¼–å†™backtesting &amp; forwardtestingstrategyè„šæœ¬æ˜¯å¯ä»¥äº§ç”Ÿäº¤æ˜“è®¢å•çš„Pine è„šæœ¬ã€‚åˆ©ç”¨strategy å¯ä»¥åšç­–ç•¥å›æµ‹ï¼ˆbacktestingï¼‰å’Œ æ¨¡æ‹Ÿäº¤æ˜“ï¼ˆforwardtestingï¼‰ æ— è®ºbacktesting è¿˜æ˜¯forwardtestingï¼Œè®¡ç®—éƒ½æ˜¯é»˜è®¤å‘ç”Ÿåœ¨Kçº¿æ”¶ç›˜çš„æ—¶å€™ï¼Œä½†æ˜¯åœ¨forwardtesting çš„æ—¶å€™ï¼Œå¯ä»¥é€‰æ‹©åœ¨æ¯ä¸€ä¸ªtickå‘ç”Ÿçš„æ—¶å€™ï¼Œéƒ½è¿è¡Œä¸€æ¬¡ã€‚ åšæ³•ä¸€æ˜¯è°ƒæ•´strategyçš„ Setting/Propertiesï¼Œæˆ–è€…ä¿®æ”¹ä»£ç ï¼Œæ·»åŠ strategy(... ,calc_on_every_tick=true ) ï¼Œæ­¤å¤–è¿˜å¯ä»¥é€‰æ‹©åœ¨æ¯ç¬”è®¢å•å®Œæˆä¹‹åè®¡ç®—strategy(... , calc_on_order_fills=true) ç»çºªå•†æ¨¡æ‹Ÿä»…ä»…åªæœ‰OHLCæ•°æ®çš„è¯ï¼ŒKçº¿å†…æ•°æ®çš„ç”Ÿæˆæœ‰ä¸€å¥—é€»è¾‘ï¼Œå¦‚æœæœ€é«˜ä»·æ›´æ¥è¿‘å¼€ç›˜ä»·ï¼Œç”Ÿæˆé¡ºåºæ˜¯ open-&gt;high-&gt;low-&gt;closeï¼Œæ­¤å¤–è¿˜å‡è®¾ä»·æ ¼æ˜¯æ²¡æœ‰gapsçš„ è®¢å•ç”Ÿæˆå‘½ä»¤strategy.entry è®¢å•ç”Ÿæˆå‡½æ•°è¿™æ˜¯è¿›å…¥å¸‚åœºçš„å‘½ä»¤ã€‚ å¦‚æœå…·æœ‰ç›¸åŒIDçš„è®¢å•å·²ç»æŒ‚èµ·ï¼Œåˆ™å¯ä¿®æ”¹è®¢å•ã€‚ å¦‚æœæ²¡æœ‰æŒ‡å®šIDçš„è®¢å•ï¼Œåˆ™ä¼šå‘å‡ºæ–°çš„è®¢å•ã€‚ è¦å–æ¶ˆ/åœç”¨é¢„æŒ‚å•ï¼Œåº”ä½¿ç”¨å‘½ä»¤strategy.cancelæˆ–strategy.cancel_allã€‚ ä¸å‡½æ•°strategy.orderç›¸æ¯”ï¼Œstrategy.entryåŠŸèƒ½å—é‡‘å­—å¡”å½±å“ï¼Œå¯ä»¥æ­£ç¡®åè½¬å¸‚åœºä½ç½®ã€‚ å¦‚æœâ€œLimitâ€å’Œâ€œstopâ€å‚æ•°å‡ä¸ºâ€œNaNâ€ï¼Œåˆ™è®¢å•ç±»å‹ä¸ºå¸‚åœºè®¢å•ã€‚ 1strategy.entry(id, long, qty, limit, stop, oca_name, oca_type, comment, when) â†’ void strategy.exit è®¢å•é€€å‡ºå‡½æ•°1strategy.exit(id, from_entry, qty, qty_percent, profit, limit, loss, stop, trail_price, trail_points, trail_offset, oca_name, comment, when) â†’ void è¿™æ˜¯ä¸€ä¸ªé€€å‡ºæŒ‡å®šè¿›åœºæˆ–æ•´ä¸ªå¸‚åœºåœ°ä½çš„å‘½ä»¤ï¼Œé‡ç‚¹åŒºåˆ†å®ƒå’Œstrategy.close çš„ä¸åŒ id(string): è®¢å•çš„æ ‡è¯†ç¬¦ã€‚ from_entry(string): è¿™é‡Œå¡«å…¥è¦å¹³ä»“çš„è®¢å•çš„æ ‡è¯†ç¬¦ï¼Œé»˜è®¤ä¸ºç©ºã€‚ qty: å¹³ä»“æ‰‹æ•°(å¼„æ¸…æ¥šåˆçº¦çš„å¤§å°) qty_percent: å¹³å°çš„æ¯”ä¾‹ profit: è·åˆ©ç‚¹æ•°(ä¸€å®šææ¸…æ¥šå•ä½æ˜¯ç‚¹è¿˜æ˜¯æ­¥) limit: ä¸profit ç›¸ä¼¼ï¼Œlimitçº¦å®šè·åˆ©çš„ä»·æ ¼ loss:æ­¢æŸç‚¹æ•° stop:ä¸loss ç›¸ä¼¼ï¼Œstopçº¦å®šæ­¢æŸçš„ä»·æ ¼ tail.*: æŒ‡æ˜è·Ÿè¸ªæŒ‡æ•° strategy.orderè¿™æ¡å‘½ä»¤å¯ä»¥ç”Ÿæˆå¼€ä»“ä¹Ÿå¯ä»¥ç”Ÿæˆå¹³ä»“å‘½ä»¤ï¼Œä½†æ˜¯å®ƒä¸å—é‡‘å­—å¡”å½±å“ã€‚å®ƒçš„ä½œç”¨å°±æ˜¯å¼¥è¡¥strategy.entry å’Œ strategy.exit å‡½æ•°çš„ä¸çµæ´»æ˜Ÿã€‚ å®ä¾‹ä¸‹é¢æ˜¯å‡ ä¸ªä¾‹å­ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬ç†è§£strategyå‡½æ•° ä¾‹1123456//@version=4strategy(&quot;revers demo&quot;)if bar_index &gt; 4000 strategy.entry(&quot;buy&quot;, strategy.long, 4, when=strategy.position_size &lt;= 0) strategy.entry(&quot;sell&quot;, strategy.short, 6, when=strategy.position_size &gt; 0)plot(strategy.equity) å½“ä»“ä½ä¸ºç©ºå¤´æˆ–è€…æ— å¤´å¯¸çš„è¯ï¼Œä¹°4ã€‚å½“ä»“ä½ä¸ºå¤šå¤´çš„è¯ï¼Œå–6ã€‚ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°entryä¸­buy æˆ–sell åœ¨äº¤æ˜“çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨å¹³ä»“ï¼Œå¹³æ‰åå‘çš„ä»“ä½ã€‚ä»“ä½åœ¨+4 â€“&gt; -6 å˜åŒ–ã€‚ ä¾‹21234567//@version=4strategy(&quot;Partial exit demo&quot;)if bar_index &gt; 6500 and bar_index &lt;6550 strategy.entry(&quot;buy&quot;, strategy.long, 40000, when=strategy.position_size &lt;= 0)strategy.exit(&quot;bracket1&quot;, &quot;buy&quot;, 20000, profit = 3000,loss = 3000)strategy.exit(&quot;bracket2&quot;, &quot;buy&quot;, profit=2000, loss=2000)plot(strategy.equity) ç›ˆäºæ›²çº¿ äº¤æ˜“é€»è¾‘ buyï¼šå½“ç©ºä»“æ—¶å€™ä¹°å…¥ï¼Œ40000ç¬”åˆçº¦ï¼ˆ40000ç¾é‡‘ï¼‰ bracket1ï¼šè®¾å®šå¹³ä»“å¯¹è±¡ä¸ºbuyæ ‡è¯†çš„äº¤æ˜“ï¼Œå¹³ä»“2000ç¾é‡‘ï¼Œæ­¢ç›ˆ300ç‚¹ï¼ˆå•ä½ä¸ºæ­¥ï¼Œ3000æ­¥=300ç‚¹ï¼‰ã€‚æ­¢æŸ300ç‚¹ bracket2ï¼šæ­¢ç›ˆæ­¢æŸ200ç‚¹ ä¸‹é¢ç»“åˆäº¤æ˜“æ¸…å•å…·ä½“åˆ†æ 1ï¼šç©ºä»“ä¹°å…¥4000ç¾é‡‘ 2ï¼šæ­¢æŸ200ç‚¹ï¼ŒäºæŸ20000 * 200 * 0.0001 = $ 400ï¼Œä»å›¾ä¸­å¯ä»¥çœ‹åˆ°æ˜¯bracket2 å…ˆæ­¢æŸ 3ï¼šä»·æ ¼ç»§ç»­å‘ä¸‹ï¼ŒäºæŸ300ç‚¹ï¼Œbracket1ç­–ç•¥è§¦å‘ï¼ŒäºæŸ$ 600 4,5,6:åŒä¸Šé€»è¾‘ é£é™©ç®¡ç†strategy.risk.* ä¸€ç³»åˆ—å‡½æ•°ï¼Œå¯ä»¥å¸®åŠ©è¿›è¡Œé£é™©ç®¡ç†ã€‚å½“é£é™©ç®¡ç†è§„åˆ™è¢«æ¿€æ´»çš„æ—¶å€™ï¼Œæ²¡æœ‰è®¢å•ä¼šç”Ÿæˆã€‚ 123456//@version=4strategy(&quot;multi risk demo&quot;, overlay=true, pyramiding=10, calc_on_order_fills = true)if year &gt; 2014 strategy.entry(&quot;LE&quot;, strategy.long)strategy.risk.max_intraday_filled_orders(5)strategy.risk.max_intraday_filled_orders(2) strategy.risk.max_intraday_filled_orders(2) é™åˆ¶ä¸€å¤©æˆäº¤çš„æœ€å¤§çš„äº¤æ˜“å•æ•°ï¼Œä¸€æ—¦è¾¾åˆ°ï¼Œæ‰€æœ‰æœªæˆäº¤è®¢å•å…¨éƒ¨å–æ¶ˆï¼Œæˆäº¤è®¢å•å…³é—­ã€‚å¹¶ä¸”ä¸€ç›´å…³é—­äº¤æ˜“ç›´åˆ°æœ¬äº¤æ˜“æ—¥ç»“æŸã€‚ ä¸Šå›¾ä¸­ï¼Œå½“ç¬¬äºŒç¬”äº¤æ˜“ç”Ÿæˆçš„æ—¶å€™ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸¤ç¬”äº¤æ˜“å…³é—­çš„æ—¶é—´ã€‚ å…¶ä½™çš„å‡½æ•°å‚è€ƒæ‰‹å†Œ æŒ‡æ ‡é‡ç»˜å†å²æ•°æ®ä»…ä»…åŒ…å«OHLCï¼Œä¸åŒ…å«çº¿å†…çš„è¿åŠ¨ã€‚è¿™ä¼šå¯¼è‡´çš„é—®é¢˜æ˜¯ï¼Œå†å²æ•°æ®ä¸Šçš„å›æµ‹å’Œå®æ—¶æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µã€‚ å¦å¤–ä¸€ä¸ªæ‹…å¿ƒæ˜¯ï¼Œæœªæ¥å‡½æ•°çš„ä½¿ç”¨ã€‚è¿™é‡Œå°¤å…¶è¦å…³æ³¨security å‡½æ•°ï¼Œæ­¤å‡½æ•°å¯èƒ½ä¼šé”™è¯¯çš„å¼•å…¥æœªæ¥çš„ä¿¡æ¯ã€‚ ç»˜å›¾Pine V4 ä¸­å­˜åœ¨ä¸¤ç§ç»˜å›¾ç±»å‹ï¼šlabel å’Œ lineã€‚ æ³¨ï¼šç”¨æˆ·çš„ç»˜å›¾å’Œ ç¼–ç¨‹ç»˜å›¾æ˜¯ä¸ä¸€æ ·çš„ï¼Œç¼–ç¨‹å¾—åˆ°çš„ç»˜å›¾æ˜¯ä¸èƒ½ç”¨é¼ æ ‡ä¿®æ”¹çš„ã€‚ å’ŒæŒ‡æ ‡ç»˜å›¾å‡½æ•°(plot,plotshape,plotchar) ä¸ä¸€æ ·çš„æ˜¯ï¼Œç»˜å›¾å‡½æ•°å¯ä»¥åœ¨å›¾è¡¨å³ä¾§æ²¡æœ‰Kçº¿çš„åœ°æ–¹ã€‚ label1label.new(x, y, text, xloc, yloc, color, style, textcolor, size) â†’ series[label] 1234//@version=4study(&quot;My Script&quot;, overlay=true)label.new(bar_index, high, style=label.style_none, text=&quot;x=&quot; + tostring(bar_index) + &quot;\\ny=&quot; + tostring(high)) xçš„ä½ç½®æ˜¯ç”¨bar_index æ ‡è¯†çš„ï¼Œæ­¤æ—¶xloc çš„é»˜è®¤å€¼ä¸ºxloc.barindex yçš„ä½ç½®æ˜¯æœ€é«˜ä»· xlocå–å€¼ï¼šxloc.bar_index(é»˜è®¤) å’Œ xloc.bar_time ylocå–å€¼ï¼š yloc.price ä¼ å…¥æ­¤å‡½æ•°ï¼Œéœ€è¦è¾“å…¥yå€¼ yloc.abovebar,yloc.belowbar å¯åŠ¨æ—¶ï¼Œyå€¼ä¼šå¤±æ•ˆã€‚æ ‡ç­¾åœ¨å›¾è¡¨ä¸Šéƒ¨æˆ–è€…ä¸‹éƒ¨ style: å¾ˆå¤šç§ï¼Œå¯èƒ½ç”¨åˆ°æ¯”è¾ƒå¤šçš„æœ‰label.style_noneï¼Œæ— åº•è‰² label.set_* ä¸€ç³»åˆ—å‡½æ•°å¯ä»¥ç”¨æ¥å¯¹å¯¹è±¡è¿›ä¸€æ­¥çš„ä¿®æ”¹ã€‚ line1line.new(x1, y1, x2, y2, xloc, extend, color, style, width) â†’ series[line] extend: extend.none/extend.right/extend.left","categories":[{"name":"é‡åŒ–","slug":"é‡åŒ–","permalink":"http://ppsteven.github.io/categories/%E9%87%8F%E5%8C%96/"},{"name":"Pine","slug":"é‡åŒ–/Pine","permalink":"http://ppsteven.github.io/categories/%E9%87%8F%E5%8C%96/Pine/"}],"tags":[{"name":"Pine","slug":"Pine","permalink":"http://ppsteven.github.io/tags/Pine/"},{"name":"TradingView","slug":"TradingView","permalink":"http://ppsteven.github.io/tags/TradingView/"},{"name":"é‡åŒ–","slug":"é‡åŒ–","permalink":"http://ppsteven.github.io/tags/%E9%87%8F%E5%8C%96/"}]},{"title":"Pine Script å­¦ä¹ ç¬”è®°","slug":"Pine Script å­¦ä¹ ç¬”è®°","date":"2019-10-31T14:03:08.000Z","updated":"2020-02-15T18:08:45.074Z","comments":false,"path":"2019/10/31/Pine Script å­¦ä¹ ç¬”è®°/","link":"","permalink":"http://ppsteven.github.io/2019/10/31/Pine%20Script%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","excerpt":"Pine Script å­¦ä¹ ç¬”è®°â€”â€”åŸºç¡€è¯­æ³•ç¯‡ï¼ˆä¸€ï¼‰ç®€ä»‹é‡åŒ–äº¤æ˜“å¹³å° TrendingView æ˜¯ä¸€ä¸ªæ”¯æŒå¤šç§èµ„äº§çš„æŠ•èµ„å¹³å°ï¼Œå¾ˆå¤šäººåœ¨ä¸Šé¢åˆ†äº«å¯¹äºè‚¡ç¥¨ï¼Œå¤–æ±‡ï¼Œæ•°æ®è´§å¸ç­‰èµ„äº§çš„æŠ•èµ„è§‚ç‚¹ï¼Œéš¾å¾—çš„æ˜¯åœ¨ä¸Šé¢èƒ½æ‰¾åˆ°å¾ˆå¤šäººçš„äº¤æ˜“ç­–ç•¥ã€‚ TrendingView ä½¿ç”¨çš„æ˜¯è‡ªå·±å¼€å‘çš„Pine è¯­è¨€ä½œä¸ºè„šæœ¬ï¼Œè¿™ä¸€ç‚¹å’ŒMT4 å¼€å‘çš„mql4 å¾ˆåƒã€‚ç”¨æˆ·å¯ä»¥è‡ªå·±ç¼–å†™è„šæœ¬å’Œç­–ç•¥ï¼Œå¹¶ä¸å…¶ä»–äººåˆ†äº«ã€‚Pine ç›´è§‚ç»™æˆ‘çš„å°è±¡æ¯”Mql4 æ›´åŠ ç®€å•ï¼Œæ›´åŠ å…³æ³¨äºç­–ç•¥æœ¬èº«ï¼Œè€Œä¸æ˜¯ç¼–ç¨‹æŠ€å·§ã€‚ æ­¤å¤–ï¼ŒPineè¯­è¨€ç¼–è¾‘å™¨æ²¡æœ‰é‚£ä¹ˆå¼ºå¤§çš„debug åŠŸèƒ½ï¼Œè¿™å¯¹äºä¸€å¼€å§‹ä¸Šæ‰‹ç»ƒä¹ æ¥è¯´ï¼Œä¸æ˜¯é‚£ä¹ˆæ–¹ä¾¿ã€‚ä¸è¿‡å®ƒä¸€ç›´åœ¨æ›´æ–°ï¼Œå‘å±•çš„å¾ˆå¿«ã€‚ TrendingView å¯¹æ¥äº†å¾ˆå¤šç»çºªå•†ï¼Œä½¿å¾—å®ƒæ”¯æŒçš„äº¤æ˜“å“ç§å¾ˆä¸°å¯Œï¼Œè€Œä¸”å®ƒçš„å›¾è¡¨åŠŸèƒ½å¾ˆå¼ºå¤§ã€‚ ä¸‹é¢è®°å½•ä¸€ä¸‹è‡ªå·±å­¦ä¹ Pine è„šæœ¬çš„ä¸€äº›åŸºç¡€çš„ç¬”è®°ï¼Œæƒå½“å¤‡å¿˜ã€‚ä¸»è¦å†…å®¹éƒ½å‚è€ƒè‡ªPine çš„è„šæœ¬æ–‡æ¡£","text":"Pine Script å­¦ä¹ ç¬”è®°â€”â€”åŸºç¡€è¯­æ³•ç¯‡ï¼ˆä¸€ï¼‰ç®€ä»‹é‡åŒ–äº¤æ˜“å¹³å° TrendingView æ˜¯ä¸€ä¸ªæ”¯æŒå¤šç§èµ„äº§çš„æŠ•èµ„å¹³å°ï¼Œå¾ˆå¤šäººåœ¨ä¸Šé¢åˆ†äº«å¯¹äºè‚¡ç¥¨ï¼Œå¤–æ±‡ï¼Œæ•°æ®è´§å¸ç­‰èµ„äº§çš„æŠ•èµ„è§‚ç‚¹ï¼Œéš¾å¾—çš„æ˜¯åœ¨ä¸Šé¢èƒ½æ‰¾åˆ°å¾ˆå¤šäººçš„äº¤æ˜“ç­–ç•¥ã€‚ TrendingView ä½¿ç”¨çš„æ˜¯è‡ªå·±å¼€å‘çš„Pine è¯­è¨€ä½œä¸ºè„šæœ¬ï¼Œè¿™ä¸€ç‚¹å’ŒMT4 å¼€å‘çš„mql4 å¾ˆåƒã€‚ç”¨æˆ·å¯ä»¥è‡ªå·±ç¼–å†™è„šæœ¬å’Œç­–ç•¥ï¼Œå¹¶ä¸å…¶ä»–äººåˆ†äº«ã€‚Pine ç›´è§‚ç»™æˆ‘çš„å°è±¡æ¯”Mql4 æ›´åŠ ç®€å•ï¼Œæ›´åŠ å…³æ³¨äºç­–ç•¥æœ¬èº«ï¼Œè€Œä¸æ˜¯ç¼–ç¨‹æŠ€å·§ã€‚ æ­¤å¤–ï¼ŒPineè¯­è¨€ç¼–è¾‘å™¨æ²¡æœ‰é‚£ä¹ˆå¼ºå¤§çš„debug åŠŸèƒ½ï¼Œè¿™å¯¹äºä¸€å¼€å§‹ä¸Šæ‰‹ç»ƒä¹ æ¥è¯´ï¼Œä¸æ˜¯é‚£ä¹ˆæ–¹ä¾¿ã€‚ä¸è¿‡å®ƒä¸€ç›´åœ¨æ›´æ–°ï¼Œå‘å±•çš„å¾ˆå¿«ã€‚ TrendingView å¯¹æ¥äº†å¾ˆå¤šç»çºªå•†ï¼Œä½¿å¾—å®ƒæ”¯æŒçš„äº¤æ˜“å“ç§å¾ˆä¸°å¯Œï¼Œè€Œä¸”å®ƒçš„å›¾è¡¨åŠŸèƒ½å¾ˆå¼ºå¤§ã€‚ ä¸‹é¢è®°å½•ä¸€ä¸‹è‡ªå·±å­¦ä¹ Pine è„šæœ¬çš„ä¸€äº›åŸºç¡€çš„ç¬”è®°ï¼Œæƒå½“å¤‡å¿˜ã€‚ä¸»è¦å†…å®¹éƒ½å‚è€ƒè‡ªPine çš„è„šæœ¬æ–‡æ¡£ è„šæœ¬ç»“æ„æŒ‡æ˜ç”¨çš„Pine è„šæœ¬ç‰ˆæœ¬ 1//@version=4 Pine å¯ä»¥åˆ†ä¸ºstudyè„šæœ¬ å’Œ strategy è„šæœ¬ï¼ˆæŒ‡æ ‡&amp;ç­–ç•¥ï¼‰study è„šæœ¬å¿…é¡»åŒ…å« plot,plotshape,barcolor,line.new ç­‰è¾“å‡ºstrategy è„šæœ¬åŒ…å« strategy.* å³äº¤æ˜“å‡½æ•° æ¢è¡Œ Line wrapping1234567891011//ä¾‹å­1 æ¢è¡Œéœ€è¦ç©ºæ ¼a = open+ high+ low// ä¾‹å­2 æ¢è¡Œä¸­ä¸èƒ½æœ‰æ³¨é‡Ša = open+ high // æ­¤å¤„åŠ æ³¨é‡Šä¼šå‡ºé—®é¢˜// ä¾‹å­3 å‡½æ•°å†…æ¢è¡Œï¼Œç©ºè¡Œå¿…é¡»è¦è¶…è¿‡ä¸€ä¸ªTabï¼ˆæˆ–è€…4ä¸ªç©ºæ ¼ï¼‰label.new(bar_index, na, yloc=yloc.abovebar, text=t, color=hist ? color.green : color.red)// è¿™é‡Œç©ºæ ¼å¿…é¡»è¶…è¿‡4ä¸ª è¿ç®—ç¬¦ ç®—æœ¯ï¼š + - * / % 1/2 = 01/2.0 = 0.5 æ¯”è¾ƒ: == != é€»è¾‘: not and or ä¸‰å…ƒè¿ç®—ç¬¦ï¼š condition ? result1 : result2 iff(condition, result1, result2) 1æœ‰æˆ¿ï¼Ÿå«:æœ‰è½¦ï¼Ÿ: å«:å¸…ï¼Ÿå«: ä¸å« [] è¿ç®—ç¬¦(History reference operator)close ä»£è¡¨æœ€æ–°çš„ä»·æ ¼ï¼Œclose[1]ä»£è¡¨äº†å†å²ä»·æ ¼ã€‚ 1close = close[0] //æ˜¾ç¤ºçš„æ˜¯æœ€æ–°çš„æ”¶ç›˜ä»· é™¤æ­¤ä¹‹å¤–ï¼ŒPineè„šæœ¬é‡Œé¢è¿˜æœ‰ä¸€ä¸ªå˜é‡ bar_indexï¼Œè®°å½•ç€barçš„æ•°ç›®ï¼Œç¼–å·è‡ªå·¦å‘å³ï¼Œä»0å¼€å§‹ã€‚bar_index = (baræ•°é‡)N-1ã€‚ ä¸ºä»€ä¹ˆè¿è¡Œclose[bar_index-1] â‰  close[0] ?è€Œclose[bar_index-1] ä¼šå‡ºé”™ å‡½æ•°Pine è„šæœ¬ä¸­åŒ…å«äº†å¤§é‡çš„è‡ªå»ºå‡½æ•°ï¼Œç”¨æˆ·è¿˜å¯ä»¥è‡ªå®šä¹‰å‡½æ•°ã€ å•è¡Œå‡½æ•° 1f(x,y) =&gt; x+y Pine Script çš„å‡½æ•°ä¸æ”¯æŒé€’å½’ å³ï¼Œä¸å…è®¸åœ¨å‡½æ•°ä¸­å†æ¬¡è°ƒç”¨è‡ªå·±æœ¬èº« å¤šè¡Œå‡½æ•° 1234geom_average(x, y) =&gt; a = x*x b = y*y sqrt(a + b) Pine Script éœ€è¦ï¼ˆä¸€ä¸ªTab æˆ–è€…4ç©ºæ ¼ï¼ŒTrendingView ä¼šè‡ªåŠ¨ç”¨4ä¸ªç©ºæ ¼æ¥æ›¿æ¢æ‰Tabï¼‰æ¥åˆ’å®šå‡½æ•°çš„èŒƒå›´ æœ€åä¸€è¡Œçš„è¡¨è¾¾å¼æˆ– å˜é‡ä½œä¸ºå‡½æ•°çš„è¾“å‡ºç»“æœ è¾“å‡º&gt;=2 123456fun(x,y) =&gt; a = x+y b = x-y retrun [a,b]// è°ƒç”¨å‡½æ•°[a,b] =fun(3,2) å‡½æ•°çš„æ³¨æ„äº‹é¡¹å½“åœ¨å‡½æ•°å—ä¸­ä½¿ç”¨å‡½æ•°æˆ–è€…å†å²æ•°æ®ä¿¡æ¯çš„æ—¶å€™è¦æ³¨æ„ã€‚å› ä¸ºæ‰€ä½¿ç”¨çš„å†å²ä¿¡æ¯æ˜¯æ¯ä¸€æ¬¡è¿ç»­è°ƒç”¨ç”Ÿæˆçš„ã€‚ å¦‚æœå‡½æ•°å¹¶ä¸æ˜¯åœ¨æ¯ä¸€æ ¹æŸ±çº¿ä¸Šéƒ½è°ƒç”¨ï¼Œé‚£ä¹ˆæ•°æ®ç”Ÿæˆå°±ä¼šå‡ºç°é”™è¯¯ã€‚ ä¾‹1 123456// å®šä¹‰ä¸¤ä¸ªå‡½æ•°f1,f2f1(a) =&gt; a[1]f2() =&gt; close[1]// è¯´æ˜ä¸‹åˆ—ç”¨æ³•çš„å®é™…æ„ä¹‰f1(close) ç­‰ä»·äº close[2]f2() ç­‰ä»·äº close[1] f1 ä¼ å…¥çš„close åºåˆ—ï¼Œéœ€è¦åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨åæ‰èƒ½ç”Ÿæˆï¼Œæ‰€ä»¥f1 çš„ ä»·æ ¼ä¿¡æ¯å®é™…ä¸Šæ¯”f2 æ™šä¸€å¤© å˜é‡å£°æ˜&amp;è¯­å¥statementvar Pine è¯­è¨€ä¸­å˜é‡å®šä¹‰çš„æ–¹å¼æœ‰ä¸¤ç§ï¼š = å’Œ var 12345a = 1 // aä¸ºæ•´å½¢float a = 1 // aä¸ºæµ®ç‚¹å‹var a = 0var int a = 0b = na //å‡ºé”™ å˜é‡å®šä¹‰çš„æ—¶å€™ï¼Œéœ€è¦æŒ‡æ˜å˜é‡çš„ç±»å‹(æˆ–è€… ç­‰å¼å³ä¾§è¡¨è¾¾å¼èƒ½æŒ‡æ˜ç±»å‹äº¦å¯) na æ²¡æœ‰ç‰¹å®šçš„ç±»å‹ï¼Œæ‰€ä»¥èµ‹å€¼æ—¶ä¼šå‡ºé”™ var å…³é”®è¯ var æ˜¯ç”¨äºåˆ†é…å’Œä¸€æ¬¡æ€§åˆå§‹åŒ–å˜é‡çš„å…³é”®è¯ã€‚ ä¸å«var å…³é”®è¯çš„å˜é‡åœ¨æ¯æ¬¡æ•°æ®æ›´æ–°çš„æ—¶å€™éƒ½ä¼šè¦†ç›–å˜é‡çš„å€¼ã€‚ä½¿ç”¨äº†var å…³é”®è¯çš„å˜é‡ï¼Œåœ¨æ•°æ®æ›´æ–°ä¸­ï¼Œå¯ä»¥â€œä¿æŒçŠ¶æ€â€ã€‚ä¸¾ä¾‹ 12345678910111213141516//@version=4study(&quot;Var keyword example&quot;)var a = closevar b = 0.0var c = 0.0var green_bars_count = 0if close &gt; open var x = close b := x green_bars_count := green_bars_count + 1 if green_bars_count &gt;= 10 var y = close c := yplot(a)plot(b)plot(c) å˜é‡ â€˜aâ€™ ä¿æŒç³»åˆ—ä¸­æ¯ä¸ªæŸ±çº¿çš„ç¬¬ä¸€æ ¹æŸ±çº¿çš„æ”¶ç›˜ä»·ã€‚ å˜é‡ â€˜bâ€™ä¿æŒç³»åˆ—ä¸­ç¬¬ä¸€ä¸ªâ€œç»¿è‰²â€ä»·æ ¼æ£’çš„æ”¶ç›˜ä»·ã€‚ å˜é‡ â€˜câ€™ä¿æŒç³»åˆ—ä¸­ç¬¬åä¸ªâ€œç»¿è‰²â€æ¡çš„æ”¶ç›˜ä»·ã€‚ å³a,b,c éƒ½æ˜¯ä¸€ä¸ªå¸¸æ•°ã€‚ å»é™¤var çš„è¯ï¼Œa,b,c ä¼šéšç€ä»·æ ¼å˜åŒ–è€Œå˜åŒ– if è¯­å¥ 12345678910// This code compilesx = if close &gt; open closeelse open// This code doesn&apos;t compilex = if close &gt; open closeelse &quot;open&quot; éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸pythonä¸åŒï¼ŒPineè¦æ±‚ï¼Œthen å’Œ elseè¯­å¥è¿”å›çš„å€¼çš„ç±»å‹æ˜¯ç›¸åŒçš„ã€‚åœ¨ä¸Šé¢çš„ç¬¬äºŒä¸ªä¾‹å­ä¸­ï¼Œclose å’Œ â€œopenâ€ ä¸€ä¸ªæ˜¯float Seriesï¼Œå¦ä¸€ä¸ªæ˜¯stringï¼Œä¸åŒç±»å‹çš„è¯ï¼Œç¼–è¯‘ä¼šå‡ºé”™ã€‚ 1234 x = if close &gt; open close// If current close &gt; current open, then x = close.// Otherwise the x = na. if è¯­å¥ä¸­å¯ä»¥å¿½ç•¥elseï¼Œä½†æ˜¯ç³»ç»Ÿä¼šé»˜è®¤èµ‹å€¼ï¼ˆna,false,â€â€ï¼‰ for è¯­å¥12for i = 1 to length-1 sum := sum + price[i] æ‰§è¡Œæ¨¡å‹Pineä»£ç æ˜¯æ ¹æ®ä»·æ ¼ä¿¡æ¯è®¡ç®—çš„ã€‚ä½†æ˜¯ä»·æ ¼ä¿¡æ¯å¹¶ä¸æ˜¯å®Œæ•´åŠ è½½çš„ï¼Œç”¨æˆ·å¯ä»¥ä¸€ç›´å‘å·¦æ»‘åŠ¨å›¾è¡¨ï¼Œç›´åˆ°æœ€æ—©çš„ä¸€æ ¹æŸ±å­ï¼ˆPro ç”¨æˆ·å¯ä»¥åœ¨å›¾è¡¨ä¸ŠåŠ è½½10000å·¦å³ï¼Œå…è´¹ç”¨æˆ·å¯ä»¥åŠ è½½5000æ ¹æŸ±å­ï¼‰ å®æ—¶æ•°æ®çš„è®¡ç®—PineæŒ‡æ ‡è®¡ç®—å®æ—¶æ•°æ®çš„æ—¶å€™å’Œè®¡ç®—å†å²æ•°æ®ç•¥æœ‰ä¸åŒï¼Œå› ä¸ºå®æ—¶æ•°æ®ä¼šæœ‰addtional commit(?)å’Œrollback action(?) åœ¨å®æ—¶æ•°æ®çš„å¤„ç†è¿‡ç¨‹ä¸­ï¼ŒæŸ±çº¿çš„æ¯ä¸€æ¬¡å˜åŠ¨éƒ½ä¼šå¼•èµ·Pine æŒ‡æ ‡çš„è®¡ç®— rollback : åœ¨æ¯ä¸€æ ¹æŸ±çº¿æ›´æ–°æ—¶å‘ç”Ÿ commit : åœ¨æ¯ä¸€æ ¹æŸ±çº¿å…³é—­æ—¶å‘ç”Ÿ å¯¹äºåˆ¤æ–­æŸ±çº¿çš„çŠ¶æ€ï¼ŒPineä¸­æœ‰ä¸€ç³»åˆ—çš„è‡ªå»ºå‡½æ•° barstate.* æ¥æ˜¾ç¤ºå½“å‰æŸ±çº¿çš„çŠ¶æ€ã€‚","categories":[{"name":"é‡åŒ–","slug":"é‡åŒ–","permalink":"http://ppsteven.github.io/categories/%E9%87%8F%E5%8C%96/"},{"name":"Pine","slug":"é‡åŒ–/Pine","permalink":"http://ppsteven.github.io/categories/%E9%87%8F%E5%8C%96/Pine/"}],"tags":[{"name":"Pine","slug":"Pine","permalink":"http://ppsteven.github.io/tags/Pine/"},{"name":"TradingView","slug":"TradingView","permalink":"http://ppsteven.github.io/tags/TradingView/"},{"name":"é‡åŒ–","slug":"é‡åŒ–","permalink":"http://ppsteven.github.io/tags/%E9%87%8F%E5%8C%96/"}]},{"title":"Hexo åšå®¢æ­å»º:ä¸ªæ€§ç¯‡","slug":"hexo-blog-build-advanced","date":"2019-10-27T13:46:00.000Z","updated":"2020-01-21T09:09:01.089Z","comments":true,"path":"2019/10/27/hexo-blog-build-advanced/","link":"","permalink":"http://ppsteven.github.io/2019/10/27/hexo-blog-build-advanced/","excerpt":"é€šè¿‡ä¸Šä¸€ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬å·²ç»æ­å»ºå¥½äº†ä¸€ä¸ªåšå®¢çš„åŸºæœ¬åŠŸèƒ½ï¼Œå·²ç»å¯ä»¥å¼€å§‹ç¼–å†™åšå®¢äº†ã€‚ä¸‹é¢æˆ‘ä»¬ç®€å•å†™ä¸€ç‚¹Hexoçš„ç¾åŒ–é…ç½®","text":"é€šè¿‡ä¸Šä¸€ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬å·²ç»æ­å»ºå¥½äº†ä¸€ä¸ªåšå®¢çš„åŸºæœ¬åŠŸèƒ½ï¼Œå·²ç»å¯ä»¥å¼€å§‹ç¼–å†™åšå®¢äº†ã€‚ä¸‹é¢æˆ‘ä»¬ç®€å•å†™ä¸€ç‚¹Hexoçš„ç¾åŒ–é…ç½® æ–‡ç« é¡µä¸ªæ€§é…ç½®ä¸»é¢˜ç›®å½•ä¸‹çš„ themes\\next_config.yml æ–‡ä»¶è´Ÿè´£ä¸ä¸»é¢˜ç›¸å…³çš„é…ç½®ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ä¿®æ”¹è¯¥æ–‡ä»¶æ¥è‡ªå®šä¹‰ä¸ä¸»é¢˜ç›¸å…³çš„å†…å®¹æˆ–åŠŸèƒ½ï¼Œä¿®æ”¹ååˆ·æ–°æµè§ˆå™¨å³å¯å³æ—¶ç”Ÿæ•ˆã€‚ ç›®å½•å¯¼èˆªè®¾ç½®åŸºç¡€é…ç½®themes\\next\\_config.yml 123456789# Table Of Contents in the Sidebartoc: enable: true # Automatically add list number to toc. number: true # If true, all words will placed on next lines if header width longer then sidebar width. wrap: false å±•å¼€/éšè—ç›®å½•å±‚çº§é»˜è®¤æƒ…å†µä¸‹ï¼Œnext çš„ç›®å½•æ˜¯å¤šçº§æŠ˜å çš„ï¼Œé˜…è¯»æ—¶åªä¼šå±•å¼€å½“å‰ç›®å½•åˆ†æ”¯ã€‚æˆ‘ä»¬å¸Œæœ›ç›®å½•å®Œå…¨å±•å¼€ï¼ŒåŒæ—¶ä¸ºäº†é¿å…é•¿ç›®å½•ç»“æ„ï¼Œçº¦å®šåªå±•å¼€åˆ°ä¸‰çº§ç›®å½•ã€‚ä¸‰çº§ä»¥ä¸‹çš„ç›®å½•ä¼šè¢«éšè—ï¼Œåªæœ‰å½“æ–‡ç« é˜…è¯»åˆ°çš„æ—¶å€™æ‰ä¼šå±•å¼€ã€‚ themes\\next\\source\\css_custom\\custom.styl 1234//TOCç›®å½•é»˜è®¤å±•å¼€ä¸‰çº§ï¼Œè¿™é‡Œæ˜¯æŒ‡Markdownæ ‡ç­¾çš„h3.post-toc .nav .nav-level-2&gt;.nav-child &#123; display: block;&#125; è‹¥æ˜¯å¸Œæœ›ä¸‰çº§ä»¥ä¸‹çš„ç›®å½•å®Œå…¨è¢«éšè— 1234//TOCç›®å½•é»˜è®¤åªæ˜¾ç¤ºä¸¤çº§ç›®å½•.nav-level-2 &gt; .nav-child &#123; display: none !important;&#125; ç¾åŒ–å­—ä½“ç¾åŒ–åœ¨ Google Fonts ä¸Šæ‰¾åˆ°å¿ƒä»ªçš„å­—ä½“ï¼Œç„¶ååœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­ä¸ºä¸åŒçš„åº”ç”¨åœºæ™¯é…ç½®å­—ä½“ï¼Œæˆ‘ä»¬è¿™é‡Œç›´æ¥ä½¿ç”¨åˆ«äººé…ç½®å¥½çš„å­—ä½“ï¼šåˆ«äººçš„å­—ä½“ 12345678910111213141516171819202122232425262728293031# themes\\next\\_config.ymlfont: enable: true # å¤–é“¾å­—ä½“åº“åœ°å€ï¼Œä¾‹å¦‚ //fonts.googleapis.com (é»˜è®¤å€¼) host: # å…¨å±€å­—ä½“ï¼Œåº”ç”¨åœ¨ body å…ƒç´ ä¸Š global: external: true family: Monda # æ ‡é¢˜å­—ä½“ (h1, h2, h3, h4, h5, h6) headings: external: true family: Roboto Slab # æ–‡ç« å­—ä½“ posts: external: true family: # Logo å­—ä½“ logo: external: true family: # ä»£ç å­—ä½“ï¼Œåº”ç”¨äº code ä»¥åŠä»£ç å— codes: external: true family: æ ‡ç­¾å›¾æ ‡ç¾åŒ–é»˜è®¤æƒ…å†µä¸‹æ ‡ç­¾å‰ç¼€æ˜¯ # å­—ç¬¦ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ä¿®æ”¹ä¸»é¢˜æºç å°†æ ‡ç­¾çš„å­—ç¬¦å‰ç¼€æ”¹ä¸ºå›¾æ ‡å‰ç¼€ åœ¨æ–‡ç« å¸ƒå±€æ¨¡æ¿ä¸­æ‰¾åˆ°æ–‡æœ«æ ‡ç­¾ç›¸å…³ä»£ç æ®µï¼Œå°† # æ¢æˆ &lt;i class=&quot;fa fa-tags&quot;&gt;&lt;/i&gt; å³å¯ï¼š 1234567891011# themes\\next\\layout\\_macro\\post.swig &lt;footer class=\"post-footer\"&gt; &#123;% if post.tags and post.tags.length and not is_index %&#125; &lt;div class=\"post-tags\"&gt; &#123;% for tag in post.tags %&#125;- &lt;a href=\"&#123;&#123; url_for(tag.path) &#125;&#125;\" rel=\"tag\"&gt;# &#123;&#123; tag.name &#125;&#125;&lt;/a&gt;+ &lt;a href=\"&#123;&#123; url_for(tag.path) &#125;&#125;\" rel=\"tag\"&gt;&lt;i class=\"fa fa-tags\"&gt;&lt;/i&gt; &#123;&#123; tag.name &#125;&#125;&lt;/a&gt; &#123;% endfor %&#125; &lt;/div&gt; &#123;% endif %&#125; ... &lt;/footer&gt;","categories":[{"name":"ç”µè„‘åŸºæœ¬é…ç½®","slug":"ç”µè„‘åŸºæœ¬é…ç½®","permalink":"http://ppsteven.github.io/categories/%E7%94%B5%E8%84%91%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"http://ppsteven.github.io/tags/Hexo/"}]},{"title":"Hexo åšå®¢æ­å»ºï¼šåŸºç¡€ç¯‡","slug":"hexo-blog-build-basic","date":"2019-10-27T13:46:00.000Z","updated":"2020-01-21T04:15:46.698Z","comments":true,"path":"2019/10/27/hexo-blog-build-basic/","link":"","permalink":"http://ppsteven.github.io/2019/10/27/hexo-blog-build-basic/","excerpt":"Hexo æ˜¯ä¸€æ¬¾åŸºäºnode.js çš„é™æ€åšåº“æ¡†æ¶ï¼Œè€Œä¸”å¯ä»¥æ–¹ä¾¿çš„æ‰˜ç®¡åœ¨Github ä¸Šï¼Œ è¿™é‡Œç®€å•è®°å½•ä¸€ä¸‹Hexo çš„å®‰è£…é…ç½®è¿‡ç¨‹ã€‚ æœ¬ç¯‡åšå®¢ç®—æ˜¯Hexoåšå®¢æ­å»ºçš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œä»¥åä¼šé™†ç»­å†™å‡ ç¯‡ä¼˜åŒ–çš„æ–‡ç« ã€‚","text":"Hexo æ˜¯ä¸€æ¬¾åŸºäºnode.js çš„é™æ€åšåº“æ¡†æ¶ï¼Œè€Œä¸”å¯ä»¥æ–¹ä¾¿çš„æ‰˜ç®¡åœ¨Github ä¸Šï¼Œ è¿™é‡Œç®€å•è®°å½•ä¸€ä¸‹Hexo çš„å®‰è£…é…ç½®è¿‡ç¨‹ã€‚ æœ¬ç¯‡åšå®¢ç®—æ˜¯Hexoåšå®¢æ­å»ºçš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œä»¥åä¼šé™†ç»­å†™å‡ ç¯‡ä¼˜åŒ–çš„æ–‡ç« ã€‚ ä»0åˆ°1ï¼Œå¿«é€Ÿæ­å»ºhexoåšå®¢ä¸‹è½½node.js å®˜ç½‘ä¸‹è½½LTSç‰ˆæœ¬ï¼Œç›´æ¥å®‰è£…ã€‚Hexo æ˜¯ä¾èµ–äºNode.js å’Œ git å·¥å…·ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦å®‰è£…node.js ï¼Œç„¶ååˆ©ç”¨npmå»å®‰è£…ä¸€äº›å¿…è¦çš„æ’ä»¶ã€‚ å®‰è£…hexoæ³¨æ„ï¼šåˆ‡æ¢ä¸º root è´¦å·æ“ä½œï¼Œåˆ‡æ¢æ·˜å®æº cnpm,ä¼šæ›´åŠ å¿«npmçš„é€Ÿåº¦ 1npm install -g cnpm --registry=https://registry.npm.taobao.org å®‰è£…hexo cnpm install hexo-cli -g å®‰è£…å®Œåç”¨hexo -v æŸ¥çœ‹ä¸€ä¸‹æ˜¯å¦å®‰è£…æˆåŠŸ å¯åŠ¨hexoåœ¨ç›®å½•ä¸‹åˆ›å»º blog æ–‡ä»¶å¤¹ mkdir blog ,è¿›å…¥ cd blog åˆå§‹åŒ–hexo 1hexo init å‡ºç° INFO Start blogging with Hexo! è¡¨ç¤ºå®‰è£…å®Œæˆ å¯åŠ¨hexo æœ¬åœ°å¯åŠ¨çš„åšå®¢ä¼šåœ¨localhost:4000ä¸­å¯åŠ¨ï¼Œç”¨æˆ·åœ¨æœ¬åœ°æ˜¯æ‰¾ä¸åˆ°ç›¸å¯¹åº”çš„Webèµ„æºç›®å½•ã€‚markdownæ–‡ä»¶ä¿®æ”¹å®Œåå³ä¼šè°ƒç”¨hexoä¸­çš„å¼•æ“è‡ªåŠ¨æ¸²æŸ“ã€‚ 1hexo server/s æ¸…ç©ºhexo 1hexo ç”Ÿæˆhexo è¿™ä¸€æ­¥ä¼šç”Ÿæˆå¯¹åº”publicæ–‡ä»¶å¤¹ï¼Œå…¶ä¸­åŒ…å«äº†é¡µé¢å¯¹åº”çš„HTMLæ–‡ä»¶ï¼Œæœªæ¥æˆ‘ä»¬éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šçœ‹åˆ°çš„å°±æ˜¯publicæ–‡ä»¶å¤¹ä¸­çš„å†…å®¹ã€‚ 1hexo generate / hexo g ç¬¬ä¸€ç¯‡åšå®¢1hexo new post &apos;my first blog&apos; è¯¥å‘½ä»¤ä¼šåœ¨ /Users/YourUserName/blog/source/_posts/ æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆå¯¹åº”çš„ mdæ–‡ä»¶ æ¨¡æ¿æ–‡ä»¶åœ¨./scaffolds/post.mdä¸­æ‰¾åˆ°ã€‚ Github Page éƒ¨ç½²ä¼ ç»Ÿçš„åšå®¢æ­å»ºæˆæœ¬éå¸¸é«˜ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦è‡ªå·±ç§Ÿç”¨æœåŠ¡å™¨ï¼Œè´­ä¹°åŸŸåã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥å°†æˆ‘ä»¬çš„ä»£ç æ‰˜ç®¡åˆ°githubä»“åº“ä¸­ï¼Œå¹¶åˆ©ç”¨Github Page ä½œä¸ºæˆ‘ä»¬åšå®¢çš„é¡µé¢ï¼ˆåŒæ ·Githubä¹Ÿæä¾›äº†å¯¹åº”çš„åŸŸåï¼‰ ç¬¬ä¸€æ­¥ï¼šæ–°å»ºä»“åº“ åå­—å¿…é¡»ä¸ºè‡ªå·±çš„ç”¨æˆ·å+.github.io å¦‚ PPsteven.github.io ç¬¬äºŒæ­¥ï¼šå®‰è£…git æ’ä»¶git æ’ä»¶å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ–¹ä¾¿çš„æŠŠæˆ‘ä»¬çš„ä¿®æ”¹æäº¤åˆ°æˆ‘ä»¬çš„ä»“åº“ä¸­ï¼Œæ˜¯ä¸€ä¸ªå¾ˆæ–¹ä¾¿çš„æ’ä»¶ã€‚ 1cnpm install --save hexo-deployer-git ç¬¬ä¸‰æ­¥ï¼šåœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä»“åº“ä¿¡æ¯åœ¨é…ç½®æ–‡ä»¶_config.ymlä¸­æ‰¾åˆ°å¦‚ä¸‹ä»£ç ï¼Œæ·»åŠ repo ä¿¡æ¯å’Œ branch ä¿¡æ¯ 123456# Deployment## Docs: https://hexo.io/docs/deployment.htmldeploy: type: git repo: https://github.com/PPsteven/PPsteven.github.io.git # github ä»“åº“åœ°å€ branch: master # æäº¤åˆ°çš„åˆ†æ”¯ ç¬¬å››æ­¥ï¼šéƒ¨ç½²hexo123hexo clean #ä¼šæ¸…é™¤ç¼“å­˜æ–‡ä»¶db.jsonåŠä¹‹å‰ç”Ÿæˆçš„é™æ€æ–‡ä»¶å¤¹publicï¼›hexo g #ä¼šé‡æ–°ç”Ÿæˆé™æ€æ–‡ä»¶å¤¹publicï¼›hexo deploy/ hexo d #å› ä¸ºä¹‹å‰å·²ç»å®‰è£…äº†æ’ä»¶å¹¶ä¸”åœ¨åšå®¢é…ç½®æ–‡ä»¶ä¸­ä¹Ÿé…ç½®å¥½äº†ï¼Œæ‰€ä»¥è¿™ä¸ªå‘½ä»¤ä¼šåœ¨åšå®¢æ ¹ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª.deploy_gitçš„æ–‡ä»¶å¤¹ï¼Œå¹¶ æŠŠæœ¬åœ°ç”Ÿæˆçš„é™æ€æ–‡ä»¶éƒ¨ç½²åˆ°LiLei.github.ioè¿™ä¸ªä»“åº“ä¸­çš„masteråˆ†æ”¯ä¸Šï¼› å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡éƒ¨ç½²ï¼Œä¼šæç¤ºè¾“å…¥github è´¦å·å’Œå¯†ç  æˆåŠŸï¼ï¼ è¿œç«¯è®¿é—®ï¼šPPsteven.github.io Hexo CheetSheet åˆå§‹åŒ–ç›®å½•ï¼šhexo init [folder] æ–°å»ºæ–‡ç« ï¼šhexo new/n [layout] &lt;title&gt; æˆ– æ–°å»ºè‰ç¨¿ï¼šhexo new draft &lt;title&gt; æ–°å»ºé¡µé¢ï¼šhexo new page tags å°†è‰ç¨¿å‘å¸ƒä¸ºæ­£å¼æ–‡ç« ï¼šhexo publish &lt;title&gt; ç”Ÿæˆé™æ€æ–‡ä»¶ï¼šhexo generate/g ç›‘å¬æ–‡ä»¶å˜åŒ–ï¼šhexo g --watch æˆ– hexo g -w éƒ¨ç½²ï¼šhexo deploy/d å…ˆç”Ÿæˆåéƒ¨ç½²ï¼šhexo d -g ç­‰äº hexo g åŠ  hexo d å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨ï¼ˆæœåŠ¡å™¨ä¼šç›‘å¬æ–‡ä»¶å˜åŒ–å¹¶è‡ªåŠ¨æ›´æ–°ï¼‰ hexo server/s å¯åŠ¨è°ƒè¯•ï¼šhexo s --debug é¢„è§ˆè‰ç¨¿ï¼šhexo s --draft æ¸…é™¤ç¼“å­˜ï¼šhexo clean ç«™ç‚¹é…ç½®ä¸»é¢˜å®‰è£…æ•™ç¨‹ å®‰è£…æ•™ç¨‹ï¼š NexTä¸»é¢˜å®˜ç½‘ Butterflyä¸»é¢˜ ä¸‹è½½ä¸»é¢˜&amp;å¯åŠ¨12345cd bloggit clone https://github.com/iissnan/hexo-theme-next themes/next# ç¼–è¾‘_config.ymltheme: next# theme: Butterfly NexT ä¸»é¢˜é…ç½®è®¾å®šä¸»é¢˜/è¯­è¨€ä¸»é¢˜é…ç½®çš„æ–‡ä»¶åœ¨themes/NexT æ–‡ä»¶å¤¹ä¸‹çš„_config.yml ä¸­ï¼Œæˆ‘ä»¬æŒ‰ç…§å®˜ç½‘æ•™ç¨‹ï¼Œä¾æ¬¡é…ç½® 12345#scheme: Muse#scheme: Mistscheme: Pisceslanguage: zh-Hans æ·»åŠ æ ‡ç­¾/åˆ†ç±»/å…³äºé¡µé¢hexo æ–°å»ºå‘½ä»¤ hexo n [layout] title ä¸­ layout æœ‰ä¸‰ä¸ªæ¨¡æ¿ poståˆ›å»ºæ–‡ç« ï¼Œç”Ÿæˆåœ¨/source/_postsæ–‡ä»¶å¤¹ä¸‹ï¼Œdraftåˆ›å»ºè‰ç¨¿ï¼Œç”Ÿæˆåœ¨/source/ _drafts æ–‡ä»¶å¤¹ä¸‹ï¼Œpageåˆ›å»ºé¡µé¢ï¼Œç”Ÿæˆåœ¨/source/YourPageNameæ–‡ä»¶å¤¹ä¸‹ ![image-20191027011714501](/Users/ppsteven/Library/Application Support/typora-user-images/image-20191027011714501.png) æ–°å»ºé¡µé¢ 123hexo new page tagshexo new page categorieshexo new page about ä¿®æ”¹èœå•ï¼ˆç¼–è¾‘ themes/next/_config.ymlï¼‰ 123456789menu: home: / || home about: /about/ || user # å…³äºé¡µé¢ tags: /tags/ || tags # æ ‡ç­¾é¡µé¢ categories: /categories/ || th # åˆ†ç±»é¡µé¢ archives: /archives/ || archive # å½’æ¡£é¡µé¢ #schedule: /schedule/ || calendar #sitemap: /sitemap.xml || sitemap commonweal: /404/ || heartbeat # å…¬ç›Š404 è®¾ç½®å¤´åƒ_config.yml åœ¨blog æ–‡ä»¶å’Œ theme/next æ–‡ä»¶å¤¹ä¸‹éƒ½æœ‰ blog ä¸‹çš„ä¸ºç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œä¸»é¢˜ä¸‹çš„ä¸ºä¸»é¢˜é…ç½®æ–‡ä»¶ mkdir themes/next/source/uploads ï¼Œæ”¾ç½®å¤´åƒå›¾ç‰‡ï¼ˆjpg/gif ç­‰ï¼‰ ä¿®æ”¹é…ç½®æ–‡ä»¶ 12# avatar: http://example.com/avatar.pngavatar: /uploads/avatar_1.jpg è®¾ç½®ä½œè€…æ˜µç§°ä¿®æ”¹ ç«™ç‚¹é…ç½®æ–‡ä»¶ 1author: Your name è®¾ç½®é˜…è¯»å­—æ•°ä¸æ—¶é•¿éœ€è¦å®‰è£…æ’ä»¶ï¼Œåœ°å€ 12345678# Post wordcount display settings# Dependencies: https://github.com/willin/hexo-wordcountpost_wordcount: item_text: true wordcount: true min2read: true totalcount: true separated_meta: true é…ç½®æœç´¢æœåŠ¡Local Searchæ·»åŠ ç™¾åº¦/è°·æ­Œ/æœ¬åœ° è‡ªå®šä¹‰ç«™ç‚¹å†…å®¹æœç´¢ 1cnpm install hexo-generator-searchdb --save ç¼–è¾‘ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œæ–°å¢å¦‚ä¸‹ä»£ç  12345search: path: search.xml field: post format: html limit: 10000 ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œå¯åŠ¨æœ¬åœ°æœç´¢ 123456789# Local search# Dependencies: https://github.com/flashlab/hexo-generator-searchlocal_search: enable: true # if auto, trigger search by changing input # if manual, trigger search by pressing enter key or search button trigger: auto # show top n results per article, show all results by setting to -1 top_n_per_article: 3 è®¾ç½®æ‘˜è¦ 12345# Automatically Excerpt. Not recommend.# Please use &lt;!-- more --&gt; in the post to control excerpt accurately.auto_excerpt: enable: True length: 150 å¤šç«¯åŒæ­¥æ­£å¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å†™çš„åšå®¢æ˜¯å¤‡ä»½åœ¨æœ¬åœ°çš„ï¼Œæ²¡æœ‰ä¸Šä¼ æœåŠ¡å™¨ï¼Œä½†æ˜¯è‹¥æ˜¯æœ‰å¤šå°ç”µè„‘çš„è¯ã€‚å¦‚ä½•ä¿æŒåŒæ­¥æ˜¯ä¸€ä¸ªé—®é¢˜ã€‚æœ€è¿‘ç”¨é—²ç½®çš„ç¬”è®°æœ¬æäº†ä¸€ä¸ªmanjaro ç©è€ï¼Œéœ€è¦è¿›è¡Œå¤šç«¯åŒæ­¥ã€‚ åˆ›å»ºåˆ†æ”¯åœ¨blogæ–‡ä»¶å¤¹ä¸‹ï¼Œæˆ‘ä»¬ç”¨hexo d å‘½ä»¤æäº¤çš„ä»…ä»…æ˜¯public æ–‡ä»¶å¤¹é‡Œé¢çš„å†…å®¹ï¼Œé»˜è®¤çš„æ˜¯æäº¤åœ¨ master åˆ†æ”¯ä¸Šã€‚ä¸ºäº†åœ¨åŒä¸€ä¸ªrepo ä¸‹ç®¡ç†æˆ‘ä»¬çš„åšå®¢ï¼Œæˆ‘ä»¬å¯ä»¥å»ºç«‹æ–°çš„åˆ†æ”¯hexo github ä¸Šåˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†æ”¯ hexoã€‚è¿›å…¥ä»“åº“åœ¨ï¼Œç‚¹å‡»Branchï¼Œè¾“å…¥æ–°çš„åˆ†æ”¯åå›è½¦å»ºç«‹ åœ¨æœ¬åœ°ä»“åº“åˆ›å»ºhexo åˆ†æ”¯ï¼Œæ·»åŠ remote åœ°å€ 123456$git checkout -b hexo # ä»£è¡¨åˆ›å»ºå¹¶åˆ‡æ¢$git remote add origin git@github.com:PPsteven/hexo_source.git # æ·»åŠ è¿œç«¯åœ°å€$git remote -v # æŸ¥çœ‹remote åœ°å€origin git@github.com:PPsteven/PPsteven.github.io.git (fetch)origin git@github.com:PPsteven/PPsteven.github.io.git (push)# è¡¨ç¤ºæ·»åŠ æˆåŠŸ å…¶å®æœ‰ä¸€ä¸ªå–å·§çš„æ–¹æ³•ï¼Œåœ¨GitHubä¸Šåˆ›å»ºæ–°çš„åˆ†æ”¯hexo åï¼Œåœ¨blog æ–‡ä»¶å¤¹ä¸­ç›´æ¥å°†è¯¥ä»“åº“çš„hexo åˆ†æ”¯å…‹éš†åˆ°æœ¬åœ°ã€‚ 1$git clone -b git@github.com:PPsteven/PPsteven.github.io.git å‘æœ¬åœ°åˆ†æ”¯æ·»åŠ æ–‡ä»¶ 123$git add . # æœ¬åœ°æ–‡ä»¶æ·»åŠ è‡³æš‚å­˜åŒº$git commit -m \"blog file backup\" # æš‚å­˜åŒºæ–‡ä»¶æäº¤è‡³æœ¬åœ°åˆ†æ”¯$git push origin hexo # å‘è¿œç«¯hexo åˆ†æ”¯æäº¤æ–‡ä»¶ çœ‹åˆ°ç½‘ä¸Šè®¨è®ºï¼Œåœ¨æäº¤æ–‡ä»¶çš„æ—¶å€™ï¼Œthemes æ–‡ä»¶å¤¹ä¼šå‡ºé”™ã€‚åŸå› æ˜¯themes ä¸‹æ–‡ä»¶å¤¹çš„ä¸»é¢˜åŒ…å«.git æ–‡ä»¶ï¼Œé€ æˆäº†å†²çªï¼Œåˆ é™¤å³å¯ã€‚ åŒæ­¥åˆ†æ”¯è¿›å…¥æ–°çš„ç”µè„‘ï¼ŒåŒæ­¥åˆ°æœ¬åœ°å°±å¯ä»¥ç¼–è¾‘äº† 1$git pull origin hexo å‚è€ƒæ•™ç¨‹ï¼š hexoæ•™ç¨‹:åŸºæœ¬é…ç½®+æ›´æ¢ä¸»é¢˜+å¤šç»ˆç«¯å·¥ä½œ+coding pageéƒ¨ç½²åˆ†æµ(2) å¦‚ä½•ä½¿ç”¨ Hexo å’Œ GitHub Pages æ­å»ºè¿™ä¸ªåšå®¢ å­¦ä¹ äº†ä¸Šé¢çš„æ•™ç¨‹åï¼ŒåŸºæœ¬çš„æ­å»ºå’Œéƒ¨ç½²å·²ç»æ²¡æœ‰é—®é¢˜äº†ã€‚","categories":[{"name":"ç”µè„‘åŸºæœ¬é…ç½®","slug":"ç”µè„‘åŸºæœ¬é…ç½®","permalink":"http://ppsteven.github.io/categories/%E7%94%B5%E8%84%91%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"http://ppsteven.github.io/tags/Hexo/"}]},{"title":"Mac å…¥é—¨åŸºç¡€ç¯å¢ƒæ­å»º","slug":"Mac å…¥é—¨é…ç½®","date":"2019-10-26T13:46:00.000Z","updated":"2020-02-15T17:21:39.268Z","comments":true,"path":"2019/10/26/Mac å…¥é—¨é…ç½®/","link":"","permalink":"http://ppsteven.github.io/2019/10/26/Mac%20%E5%85%A5%E9%97%A8%E9%85%8D%E7%BD%AE/","excerpt":"","text":"Homebrewå¸¸ç”¨å‘½ä»¤ å®˜ç½‘å®‰è£… Homebrew http://mxcl.github.com/homebrew/ å‰è¨€åŒ…ç®¡ç†è½¯ä»¶ Win: 360è½¯ä»¶ç®¡å®¶ Debian/Ubuntu: aptåŒ…ç®¡ç†ç³»ç»Ÿ Redhat/Fedora: yumåŒ…ç®¡ç†ç³»ç»Ÿ Mac OS X: Macports,Fink,AppStore ä»¥åŠ Homebrew ä½¿ç”¨æ–¹æ³•brew -v æŸ¥è¯¢Homebrewç‰ˆæœ¬brew -h brewå¸®åŠ©brew update æ›´æ–°Homebrewbrew install å®‰è£…ä»»æ„è½¯ä»¶brew uninstall å¸è½½ä»»æ„è½¯ä»¶brew search æŸ¥è¯¢ä»»æ„åŒ…brew list åˆ—å‡ºå®‰è£…åˆ—è¡¨brew info æŸ¥çœ‹ä»»æ„åŒ…å†…å®¹ä¿¡æ¯brew upgrade æ›´æ–°ä»»æ„åŒ…brew cleanup åˆ é™¤å…·ä½“æ—§è½¯ä»¶brew cleanup åˆ é™¤æ‰€æœ‰æ—§è½¯ä»¶brew outdated å·²å®‰è£…çš„åŒ…æ˜¯å¦éœ€è¦æ›´æ–° item2+oh-my-zsh1sh -c \"$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)\" chsh -s /bin/zsh. # å‘½ä»¤èˆªåˆ‡æ¢bashä¸ºzsh shellitermçš„perference-&gt;profiles-&gt;commond è®¾ç½®æˆ/bin/zsh # iterm2 ç•Œé¢æ‰‹åŠ¨åˆ‡æ¢ æ›´æ”¹shell è¯­è¨€ cat /etc/shells # æŸ¥çœ‹æ‰€æœ‰ shell chsh -s /bin/zsh #åˆ‡æ¢ä¸ºzsh ä¿®æ”¹æ–‡ä»¶vi ~/.zshrcsource ~/.zshrc echo $SHELL # æŸ¥çœ‹å½“å‰shell Iterm2 ä½¿ç”¨æŠ€å·§ å‚è€ƒ iTerm2å¸¸ç”¨çš„å¿«æ·é”® è®¾ç½®å…¨å±€æ‰“å¼€å¿«æ·é”® Perferemance -&gt; Keys -&gt;Hotkey -&gt; show/hide all windows with a system-wide hotkey command + shift + t # è®¾ç½®å¿«æ·é”® æ‰“å¼€iterm2 1234567891011121314æ–°å»ºæ ‡ç­¾ï¼šcommand + tå…³é—­æ ‡ç­¾ï¼šcommand + wåˆ‡æ¢å…¨å±ï¼šcommand + enteræŸ¥æ‰¾ï¼šcommand + få‚ç›´åˆ†å±ï¼šcommand + då‚ç›´ä¸Šä¸‹åˆ†å±ï¼šcommand + shift + då·¦å³ tab ä¹‹é—´æ¥å›åˆ‡æ¢ï¼šâŒ˜ + 1 / 2æŸ¥çœ‹å†å²å‘½ä»¤ï¼šcommand + ; ï¼ˆè¾“å…¥å¸¸ç”¨å‘½ä»¤çš„å‰ç¼€åä½¿ç”¨è¯¥å¿«æ·é”®å¯ä»¥å®ç°è¡¥å…¨çš„åŠŸèƒ½ï¼‰é™¤å½“å‰è¡Œï¼šctrl + u / ctrl +c ä¸Šä¸€æ¡å‘½ä»¤ï¼šctrl + pæœç´¢å‘½ä»¤å†å²ï¼šctrl + ræ¸…å±ï¼šclearé‡æ–°æ‰“å¼€ï¼šcommand + riTerm2 å‰ªåˆ‡æ¿å†å²ï¼šcommand + shift + h zsh æ’ä»¶é…ç½®ç›®å‰å·²ç»æœ‰çš„è‡ªå¸¦æ’ä»¶åœ¨å®˜ç½‘Githubä¸­å¯ä»¥çœ‹åˆ°ï¼Œhttps://github.com/robbyrussell/oh-my-zsh/tree/master/pluginsã€‚å‡¡æ˜¯è¿™é‡Œæœ‰çš„ï¼Œéƒ½å¯ä»¥ç«‹åˆ»ç”Ÿæ•ˆã€‚ å‚è€ƒé¡µé¢ ä¸€äº›å®ç”¨å¸¸ç”¨æ’ä»¶æ¨è for zsh oh-my-zsh git é»˜è®¤è‡ªå¸¦zsh-syntax-highlighting è¯­æ³•é«˜äº®1git clone https://github.com/zsh-users/zsh-syntax-highlighting.git $&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;/plugins/zsh-syntax-highlighting å°†zsh-syntax-highlighting ä¸‹è½½åˆ°zsh çš„plugins ç›®å½•ä¸­ 1plugins=(å…¶ä»–çš„æ’ä»¶ zsh-autosuggestions) zsh-autosuggestions è‡ªåŠ¨å»ºè®®1git clone git://github.com/zsh-users/zsh-autosuggestions $ZSH_CUSTOM/plugins/zsh-autosuggestions 1plugins=(å…¶ä»–çš„æ’ä»¶ zsh-autosuggestions) sublime é»˜è®¤è‡ªå¸¦ å‘½ä»¤ ä½œç”¨ st æ‰“å¼€sublime st + æ–‡ä»¶å¤¹ æ‰“å¼€æ–‡ä»¶å¤¹ st + æ–‡ä»¶ æ‰“å¼€æ–‡ä»¶ stt æ‰“å¼€å½“å‰æ–‡ä»¶å¤¹ ï¼Œç­‰ä»·äº st . sst ç®¡ç†å‘˜æƒé™ ç›¸å½“äº sudo st z é»˜è®¤è‡ªå¸¦12z -x æ— æ•ˆè·¯å¾„z ç›®å½•åç§° autojump12345678910111213141516171819$ brew install autojump plugins=(å…¶ä»–çš„æ’ä»¶ autojump)# å¦‚æœæ˜¯linux ç³»ç»Ÿå¯èƒ½æ¯”è¾ƒéº»çƒ¦ä¸€ç‚¹ï¼Œéœ€è¦ä»github ä¸Šä¸‹æºç å®‰è£…ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥ä¿è¯æ˜¯æœ€æ–°çš„ï¼‰$ git clone git@github.com:wting/autojump.git autojump$ cd autojump$ ./install.py# è¿è¡Œå®Œæ¯•åå°±ä¼šå‡ºç°å¦‚ä¸‹ä¿¡æ¯Please manually add the following line(s) to ~/.zshrc: [[ -s /home/ppsteven/.autojump/etc/profile.d/autojump.sh ]] &amp;&amp; source /home/ppsteven/.autojump/etc/profile.d/autojump.sh autoload -U compinit &amp;&amp; compinit -uPlease restart terminal(s) before running autojump.# æŒ‰ç…§æ“ä½œåœ¨ .zshrc ä¸­æ·»åŠ ï¼Œæˆ‘æ˜¯ä¹–ä¹–æ·»åŠ äº†ï¼Œå…¶å®æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨plugins ä¸­æ·»åŠ çš„plugins=(å…¶ä»–çš„æ’ä»¶ autojump) é™„å½•.zshrcé…ç½®123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123# If you come from bash you might have to change your $PATH.# export PATH=$HOME/bin:/usr/local/bin:$PATH# Path to your oh-my-zsh installation.export ZSH=\"/Users/ppsteven/.oh-my-zsh\"# Set name of the theme to load --- if set to \"random\", it will# load a random theme each time oh-my-zsh is loaded, in which case,# to know which specific one was loaded, run: echo $RANDOM_THEME# See https://github.com/robbyrussell/oh-my-zsh/wiki/Themes# ZSH_THEME=\"agnoster\"ZSH_THEME=\"ys\"# Set list of themes to pick from when loading at random# Setting this variable when ZSH_THEME=random will cause zsh to load# a theme from this variable instead of looking in ~/.oh-my-zsh/themes/# If set to an empty array, this variable will have no effect.# ZSH_THEME_RANDOM_CANDIDATES=( \"robbyrussell\" \"agnoster\" )# Uncomment the following line to use case-sensitive completion.# CASE_SENSITIVE=\"true\"# Uncomment the following line to use hyphen-insensitive completion.# Case-sensitive completion must be off. _ and - will be interchangeable.# HYPHEN_INSENSITIVE=\"true\"# Uncomment the following line to disable bi-weekly auto-update checks.# DISABLE_AUTO_UPDATE=\"true\"# Uncomment the following line to automatically update without prompting.# DISABLE_UPDATE_PROMPT=\"true\"# Uncomment the following line to change how often to auto-update (in days).# export UPDATE_ZSH_DAYS=13# Uncomment the following line if pasting URLs and other text is messed up.# DISABLE_MAGIC_FUNCTIONS=true# Uncomment the following line to disable colors in ls.# DISABLE_LS_COLORS=\"true\"# Uncomment the following line to disable auto-setting terminal title.# DISABLE_AUTO_TITLE=\"true\"# Uncomment the following line to enable command auto-correction.# ENABLE_CORRECTION=\"true\"# Uncomment the following line to display red dots whilst waiting for completion.# COMPLETION_WAITING_DOTS=\"true\"# Uncomment the following line if you want to disable marking untracked files# under VCS as dirty. This makes repository status check for large repositories# much, much faster.# DISABLE_UNTRACKED_FILES_DIRTY=\"true\"# Uncomment the following line if you want to change the command execution time# stamp shown in the history command output.# You can set one of the optional three formats:# \"mm/dd/yyyy\"|\"dd.mm.yyyy\"|\"yyyy-mm-dd\"# or set a custom format using the strftime function format specifications,# see 'man strftime' for details.# HIST_STAMPS=\"mm/dd/yyyy\"# Would you like to use another custom folder than $ZSH/custom?# ZSH_CUSTOM=/path/to/new-custom-folder# Which plugins would you like to load?# Standard plugins can be found in ~/.oh-my-zsh/plugins/*# Custom plugins may be added to ~/.oh-my-zsh/custom/plugins/# Example format: plugins=(rails git textmate ruby lighthouse)# Add wisely, as too many plugins slow down shell startup.plugins=( git# zsh-syntax-highlighting zsh-autosuggestions sublime autojump )source $ZSH/oh-my-zsh.sh# User configuration# export MANPATH=\"/usr/local/man:$MANPATH\"# You may need to manually set your language environment# export LANG=en_US.UTF-8# Preferred editor for local and remote sessions# if [[ -n $SSH_CONNECTION ]]; then# export EDITOR='vim'# else# export EDITOR='mvim'# fi# added by Anaconda3 2019.07 installer# &gt;&gt;&gt; conda init &gt;&gt;&gt;# !! Contents within this block are managed by 'conda init' !!__conda_setup=\"$(CONDA_REPORT_ERRORS=false '/Users/ppsteven/anaconda3/bin/conda' shell.bash hook 2&gt; /dev/null)\"if [ $? -eq 0 ]; then \\eval \"$__conda_setup\"else if [ -f \"/Users/ppsteven/anaconda3/etc/profile.d/conda.sh\" ]; then . \"/Users/ppsteven/anaconda3/etc/profile.d/conda.sh\" CONDA_CHANGEPS1=false conda activate base else \\export PATH=\"/Users/ppsteven/anaconda3/bin:$PATH\" fifiunset __conda_setup# &lt;&lt;&lt; conda init &lt;&lt;&lt;# Compilation flags# export ARCHFLAGS=\"-arch x86_64\"# Set personal aliases, overriding those provided by oh-my-zsh libs,# plugins, and themes. Aliases can be placed here, though oh-my-zsh# users are encouraged to define aliases within the ZSH_CUSTOM folder.# For a full list of active aliases, run `alias`.## Example aliasesalias zshconfig=\"vim ~/.zshrc\"# alias ohmyzsh=\"mate ~/.oh-my-zsh\" è§£å‹è½¯ä»¶è§£å‹è½¯ä»¶ unrarbrew install unrar ä½¿ç”¨æ–¹æ³• unrar x test.rar # è§£å‹åˆ°å½“å‰ç›®å½• è§£å‹è½¯ä»¶ 7zbrew search 7z # p7zip brew install p7zip ä½¿ç”¨æ–¹æ³• 7z e filename.7z å›¾åºŠè½¯ä»¶PicGoå®‰è£…æ•™ç¨‹ https://github.com/Molunerfinn/PicGo çœ‹å®Œä¸Šé¢çš„é…ç½®æ‰å‘ç°ä¹Ÿæ˜¯æ‰¾å·¥ä½œçš„å­¦ç”Ÿï¼ŒçœŸæ˜¯å‰å®³ Github å›¾åºŠé…ç½® 12345PPsteven/picturesmasterToken:XXXXXimg/https://cdn.jsdelivr.net/gh/PPsteven/pictures è®¾ç½® ssh è¿œç¨‹è¿æ¥è¶…æ—¶ä¸ºäº†è§£å†³ ssh è¿æ¥ä¸€æ®µæ—¶é—´åä¼šæ–­å¼€ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ æœåŠ¡ç«¯ å’Œ å®¢æˆ·ç«¯ åšå‡ºä»¥ä¸‹æ“ä½œ 12/etc/ssh/sshd_config # æœåŠ¡ç«¯é…ç½®/etc/ssh/ssh_config # å®¢æˆ·ç«¯é…ç½® æœåŠ¡å™¨ç«¯1234vim /etc/ssh/sshd_config# ä¿®æ”¹ä¸ºClientAliveInterval 30 # å®¢æˆ·ç«¯æ¯éš”å¤šå°‘ç§’å‘æœåŠ¡å‘é€ä¸€ä¸ªå¿ƒè·³æ•°æ®ClientAliveCountMax 86400 # å®¢æˆ·ç«¯å¤šå°‘ç§’æ²¡æœ‰ç›¸åº”ï¼ŒæœåŠ¡å™¨è‡ªåŠ¨æ–­æ‰è¿æ¥ æœ€åé‡å¯ sshd æœåŠ¡ (centos7+) 1sudo systemctl restart sshd å®¢æˆ·ç«¯12ServerAliveInterval 60 # æ¯åˆ†é’Ÿå‘é€ä¸€æ¬¡, ç„¶åå®¢æˆ·ç«¯å“åº”, ä»è€Œä¿æŒé•¿è¿æ¥;ServerAliveCountMax 3 # è¡¨ç¤ºæœåŠ¡å™¨å‘å‡ºè¯·æ±‚åå®¢æˆ·ç«¯æ²¡æœ‰å“åº”çš„æ¬¡æ•°è¾¾åˆ°3æ¬¡, å°±è‡ªåŠ¨æ–­å¼€ Charlesç ´è§£æ•™ç¨‹ å‚è€ƒæ•™ç¨‹ï¼šCharles mac ç ´è§£æ•™ç¨‹ 123# å·¥å…·æ ä¸­çš„ help --&gt; registerRegistered Name: https://zhile.ioLicense Key: 48891cf209c6d32bf4 Charlesè®¾ç½®æŒ‡å—ï¼šCharlesä½¿ç”¨æŒ‡å—","categories":[{"name":"ç”µè„‘åŸºæœ¬é…ç½®","slug":"ç”µè„‘åŸºæœ¬é…ç½®","permalink":"http://ppsteven.github.io/categories/%E7%94%B5%E8%84%91%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"http://ppsteven.github.io/tags/Hexo/"}]}]}