"use strict";(self.webpackChunkcodepainter=self.webpackChunkcodepainter||[]).push([[5894],{76042:n=>{n.exports=JSON.parse('{"blogPosts":[{"id":"/mount-mysql-data-to-smb-no-permission-debug","metadata":{"permalink":"/blog/mount-mysql-data-to-smb-no-permission-debug","editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/04.MySQL-Docker\u5bb9\u5668\u5316-\u6743\u9650\u95ee\u9898\u6392\u67e5.md","source":"@site/blog/04.MySQL-Docker\u5bb9\u5668\u5316-\u6743\u9650\u95ee\u9898\u6392\u67e5.md","title":"MySQL Docker\u6302\u8f7d\u6570\u636e\u81f3SMB-\u6743\u9650\u95ee\u9898\u6392\u67e5","description":"\u4f7f\u7528Docker\u642d\u5efaMySQL\u670d\u52a1\u65f6\uff0c\u8003\u8651\u5230MySQL\u5b58\u50a8\u7684\u6570\u636e\u8f83\u5927\uff0c\u5e0c\u671b\u5b58\u653e\u5728\u7a7a\u95f4\u8f83\u5927\u7684nas\u4e0a\u3002\u4e8e\u662f\u901a\u8fc7\u5bb9\u5668\u76ee\u5f55\u6620\u5c04\u7684\u65b9\u5f0f\u5c06\u6570\u636e\u901a\u8fc7smb\u7684\u65b9\u5f0f\u50a8\u5b58\uff0c\u4f46\u662f\u62a5\u9519 Errcode: 13 - Permission denied\u3002","date":"2024-05-26T23:29:28.000Z","tags":[],"readingTime":14.32,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"MySQL Docker\u6302\u8f7d\u6570\u636e\u81f3SMB-\u6743\u9650\u95ee\u9898\u6392\u67e5","date":"2024-05-26T23:29:28.000Z","slug":"/mount-mysql-data-to-smb-no-permission-debug","categories":["MySQL"]},"unlisted":false,"nextItem":{"title":"leetcode-tool \u4e00\u4e2a\u8ba9\u4f60\u66f4\u65b9\u4fbf\u5237\u9898\u7684\u5de5\u5177","permalink":"/blog/leetcode-tool-intro"}},"content":"\u4f7f\u7528Docker\u642d\u5efaMySQL\u670d\u52a1\u65f6\uff0c\u8003\u8651\u5230MySQL\u5b58\u50a8\u7684\u6570\u636e\u8f83\u5927\uff0c\u5e0c\u671b\u5b58\u653e\u5728\u7a7a\u95f4\u8f83\u5927\u7684nas\u4e0a\u3002\u4e8e\u662f\u901a\u8fc7\u5bb9\u5668\u76ee\u5f55\u6620\u5c04\u7684\u65b9\u5f0f\u5c06\u6570\u636e\u901a\u8fc7smb\u7684\u65b9\u5f0f\u50a8\u5b58\uff0c\u4f46\u662f\u62a5\u9519 `Errcode: 13 - Permission denied`\u3002\\n\\n\u4e0b\u9762\u8bb0\u5f55\u4e0b\u6392\u67e5\u8fc7\u7a0b\u548c\u89e3\u51b3\u65b9\u6848\\n\x3c!-- truncate --\x3e\\n\\n# \u95ee\u9898\u63cf\u8ff0\\n\\n## My Yaml\\n\\n```yaml\\nversion: \\"2\\"\\nservices:\\n  mysql:\\n    container_name: mysql\\n    image: mysql:5.7.23\\n    privileged: true\\n    command: --default-authentication-plugin=mysql_native_password --character-set-server=utf8 --collation-server=utf8_general_ci\\n    volumes:\\n        - cifs_mount:/var/lib/mysql\\n    ports:\\n      - 3306:3306\\n    environment:\\n      - MYSQL_USER=root\\n      - MYSQL_ROOT_PASSWORD=123\\n      - MYSQL_DATABASE=db\\n\\nvolumes:\\n    cifs_mount:\\n        driver: local\\n        driver_opts:\\n            type: cifs\\n            device: //${SMB_HOST}/nas/home/mysql\\n            o: \\"username=${SMB_USER},password=${SMB_PWD}\\"\\n```\\n\\n## Errcode: 13 - Permission denied\\n\\n```\\n$ docker-compose up \\nmysql_future | Initializing database\\nmysql_future | mysqld: Can\'t create/write to file \'/var/lib/mysql/is_writable\' (Errcode: 13 - Permission denied)\\nmysql_future | 2024-05-26T16:25:35.482190Z 0 [Warning] TIMESTAMP with implicit DEFAULT value is deprecated. Please use --explicit_defaults_for_timestamp server option (see documentation for more details).\\nmysql_future | 2024-05-26T16:25:35.491790Z 0 [ERROR] --initialize specified but the data directory exists and is not writable. Aborting.\\nmysql_future | 2024-05-26T16:25:35.491839Z 0 [ERROR] Aborting\\n```\\n\\n\u7531\u4e8e\u51fa\u73b0\u4e86 `Errcode: 13 - Permission denied` \u7684\u62a5\u9519\uff0c\u4e8e\u662f\u8ba4\u4e3a\u4e00\u5b9a\u662f\u6743\u9650\u7ed9\u5c11\u4e86\uff0c\u90a3\u4e48\u5982\u4f55\u6dfb\u52a0\u6743\u9650\uff0c\u6700\u7b80\u5355\u7684\u65b9\u5f0f\u662f\u76f4\u63a5\u6620\u5c04\u4e00\u4e2a root \u8fdb\u5bb9\u5668\u3002\\n\\n# \u6392\u67e5\u8fc7\u7a0b\\n\\n## Try: \u8bbe\u7f6e\u8fdb\u7a0bID\u4e3aroot\\n\\n```diff\\n    environment:\\n      - MYSQL_USER=root\\n      - MYSQL_ROOT_PASSWORD=123\\n      - MYSQL_DATABASE=db\\n+     - UID=0\\n+     - PID=0\\n```\\n\\n\u5728Docker\u5bb9\u5668\u4e2d\uff0c\u901a\u8fc7\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\u53ef\u4ee5\u63a7\u5236\u5bb9\u5668\u4e2d\u8fdb\u7a0b\u7684\u8fd0\u884c\u73af\u5883\u3002\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u8bbe\u7f6e\u4e86\u73af\u5883\u53d8\u91cf\uff1a\\n\\n1. PUID=0\uff1a\u6307\u5b9a\u4e86\u5bb9\u5668\u4e2d\u8fdb\u7a0b\u7684\u7528\u6237ID\uff08PUID\uff09\u3002\u5728\u8fd9\u91cc\u8bbe\u7f6e\u4e3a0\uff0c\u8868\u793a\u5c06\u5bb9\u5668\u4e2d\u7684\u8fdb\u7a0b\u4ee5root\u7528\u6237\u7684\u8eab\u4efd\u8fd0\u884c\u3002\u8fd9\u6837\u8bbe\u7f6e\u53ef\u4ee5\u8ba9\u5bb9\u5668\u5185\u7684\u8fdb\u7a0b\u5177\u6709root\u7528\u6237\u7684\u6743\u9650\uff0c\u53ef\u4ee5\u6267\u884c\u4e00\u4e9b\u9700\u8981\u7279\u6743\u7684\u64cd\u4f5c\u3002\\n2. PGID=0\uff1a\u6307\u5b9a\u4e86\u5bb9\u5668\u4e2d\u8fdb\u7a0b\u7684\u7ec4ID\uff08PGID\uff09\u3002\u540c\u6837\u8bbe\u7f6e\u4e3a0\uff0c\u8868\u793a\u5c06\u5bb9\u5668\u4e2d\u7684\u8fdb\u7a0b\u6240\u5c5e\u7684\u7ec4\u8bbe\u7f6e\u4e3aroot\u7ec4\u3002\\n\\n> \u7ed3\u679c\u662f\u62a5\u9519\u4f9d\u65e7\u540c\u4e0a\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u4f1a\u5f88\u7591\u60d1\uff0c\u4e3a\u4ec0\u4e48\u8fd8\u4f1a\u51fa\u73b0\u6743\u9650\u95ee\u9898\u3002\u731c\u6d4b\u4e00\u662f\u6587\u4ef6\u5939\u4e0d\u5141\u8bb8\u5199\u64cd\u4f5c\uff0c\u731c\u6d4b\u4e8c\u662f\u6587\u4ef6\u5939\u7684\u7528\u6237\u548c\u8fdb\u7a0b\u7684\u7528\u6237\u4e0d\u4e00\u81f4\u3002\\n\\n## \u6587\u4ef6\u5939\u7684\u7528\u6237\u548c\u6743\u9650\u662f\u4ec0\u4e48\\n\\n\u767b\u5f55nas\u67e5\u770b\u6587\u4ef6\u5939\u6743\u9650\uff0c\u7ed3\u679c\u53d1\u73b0\u6587\u4ef6\u5939\u7684\u7528\u6237\u4e3a `ppsteven` \uff0c\u7528\u6237\u7ec4\u4e3a `user` \u3002\u6587\u4ef6\u5939 `mysql` \u662f\u6211\u5728mac\u4e0a\u4f7f\u7528\u7528\u6237`ppsteven` \u8fde\u63a5smb\u624b\u52a8\u521b\u5efa\u7684\uff0c\u6545\u8be5\u6587\u4ef6\u5939\u4e0b\u4f1a\u5b58\u5728 `.DS_Store` \u3002\u7528\u6237\u4e3a\u6211smb\u7684\u8d26\u53f7`ppsteven`\u3002\\n\\n```\\nroot@ppnas:/srv/mergerfs/nas/nas/home/mysql# ls -al\\n\u603b\u7528\u91cf 12\\ndrwxrwsr-x 3 ppsteven users   76  5\u6708 27 00:25 .\\ndrwxrwsr-x 6 ppsteven users  128  5\u6708 26 02:40 ..\\n-rw-rw-r-- 1 ppsteven users 4096  5\u6708 26 02:41 ._.DS_Store\\n-rw-rw-r-- 1 ppsteven users 6148  5\u6708 27 00:25 .DS_Store\\ndrwxrwsr-x 2 ppsteven users   10 10\u6708 16  2018 mysql_data\\n```\\n\\n\u6839\u636e\u63d0\u4f9b\u7684\u8f93\u51fa\uff0c\u53ef\u4ee5\u770b\u5230`mysql_data`\u6587\u4ef6\u5939\u7684\u6743\u9650\u4e3a`drwxrwsr-x`\uff0c\u6240\u6709\u8005\u4e3a`ppsteven`\uff0c\u6240\u5c5e\u7ec4\u4e3a`users`\u3002\u8fd9\u91cc\u6709\u4e00\u4e2a\u7279\u6b8a\u7684\u6743\u9650\u4f4d`S`\uff0c\u5b83\u8868\u793a\u8bbe\u7f6e\u4e86\u7c98\u6ede\u4f4d\uff08Sticky Bit\uff09\u3002\\n\\n\u6839\u636e\u6743\u9650\u8868\u793a\u6cd5\uff1a\\n\\n- `d` \u8868\u793a\u8fd9\u662f\u4e00\u4e2a\u76ee\u5f55\\n- `rwx` \u8868\u793a\u6240\u6709\u8005\uff08`ppsteven`\uff09\u5177\u6709\u8bfb\u53d6\u3001\u5199\u5165\u548c\u6267\u884c\u6743\u9650\\n- `rws` \u8868\u793a\u6240\u5c5e\u7ec4\uff08`users`\uff09\u5177\u6709\u8bfb\u53d6\u3001\u5199\u5165\u548c\u6267\u884c\u6743\u9650\uff0c\u5e76\u4e14\u8bbe\u7f6e\u4e86\u7c98\u6ede\u4f4d\\n- `r-x` \u8868\u793a\u5176\u4ed6\u7528\u6237\u5177\u6709\u8bfb\u53d6\u548c\u6267\u884c\u6743\u9650\\n\\n\u7c98\u6ede\u4f4d\u5728\u76ee\u5f55\u4e0a\u7684\u4f5c\u7528\u662f\uff0c\u53ea\u6709\u76ee\u5f55\u7684\u6240\u6709\u8005\u3001\u6587\u4ef6\u7684\u6240\u6709\u8005\u6216\u8005root\u7528\u6237\u624d\u80fd\u5220\u9664\u76ee\u5f55\u4e2d\u7684\u6587\u4ef6\uff0c\u5373\u4f7f\u5176\u4ed6\u7528\u6237\u6709\u5199\u6743\u9650\u3002\u8fd9\u6709\u52a9\u4e8e\u9632\u6b62\u666e\u901a\u7528\u6237\u8bef\u5220\u5176\u4ed6\u7528\u6237\u7684\u6587\u4ef6\u3002\u56e0\u6b64\uff0c\u6839\u636e\u6743\u9650\u8bbe\u7f6e\uff0c`ppsteven`\u7528\u6237\u53ef\u4ee5\u8bfb\u53d6\u3001\u5199\u5165\u548c\u6267\u884c`mysql_data`\u76ee\u5f55\uff0c`users`\u7ec4\u7684\u7528\u6237\u4e5f\u53ef\u4ee5\u8bfb\u53d6\u3001\u5199\u5165\u548c\u6267\u884c\u8be5\u76ee\u5f55\uff0c\u5e76\u4e14\u8bbe\u7f6e\u4e86\u7c98\u6ede\u4f4d\u3002\\n\\n> \u7ed3\u8bba\uff1a\u6587\u4ef6\u5939\u7528\u6237\u4e3a ppsteven\uff0c\u7528\u6237\u7ec4\u4e3auser\uff0c\u6743\u9650\u4e3a\u8bfb\u5199\\n\\n## \u64cd\u4f5c\u6587\u4ef6\u5939\u7684\u7528\u6237\u662f\u8c01\uff1f\\n\\n\u76ee\u524d\u6211\u4eec\u53ef\u4ee5\u77e5\u9053\u6587\u4ef6\u5939\u6709\u8bfb\u5199\u6743\u9650\uff0c\u90a3\u4e48 `Errcode: 13 - Permission denied` \u7684\u95ee\u9898\u5927\u6982\u7387\u662f\u7531\u4e8e\u7528\u6237\u7ec4\u7684\u4e0d\u5339\u914d\u9020\u6210\u7684\u4e86\uff0c\u4e0b\u9762\u6211\u4eec\u770b\u4e0b **\u76ee\u524d** \u5927\u6982\u6709\u54ea\u4e9b\u7528\u6237\u3002\\n\\n\u6587\u4ef6\u5939\u6743\u9650\uff1a\\n\\n- ppsteven\uff1asmb \u6ce8\u518c\u8d26\u6237\\n- root\uff1anas root \u8d26\u6237\\n\\n\u8fdb\u7a0b\uff1a\\n\\n- ppsteven\uff1aUbuntu \u8d26\u6237\\n- root\uff1aUbuntu\u8d26\u6237\\n\\n\u73b0\u5728\u8d70\u8fdb\u4e86\u4e00\u4e2a\u6b7b\u80e1\u540c\uff0c\u6309\u4e00\u822c\u6765\u8bf4\uff0c\u5f53\u8fdb\u7a0b\u4e3aroot\u65f6\uff0c\u62e5\u6709\u5168\u90e8\u6587\u4ef6\u5939\u7684\u8bbf\u95ee\u6743\u9650\u3002\u800c\u51fa\u73b0\u4e0a\u8ff0\u6743\u9650\u4e0d\u8db3\u7684\u95ee\u9898\u65f6\uff0c\u53ea\u6709\u53ef\u80fd\u51fa\u73b0\u4ee5\u4e0b\u60c5\u5f62\uff1a\\n\\n1. \u7528\u6237\u4e3appsteven\uff0c\u6587\u4ef6\u5939\u6743\u9650\u4e3aroot\\n2. \u7528\u6237\u4e3a X\uff0c\u6587\u4ef6\u5939\u6743\u9650\u4e3a ppsteven \u6216 root\\n\\n\u81ea\u7136\u5c31\u5bb9\u6613\u4ea7\u751f\u7684\u7591\u60d1\u662f\uff0c\u660e\u660e\u5df2\u7ecf\u5728 Try\u4e2d\u663e\u5f0f\u6307\u5b9a\u4e86\u7528\u6237\u4e3aroot\uff0c\u4ee5\u4e0a\u4e24\u79cd\u95ee\u9898\u90fd\u4e0d\u5e94\u8be5\u53d1\u751f\u3002\\n\\n\u6700\u76f4\u63a5\u7684\u65b9\u5f0f\u5c31\u662f\u542f\u52a8\u5bb9\u5668\uff0c\u67e5\u770b\u7528\u6237\\n\\n```\\ndocker run --rm -t mysql:5.7.23 sh -c \'id\'\\nuid=0(root) gid=0(root) groups=0(root)\\n```\\n\\n> \u7ed3\u8bba\uff1a\u64cd\u4f5c\u6587\u4ef6\u5939\u7684\u7528\u6237\u5c31\u662froot\uff0c\u800c\u4e14\u65e0\u9700\u663e\u5f0f\u6307\u5b9a UID \u548c PID\u3002\\n>\\n> \u8fd9\u4e2a\u7ed3\u8bba\u548c\u4e0a\u9762\u7684\u4e24\u4e2a\u63a8\u6d4b\u662f\u76f8\u51b2\u7a81\u7684\uff0c\u53ea\u80fd\u8bf4\u660e\u4e00\u70b9\uff0c\u5bb9\u5668\u5f53\u524d\u7528\u6237\u786e\u5b9e\u662froot\uff0c\u4f46\u662f\u6267\u884cmysql\u8fdb\u7a0b\u7684\u53e6\u6709\u5176\u4eba\u3002\u5177\u4f53\u662f\u8c01\uff0c\u9700\u8981\u8fdb\u5165\u5bb9\u5668\u6392\u67e5\u3002\\n\\n## \u5bb9\u5668\u4e2d\u6392\u67e5\\n\\n### 1. \u5bb9\u5668\u6301\u4e45\u8fd0\u884c\u4e0d\u9000\u51fa\\n\\n```diff\\nversion: \\"2\\"\\nservices:\\n  mysql:\\n    container_name: mysql\\n    image: mysql:5.7.23\\n    privileged: true\\n-   command: --default-authentication-plugin=mysql_native_password --character-set-server=utf8 --collation-server=utf8_general_ci\\n+   command: tail -f /dev/null\\n```\\n\\n### 2. \u627e\u5230\u5bb9\u5668\u9ed8\u8ba4\u6267\u884c\u7684\u547d\u4ee4\\n\\n\u5728 [dockerhub-mysql:5.7.23](https://hub.docker.com/layers/library/mysql/5.7.23/images/sha256-1b30b36ae96ace2d29cd9c7a724cbb9d1ce59424a79cad4d117175d273d1689b?context=explore) \u4e2d\u627e\u5230\u4e86Dockerfile \u7684\u547d\u4ee4\\n\\n```\\n16\\tENTRYPOINT [\\"docker-entrypoint.sh\\"]\\n17\\tEXPOSE 3306/tcp 33060/tcp\\n18\\tCMD [\\"mysqld\\"]\\n```\\n\\n\u5373 `docker-entrypoint.sh mysqld`\\n\\n### 3. \u6267\u884cmysqld\\n\\n\u679c\u7136\u51fa\u73b0\u4e86\u4e4b\u524d\u770b\u5230\u7684\u9519\u8bef\\n\\n```bash\\nroot@ba9456632723:/# docker-entrypoint.sh mysqld\\nInitializing database\\nmysqld: Can\'t create/write to file \'/var/lib/mysql/is_writable\' (Errcode: 13 - Permission denied)\\n2024-05-26T17:24:44.679361Z 0 [Warning] TIMESTAMP with implicit DEFAULT value is deprecated. Please use --explicit_defaults_for_timestamp server option (see documentation for more details).\\n2024-05-26T17:24:44.687552Z 0 [ERROR] --initialize specified but the data directory exists and is not writable. Aborting.\\n2024-05-26T17:24:44.687578Z 0 [ERROR] Aborting\\n```\\n\\n### 4. \u786e\u8ba4\u6587\u4ef6\u5939\u7684\u7528\u6237\u548c\u6743\u9650\\n\\n\u521a\u521a\u5728 nas \u4e0a\u770b\u5230\u7684\u6587\u4ef6\u5939\u7684\u7528\u6237\u662f `ppsteven`\uff0c\u8fdb\u5165\u5bb9\u5668\u540e\u518d\u6b21\u67e5\u770b\uff0c\u7528\u6237\u53d8\u4e3a\u4e86 `root`\u3002\\n\\n```\\nroot@ba9456632723:/# ls -al /var/lib/\\ntotal 36\\ndrwxr-xr-x 1 root  root  4096 Oct 16  2018 .\\ndrwxr-xr-x 1 root  root  4096 Oct 11  2018 ..\\ndrwxr-xr-x 1 root  root  4096 Oct 16  2018 apt\\ndrwxr-xr-x 1 root  root  4096 Oct 16  2018 dpkg\\ndrwxr-xr-x 2 root  root  4096 Jun 26  2018 misc\\ndrwxr-xr-x 2 root  root     0 Oct 16  2018 mysql\\ndrwxrwx--- 2 mysql mysql 4096 Oct 16  2018 mysql-files\\ndrwxr-x--- 2 mysql mysql 4096 Oct 16  2018 mysql-keyring\\ndrwxr-xr-x 2 root  root  4096 Oct 11  2018 pam\\ndrwxr-xr-x 1 root  root  4096 Oct 11  2018 systemd\\n```\\n\\n> \u7ed3\u8bba\uff1a\u5bb9\u5668\u5377\u6302\u8f7d\u7684\u7528\u6237\u548c\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u5e76\u4e0d\u4e00\u6837\uff0c\u67e5\u8be2\u8d44\u6599\uff1a\\n>\\n> \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5bb9\u5668\u5377\u7684device\u7684\u9ed8\u8ba4\u7528\u6237\u7ec4\u662froot\u3002\u8fd9\u662f\u56e0\u4e3a\u5728Docker\u4e2d\uff0c\u5bb9\u5668\u5377\u7684\u6743\u9650\u662f\u7531Docker\u5f15\u64ce\u6240\u63a7\u5236\u7684\u3002\u5f53\u5bb9\u5668\u5377\u88ab\u6302\u8f7d\u5230\u5bb9\u5668\u4e2d\u65f6\uff0cDocker\u5f15\u64ce\u4f1a\u5c06\u8be5\u5377\u6240\u5c5e\u7684\u7528\u6237\u548c\u7528\u6237\u7ec4\u8bbe\u7f6e\u4e3aroot\u3002\u8fd9\u662f\u4e3a\u4e86\u786e\u4fdd\u5bb9\u5668\u5728\u8bbf\u95ee\u5377\u4e2d\u7684\u6587\u4ef6\u65f6\u5177\u6709\u8db3\u591f\u7684\u6743\u9650\u3002\u5982\u679c\u9700\u8981\u66f4\u6539\u9ed8\u8ba4\u7684\u7528\u6237\u7ec4\uff0c\u53ef\u4ee5\u5728\u5bb9\u5668\u542f\u52a8\u547d\u4ee4\u4e2d\u4f7f\u7528`--user`\u9009\u9879\u6765\u6307\u5b9a\u7528\u6237\u548c\u7528\u6237\u7ec4\u3002\\n\\n### 5. \u786e\u8ba4\u771f\u5b9e\u6267\u884c\u7684\u7528\u6237\\n\\n```\\nroot@ba9456632723:/# whereis docker-entrypoint.sh\\ndocker-entrypoint: /usr/local/bin/docker-entrypoint.sh\\nroot@ba9456632723:/# cat /usr/local/bin/docker-entrypoint.sh\\n```\\n\\n\u53d1\u73b0\u811a\u672c\u5bf9root\u6709\u7279\u6b8a\u5904\u7406\\n\\n```shell\\n# allow the container to be started with `--user`\\nif [ \\"$1\\" = \'mysqld\' -a -z \\"$wantHelp\\" -a \\"$(id -u)\\" = \'0\' ]; then\\n\\t_check_config \\"$@\\"\\n\\tDATADIR=\\"$(_get_config \'datadir\' \\"$@\\")\\"\\n\\tmkdir -p \\"$DATADIR\\"\\n\\tchown -R mysql:mysql \\"$DATADIR\\"\\n\\texec gosu mysql \\"$BASH_SOURCE\\" \\"$@\\"\\nfi\\n```\\n\\n\u8fd9\u90e8\u5206\u4ee3\u7801\u4e3b\u8981\u662f\u7528\u4e8e\u5141\u8bb8\u5bb9\u5668\u4ee5`--user`\u53c2\u6570\u542f\u52a8\u3002\u5982\u679c\u811a\u672c\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f`mysqld`\uff0c\u4e14`$wantHelp`\u4e3a\u7a7a\uff0c\u5e76\u4e14\u5f53\u524d\u7528\u6237\u7684id\u4e3a0\uff08\u5373root\u7528\u6237\uff09\uff0c\u5219\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a\\n\\n1. \u8c03\u7528`_check_config`\u51fd\u6570\u68c0\u67e5\u914d\u7f6e\u3002\\n2. \u83b7\u53d6MySQL\u7684\u6570\u636e\u76ee\u5f55\u8def\u5f84\uff0c\u5e76\u521b\u5efa\u8be5\u76ee\u5f55\u3002\\n3. \u4f7f\u7528`chown`\u547d\u4ee4\u5c06\u6570\u636e\u76ee\u5f55\u7684\u6240\u6709\u6743\u8bbe\u7f6e\u4e3a`mysql:mysql`\u3002\\n4. \u4f7f\u7528`gosu`\u547d\u4ee4\u4ee5`mysql`\u7528\u6237\u8eab\u4efd\u91cd\u65b0\u6267\u884c\u811a\u672c\uff08`$BASH_SOURCE`\u8868\u793a\u5f53\u524d\u811a\u672c\u6587\u4ef6\uff09\uff0c\u5e76\u4f20\u9012\u4e4b\u524d\u7684\u53c2\u6570\u3002\\n\\n\u8fd9\u6bb5\u4ee3\u7801\u7684\u4f5c\u7528\u662f\u5728\u5bb9\u5668\u542f\u52a8\u65f6\uff0c\u5982\u679c\u4ee5root\u7528\u6237\u8eab\u4efd\u542f\u52a8\uff0c\u5e76\u4e14\u53c2\u6570\u662f`mysqld`\uff0c\u5219\u5c06\u6267\u884c\u6743\u9650\u5207\u6362\u4e3a`mysql`\u7528\u6237\uff0c\u5e76\u91cd\u65b0\u6267\u884c\u811a\u672c\u4ee5\u542f\u52a8MySQL\u670d\u52a1\u3002\u8fd9\u6837\u53ef\u4ee5\u907f\u514d\u4ee5root\u7528\u6237\u8eab\u4efd\u8fd0\u884cMySQL\u670d\u52a1\uff0c\u63d0\u9ad8\u5b89\u5168\u6027\u3002\\n\\n> \u7ed3\u8bba\uff1a\u771f\u5b9e\u6267\u884c\u7684\u7528\u6237\u662f mysql\u3002\u5728 [dockerhub-mysql:5.7.23](https://hub.docker.com/layers/library/mysql/5.7.23/images/sha256-1b30b36ae96ace2d29cd9c7a724cbb9d1ce59424a79cad4d117175d273d1689b?context=explore) \u4e2d\u5b58\u5728\u4e00\u4e2a\u547d\u4ee4 `/bin/sh -c groupadd -r mysql && useradd -r -g mysql mysql` \u521b\u5efa\u4e86`mysql` \u7684\u7528\u6237\u3002\\n\\n### 6. \u7591\u60d1 `chown -R mysql:mysql \\"$DATADIR\\"` \u65e0\u6548\\n\\n\u53ef\u4ee5\u770b\u5230 bash \u811a\u672c\u4e2d\u5f53\u53d1\u73b0\u5f53\u524d\u7528\u6237\u4e3aroot\u65f6\uff0c\u4f1a\u5c06\u6587\u4ef6\u7684\u7528\u6237\u548c\u7528\u6237\u7ec4\u6539\u4e3a `mysql` \u5e76\u4f7f\u7528 `mysql` \u53bb\u6267\u884c\u3002\u4f46\u662f\u4ece\u6700\u7ec8\u7684\u6548\u679c\u4e2d\u53d1\u73b0\u5e76\u6ca1\u6709\u6210\u529f\u66f4\u6539\uff0c\u6211\u540e\u7eed\u591a\u6b21\u6267\u884c\u6b64\u547d\u4ee4\uff0c\u53d1\u73b0\u662f\u65e0\u6548\uff0c\u4f46\u662f\u6ca1\u6709\u62a5\u9519\u3002\u5982\u4e0b\\n\\n```bash\\nroot@ba9456632723:/# id\\nuid=0(root) gid=0(root) groups=0(root)\\nroot@ba9456632723:/# chown -R mysql:mysql /var/lib/mysql\\nroot@ba9456632723:/# ls -al /var/lib/\\ntotal 36\\ndrwxr-xr-x 1 root  root  4096 Oct 16  2018 .\\ndrwxr-xr-x 1 root  root  4096 Oct 11  2018 ..\\ndrwxr-xr-x 1 root  root  4096 Oct 16  2018 apt\\ndrwxr-xr-x 1 root  root  4096 Oct 16  2018 dpkg\\ndrwxr-xr-x 2 root  root  4096 Jun 26  2018 misc\\ndrwxr-xr-x 2 root  root     0 Oct 16  2018 mysql\\ndrwxrwx--- 2 mysql mysql 4096 Oct 16  2018 mysql-files\\ndrwxr-x--- 2 mysql mysql 4096 Oct 16  2018 mysql-keyring\\ndrwxr-xr-x 2 root  root  4096 Oct 11  2018 pam\\ndrwxr-xr-x 1 root  root  4096 Oct 11  2018 systemd\\n```\\n\\n\u8fd9\u4e2a\u7559\u5f85\u540e\u7eed\u9a8c\u8bc1...\\n\\n## \u89e3\u51b3\u65b9\u6848\\n\\n\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u672c\u8d28\u4e0a\u662f\u7531\u4e8e\u6570\u636e\u76ee\u5f55 `mysql` \u5f52\u5c5e\u7528\u6237\u4e3a `root`\uff0c\u4f46\u662f\u6267\u884c\u4e3a `mysql` \u62a5\u7684\u6743\u9650\u4e0d\u8db3\u7684\u9519\u8bef\u3002\\n\\n\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u5c06\u5bb9\u5668\u6620\u5c04\u65f6\u76f4\u63a5\u6307\u5b9a\u5f52\u5c5e\u5373\u53ef\u3002\\n\\n### 1. \u67e5\u770bmysql\u7528\u6237id\\n\\n```\\nroot@ba9456632723:/# cat /etc/passwd | grep mysql\\nmysql:x:999:999::/home/mysql:\\n```\\n\\n### 2. \u8bbe\u7f6e\u76ee\u5f55id\\n\\n```diff\\nvolumes:\\n    cifs_mount:\\n        driver: local\\n        driver_opts:\\n            type: cifs\\n            device: //${SMB_HOST}/nas/home/mysql\\n-           o: \\"username=${SMB_USER},password=${SMB_PWD}\\"\\n+           o: \\"username=${SMB_USER},password=${SMB_PWD},uid=999,gid=999\\"\\n```\\n\\n\u6210\u529f\u8fd0\u884c\\n\\n```\\nroot@fc502a823b1e:/# ls -al /var/lib/\\ntotal 36\\ndrwxr-xr-x 1 root  root  4096 Oct 16  2018 .\\ndrwxr-xr-x 1 root  root  4096 Oct 11  2018 ..\\ndrwxr-xr-x 1 root  root  4096 Oct 16  2018 apt\\ndrwxr-xr-x 1 root  root  4096 Oct 16  2018 dpkg\\ndrwxr-xr-x 2 root  root  4096 Jun 26  2018 misc\\ndrwxr-xr-x 2 mysql mysql    0 Oct 16  2018 mysql\\ndrwxrwx--- 2 mysql mysql 4096 Oct 16  2018 mysql-files\\ndrwxr-x--- 2 mysql mysql 4096 Oct 16  2018 mysql-keyring\\ndrwxr-xr-x 2 root  root  4096 Oct 11  2018 pam\\ndrwxr-xr-x 1 root  root  4096 Oct 11  2018 systemd\\nroot@fc502a823b1e:/# docker-entrypoint.sh mysqld\\nInitializing database\\n2024-05-26T17:51:53.023965Z 0 [Warning] TIMESTAMP with implicit DEFAULT value is deprecated. Please use --explicit_defaults_for_timestamp server option (see documentation for more details).\\n2024-05-26T17:51:55.708097Z 0 [Warning] InnoDB: New log files created, LSN=45790\\n2024-05-26T17:51:56.325563Z 0 [Warning] InnoDB: Creating foreign key constraint system tables.\\n2024-05-26T17:51:56.495066Z 0 [Warning] No existing UUID has been found, so we assume that this is the first time that this server has been started. Generating a new UUID: a4ba4e3a-1b88-11ef-b584-0242ac1e0002.\\n2024-05-26T17:51:56.555978Z 0 [Warning] Gtid table is not ready to be used. Table \'mysql.gtid_executed\' cannot be opened.\\n2024-05-26T17:51:56.564034Z 1 [Warning] root@localhost is created with an empty password ! Please consider switching off the --initialize-insecure option.\\n```\\n\\n# \u7ed3\u8bba\\n\\n\u672c\u6b21\u6392\u67e5 MySQL \u5bb9\u5668\u5316\u90e8\u7f72\u65f6\uff0c\u9047\u5230\u5c06mysql\u6570\u636e\u6302\u8f7d\u81f3SMB\u4e0a\u9047\u5230\u7684\u6743\u9650\u4e0d\u8db3\u7684\u95ee\u9898\u3002\\n\\n\u901a\u8fc7\u6392\u67e5\u95ee\u9898\u53d1\u73b0\uff0c\u5bb9\u5668\u8fd0\u884c\u7528\u6237\u4e3aroot\uff0c\u6587\u4ef6\u5939\u6743\u9650\u4e3a\u8bfb\u5199\uff0c\u6240\u5c5e\u7528\u6237\u7ec4\u4e3aroot\u3002\u4f46\u662f\u4f9d\u65e7\u51fa\u73b0\u6743\u9650\u4e0d\u8db3\u7684\u95ee\u9898\u65f6\uff0cmysql \u5bb9\u5668\u5728\u8fd0\u884c\u65f6\u4f1a\u9488\u5bf9\u5f53\u524d\u7528\u6237\u4e3aroot\u7684\u60c5\u5f62\u8fdb\u884c\u5904\u7406\uff0c\u4f1a\u5c06\u6587\u4ef6\u5939\u7528\u6237\u548c\u7528\u6237\u7ec4\u66f4\u6539\u4e3amysql\uff0c\u5e76\u4f7f\u7528mysql \u7528\u6237\u6267\u884c\u547d\u4ee4\u3002\\n\\n\u5728\u6b64\u8fc7\u7a0b\u4e2d\uff0c`chown` \u66f4\u6539\u7528\u6237\u7ec4\u7684\u884c\u4e3a\u4e0d\u77e5\u4ec0\u4e48\u539f\u56e0\u6ca1\u6709\u6210\u529f\u6539\u52a8\uff0c\u5bfc\u81f4\u4e86\u6743\u9650\u4e0d\u8db3\u7684\u60c5\u51b5\u3002\\n\\n\u89e3\u51b3\u65b9\u6848\u662f\uff0c\u5728\u6302\u8f7d\u65f6\u6307\u5b9a\u76ee\u5f55\u6743\u9650\u4e3a `mysql`\u540e\u53ef\u6210\u529f\u8fd0\u884c\u3002\\n\\n# \u53c2\u8003\\n\\n- [dockerhub-mysql:5.7.23](https://hub.docker.com/layers/library/mysql/5.7.23/images/sha256-1b30b36ae96ace2d29cd9c7a724cbb9d1ce59424a79cad4d117175d273d1689b?context=explore) \\n\\n- [dockerfile-mysql-5.7](https://github.com/mysql/mysql-docker/blob/mysql-server/5.7/Dockerfile)\\n\\n- [Docker-compose : mysqld: Can\'t create/write to file \'/var/lib/mysql/is_writable\' (Errcode: 13 - Permission denied)](https://stackoverflow.com/questions/54507881/docker-compose-mysqld-cant-create-write-to-file-var-lib-mysql-is-writable)\\n\\n- [mysqld: Can\'t create/write to file \'/var/lib/mysql/is_writable\' (Errcode: 13 - Permission denied) #219](https://github.com/docker-library/mysql/issues/219)\\n\\n\\n# \u62d3\u5c55\u77e5\u8bc6\\n\\n## 1. \u5982\u679c\u4e0d\u663e\u5f0f\u6307\u5b9a PID=0\uff0cUID=0\uff0c\u90a3\u4e48\u5bb9\u5668\u4e2d\u771f\u5b9e\u8fd0\u884c\u7684\u7528\u6237\u662f\u8c01\uff1f\\n\\n\u5728Dockerfile\u4e2d\u672a\u6307\u5b9a\u7528\u6237\u65f6\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5bb9\u5668\u4e2d\u7684\u8fdb\u7a0b\u4f1a\u4ee5root\u7528\u6237\u8eab\u4efd\u8fd0\u884c\u3002\u5982\u679c\u6307\u5b9a\u4e86USER\uff0c\u5219\u4ee5\u8be5\u7528\u6237\u6267\u884c\u3002\u67e5\u770b\u5f53\u524d\u7528\u6237\u7684\u65b9\u5f0f\u5982\u4e0b\uff1a\\n\\n1. \u9996\u5148\u8fdb\u5165\u5bb9\u5668\u5185\u90e8\uff1a\\n\\n```\\ndocker exec -it [\u5bb9\u5668\u540d\u79f0] /bin/bash\\n```\\n\\n2. \u7136\u540e\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u67e5\u770b\u5f53\u524d\u7528\u6237\u7684 UID \u548c GID\uff1a\\n\\n```\\nid\\n```\\n\\n## 2.SMB \u662f\u4ec0\u4e48\\n\\n[Mount an SMB Share in Linux](https://www.linode.com/docs/guides/linux-mount-smb-share/#mount-an-smb-share)"},{"id":"/leetcode-tool-intro","metadata":{"permalink":"/blog/leetcode-tool-intro","editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/03.leetcode-tool \u5237\u9898\u52a9\u624b.md","source":"@site/blog/03.leetcode-tool \u5237\u9898\u52a9\u624b.md","title":"leetcode-tool \u4e00\u4e2a\u8ba9\u4f60\u66f4\u65b9\u4fbf\u5237\u9898\u7684\u5de5\u5177","description":"\u524d\u8a00","date":"2024-05-05T11:29:28.000Z","tags":[],"readingTime":11.845,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"leetcode-tool \u4e00\u4e2a\u8ba9\u4f60\u66f4\u65b9\u4fbf\u5237\u9898\u7684\u5de5\u5177","date":"2024-05-05T11:29:28.000Z","slug":"/leetcode-tool-intro","categories":["\u722c\u866b","\u5237\u9898"]},"unlisted":false,"prevItem":{"title":"MySQL Docker\u6302\u8f7d\u6570\u636e\u81f3SMB-\u6743\u9650\u95ee\u9898\u6392\u67e5","permalink":"/blog/mount-mysql-data-to-smb-no-permission-debug"},"nextItem":{"title":"0x11.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u5185\u7f51\u7a7f\u900f\u65b9\u6848|IPV6","permalink":"/blog/old-computer-adventures/ipv6"}},"content":"## \u524d\u8a00\\n\\n\u6700\u8fd1\u51c6\u5907\u5f00\u59cb\u5237\u9898\uff0c\u7531\u4e8e\u8fc7\u53bb\u4e86\u5f88\u957f\u65f6\u95f4\uff0c\u81ea\u5df1\u5df2\u7ecf\u5fd8\u8bb0\u4e86\u4e4b\u524d\u5237\u9898\u7684\u4e00\u4e9b\u6ce8\u610f\u4e8b\u9879\u548c\u505a\u9898\u601d\u8def\u3002\u540c\u65f6Leetcode\u53ea\u63d0\u4f9b\u6700\u7b80\u5355\u7684\u5237\u9898\u8bb0\u5f55\uff0c\u67e5\u770b\u81ea\u5df1\u7684\u89e3\u9898\u8bb0\u5f55\u4e5f\u4e0d\u662f\u90a3\u4e48\u65b9\u4fbf\uff0c\u9700\u8981\u4e00\u4e2a\u4e2a\u9898\u76ee\u53bb\u70b9\u51fb\u67e5\u770b\u3002\u4e3a\u6b64\uff0c\u6211\u8bd5\u7740\u5728Github\u4e0a\u5f00\u59cb\u5bfb\u627e\u662f\u5426\u5b58\u5728\u4e00\u4e2aLeetcode\u7684\u5237\u9898\u5de5\u5177\uff0c\u80fd\u79bb\u7ebf\u8bb0\u5f55\u81ea\u5df1\u7684\u5237\u9898\uff0c\u5e76\u5bf9\u505a\u8fc7\u7684\u9898\u76ee\u8fdb\u884c\u5206\u7c7b\u8bb0\u5f55\uff0c\u53ef\u4ee5\u6309\u7c7b\u578b\u53bb\u67e5\u770b\u81ea\u5df1\u5237\u9898\u8fdb\u5ea6\u7684\u4e00\u79cd\u5de5\u5177\u3002\\n\\n\u6700\u540e\uff0c\u627e\u5230\u4e86 [leetcode-tool](https://github.com/zcong1993/leetcode-tool) \u8fd9\u4e00\u4e2a\u5de5\u5177\uff0c\u4f5c\u8005\u8fd8\u5199\u4e86\u4e00\u7bc7 [leetcode-tool \u4e00\u4e2a\u8ba9\u4f60\u66f4\u65b9\u4fbf\u5237\u9898\u7684\u5de5\u5177](https://blog.cong.moe/post/2020-11-30-leetcode_tool) \u8be6\u7ec6\u8bf4\u660e\u4e86\u7528\u6cd5\uff0c\u53ef\u60dc\u7684\u662f\uff0c\u8be5\u5de5\u5177\u5df2\u7ecf\u591a\u5e74\u4e0d\u7ef4\u62a4\uff0c\u4e8e\u662f\u6211\u57fa\u4e8e\u6b64\u5de5\u5177\u505a\u4e86\u4e00\u4e9b\u5b9a\u5236\u5316\u7684\u5f00\u53d1\u4ee5\u6ee1\u8db3\u6211\u7684\u9700\u6c42\uff0c\u589e\u52a0\u7684\u6539\u52a8\u5982\u4e0b\uff1a\\n1. \u4f7f\u7528Python\u811a\u672c\u722c\u53d6Leetcode\u4e2d\u82f1\u6587\u9898\u76ee\uff0c\u79bb\u7ebf\u4fdd\u5b58\u3002\\n2. \u4f7f\u7528GPT\u8f85\u52a9\u7b54\u9898\\n3. \u5237\u9898\u8bb0\u5f55\u5bfc\u51fa\u81f3Notion\u770b\u677f\\n\\n\u9879\u76ee\u5730\u5740\u5982\u4e0b\uff1ahttps://github.com/PPsteven/leetcode-tool\\n\u7f16\u7801\u4e0d\u6613\uff0c\u6b22\u8fce\u70b9Star\u591a\u591a\u652f\u6301\uff01\uff01\\n\\n\u6548\u679c\u5982\u4e0b\u56fe\u6240\u793a\uff1a\\n\\n![img](https://raw.githubusercontent.com/PPsteven/leetcode-tool/master/screenshots/toc.png)\\n\\n![img](https://raw.githubusercontent.com/PPsteven/leetcode-tool/master/screenshots/notion-leetcode-summary.png)\\n\\n\x3c!-- truncate --\x3e\\n\\n## Leetcode \u5237\u9898\u7684\u75db\u70b9\\nLeetcode \u662f\u4e00\u4e2a\u5f88\u597d\u7684\u5237\u9898\u7f51\u7ad9\uff0c\u4f46\u662f\u5bf9\u4e8e\u505a\u597d\u7684\u9898\u76ee\uff0c\u5728Leetcode\u4e0a\u5b58\u5728\u5982\u4e0b\u75db\u70b9\uff1a\\n1. \u65e0\u6cd5\u65b9\u4fbf\u7684\u67e5\u770b\u81ea\u5df1\u7684\u89e3\u9898\u7b54\u6848\\n2. \u65e0\u6cd5\u5bf9\u4e8e\u4e00\u9898\u591a\u89e3\u548c\u4e00\u9898\u591a\u8bed\u8a00\u7684\u7b54\u6848\u8fdb\u884c\u6574\u7406\\n3. \u7f3a\u5931\u5bf9\u5df2\u901a\u8fc7\u9898\u76ee\u7684\u5206\u7c7b\u7edf\u8ba1\uff0c\u5982\u67e5\u627e\u5df2\u5b8c\u6210\u7684 `\u52a8\u6001\u89c4\u5212`\uff0c`\u94fe\u8868`\u7684\u9898\u76ee\uff0c\u5e76\u590d\u4e60\u5f52\u7eb3\u3002\\n\\n![img](./assets/img/leetcode-problem-review.png)\\n## leetcode-tool \u529f\u80fd\\n\u4e3a\u4e86\u89e3\u51b3\u4e0a\u8ff0\u95ee\u9898\uff0c\u5176\u5b9e\u505a\u6cd5\u5c31\u662f\u5728\u672c\u5730\u4fdd\u5b58\u4e00\u4efd\u5df2\u63d0\u4ea4\u7684\u7b54\u6848\uff0c\u5e76\u5bf9\u5176\u6253\u6807\u7b7e\uff0c\u6700\u540e\u5bf9\u6807\u7b7e\u8fdb\u884c\u6c47\u603b\u7edf\u8ba1\u751f\u6210 `\u505a\u9898\u6e05\u5355`\u3002\\n\\n\u5bf9\u6b64\uff0cLeetcode \u5237\u9898\u5de5\u5177\u7684\u57fa\u7840\u529f\u80fd\u5982\u4e0b\uff1a\\n1. \u722c\u53d6Leetcode\u9898\u76ee\uff0c\u5e76\u4fdd\u5b58\u5728\u672c\u5730\u3002\\n2. \u751f\u6210Leetcode\u5237\u9898\u6a21\u677f\uff0c\u6a21\u677f\u4e2d\u5305\u542b\u9898\u76ee\u7684\u6807\u7b7e\uff0c\u652f\u6301\u4eba\u5de5\u4fee\u6539\u3002\\n3. \u4f9d\u636e\u6807\u7b7e\u6c47\u603b\u751f\u4ea7 `\u505a\u9898\u6e05\u5355`\u3002\\n\u6b64\u5916\uff0c\u4e3a\u4e86\u65b9\u4fbf\u7b5b\u9009\u7ba1\u7406\u5df2\u505a\u7684\u9898\u76ee\uff0c\u652f\u6301\u5bfc\u51fa\u81f3Notion\u770b\u677f\u3002\\n\\n## \u5b89\u88c5\\n\\n```bash\\n# homebrew\\n$ brew tap ppsteven/homebrew-tap\\n$ brew install ppsteven/homebrew-tap/leetcode-tool\\n\\n$ leetcode-tool help\\n```\\n\\n\\n\\n## \u4f7f\u7528\\n\\n### 0. \u521b\u5efa\u914d\u7f6e\u6587\u4ef6\u5e76\u4e0b\u8f7d\u79bb\u7ebf\u6570\u636e\u5305\\n\\n\u9996\u5148\u5728\u521b\u5efa\u4e00\u4e2a\u505a\u9898\u76ee\u5f55\uff0c\u5728\u76ee\u5f55\u4e0b\u521b\u5efa `.leetcode.json` \u914d\u7f6e\u6587\u4ef6\uff0c\u53ef\u4ee5\u53c2\u8003\u4ed3\u5e93\u4e2d\u7684 [.leetcode.example.json](https://github.com/PPsteven/leetcode-tool/blob/master/.leetcode.example.json) \u6587\u4ef6.\\n\\n```\\n{\\n    \\"lang\\": \\"go/py3/ts/java\\", // \u9879\u76ee\u5168\u5c40\u8bed\u8a00, \u914d\u7f6e\u540e new \u547d\u4ee4 --lang \u53c2\u6570\u53ef\u7701\u7565, \u76ee\u524d\u652f\u6301 go ts js py3 java\\n    \\"env\\": \\"en/cn\\",\\n    \\"gpt\\": {\\n    \\"api_key\\": \\"sk-xxx\\",\\n        \\"model\\": \\"gpt-3.5-turbo\\",\\n        \\"prompt\\": \\"\u60a8\u662f\u4e00\u4e2a\u7b97\u6cd5\u4e13\u5bb6\uff0c\u8bf7\u57fa\u4e8e\u4e0b\u9762\u7684\u7b97\u6cd5\u9898\u76ee\uff0c\u7ed9\u51fa\u8be5\u7b97\u6cd5\u7684\u601d\u8def\u548c\u590d\u6742\u5ea6, \u4f7f\u7528 {{ .TextLang }} \u56de\u7b54\\\\nSETP1. \u7ed9\u51fa\u7b97\u6cd5\u7684\u5f52\u7c7b\uff0c\u5982\u9012\u5f52\uff0c\u6808\\\\nSETP2. \u82e5\u662f\u5b58\u5728\u66b4\u529b\u89e3\u6cd5\uff0c\u7ed9\u51fa\u601d\u8def\u548c\u590d\u6742\u5ea6\\\\nSETP3. \u7ed9\u51fa\u6700\u4f18\u89e3\u6cd5\u548c\u590d\u6742\u5ea6\\\\nSETP4. \u4ee3\u7801\u5b9e\u73b0\uff0c\u4f7f\u7528 {{ .Lang }} \u8bed\u8a00\uff0c\u4ee3\u7801\u5e26\u6ce8\u91ca\u548c\u6d4b\u8bd5\u6837\u4f8b\u3002\\\\n\\\\n{{ .Problem }}\\"\\n    }\\n}\\n```\\n\\n- lang: \u5f53\u524d\u652f\u6301\u8bed\u8a00 go/py3/ts/java\\n- env: \u754c\u9762\u8bed\u8a00 cn \u4e2d\u6587\u7ad9/ en \u82f1\u6587\u7ad9\\n- gpt: \u652f\u6301gpt\u5bf9\u9898\u76ee\u63d0\u793a\uff0c\u5728\u6ca1\u6709\u601d\u8def\u7684\u65f6\u5019\u8f85\u52a9\u89e3\u9898\\n  - api_key: openai key\\n  - model: openai model\\n  - prompt: \u81ea\u5b9a\u4e49\u63d0\u793a\u8bcd\uff0c\u53cc\u82b1\u62ec\u53f7\u4ee3\u8868\u7684\u662f\u53d8\u91cf\uff0c\u5728\u751f\u6210\u63d0\u793a\u8bcd\u7684\u65f6\u5019\u4f1a\u88ab\u66ff\u6362\u4e3a\u5b57\u7b26\u4e32\\n    - {{ .TextLang }} \u6839\u636eenv\u51b3\u5b9a\uff0cen:\u82f1\u6587\uff0ccn:\u4e2d\u6587\\n    - {{ .Lang }} \u7f16\u7a0b\u8bed\u8a00\\n    - {{ .Problem }} \u9898\u76ee\u5185\u5bb9\uff0c\u5fc5\u987b\u52a0\u4e0a\\n    - prompt \u5982\u679c\u4e0d\u586b\u5199\u7684\u8bdd\uff0c\u5c31\u4f7f\u7528\u5982\u4e0b\u9ed8\u8ba4prompt\u63d0\u793a\u8bcd\u6a21\u677f\\n\\n```\\n\u60a8\u662f\u4e00\u4e2a\u7b97\u6cd5\u4e13\u5bb6\uff0c\u8bf7\u57fa\u4e8e\u4e0b\u9762\u7684\u7b97\u6cd5\u9898\u76ee\uff0c\u7ed9\u51fa\u8be5\u7b97\u6cd5\u7684\u601d\u8def\u548c\u590d\u6742\u5ea6, \u4f7f\u7528 {{ .TextLang }} \u56de\u7b54\\nSETP1. \u7ed9\u51fa\u7b97\u6cd5\u7684\u5f52\u7c7b\uff0c\u5982\u9012\u5f52\uff0c\u6808\\nSETP2. \u82e5\u662f\u5b58\u5728\u66b4\u529b\u89e3\u6cd5\uff0c\u7ed9\u51fa\u601d\u8def\u548c\u590d\u6742\u5ea6\\nSETP3. \u7ed9\u51fa\u6700\u4f18\u89e3\u6cd5\u548c\u590d\u6742\u5ea6\\nSETP4. \u4ee3\u7801\u5b9e\u73b0\uff0c\u4f7f\u7528 {{ .Lang }} \u8bed\u8a00\uff0c\u4ee3\u7801\u5e26\u6ce8\u91ca\u548c\u6d4b\u8bd5\u6837\u4f8b\u3002\\n\\n{{ .Problem }}\\n```\\n\\n\u5c1d\u8bd5\u83b7\u53d6\u9898\u76ee\u4fe1\u606f\uff0c\u7b2c\u4e00\u6b21\u4f7f\u7528\u65f6\uff0c\u4f1a\u5c1d\u8bd5\u4eceGithub\u4e0b\u8f7dLeetcode\u79bb\u7ebf\u6570\u636e\u5305\uff0c\u5176\u4e2d\u5305\u542b\u4e86\u6240\u6709\u9898\u76ee\u4fe1\u606f\u3002\\n\\n\uff08P.S. \u8fd9\u4e2a\u6570\u636e\u662f\u901a\u8fc7Python\u811a\u672c\u722c\u866b\u5b9e\u73b0\uff0c\u5177\u4f53\u8be6\u89c1\u4ee3\u7801\uff1a[leetcode_crawler.py](https://github.com/PPsteven/leetcode-tool/blob/master/script/leetcode_crawler.py)\uff09\\n\\n```bash\\n$ leetcode-tool meta 1\\nfile problems.json not exists, start downloading from https://raw.githubusercontent.com/PPsteven/leetcode-tool/master/problems.json\\n&{Index:1 Title:\u4e24\u6570\u4e4b\u548c Slug:two-sum Difficulty:\u7b80\u5355 Tags:[array hash-table] Link:https://leetcode.cn/problems/two-sum/description/ Content: Code: Solved:false}\\n```\\n\\n\u4f46\u662f\u56fd\u5185\u7684\u7528\u6237\u53ef\u80fd\u7531\u4e8e\u7f51\u7edc\u539f\u56e0\u65e0\u6cd5\u4e0b\u8f7d\uff0c\u6b64\u65f6\u9700\u8981\u624b\u52a8\u4e0b\u8f7d\u5b58\u653e\u5728\u5427\u672c\u5730\u76ee\u5f55\u4e2d\u3002\\n\\n```bash\\n$ wget https://raw.githubusercontent.com/PPsteven/leetcode-tool/master/problems.json\\n```\\n\\n### 1. \u521b\u5efa\u9898\u76ee\\n\u5237\u9898\u4e4b\u524d\u5148\u5f97\u6709\u9898\u76eeID, \u8981\u53bb LeetCode \u4e0a\u9762\u627e\u4e00\u9053\u9898\u76ee, \u627e\u5230\u5b83\u7684\u5e8f\u53f7(\u5fc5\u987b\u662f\u524d\u7aef\u9875\u9762\u770b\u5230\u7684). \u7136\u540e\u8fd0\u884c:\\n\\n```bash\\n\u276f leetcode-tool new --lang go 1\\n```\\n\\n\u6b64\u6b65\u9aa4\u4f1a\u521b\u5efa\u4e00\u4e2a\u9898\u89e3\u6587\u4ef6\u5939\u548c\u4e09\u4e2a\u6587\u4ef6:\\n\\n```bash\\n\u276f tree solve/solve0001\\nsolve/solve0001\\n\u251c\u2500\u2500 problem.md # \u9898\u76ee\u63cf\u8ff0\u6587\u4ef6\\n\u251c\u2500\u2500 solve_0001.go # \u9898\u89e3\u6e90\u7801\u6587\u4ef6\\n\u2514\u2500\u2500 solve_0001_test.go # \u6d4b\u8bd5\u6587\u4ef6\\n```\\n\\n`problem.md`\xa0\u6587\u4ef6\u4e3a LeetCode \u7f51\u9875\u4e0a\u7684\u9898\u76ee\u63cf\u8ff0, \u5728 GitHub \u4e0a\u9762\u663e\u793a\u5b8c\u5168\u6b63\u5e38, \u4ee3\u7801\u5757\u548c\u56fe\u7247\u90fd\u53ef\u6b63\u5e38\u663e\u793a;\\n\\n![problem](assets/img/leetcode-problem-html-review.png)\\n\\n`solve_0001.go`\xa0\u4e3a\u521d\u59cb\u5316\u7684\u6e90\u7801\u6587\u4ef6:\\n\\n```go\\npackage solve0001\\n\\n/**\\n * @index 1\\n * @title \u4e24\u6570\u4e4b\u548c\\n * @difficulty \u7b80\u5355\\n * @tags array,hash-table\\n * @draft false\\n * @link https://leetcode-cn.com/problems/two-sum/\\n * @frontendId 1\\n */\\n\\nfunc twoSum(nums []int, target int) []int {\\n\\n}\\n```\\n\\n\u6587\u4ef6\u4e2d\u95f4\u7684\u6ce8\u89e3\u662f\u540e\u9762\u751f\u6210\u6c47\u603b\u6587\u4ef6\u8868\u683c\u6240\u9700\u8981\u7684\u4fe1\u606f, \u90fd\u662f\u901a\u8fc7 api \u83b7\u53d6\u5230\u7684\u9898\u76ee\u4fe1\u606f.\\n\\n`solve_0001_test.go`\xa0\u76f8\u5bf9\u5f88\u7b80\u964b:\\n\\n```go\\npackage solve0001_test\\n```\\n\\n\u4ee5\u4e0a, \u9898\u76ee\u521d\u59cb\u5316\u5c31\u5b8c\u6210\u4e86.\\n\\n_\u6ce8\u610f:_\xa0\u5237\u9898\u57fa\u672c\u662f\u53ea\u4f1a\u9009\u62e9\u4e00\u95e8\u8bed\u8a00, \u6240\u4ee5\xa0`--lang`\xa0\u8fd9\u4e2a\u53c2\u6570\u7565\u663e\u7e41\u7410, \u6211\u4eec\u53ef\u4ee5\u5728\u9879\u76ee\u6839\u6587\u4ef6\u521b\u5efa\u4e00\u4e2a\u5185\u5bb9\u4e3a\xa0`{ \\"lang\\": \\"go\\" }`\xa0\u7684\xa0`.leetcode.json`\xa0\u6587\u4ef6, \u6b64\u53c2\u6570\u5c31\u53ef\u4ee5\u7701\u7565\u4e86\u3002\\n\\n### 2. \u89e3\u9898\\n~~\u5de5\u5177\u518d\u597d\u4e5f\u4e0d\u53ef\u80fd\u5e2e\u4f60\u89e3\u9898, \u6240\u4ee5\u89e3\u9898\u8fd8\u662f\u8981\u9760\u81ea\u5df1.~~\\n\\n\u76ee\u524d\uff0c\u57fa\u4e8eLLM\u5927\u6a21\u578b\u6280\u672f\uff0c\u5df2\u7ecf\u53ef\u4ee5\u5b9e\u73b0\u4f7f\u7528GPT\u8f85\u52a9\u5237\u9898\u4e86\uff1a[GPT-4\u6ee1\u5206\u7b2c\u4e00\u540d\u901a\u8fc7\u5927\u5382\u6a21\u62df\u9762\u8bd5\uff01\u5fae\u8f6f154\u9875\u7814\u7a76\u5237\u5c4f\uff1a\u4e0eAGI\u7684\u7b2c\u4e00\u6b21\u63a5\u89e6](https://wallstreetcn.com/articles/3684883)\\n\\n\u9996\u5148\uff0c\u914d\u7f6e\u597d\u5b57\u6bb5 `gpt.api_key`\uff0c`gpt.model`\uff0c`gpt.prompt`\uff08\u53ef\u9009\uff09\\n\\n```diff\\n{\\n    \\"lang\\": \\"go/py3/ts/java\\", // \u9879\u76ee\u5168\u5c40\u8bed\u8a00, \u914d\u7f6e\u540e new \u547d\u4ee4 --lang \u53c2\u6570\u53ef\u7701\u7565, \u76ee\u524d\u652f\u6301 go ts js py3 java\\n    \\"env\\": \\"en/cn\\",\\n+    \\"gpt\\": {\\n+    \\"api_key\\": \\"sk-xxx\\",\\n+        \\"model\\": \\"gpt-3.5-turbo\\",\\n+        \\"prompt\\": \\"\u60a8\u662f\u4e00\u4e2a\u7b97\u6cd5\u4e13\u5bb6\uff0c\u8bf7\u57fa\u4e8e\u4e0b\u9762\u7684\u7b97\u6cd5\u9898\u76ee\uff0c\u7ed9\u51fa\u8be5\u7b97\u6cd5\u7684\u601d\u8def\u548c\u590d\u6742\u5ea6, \u4f7f\u7528 {{ .TextLang }} \u56de\u7b54\\\\nSETP1. \u7ed9\u51fa\u7b97\u6cd5\u7684\u5f52\u7c7b\uff0c\u5982\u9012\u5f52\uff0c\u6808\\\\nSETP2. \u82e5\u662f\u5b58\u5728\u66b4\u529b\u89e3\u6cd5\uff0c\u7ed9\u51fa\u601d\u8def\u548c\u590d\u6742\u5ea6\\\\nSETP3. \u7ed9\u51fa\u6700\u4f18\u89e3\u6cd5\u548c\u590d\u6742\u5ea6\\\\nSETP4. \u4ee3\u7801\u5b9e\u73b0\uff0c\u4f7f\u7528 {{ .Lang }} \u8bed\u8a00\uff0c\u4ee3\u7801\u5e26\u6ce8\u91ca\u548c\u6d4b\u8bd5\u6837\u4f8b\u3002\\\\n\\\\n{{ .Problem }}\\"\\n    }\\n}\\n```\\n\\n\u5f00\u59cb\u89e3\u9898\\n\\n```bash\\n$ leetcode-tool gpt 4\\n```\\n\\n\u6548\u679c\u5982\u4e0b\uff1a\\n\\n![img](https://raw.githubusercontent.com/PPsteven/leetcode-tool/master/screenshots/gpt.gif)\\n\\n\u5165\u95e8\u9898\u76ee\u76f4\u63a5\u641e\u5b9a, \u5e76\u4e14\u5b8c\u6210\u6d4b\u8bd5\u6587\u4ef6:\\n\\n```go\\n// solve_0001.go\\nfunc twoSum(nums []int, target int) []int {\\n\\tmp := make(map[int]int, 0)\\n\\tfor i, num := range nums {\\n\\t\\tif idx, ok := mp[target-num]; ok {\\n\\t\\t\\treturn []int{idx, i}\\n\\t\\t}\\n\\t\\tmp[num] = i\\n\\t}\\n\\treturn []int{}\\n}\\n```\\n\\n```go\\n// solve_0001_test.go\\nfunc TestTwoSum(t *testing.T) {\\n\\tassert.Equal(t, []int{0, 1}, twoSum([]int{2, 7, 11, 15}, 9))\\n\\tassert.Equal(t, []int{}, twoSum([]int{2, 7, 11, 15}, 4))\\n}\\n```\\n\\n\u641e\u5b9a\u9898\u76ee.\\n\\n### 3. \u66f4\u65b0\u9898\u76ee\u5206\u7c7b\u6c47\u603b\\n\\n\u4e0b\u9762\u662f\u81ea\u52a8\u751f\u6210\u7684\u9898\u76ee\u6ce8\u91ca\uff0c\u901a\u8fc7\u7f16\u8f91\u6ce8\u91ca\u4fe1\u606f\uff0c\u5e2e\u52a9\u6211\u4eec\u5206\u7c7b\u8be5\u9898\u7684\u89e3\u6cd5\u3002\\n\\n```\\n/**\\n * @index 1\\n * @title Two Sum\\n * @difficulty EASY\\n * @tags array,hash-table\\n * @draft false\\n * @link https://leetcode.cn/problems/two-sum/description/\\n * @frontendId 1\\n * @solved false\\n*/\\n```\\n\\n- index: \u9898\u76ee\u7f16\u53f7\\n- title: \u9898\u76ee\u540d\u79f0\\n- difficulty: \u9898\u76ee\u96be\u6613\u7a0b\u5ea6\\n- tags: \u9898\u76ee\u6807\u7b7e\u9ed8\u8ba4\u4e3aLeetcode\u6807\u7b7e\uff0c\u540c\u65f6\u4e5f\u53ef\u4ee5\u81ea\u5b9a\u4e49\u6807\u7b7e\\n- draft: \u662f\u5426\u8349\u7a3f\uff0ctrue \u5219\u4e0d\u4f1a\u5728update\u7684\u65f6\u5019\u5bf9\u8be5\u9898\u8fdb\u884c\u5206\u7c7b\\n- link: \u9898\u76ee\u94fe\u63a5\\n- frontendId: \u9898\u76ee\u7f16\u53f7\\n- solved: \u662f\u5426\u89e3\u51b3\\n\\n\u5f00\u59cb\u66f4\u65b0\\n\\n```bash\\n\u276f leetcode-tool update\\n```\\n\\n\u66f4\u65b0\u5b8c\u6210\u540e\uff0c\u5c31\u4f1a\u6210\u529f\u751f\u6210\u5982\u4e0b\u5206\u7c7b\\n\\n![img](https://raw.githubusercontent.com/PPsteven/leetcode-tool/master/screenshots/toc.png)\\n\\n### 4. \u540c\u6b65\u81f3github\\n\\n```bash\\n> git add . \\n> git commit -m \\"update\\"\\n```\\n\\n\u6700\u7ec8\u7684\u6548\u679c\u53ef\u4ee5\u53c2\u8003\uff1a\\n\\n- [zcong1993/algo-go](https://github.com/zcong1993/algo-go)\\n- [PPsteven/algorithm](https://github.com/PPsteven/algorithm)\\n\\n### 5. \u540c\u6b65\u81f3Notion\u6570\u636e\u5e93\\n\\n\u914d\u7f6e\u597d\u5b57\u6bb5 `notion.token`\uff0c`notion.database_id`\uff0c`notion.page_id`\uff08\u9009\u586b\uff09\\n\\n1. \u9996\u5148\uff0c\u7533\u8bf7 notion \u6743\u9650\uff0c\u652f\u6301\u901a\u8fc7 `notion-api` \u64cd\u4f5c\u4f60\u5f97notion\u9875\u9762\uff0c\u6559\u7a0b\u968f\u4fbf\u627e\u4e86\u4e00\u4e2a\uff1a[\u53d6\u5f97Notion API Key \u6d41\u7a0b](https://seedao.notion.site/Notion-API-Key-32a2aa92e8f346f4813dfbab80e7c6dd?pvs=21)\\n\\n2. \u83b7\u53d6 page_id\\n   \u70b9\u5f00\u4f60\u7684notion\u9875\u9762\uff0c\u8fdb\u5165\u4f60\u9700\u8981\u521b\u5efa\u7684\u6570\u636e\u5e93\u7684\u7236\u9875\u9762\uff0c\u76f4\u63a5\u83b7\u53d6 URL \u5730\u5740\u4e2d `-` \u540e\u7684\u4e00\u4e32\u5b57\u7b26\u4e32\u3002\\n\\n   ![image-20240505021735518](assets/img/get-notion-page-id.png)\\n\\n   \u5e76\u586b\u5165 `.leetcode.json` \u4e2d\\n\\n```diff\\n{\\n+  \\"notion\\": {\\n+    \\"token\\": \\"secret_nDoJWULxdaudMhbEdSo1g2TWUqYxqnArow4w6qo2NX\\",\\n+    \\"database_id\\": \\"3fbv1c2bf55e4fa18c66a5b0a61fa403\\",\\n+    \\"page_id\\": \\"59194b57331444eca8e7c996a1cdb505\\"\\n  }\\n}\\n```\\n\\n3. \u540c\u6b65\u5e76\u521b\u5efa\u6570\u636e\u5e93\\n   \u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\uff0c\u5f00\u542f\u540c\u6b65\u8bb0\u5f55\u81f3notion\u9875\u9762\\n\\n```bash\\n$ leetcode-tool sync --notion\\n2024/05/05 00:56:43 Create Database: e7086c88f6504623956d1271b70aa2b4, Please add the database_id in the config file\\n2024/05/05 00:56:43 Visited Link: https://www.notion.so/e7086c88f6504623956d1271b70aa2b4\\nsync leetcode record to notion, progress: 51/52%\\n```\\n\\n\u9664\u6b64\u4f7f\u7528\uff0c\u4f1a\u5728\u5f53\u524dnotion\u9875\u9762\u4e0b\u521b\u5efa\u4e00\u4e2a `inline` \u663e\u793a\u7684\u6570\u636e\u5e93\uff0c\u7ec8\u7aef\u4f1a\u7ed9\u51fa\u5176\u6570\u636e\u5e93\u7684id\uff0c\u5982 `e7086c88f6504623956d1271b70aa2b4`\\n\\n![img](https://raw.githubusercontent.com/PPsteven/leetcode-tool/master/screenshots/notion-leetcode-summary.png)\\n\\n4. \u66f4\u65b0\u6570\u636e\u5e93\\n\\n\u5c06\u4e0a\u9762\u83b7\u53d6\u7684 database_id \u624b\u52a8\u6dfb\u52a0\u81f3 `.leetcode.json` \u6587\u4ef6\u4e2d\u540e\uff0c\u672a\u6765\u7684\u6bcf\u6b21\u66f4\u65b0\u90fd\u4f1a\u66f4\u65b0\u8be5\u6570\u636e\u5e93\uff0c\u5f53\u4e14\u4ec5\u5f53\u6570\u636e\u53d1\u751f\u53d8\u52a8\u540e\u624d\u4f1a\u66f4\u65b0\\n\\n```bash\\n$ leetcode-tool sync --notion\\n```\\n\\n## \u540e\u8bb0\\n\\n\u672c\u9879\u76ee\u5728\u5f00\u53d1\u8fc7\u7a0b\u4e2d\uff0c\u5982\u4e0b\u5f00\u6e90\u9879\u76ee\u7ed9\u4e88\u4e86\u7075\u611f\u548c\u4ee3\u7801\u53c2\u8003\\n\\n>  https://github.com/zcong1993/leetcode-tool\\n\\n\u6b64\u9879\u76ee\u5df2\u591a\u5e74\u4e0d\u66f4\u65b0\uff0c\u672c\u4ee3\u7801\u5728Fork\u6b64\u4ed3\u5e93\u7684\u57fa\u7840\u4e0a\u6dfb\u52a0\u4e86\u5982\u4e0b\u529f\u80fd\uff1a\\n\\n- \u79bb\u7ebf\u4e0b\u8f7d\u4e86 Leetcode 3400+\u9898\uff0c\u4fdd\u8bc1\u4e86\u5728Leetcode\u63a5\u53e3\u53d1\u751f\u6539\u53d8\u540e\u4f9d\u7136\u53ef\u4ee5\u8fd0\u884c\u3002\\n- \u4f18\u5316\u4e86\u90e8\u5206\u4ee3\u7801\u903b\u8f91\\n- \u63a5\u5165\u4e86Openai\u8f85\u52a9\u89e3\u9898\\n\\nLeetcode \u9898\u76ee\u722c\u866b\u4f7f\u7528Python\u5b9e\u73b0\uff0c\u8be6\u89c1 `scripts` \u6587\u4ef6\u5939\uff0c\u4ee3\u7801\u53c2\u8003\uff1ahttps://github.com/bunnyxt/lcid\\n\\nnotion \u63a5\u5165\u90e8\u5206\uff0c\u53c2\u8003\u4e86\uff1a\\n\\n- [leetcode_to_notion](https://github.com/xzhao11/leetcode_to_notion)\\n- [notion/developers](https://developers.notion.com/reference/intro)"},{"id":"old-computer-adventures/ipv6","metadata":{"permalink":"/blog/old-computer-adventures/ipv6","editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/01.\u5bb6\u7528\u670d\u52a1\u5668\u6298\u817e\u8bb0/11.\u5185\u7f51\u7a7f\u900f\u65b9\u6848-IPV6.md","source":"@site/blog/01.\u5bb6\u7528\u670d\u52a1\u5668\u6298\u817e\u8bb0/11.\u5185\u7f51\u7a7f\u900f\u65b9\u6848-IPV6.md","title":"0x11.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u5185\u7f51\u7a7f\u900f\u65b9\u6848|IPV6","description":"\u4e3a\u4ec0\u4e48\u6211\u4eec\u9700\u8981\u5185\u7f51\u7a7f\u900f\uff1f\u672c\u8d28\u4e0a\u662f\u7531\u4e8eIPV4\u6570\u91cf\u4e0d\u591f\uff0c\u6211\u4eec\u65e0\u6cd5\u7533\u8bf7\u5230\u516c\u7f51IPV4\uff0c\u7531\u4e8e\u5916\u7f51\u65e0\u6cd5\u901a\u8fc7IP\u6765\u76f4\u63a5\u5b9a\u4f4d\u5230\u6211\u4eec\u5bb6\u4e2d\u7684\u670d\u52a1\u5668\uff0c\u6240\u4ee5\u6211\u4eec\u4e0a\u8ff0\u4ecb\u7ecd\u4e86N\u79cd\u5185\u7f51\u7a7f\u900f\u65b9\u6848\u53bb\u89e3\u51b3\u8fd9\u4e00\u4e2a\u95ee\u9898\u3002","date":"2023-07-12T02:09:54.000Z","tags":[],"readingTime":10.855,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"0x11.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u5185\u7f51\u7a7f\u900f\u65b9\u6848|IPV6","categories":["\u73af\u5883\u7ba1\u7406","\u5bb6\u7528\u670d\u52a1\u5668\u6298\u817e\u8bb0"],"date":"2023-07-12T02:09:54.000Z","slug":"old-computer-adventures/ipv6"},"unlisted":false,"prevItem":{"title":"leetcode-tool \u4e00\u4e2a\u8ba9\u4f60\u66f4\u65b9\u4fbf\u5237\u9898\u7684\u5de5\u5177","permalink":"/blog/leetcode-tool-intro"},"nextItem":{"title":"0x9.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u5185\u7f51\u7a7f\u900f\u65b9\u6848|Cloudflare Tunnel","permalink":"/blog/old-computer-adventures/cloudflare-tunnel"}},"content":"\u4e3a\u4ec0\u4e48\u6211\u4eec\u9700\u8981\u5185\u7f51\u7a7f\u900f\uff1f\u672c\u8d28\u4e0a\u662f\u7531\u4e8eIPV4\u6570\u91cf\u4e0d\u591f\uff0c\u6211\u4eec\u65e0\u6cd5\u7533\u8bf7\u5230\u516c\u7f51IPV4\uff0c\u7531\u4e8e\u5916\u7f51\u65e0\u6cd5\u901a\u8fc7IP\u6765\u76f4\u63a5\u5b9a\u4f4d\u5230\u6211\u4eec\u5bb6\u4e2d\u7684\u670d\u52a1\u5668\uff0c\u6240\u4ee5\u6211\u4eec\u4e0a\u8ff0\u4ecb\u7ecd\u4e86N\u79cd\u5185\u7f51\u7a7f\u900f\u65b9\u6848\u53bb\u89e3\u51b3\u8fd9\u4e00\u4e2a\u95ee\u9898\u3002\\n\\n\u5185\u7f51\u7a7f\u900f\u7531\u4e8e\u5176\u6280\u672f\u7279\u70b9\uff0c\u53ef\u80fd\u5b58\u5728\u65e0\u6cd5\u7a7f\u900f\u6210\u529f\uff0c\u6216\u662f\u6210\u529f\u540e\u901f\u5ea6\u5f88\u6162\u7684\u60c5\u51b5\uff0c\u57fa\u672c\u4e0a\u96be\u4ee5\u8dd1\u6ee1\u7f51\u7edc\u5e26\u5bbd\u3002\u4e0b\u9762\u4ecb\u7ecd\u7684IPV6\u65b9\u6848\u662f\u53ef\u4ee5\u89e3\u51b3\u901f\u5ea6\u4e0a\u7684\u95ee\u9898\u3002\\n\\n\u7531\u4e8eipv6 \u57fa\u672c\u4e0a\u662f\u7b97\u662f\u7528\u4e4b\u4e0d\u7aed\u7684\uff0c\u6240\u4ee5\u73b0\u5728\u5f88\u5bb9\u6613\u7533\u8bf7\u5230IPV6\u5730\u5740\u3002\\n\\n\x3c!--more--\x3e\\n\x3c!-- truncate --\x3e\\n\\n## \u5149\u732b\u5f00\u542fIPV6 \u8bbe\u7f6e\\n\\n\u867d\u7136IPV6\u5df2\u7ecf\u63a8\u5e7f\u4e86\u5f88\u591a\u5e74\uff0c\u5f88\u591a\u7f51\u7ad9\u4e5f\u662f\u53f7\u79f0\u63a5\u5165\u4e86IPV6\uff0c\u4f46\u662f\u4ece\u5927\u90e8\u5206\u573a\u666f\u5b9e\u6d4b\u4e0b\u6765\u3002\u8f66\u7ad9\uff0c\u5496\u5561\u9986\uff0c\u56fe\u4e66\u9986\uff0c\u5c45\u6c11\u5bb6\u4e2d\u7684WIFI\u9ed8\u8ba4\u90fd\u662f\u4e0d\u652f\u6301IPV6\u7684\u3002\\n\\n\u5f88\u5927\u7684\u4e00\u4e2a\u539f\u56e0\u662f\u8fd0\u8425\u5546\u76ee\u524d\u662f\u9650\u5236\u5c45\u6c11\u4f7f\u7528IPV6\u8bbe\u5907\u7684\uff0c\u5bb6\u4e2d\u7684\u5149\u732b\u662f\u9ed8\u8ba4\u5173\u95edIPV6\u529f\u80fd\uff0c\u6240\u4ee5\u7b2c\u4e00\u6b65\u6211\u4eec\u9700\u8981\u7ed9\u5149\u732b\u5f00\u542fIPV6\u3002\\n\\n### 1. \u83b7\u53d6\u8d85\u7ba1\u8d26\u53f7\u5bc6\u7801\\n\\n\u5317\u4eac\u79fb\u52a8\u7684\u8d85\u7ba1\u8d26\u53f7\u5bc6\u7801\u662f\u516c\u5f00\u7684\\n\\n```\\n\u8d26\u53f7\uff1aCMCCAdmin\\n\u5bc6\u7801\uff1aaDm8H%MdA\\n```\\n\\n\u4f46\u662f\u5f88\u9057\u61be\uff0c\u76f4\u63a5\u4f7f\u7528\u4e0a\u8ff0\u5bc6\u7801\u5e76\u4e0d\u80fd\u767b\u5f55\u7cfb\u7edf\u3002\u9700\u8981\u8054\u7cfb\u88c5\u5bbd\u5e26\u7684\u5e08\u5085\uff0c\u5e2e\u4f60\u7533\u8bf7\u5f00\u542f\u8d85\u7ba1\u8d26\u53f7\u3002\u5728\u5f00\u542f\u8d85\u7ba1\u8d26\u53f7\u540e\u5c31\u53ef\u4ee5\u7528\u4e0a\u8ff0\u5bc6\u7801\u8fdb\u884c\u767b\u5f55\u4e86\u3002\\n\\n### 2. \u5149\u732b\u8bbe\u7f6e\\n\\n\u5149\u732b\u9700\u8981\u5c06\u8fde\u63a5\u540d\u79f0\u8bbe\u7f6e\u4e3a **2_INTERNET_R_VID_10**\\n\\n\u7ecf\u8fc7\u5b9e\u8df5\u53d1\u73b0\uff0c\u8bbe\u7f6e\u4e86\u6ca1\u6709\u53cd\u5e94\uff0c\u67e5\u8d44\u6599\u53d1\u73b0 **1_TR069_R_VID_4003** \u662f\u79fb\u52a8\u9ed8\u8ba4\u7684\u534f\u8bae\uff0c\u79fb\u52a8\u901a\u8fc7\u5b83\u53ef\u4ee5\u4e0b\u53d1\u914d\u7f6e\u6765\u8fdc\u7a0b\u63a7\u5236\u5149\u732b\u3002\\n\\n\u6211\u59d1\u4e14\u5c31\u6309\u6b65\u9aa4\u70b9\u4e00\u904d\uff0c\u8bbe\u7f6e\u4e3a **2_INTERNET_R_VID_10**\uff08\u867d\u7136\u6ca1\u53cd\u5e94\uff09\\n\\n![image-20230712023031479](assets/img/image-20230712023031479.png)\\n\\n\u5173\u95edIPV6\u9632\u706b\u5899\uff0c\u8fd9\u91cc\u6ca1\u6709\u8d85\u7ba1\u6839\u672c\u5173\u4e0d\u4e86\uff0c\u7f51\u4e0a\u6709\u4e00\u4e9b\u5947\u6280\u6deb\u5de7\u53ef\u4ee5\u5173\u95ed\uff0c\u5b9e\u8df5\u540e\u4e0d\u8d77\u4f5c\u7528\uff0c\u8fd8\u662f\u8001\u8001\u5b9e\u5b9e\u7528\u8d85\u7ba1\u8d26\u53f7\u5173\u5427\u3002\\n\\n![image-20230712023507607](assets/img/image-20230712023507607.png)\\n\\n### 3. \u8def\u7531\u5668\u8bbe\u7f6e\\n\\n\u6211\u4f7f\u7528\u7684\u662f\u5c0f\u7c73\u8def\u7531\u5668\uff0c\u5f00\u542fIPV6\uff0c\u5e76\u540c\u65f6\u5173\u95ed\u9632\u706b\u5899\u3002\\n\\n![image-20230712023724514](assets/img/image-20230712023724514.png)\\n\\n## \u6d4b\u8bd5IPV6\\n\\n### IPV6 \u5916\u90e8\u7f51\u7edc\u8bbf\u95ee\u6d4b\u8bd5\\n\\n\u6253\u5f00 http://www.test-ipv6.com/ \uff0c\u5982\u679c\u80fd\u6210\u529f\u83b7\u53d6\u516c\u7f51IPV6\u5730\u5740\uff082409\u5f00\u5934\uff09\uff0c\u5219\u4ee3\u8868\u62e5\u6709IPV6\u8bbf\u95ee\u80fd\u529b\uff0c\u4e0d\u8fc7\u522b\u5f00\u5fc3\u592a\u65e9\uff0c\u4e0d\u4e00\u5b9a\u80fd\u8bbf\u95ee\u5230\u4f60\u81ea\u5df1\u5bb6\u7684\u670d\u52a1\u5668\u3002\\n\\n![image-20230712024805104](assets/img/image-20230712024805104.png)\\n\\n\u53e6\u4e00\u79cd\u6d4b\u8bd5\u65b9\u6cd5\u5f88\u7b80\u5355\uff0c\u901a\u8fc7 ping6 \u53bb\u6d4b\u8bd5\u80fd\u5426ping\u901a\\n\\n```\\nping6 2409:xxxxxxxxxxxxxxxxxxxxxxx\\n```\\n\\n\u4f46\u662f\u80fdping\u901a\u4e5f\u4e0d\u4fdd\u9669\uff0c\u56e0\u4e3a\u6b64\u65f6\u4f60\u662f\u5728\u672c\u5730ping\u7684\uff0c\u6709\u53ef\u80fd\u672c\u5730\u80fdping\u901aipv6\u5730\u5740\uff0c\u4f46\u662f\u5916\u90e8\u4f9d\u65e7\u88ab\u9632\u706b\u5899\u963b\u6321\u3002\\n\\n### IPV6 \u5185\u7f51\u8bbf\u95ee\u6d4b\u8bd5\\n\\n[IPv6 Ping \u6d4b\u8bd5](https://ipw.cn/ipv6ping/) \u8fd9\u4e2a\u7f51\u5740\u7ed9\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u4e2a\u8fdc\u7a0b\u8bbf\u95ee\u516c\u7f51IPV6\u7684\u8fde\u901a\u6027\u6d4b\u8bd5\u3002\u5982\u679c\u8fd9\u4e2a\u7f51\u7ad9\u80fd\u6d4b\u8bd5\u6210\u529f\uff0c\u90a3\u4e48\u606d\u559c\u4f60\uff0c\u4f60\u5df2\u7ecf\u6210\u529f\u6253\u901a\u4e86IPV6\uff0c\u53ef\u4ee5\u5b9e\u73b0\u5185\u7f51\u7a7f\u900f\u4e86\u3002\\n\\n![image-20230712031442507](assets/img/image-20230712031442507.png)\\n\\n### \u8f85\u52a9\u8d44\u6599\\n\\n\u7531\u4e8e\u6bcf\u4e2a\u5730\u533a\u7684\u9650\u5236\u4e0d\u540c\uff0c\u5982\u679c\u9047\u5230\u65e0\u6cd5\u89e3\u51b3\u7684\u60c5\u5f62\uff0c\u53ef\u4ee5\u53c2\u8003\u5982\u4e0b\u8d44\u6599\uff1a\\n\\n- [\u5149\u732b\u6539\u6865\u67b6+\u8def\u7531\u5668\u62e8\u53f7\u5b9e\u73b0IPV6](https://blog.jerry.ink/2022/06/24/53/)\\n  \\n  [\u5149\u732b\u6539\u6865\u67b6+\u8def\u7531\u5668\u62e8\u53f7\u5b9e\u73b0IPV6-\u65b0\u5efa\u8fde\u63a5](https://blog.jixiaob.cn/?post=78)\\n  \\n  \u79fb\u52a8\u5149\u732b\u65e0\u6cd5\u8bbe\u7f6e\u4e3a\u6865\u63a5\uff0c\u5931\u8d25\u3002\\n  \\n- [\u5149\u732b\u5f00\u542fTelnet\uff0c\u6539ip6table\u89e3\u9664\u9632\u706b\u5899\u9650\u5236](https://blog.51cto.com/fengyege/5950834)\\n  \u5b9e\u6d4b\u4e0b\u6765\uff0c\u7b2c\u4e00\u65e0\u6cd5\u76f4\u63a5\u4f7f\u7528\u8d85\u7ba1\u3002\u7b2c\u4e8c\uff0c\u7533\u8bf7\u4e0b\u7684\u8d85\u7ba1\u4e5f\u662f\u5047\u8d85\u7ba1\uff0c\u6ca1\u6709Telnet\u5f00\u542f\u7684\u9009\u9879\uff0c\u5931\u8d25\u3002\\n  \\n- [\u8d8a\u6743\u8bbf\u95ee+\u5220\u9664TR069](https://pve.sqlsec.com/9/5/)\\n  \u8f83\u4e3a\u590d\u6742\uff0c\u65e0\u6cd5\u5220\u9664TR069\\n\\n## IPV6 DDNS\\n\\n\u4e0a\u8ff0\u83b7\u53d6\u7684IPV6\u4e0d\u662f\u56fa\u5b9a\u516c\u7f51IP\uff0c\u662f\u4f1a\u968f\u65f6\u6539\u53d8\u7684\u3002\\n\\n\u901a\u8fc7DDNS\uff0c\u5373\u901a\u8fc7\u57df\u540d\u7684\u65b9\u5f0f\uff0c\u5c06\u52a8\u6001\u7684IPV6\u7ed1\u5b9a\u5230\u56fa\u5b9a\u57df\u540d\u4e0a\u5c31\u80fd\u5b9e\u73b0\u516c\u7f51IPV6\u7684\u6548\u679c\u3002\\n\\n\u4e0b\u9762\u7ed9\u51fa ddns \u7684 docker-compose.yaml \u6587\u4ef6\\n\\n```\\nversion: \'3\'\\nservices:\\n  ddns:\\n    image: newfuture/ddns\\n    container_name: ddns\\n    restart: always\\n    volumes:\\n      - ./config.json:/config.json\\n    network_mode: host\\n```\\n\\nconfig.yaml \\n\\n```\\n{\\n  \\"id\\": \\"\\",\\n  \\"token\\": \\"cloudflare\u7684token\\",\\n  \\"dns\\": \\"cloudflare\\",\\n  \\"ipv4\\": [],\\n  \\"ipv6\\": [\\"a.top\\", \\"b.world\\"],\\n  \\"index6\\": \\"default\\",\\n  \\"ttl\\": 600,\\n  \\"proxy\\": \\"DIRECT\\",\\n  \\"debug\\": true\\n}\\n```\\n\\n\u7531\u4e8e\u6211\u7684\u57df\u540d\u670d\u52a1\u5546\u662f\u7ed1\u5b9a\u7684cloudflare\uff0c\u5c31\u7ed9\u51fa\u4e0a\u8ff0\u793a\u4f8b\u3002\u5177\u4f53\u7684token\u9700\u8981\u8fdb\u4e00\u6b65\u53c2\u8003 newfuture/ddns \u7684\u5e2e\u52a9\u6587\u4ef6\u3002\\n\\n\u6700\u540eping\u4e00\u4e0b\u8bd5\u8bd5\\n\\n```\\nping6 a.top\\n```\\n\\n## IPV4 \u5ba2\u6237\u7aef-> IPV6\u670d\u52a1\u5668\u7aef\\n\\n\u4e0a\u9762\u5df2\u7ecf\u63d0\u5230\u4e86\uff0c\u652f\u6301IPV6\u7684\u7f51\u7edc\u975e\u5e38\u5c11\uff0c\u9664\u4e86\u624b\u673a\u6d41\u91cf\uff0c\u5927\u90e8\u5206\u7f51\u7edc\u73af\u5883\u662f\u4e0d\u652f\u6301IPV6\u89e3\u6790\u80fd\u529b\u7684\u3002\u90a3\u4e48\u8be5\u5982\u4f55\u8ba9IPV4 Only \u73af\u5883\u6210\u529f\u8bbf\u95eeIPV6\u670d\u52a1\u5668\u5462\uff1f\\n\\n\u5957\u7528CDN\u662f\u4e00\u4e2a\u975e\u5e38\u597d\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u5373\u6211\u4eec\u901a\u8fc7\u8bbf\u95eeCDN\u8282\u70b9\uff0c\u7136\u540e\u7531CDN\u7684\u670d\u52a1\u5668\u518d\u8bbf\u95eeIPV6\u7684\u670d\u52a1\u5668\uff0c\u5c31\u53ef\u4ee5\u5b9e\u73b0 IPV4 to IPV6 \u7684\u8bbf\u95ee\u3002\\n\\n> Cloudflare \u662f\u4e00\u4e2a\u514d\u8d39\u7684CDN\u4f9b\u5e94\u5546\uff0c\u901a\u8fc7Cloudflare\u4ee3\u7406\u540e\u7684\u7f51\u7edc\u53ef\u4ee5\u5c06\u6211\u4eec\u7684\u670d\u52a1\u5668\u4fdd\u62a4\u8d77\u6765\uff0c\u80fd\u6709\u6548\u907f\u514dDDOS\u653b\u51fb\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u5c31\u662f\u7ed9\u670d\u52a1\u5668\u5957\u4e86\u4e00\u4e2a\u76fe\u724c\u3002\u6b64\u5916\uff0cCloudflare\u7684\u6d41\u91cf\u6ca1\u6709\u9650\u5236\u4e14\u514d\u8d39\uff0c\u5728\u56fd\u5185\u7684\u8bbf\u95ee\u901f\u5ea6\u8fd8\u53ef\u4ee5\u3002\\n\\n\u4e00\u822c\u8ba4\u4e3a\u6709\u5982\u4e0b\u597d\u5904\uff1a\\n\\n1. \u514d\u8d39\u7684DNS\u89e3\u6790\u548cCDN\u4ee3\u7406\uff0cDNS\u652f\u6301\u6cdb\u57df\u540d\u89e3\u6790\\n2. \u652f\u6301IPV4 \u548c IPV6 \u6d41\u91cf\u7684\u76f8\u4e92\u8f6c\u6362\\n3. \u9690\u85cf\u771f\u5b9eIP\u5730\u5740\\n4. \u907f\u514dDDOS\u653b\u51fb\\n5. \u6d41\u91cf\u65e0\u9650\u4e14\u514d\u8d39\\n\\n\u6559\u7a0b\u5982\u4e0b\uff1a\\n\\n[\u5f00\u542f Cloudflare CDN \u4ee3\u7406\uff0c\u5b9e\u73b0 IPv4 to IPv6 \u8f6c\u6362](https://blog.csdn.net/qq_38894585/article/details/131054885)\\n\\n\u6211\u7684DNS\u8bbe\u7f6e\u5982\u4e0b\u56fe\u6240\u793a\\n\\n![image-20230712223406059](assets/img/image-20230712223406059.png)\\n\\nhome6 \u662f\u901a\u8fc7DDNS\u7ed1\u5b9a\u7684\u57df\u540d\uff0cCNAME \u662f\u57df\u540d\u522b\u540d\uff0c\u70b9\u4eae\u4e86\u5c0f\u4e91\u6735\uff0c\u5373\u5b9e\u73b0\u4e86IPV4\u4ee3\u7406\u3002\\n\\n\u81f3\u4e8e\u4e3a\u4ec0\u4e48\u901a\u8fc7CNANME\u5b9e\u73b0\uff0c\u539f\u56e0\u662fCloudflare\u4e0d\u5141\u8bb8\u4e24\u4e2aAAAA\u6307\u5411\u7684\u57df\u540d\uff0c\u540c\u65f6\u652f\u6301\u4ee3\u7406\u548c\u76f4\u8fde\u3002\u6545\u6211\u4eec\u901a\u8fc7CNAME\uff0c\u8ba9\u6211\u4eec\u7684DNS\u5b9e\u73b0\u8fd9\u4e00\u529f\u80fd\u3002\\n\\n### \u9a8c\u8bc1\\n\\n\u5982\u679c\u4ee3\u7406\u6210\u529f\uff0c\u90a3\u4e48\u6211\u4eecping IPV4 \u5f97\u5230\u7684\u662fIPV4\u5730\u5740\uff0c\u800cping IPV6 \u5f97\u5230\u7684\u662fIPV6\u5730\u5740\u3002\\n\\n```\\nping movie.abc.com \\nping6 movie.abc.com\\n```\\n\\n### \u4e3a\u4ec0\u4e48\u914d\u7f6e\u4e86\u8fd8\u662f\u65e0\u6cd5\u4ee3\u7406\\n\\n#### SSL/TLS \u662f\u5426\u8bbe\u7f6e\u4e3aFULL\\n\\n\u5efa\u8bae\u7ed9\u670d\u52a1\u5668\u8bbe\u7f6e\u8bc1\u4e66\uff0c\u4f7f\u7528FULL\u6a21\u5f0f\u662f\u652f\u6301\u81ea\u7b7e\u8bc1\u4e66\u3002\u4e3a\u4e86\u7b80\u5316\u8fd9\u4e00\u6b65\u9aa4\uff0c\u53ef\u4ee5\u4f7f\u7528Caddy \u6216 NPM \u6765\u5e2e\u52a9\u6211\u4eec\u7533\u8bf7\u3002\\n\\n\u6211\u4f7f\u7528\u7684NPM\uff0c\u4e0b\u9762\u662f\u6211\u7684npm\u914d\u7f6e\u3002\\n\\n![image-20230713153936702](assets/img/image-20230713153936702.png)\\n\\n![image-20230712224052662](assets/img/image-20230712224052662.png)\\n\\nSSL/TSL \u8fde\u63a5\u6a21\u5f0f\u6709\u56db\u79cd\u6a21\u5f0f\uff1a OFF\u3001Flexible SSL\u3001Full SSL\u3001Full SSL (Strict)\\n\\n- **OFF**\uff1a\u5173\u95ed HTTPS \u8bbf\u95ee\uff0c\u6240\u6709\u8bbf\u5ba2\u91cd\u5b9a\u5411\u5230 HTTP\u3002\\n- **Flexible**\uff1a\u8bbf\u5ba2\u8bbf\u95ee\u4f60\u7f51\u7ad9\u7528 HTTPS\uff0c\u4f46\u662f CDN \u5230\u4f60\u6e90\u670d\u52a1\u5668\u62c9\u53d6\u4e1c\u897f\u65f6\u7528\u7684 HTTP \u534f\u8bae\u3002\u8fd9\u4e2aSSL\u6a21\u5f0f\u4e00\u952e\u5b9e\u73b0\u7528\u6237\u5230CF\u7684SSL\u52a0\u5bc6\u6a21\u5f0f\uff0c\u6211\u4eec\u670d\u52a1\u5668\u4e2d\u7684\u7f51\u7ad9\u53ef\u4ee5\u4e0d\u5b89\u88c5SSL\u8bc1\u4e66\uff0c\u7136\u540e\u7528\u6237\u6253\u5f00\u4e5f\u53ef\u4ee5\u770b\u5230\u662fHTTPS\u683c\u5f0f\u3002\u6839\u636eCF\u7684\u5efa\u8bae\uff0c\u5982\u679c\u786e\u5b9e\u6ca1\u6709\u529e\u6cd5\u5728\u670d\u52a1\u5668\u7aef\u7ed9\u7f51\u7ad9\u5b89\u88c5\u8bc1\u4e66\u7684\u624d\u4f7f\u7528\u8fd9\u4e2a\u529e\u6cd5\u3002\\n- **Full**\uff1a\u8fd9\u4e2a\u6a21\u5f0f\u533a\u522b\u5728\u4e8eCF\u5230\u670d\u52a1\u5668\u7aef\u662f\u53ef\u4ee5\u4f7f\u7528\u81ea\u7b7e\u8bc1\u4e66\u7684\u3002\u6b64\u9009\u9879\u9002\u5408\u6e90\u670d\u52a1\u5668\u7528\u7684\u662f\u81ea\u7b7e\u540d SSL \u8bc1\u4e66\u6216\u65e0\u6548\u8bc1\u4e66\u7684\u60c5\u51b5\\n- **Full (Strict)**\uff1a\u9700\u8981CF\u5230\u670d\u52a1\u5668\u7aef\u5b89\u88c5SSL\u8bc1\u4e66\u800c\u4e14\u5fc5\u987b\u662f\u8ba4\u8bc1\u8fc7\u7684\u8bc1\u4e66\uff0c\u4e0d\u53ef\u4ee5\u81ea\u7b7e\u8bc1\u4e66\u3002\\n\\n\u603b\u7ed3\uff0c\u9664\u4e86OFF\uff0c\u5176\u4ed6\u90fd\u662f\u4f7f\u7528https\u4e0e\u7528\u6237\u8fde\u63a5\u3002\u5efa\u8bae\u4f7f\u7528Full (Strict)\uff0c\u5982\u679c\u670d\u52a1\u5668\u6ca1\u6709\u529e\u6cd5\u4e0ahttps\uff0c\u5c31\u9009\u62e9Flexible\u3002\\n\\n> \u66f4\u591aCloudflare\u914d\u7f6e\u8be6\u89c1\uff1a[cloudflare\u52a0\u901f\u4e2a\u4eba\u7f51\u7ad9\u548c\u5b89\u5168\u9632\u62a4\u8bbe\u7f6e\u6307\u5317](https://www.zhoulujun.cn/html/tools/cloudServices/CDN/8254.html)\\n\\n#### \u7aef\u53e3\u4e0d\u80fd\u4f7f\u752880/443\\n\\n\u7531\u4e8e\u8fd0\u8425\u5546\u7684\u9650\u5236\uff0c\u5bb6\u7528\u5149\u732b\u662f\u4f1a\u62d2\u7edd80/443\u7aef\u53e3\u7684\u5165\u7ad9\u6d41\u91cf\u7684\u3002\u6240\u4ee5\u6211\u4eec\u9700\u8981\u6539\u6362\u7aef\u53e3\u3002[Cloudflare\u652f\u6301\u7684\u7aef\u53e3](https://developers.cloudflare.com/fundamentals/get-started/reference/network-ports/) \u5982\u4e0b\u6240\u793a\u3002\\n\\nHTTP\uff1a\\n\\n- 80\\n- 8080\\n- 8880\\n- 2052\\n- 2082\\n- 2086\\n- 2095\\n\\nHTTPS:\\n\\n- 443\\n- 2053\\n- 2083\\n- 2087\\n- 2096\\n- 8443\\n\\n\u6545\u6211\u4eec\u5c06\u670d\u52a1\u5668\u4e0a\u7684http\u7684\u76d1\u542c\u7aef\u53e3\u6539\u4e3a8443\\n\\n### \u66f4\u6539cloudlfare \u56de\u6eaf\u7aef\u53e3\\n\\n\u7531\u4e8e\u6bcf\u6b21\u6211\u4eec\u8bf7\u6c42\u57df\u540d\u90fd\u9700\u8981\u5e26\u4e0a8443\u7684\u7aef\u53e3\u53f7\uff0c\u5b9e\u5728\u6709\u70b9\u4e11\uff0c\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u89c4\u5219\uff0c\u5bf9CDN\u56de\u6eaf\u8bf7\u6c42\u670d\u52a1\u5668\u7684\u7aef\u53e3\u8fdb\u884c\u66f4\u6539\u3002\\n\\n\u53c2\u8003\u6559\u7a0b\uff1a[\u4f7f\u7528cloudflare\u91cd\u5199\u7aef\u53e3](https://blog.csdn.net/weixin_44573077/article/details/129450783)\\n\\n![](assets/img/18bad85116d143288a9ed4d9f054b181.png)\\n\\n## \u603b\u7ed3 & \u6548\u679c\\n\\n\u7efc\u4e0a\u6240\u8ff0\uff0c\u6211\u4eec\u901a\u8fc7\u5957\u7528Cloudflare\u7684CDN\u670d\u52a1\uff0c\u4f7f\u6211\u4eec\u5728IPV4\u73af\u5883\u4e0b\u4e5f\u80fd\u8bbf\u95eeIPV6\u4e0a\u7684\u670d\u52a1\u5668\u3002\\n\\n\u5728DNS\u914d\u7f6e\u4e2d\uff0c\u57df\u540d\u7cfb\u7edf\u540c\u65f6\u652f\u6301\u4e86IPV6\u76f4\u8fde\u548cIPV4\u4ee3\u7406\u4e24\u79cd\u6a21\u5f0f\uff0c\u8fd9\u610f\u5473\u7740\uff0c\u5f53\u6211\u4eec\u7684\u7f51\u7edc\u73af\u5883\u6ee1\u8db3IPV6\u65f6\uff0c\u8fd8\u662f\u53ef\u4ee5\u901a\u8fc7\u76f4\u8fde\u6765\u6700\u5927\u5316\u7684\u6253\u6ee1\u6211\u4eec\u7684\u5e26\u5bbd\uff0c\u5b9e\u73b0\u6700\u4f73\u7684\u94fe\u63a5\u901f\u5ea6\u3002\\n\\n\u4e0b\u9762\u653e\u4e00\u5f20\u6211\u4eec\u901a\u8fc7Cloudflare\u4ee3\u7406\u540e\u670d\u52a1\u5668\u4e0b\u8f7d\u8d44\u6e90\u7684\u901f\u5ea6\uff0c\u7531\u4e8e\u516c\u53f8\u7684\u7f51\u7edc\u662f\u9999\u6e2f\ud83c\udded\ud83c\uddf0\uff0c\u6240\u4ee5\u4e0b\u8f7d\u901f\u5ea6\u975e\u5e38\u5feb\u3002\\n\\n![image-20230713104613885](assets/img/image-20230713104613885.png)\\n\\n\u4f7f\u7528\u624b\u673a\u6d41\u91cf\uff08IPV6\uff09\u76f4\u8fde\u7684\u901f\u5ea6\u3002\\n\\n![image-20230713105340852](assets/img/image-20230713105340852.png)"},{"id":"old-computer-adventures/cloudflare-tunnel","metadata":{"permalink":"/blog/old-computer-adventures/cloudflare-tunnel","editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/01.\u5bb6\u7528\u670d\u52a1\u5668\u6298\u817e\u8bb0/09.\u5185\u7f51\u7a7f\u900f\u65b9\u6848\u5927\u5168.md","source":"@site/blog/01.\u5bb6\u7528\u670d\u52a1\u5668\u6298\u817e\u8bb0/09.\u5185\u7f51\u7a7f\u900f\u65b9\u6848\u5927\u5168.md","title":"0x9.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u5185\u7f51\u7a7f\u900f\u65b9\u6848|Cloudflare Tunnel","description":"Cloudflare Tunnel","date":"2022-11-28T00:54:15.000Z","tags":[],"readingTime":0.08,"hasTruncateMarker":false,"authors":[],"frontMatter":{"title":"0x9.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u5185\u7f51\u7a7f\u900f\u65b9\u6848|Cloudflare Tunnel","categories":["\u73af\u5883\u7ba1\u7406","\u5bb6\u7528\u670d\u52a1\u5668\u6298\u817e\u8bb0"],"date":"2022-11-28T00:54:15.000Z","slug":"old-computer-adventures/cloudflare-tunnel"},"unlisted":false,"prevItem":{"title":"0x11.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u5185\u7f51\u7a7f\u900f\u65b9\u6848|IPV6","permalink":"/blog/old-computer-adventures/ipv6"},"nextItem":{"title":"0x8.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u670d\u52a1\u642d\u5efa|\u6c47\u603b","permalink":"/blog/old-computer-adventures/backgroud-services-all"}},"content":"## Cloudflare Tunnel\\n\\n> \u6587\u5b57\u6559\u7a0b\uff1ahttps://tech.aufomm.com/\\n>\\n> \u89c6\u9891\u6559\u7a0b\uff1ahttps://www.bilibili.com/video/BV1XY411T7sT"},{"id":"old-computer-adventures/backgroud-services-all","metadata":{"permalink":"/blog/old-computer-adventures/backgroud-services-all","editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/01.\u5bb6\u7528\u670d\u52a1\u5668\u6298\u817e\u8bb0/08.\u670d\u52a1\u642d\u5efa-Alist.md","source":"@site/blog/01.\u5bb6\u7528\u670d\u52a1\u5668\u6298\u817e\u8bb0/08.\u670d\u52a1\u642d\u5efa-Alist.md","title":"0x8.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u670d\u52a1\u642d\u5efa|\u6c47\u603b","description":"\u5bb6\u7528\u670d\u52a1\u5668\u7684\u57fa\u672c\u90e8\u7f72\u73af\u5883\u4e3a","date":"2022-10-26T02:21:59.000Z","tags":[],"readingTime":1.025,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"0x8.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u670d\u52a1\u642d\u5efa|\u6c47\u603b","date":"2022-10-26T02:21:59.000Z","slug":"old-computer-adventures/backgroud-services-all","categories":["\u73af\u5883\u7ba1\u7406","\u5bb6\u7528\u670d\u52a1\u5668\u6298\u817e\u8bb0"]},"unlisted":false,"prevItem":{"title":"0x9.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u5185\u7f51\u7a7f\u900f\u65b9\u6848|Cloudflare Tunnel","permalink":"/blog/old-computer-adventures/cloudflare-tunnel"},"nextItem":{"title":"0x7.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u670d\u52a1\u642d\u5efa|Portainer","permalink":"/blog/old-computer-adventures/Portainer"}},"content":"\u5bb6\u7528\u670d\u52a1\u5668\u7684\u57fa\u672c\u90e8\u7f72\u73af\u5883\u4e3a\\n- \u5bb6\u7528\u670d\u52a1\u5668\uff1aDocker(Portainer)\\n- \u516c\u7f51IP\u670d\u52a1\u5668\uff1aRancher\\n\\n\u57fa\u7840\u73af\u5883\u95ee\u9898\u89e3\u51b3\u540e\uff0c\u53ef\u4ee5\u5f00\u59cb\u5f00\u59cb\u642d\u5efa\u6709\u8da3\u7684\u670d\u52a1\u4e86\\n\x3c!--more--\x3e\\n\x3c!-- truncate --\x3e\\n\\n## Alist\\n\\nAlist \u662f\u4e00\u4e2a\u7f51\u76d8\u76f4\u94fe\u9879\u76ee\uff0c\u53ef\u4ee5\u628a\u5404\u7c7b\u7f51\u76d8\uff08\u963f\u91cc\u4e91\uff0c\u767e\u5ea6\u4e91\uff0c\u672c\u5730\u6587\u4ef6\uff09\u7b49\u90fd\u6302\u8f7d\u5230\u7f51\u9875\u4e0a\u8fdb\u884c\u67e5\u770b\uff0c\u5e76\u5206\u4eab\u3002\\n\\n\u672c\u6b21\u4f7f\u7528Alist\u4e3b\u8981\u7528\u4e00\u4e0b\u529f\u80fd\uff1a\\n- \u6302\u8f7d `\u670d\u52a1\u5668\u672c\u5730\u76ee\u5f55`\uff0c\u628a\u670d\u52a1\u5668\u53d8\u6210\u4e00\u4e2a`\u7f51\u76d8`\\n- WebDAV\uff1aAlist \u81ea\u5e26WebDAV \u662f\u4e00\u4e2a\u610f\u5916\u4e4b\u559c\uff0c\u8fd9\u6837\u6240\u4ee5\u7684\u7535\u5b50\u4e66\u90fd\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7WebDAV\u8fdb\u884c\u67e5\u770b\u3002\\n\\n### \u5b98\u7f51\u9879\u76ee\\nhttps://github.com/alist-org/alist\\n\\n### \u5b89\u88c5\u6559\u7a0b\\n\\n> [\u3010\u597d\u73a9\u7684Docker\u9879\u76ee\u3011\u76ee\u524d\u6700\u597d\u7528\u7684\u7f51\u76d8\u76f4\u94fe\u7a0b\u5e8f\u2014\u2014AList\uff0c\u652f\u6301\u5e02\u9762\u4e0a\u51e0\u4e4e\u6240\u6709\u7f51\u76d8\uff01\u53ef\u4ee5\u4ee3\u66ffOlaindex\uff01](https://blog.laoda.de/archives/docker-install-alist)"},{"id":"old-computer-adventures/Portainer","metadata":{"permalink":"/blog/old-computer-adventures/Portainer","editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/01.\u5bb6\u7528\u670d\u52a1\u5668\u6298\u817e\u8bb0/07.\u670d\u52a1\u642d\u5efa-Portainer.md","source":"@site/blog/01.\u5bb6\u7528\u670d\u52a1\u5668\u6298\u817e\u8bb0/07.\u670d\u52a1\u642d\u5efa-Portainer.md","title":"0x7.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u670d\u52a1\u642d\u5efa|Portainer","description":"\u7ee7\u4e0a\u6587\u63d0\u53ca\u7684K8S\u5bb9\u5668\u7ba1\u7406\u5e73\u53f0\uff0cPortainer\u662f\u4e00\u4e2a\u9002\u5408\u672c\u5730\u90e8\u7f72\u7684\u8f7b\u91cf\u5316\u7684Docker\u53ef\u89c6\u5316\u7ba1\u7406\u5e73\u53f0\uff0c\u53ef\u4ee5\u8ba9\u4f60\u8f7b\u677e\u5730\u7ba1\u7406\u4f60\u7684Docker\u5bb9\u5668\u3002","date":"2022-10-26T02:01:18.000Z","tags":[],"readingTime":1.985,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"0x7.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u670d\u52a1\u642d\u5efa|Portainer","date":"2022-10-26T02:01:18.000Z","slug":"old-computer-adventures/Portainer","categories":["\u73af\u5883\u7ba1\u7406","\u5bb6\u7528\u670d\u52a1\u5668\u6298\u817e\u8bb0"]},"unlisted":false,"prevItem":{"title":"0x8.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u670d\u52a1\u642d\u5efa|\u6c47\u603b","permalink":"/blog/old-computer-adventures/backgroud-services-all"},"nextItem":{"title":"0x6.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u670d\u52a1\u642d\u5efa|Rancher","permalink":"/blog/old-computer-adventures/rancher"}},"content":"\u7ee7\u4e0a\u6587\u63d0\u53ca\u7684K8S\u5bb9\u5668\u7ba1\u7406\u5e73\u53f0\uff0cPortainer\u662f\u4e00\u4e2a\u9002\u5408\u672c\u5730\u90e8\u7f72\u7684\u8f7b\u91cf\u5316\u7684Docker\u53ef\u89c6\u5316\u7ba1\u7406\u5e73\u53f0\uff0c\u53ef\u4ee5\u8ba9\u4f60\u8f7b\u677e\u5730\u7ba1\u7406\u4f60\u7684Docker\u5bb9\u5668\u3002\\n\\nPortainer \u4f7f\u7528\u975e\u5e38\u7b80\u5355\uff0c\u53ef\u4ee5\u8ba9\u4f60\u6446\u8131\u8bb0\u5fc6\u590d\u5236\u7684Docker\u547d\u4ee4\\n\x3c!--more--\x3e\\n\x3c!-- truncate --\x3e\\n\\n## \u5b89\u88c5\\n\\n### \u521b\u5efa\u76ee\u5f55\\n\u521b\u5efa\u6587\u4ef6\u5939\u7528\u4ee5\u6302\u8f7d`\u914d\u7f6e\u6587\u4ef6`\u548c`\u6570\u636e\u6587\u4ef6`\\n```\\nmkdir -p ${HOME}/docker-data/portainer_data\\n```\\n\\n\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b\\n```\\ndocker-data/\\n\u251c\u2500\u2500 alist\\n\u2502\xa0\xa0 \u251c\u2500\u2500 config.json\\n\u2502\xa0\xa0 \u251c\u2500\u2500 data.db\\n\u2502\xa0\xa0 \u2514\u2500\u2500 temp\\n\u251c\u2500\u2500 docker-registery\\n\u2502\xa0\xa0 \u2514\u2500\u2500 docker\\n\u251c\u2500\u2500 docker-registry\\n\u251c\u2500\u2500 mysql\\n\u2502\xa0\xa0 \u251c\u2500\u2500 conf\\n\u2502\xa0\xa0 \u2514\u2500\u2500 data\\n\u251c\u2500\u2500 mysql5.7.23\\n\u2502\xa0\xa0 \u251c\u2500\u2500 auto.cnf\\n\u2502\xa0\xa0 \u251c\u2500\u2500 ca-key.pem\\n\u2502\xa0\xa0 \u251c\u2500\u2500 ca.pem\\n\u2502\xa0\xa0 \u251c\u2500\u2500 client-cert.pem\\n\u2502\xa0\xa0 \u251c\u2500\u2500 client-key.pem\\n\u2502\xa0\xa0 \u251c\u2500\u2500 db\\n\u2502\xa0\xa0 \u251c\u2500\u2500 ib_buffer_pool\\n\u2502\xa0\xa0 \u251c\u2500\u2500 ibdata1\\n\u2502\xa0\xa0 \u251c\u2500\u2500 ib_logfile0\\n\u2502\xa0\xa0 \u251c\u2500\u2500 ib_logfile1\\n\u2502\xa0\xa0 \u251c\u2500\u2500 ibtmp1\\n\u2502\xa0\xa0 \u251c\u2500\u2500 mysql\\n\u2502\xa0\xa0 \u251c\u2500\u2500 performance_schema\\n\u2502\xa0\xa0 \u251c\u2500\u2500 private_key.pem\\n\u2502\xa0\xa0 \u251c\u2500\u2500 public_key.pem\\n\u2502\xa0\xa0 \u251c\u2500\u2500 server-cert.pem\\n\u2502\xa0\xa0 \u251c\u2500\u2500 server-key.pem\\n\u2502\xa0\xa0 \u2514\u2500\u2500 sys\\n\u251c\u2500\u2500 nginx\\n\u2502\xa0\xa0 \u251c\u2500\u2500 conf\\n\u2502\xa0\xa0 \u251c\u2500\u2500 html\\n\u2502\xa0\xa0 \u251c\u2500\u2500 logs\\n\u2502\xa0\xa0 \u2514\u2500\u2500 ssl\\n\u251c\u2500\u2500 portainer_data\\n\u2502\xa0\xa0 \u251c\u2500\u2500 backups\\n\u2502\xa0\xa0 \u251c\u2500\u2500 bin\\n\u2502\xa0\xa0 \u251c\u2500\u2500 certs\\n\u2502\xa0\xa0 \u251c\u2500\u2500 compose\\n\u2502\xa0\xa0 \u251c\u2500\u2500 config.json\\n\u2502\xa0\xa0 \u251c\u2500\u2500 docker_config\\n\u2502\xa0\xa0 \u251c\u2500\u2500 portainer.db\\n\u2502\xa0\xa0 \u251c\u2500\u2500 portainer.key\\n\u2502\xa0\xa0 \u251c\u2500\u2500 portainer.pub\\n\u2502\xa0\xa0 \u2514\u2500\u2500 tls\\n\u251c\u2500\u2500 postgresql [error opening dir]\\n\u2514\u2500\u2500 rancher\\n \xa0\xa0 \u251c\u2500\u2500 auditlog # \u65b0\u5efa\\n\xa0\xa0  \u2514\u2500\u2500 config # \u65b0\u5efa\\n```\\n\\n### \u8fd0\u884c\u5bb9\u5668\\n```bash\\ndocker run -d -p 8000:8000 -p 9443:9443 \\\\\\n  --name portainer --restart=always \\\\\\n  -v /var/run/docker.sock:/var/run/docker.sock  \\\\\\n  -v ${HOME}/docker-data/portainer_data:/data \\\\\\n  portainer/portainer-ce\\n```\\n\\n## \u6210\u54c1\u5c55\u793a\\n\\n![image-20221026021708419](./assets/img/image-20221026021708419.png)\\n\\n### \u4f7f\u7528\u4f53\u9a8c\\n\\nPortainer \u53ef\u4ee5\u76f4\u89c2\u7684\u4f7f\u7528\u53ef\u89c6\u5316\u9762\u677f\u521b\u5efaDocker\u5bb9\u5668\uff0c\u4e0e\u4f7f\u7528\u547d\u4ee4\u884c\u4e00\u81f4\u3002\u4f46\u662f\u53ef\u4ee5\u5927\u5927\u5e2e\u52a9\u6211\u4eec\u51cf\u4f4edocker\u547d\u4ee4\u7684\u8bb0\u5fc6\u91cf\u3002\u800c\u4e14\u5bf9\u4e8e\u50cf`docker inspect`\u6b64\u7c7b\u7684\u64cd\u4f5c\u6765\u8bf4\uff0c\u5728\u9875\u9762\u4e0a\u67e5\u770b\u4fe1\u606f\u548c\u590d\u5236\u4fe1\u606f\u76f8\u8f83`\u547d\u4ee4\u884c`\u4e5f\u66f4\u4e3a\u65b9\u4fbf\u3002\\n\\n\\n\\n## \u66f4\u591a\u8d44\u6599\uff1a\\n- [Install Portainer with Docker on Linux](https://docs.portainer.io/start/install/server/docker/linux)\\n- [\u3010Docker\u7cfb\u5217\u3011Docker\u53ef\u89c6\u5316\u9762\u677f\u2014\u2014Portainer](https://blog.laoda.de/archives/portainer)"},{"id":"old-computer-adventures/rancher","metadata":{"permalink":"/blog/old-computer-adventures/rancher","editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/01.\u5bb6\u7528\u670d\u52a1\u5668\u6298\u817e\u8bb0/06.\u670d\u52a1\u642d\u5efa-Rancher.md","source":"@site/blog/01.\u5bb6\u7528\u670d\u52a1\u5668\u6298\u817e\u8bb0/06.\u670d\u52a1\u642d\u5efa-Rancher.md","title":"0x6.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u670d\u52a1\u642d\u5efa|Rancher","description":"Rancher\u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u4f01\u4e1a\u7ea7\u5bb9\u5668\u7ba1\u7406\u5e73\u53f0\u3002\u901a\u8fc7Rancher\uff0c\u4f01\u4e1a\u518d\u4e5f\u4e0d\u5fc5\u81ea\u5df1\u4f7f\u7528\u4e00\u7cfb\u5217\u7684\u5f00\u6e90\u8f6f\u4ef6\u53bb\u4ece\u5934\u642d\u5efa\u5bb9\u5668\u670d\u52a1\u5e73\u53f0\u3002Rancher\u63d0\u4f9b\u4e86\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\u7684\u7ba1\u7406Docker\u548cKubernetes\u7684\u5168\u6808\u5316\u5bb9\u5668\u90e8\u7f72\u4e0e\u7ba1\u7406\u5e73\u53f0\u3002","date":"2022-10-26T01:34:10.000Z","tags":[],"readingTime":2.525,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"0x6.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u670d\u52a1\u642d\u5efa|Rancher","date":"2022-10-26T01:34:10.000Z","slug":"old-computer-adventures/rancher","categories":["\u73af\u5883\u7ba1\u7406","\u5bb6\u7528\u670d\u52a1\u5668\u6298\u817e\u8bb0"]},"unlisted":false,"prevItem":{"title":"0x7.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u670d\u52a1\u642d\u5efa|Portainer","permalink":"/blog/old-computer-adventures/Portainer"},"nextItem":{"title":"0x5.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u5185\u7f51\u7a7f\u900f\u65b9\u6848|ZerotierOne","permalink":"/blog/old-computer-adventures/zerotier-one"}},"content":"Rancher\u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u4f01\u4e1a\u7ea7\u5bb9\u5668\u7ba1\u7406\u5e73\u53f0\u3002\u901a\u8fc7Rancher\uff0c\u4f01\u4e1a\u518d\u4e5f\u4e0d\u5fc5\u81ea\u5df1\u4f7f\u7528\u4e00\u7cfb\u5217\u7684\u5f00\u6e90\u8f6f\u4ef6\u53bb\u4ece\u5934\u642d\u5efa\u5bb9\u5668\u670d\u52a1\u5e73\u53f0\u3002Rancher\u63d0\u4f9b\u4e86\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\u7684\u7ba1\u7406Docker\u548cKubernetes\u7684\u5168\u6808\u5316\u5bb9\u5668\u90e8\u7f72\u4e0e\u7ba1\u7406\u5e73\u53f0\u3002\\n\x3c!--more--\x3e\\n\x3c!-- truncate --\x3e\\n\\n## \u5b89\u88c5\\n\\nRancher \u57fa\u4e8eDocker\u5b89\u88c5\u975e\u5e38\u65b9\u4fbf\\n\\n### \u521b\u5efa\u76ee\u5f55\\n\u521b\u5efa\u6587\u4ef6\u5939\u7528\u4ee5\u6302\u8f7d`\u914d\u7f6e\u6587\u4ef6`\u548c`\u6570\u636e\u6587\u4ef6`\\n```\\nmkdir -p docker-data/rancher/{config, auditlog}\\n```\\n\\n\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b\\n```\\ndocker-data/\\n\u251c\u2500\u2500 alist\\n\u2502\xa0\xa0 \u251c\u2500\u2500 config.json\\n\u2502\xa0\xa0 \u251c\u2500\u2500 data.db\\n\u2502\xa0\xa0 \u2514\u2500\u2500 temp\\n\u251c\u2500\u2500 docker-registery\\n\u2502\xa0\xa0 \u2514\u2500\u2500 docker\\n\u251c\u2500\u2500 docker-registry\\n\u251c\u2500\u2500 mysql\\n\u2502\xa0\xa0 \u251c\u2500\u2500 conf\\n\u2502\xa0\xa0 \u2514\u2500\u2500 data\\n\u251c\u2500\u2500 mysql5.7.23\\n\u2502\xa0\xa0 \u251c\u2500\u2500 auto.cnf\\n\u2502\xa0\xa0 \u251c\u2500\u2500 ca-key.pem\\n\u2502\xa0\xa0 \u251c\u2500\u2500 ca.pem\\n\u2502\xa0\xa0 \u251c\u2500\u2500 client-cert.pem\\n\u2502\xa0\xa0 \u251c\u2500\u2500 client-key.pem\\n\u2502\xa0\xa0 \u251c\u2500\u2500 db\\n\u2502\xa0\xa0 \u251c\u2500\u2500 ib_buffer_pool\\n\u2502\xa0\xa0 \u251c\u2500\u2500 ibdata1\\n\u2502\xa0\xa0 \u251c\u2500\u2500 ib_logfile0\\n\u2502\xa0\xa0 \u251c\u2500\u2500 ib_logfile1\\n\u2502\xa0\xa0 \u251c\u2500\u2500 ibtmp1\\n\u2502\xa0\xa0 \u251c\u2500\u2500 mysql\\n\u2502\xa0\xa0 \u251c\u2500\u2500 performance_schema\\n\u2502\xa0\xa0 \u251c\u2500\u2500 private_key.pem\\n\u2502\xa0\xa0 \u251c\u2500\u2500 public_key.pem\\n\u2502\xa0\xa0 \u251c\u2500\u2500 server-cert.pem\\n\u2502\xa0\xa0 \u251c\u2500\u2500 server-key.pem\\n\u2502\xa0\xa0 \u2514\u2500\u2500 sys\\n\u251c\u2500\u2500 nginx\\n\u2502\xa0\xa0 \u251c\u2500\u2500 conf\\n\u2502\xa0\xa0 \u251c\u2500\u2500 html\\n\u2502\xa0\xa0 \u251c\u2500\u2500 logs\\n\u2502\xa0\xa0 \u2514\u2500\u2500 ssl\\n\u251c\u2500\u2500 portainer_data\\n\u2502\xa0\xa0 \u251c\u2500\u2500 backups\\n\u2502\xa0\xa0 \u251c\u2500\u2500 bin\\n\u2502\xa0\xa0 \u251c\u2500\u2500 certs\\n\u2502\xa0\xa0 \u251c\u2500\u2500 compose\\n\u2502\xa0\xa0 \u251c\u2500\u2500 config.json\\n\u2502\xa0\xa0 \u251c\u2500\u2500 docker_config\\n\u2502\xa0\xa0 \u251c\u2500\u2500 portainer.db\\n\u2502\xa0\xa0 \u251c\u2500\u2500 portainer.key\\n\u2502\xa0\xa0 \u251c\u2500\u2500 portainer.pub\\n\u2502\xa0\xa0 \u2514\u2500\u2500 tls\\n\u251c\u2500\u2500 postgresql [error opening dir]\\n\u2514\u2500\u2500 rancher\\n \xa0\xa0 \u251c\u2500\u2500 auditlog # \u65b0\u5efa\\n\xa0\xa0  \u2514\u2500\u2500 config # \u65b0\u5efa\\n```\\n\\n### \u8fd0\u884c\u5bb9\u5668\\n```bash\\ndocker run -d --privileged  \\\\\\n   --restart=unless-stopped  \\\\\\n   --name rancher2.5 -p 8080:80 -p 8443:443 \\\\\\n   -v ~/docker-data/rancher/config:/var/lib/rancher \\\\\\n   -v ~/docker-data/rancher/auditlog:/var/log/auditlog \\\\\\n   rancher/rancher:v2.5-head\\n```\\n\\n## \u6210\u54c1\u5c55\u793a\\n\\n![image-20221026015731954](./assets/img/image-20221026015731954.png)\\n\\n## \u540e\u8bb0\\n\u5b89\u88c5`Rancher`\u5e76\u6ca1\u6709\u60f3\u8c61\u4e2d\u4e00\u5e06\u98ce\u987a\uff0c\u5728\u5b89\u88c5\u8fc7\u7a0b\u4e2d\u78b0\u5230\u4e00\u7cfb\u5217\u95ee\u9898\uff0c\u5982 Rancher \u65e0\u6cd5\u5728`Manjaro`\u7cfb\u7edf\u4e0a\u6210\u529f\u5b89\u88c5\uff0c\u66f4\u6362`Ubuntu`\u540e\u624d\u89e3\u51b3\u3002\\n\\n\u5728\u540c\u4e00\u53f0\u673a\u5668\u4e0a\u540c\u65f6\u5b89\u88c5 `rancher` \u548c `rancher-agent` \u4f1a\u9047\u5230\u4e00\u4e9b\u95ee\u9898\u3002\u7279\u522b\u662f\u5e0c\u671b\u901a\u8fc7\u5f02\u5730\u7ec4\u7f51\u7684\u65b9\u5f0f\u5c06\u4e0d\u540c\u65e0\u516c\u7f51\u7684\u8bbe\u5907\u7ec4\u5408\u5728\u4e00\u8d77\uff0c\u5e76\u4f7f\u7528\u5c40\u57df\u7f51\u57df\u540d\u7ba1\u7406\u7684\u65f6\u5019\uff0c\u9047\u5230\u4e86\u4e00\u7cfb\u5217\u7f51\u7edc\u7684\u95ee\u9898\u3002\\n\\n\u6700\u540e\u4f7f\u7528\u7684\u89e3\u51b3\u65b9\u6848\u662f\uff0c\u5728\u5bb6\u7528\u670d\u52a1\u5668\u5b89\u88c5rancher-server\uff0c\u5c06\u5e26\u516c\u7f51IP\u7684\u670d\u52a1\u5668\u4f5c\u4e3a`rancher-agent`\uff0c\u597d\u5904\u662f\u5728\u5b89\u88c5\u5931\u8d25\u540e\u53ef\u4ee5\u76f4\u63a5\u91cd\u88c5\u7cfb\u7edf\u6e05\u7406\u73af\u5883\u3002\\n\\n## \u66f4\u591a\u8d44\u6599\uff1a\\n- [Installing Rancher on a Single Node Using Docker](https://rancher.com/docs/rancher/v2.6/en/installation/other-installation-methods/single-node-docker/)\\n- [\u5b89\u88c5Rancher\u5e76\u4f7f\u7528SSL](https://rancher.com/docs/rancher/v1.6/zh/installing-rancher/installing-server/basic-ssl-config/#rancherssl)"},{"id":"old-computer-adventures/zerotier-one","metadata":{"permalink":"/blog/old-computer-adventures/zerotier-one","editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/01.\u5bb6\u7528\u670d\u52a1\u5668\u6298\u817e\u8bb0/05.\u5185\u7f51\u7a7f\u900f\u65b9\u6848-ZerotierOne.md","source":"@site/blog/01.\u5bb6\u7528\u670d\u52a1\u5668\u6298\u817e\u8bb0/05.\u5185\u7f51\u7a7f\u900f\u65b9\u6848-ZerotierOne.md","title":"0x5.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u5185\u7f51\u7a7f\u900f\u65b9\u6848|ZerotierOne","description":"\u5185\u7f51\u7a7f\u900f\u662f\u628a\u5bb6\u7528\u670d\u52a1\u5668\u6539\u9020\u6210\u7f51\u7edc\u670d\u52a1\u5668\u7684\u91cd\u8981\u4e00\u6b65","date":"2022-08-08T00:37:45.000Z","tags":[],"readingTime":2.78,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"0x5.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u5185\u7f51\u7a7f\u900f\u65b9\u6848|ZerotierOne","date":"2022-08-08T00:37:45.000Z","slug":"old-computer-adventures/zerotier-one","categories":["\u73af\u5883\u7ba1\u7406","\u5bb6\u7528\u670d\u52a1\u5668\u6298\u817e\u8bb0"]},"unlisted":false,"prevItem":{"title":"0x6.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u670d\u52a1\u642d\u5efa|Rancher","permalink":"/blog/old-computer-adventures/rancher"},"nextItem":{"title":"0x10.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u5185\u7f51\u7a7f\u900f\u65b9\u6848|Headscale","permalink":"/blog/old-computer-adventures/Headscale"}},"content":"\u5185\u7f51\u7a7f\u900f\u662f\u628a\u5bb6\u7528\u670d\u52a1\u5668\u6539\u9020\u6210\u7f51\u7edc\u670d\u52a1\u5668\u7684\u91cd\u8981\u4e00\u6b65\\n\\n\u76ee\u524d\u6210\u719f\u7684\u89e3\u51b3\u65b9\u6848\u6709\\n\\n- \u7533\u8bf7\u516c\u7f51IP\uff1a\u9700\u8981\u8054\u7cfb\u7f51\u7edc\u670d\u52a1\u5546\uff0c\u56f0\u96be\\n- \u82b1\u751f\u58f3\\n- frp\\n- ngork\\n- zerotier\\n\\nzerotier\u548c\u4e0a\u8ff0\u65b9\u5f0f\u672c\u8d28\u7684\u533a\u522b\u662f\uff0c\u5b83\u662f\u4e00\u4e2a\u7ec4\u7f51\u5de5\u5177\uff0c\u76ee\u7684\u662f\u5c06\u6570\u53f0\u5df2\u6709\u7684\u8bbe\u5907\u7ec4\u5408\u6210\u4e00\u4e2a\u5927\u578b\u7684\u5c40\u57df\u7f51\u3002\\n\\n\x3c!--more--\x3e\\n\x3c!-- truncate --\x3e\\n\\n## \u5b89\u88c5\\n\\n\u8f6f\u4ef6\u4e0b\u8f7d\uff1a[\u5730\u5740](https://www.zerotier.com/download/)\\n\\nmac \u63a8\u8350\u5b89\u88c5\u5176\u5e26\u7684\u684c\u9762\u7aef\u5de5\u5177\\n\\nLinux\u63a8\u8350\u4f7f\u7528docker\u5b89\u88c5\\n\\n## \u521d\u7ea7\u4f7f\u7528\\n\\n### \u57fa\u7840\u547d\u4ee4\\n\\n```\\nsudo zerotier-cli join 233ccaac27xxxxx # \u52a0\u5165\u7f51\u7edc\\n200 join OK\\nsudo zerotier-cli info # \u67e5\u770b\u662f\u5426\u8fde\u5165\u7f51\u7edc\\n# 200 info 07bf052a5a 1.10.1 ONLINE\\nsudo zerotier-cli leave 233ccaac27xxxxx # \u65ad\u5f00\u7f51\u7edc\\t\\n```\\n\\n### \u540e\u53f0\u7ba1\u7406\\n\\n\u53ea\u8981\u77e5\u9053\u7f51\u7edc\u7684ID\uff0c\u5373`233ccaac27xxxxx`,\u4efb\u4f55\u8bbe\u5907\u90fd\u53ef\u4ee5\u8fde\u5165\u8be5\u7f51\u7edc\uff0c\u4f46\u662f\u53ea\u6709\u5728\u540e\u53f0\u901a\u8fc7\u7684\u8bbe\u5907\u624d\u80fd\u771f\u6b63\u52a0\u5165\\n\\n![img](./assets/img/1435533-20210902213401547-1548495256.png)\\n\\n\u9664\u4e86\u7b80\u5355\u7684\u8fd0\u884c\u63a5\u5165\u8bbe\u5907\u4ee5\u5916\uff0c\u8fd8\u53ef\u4ee5\\n\\n- \u7ba1\u7406\u8fde\u5165\u8bbe\u5907\u7684\u540d\u79f0\\n- \u4e3a\u6bcf\u53f0\u8bbe\u5907\u5206\u914dip\\n- \u9080\u8bf7\u8bbe\u5907\u52a0\u5165\\n\\n### \u9ad8\u7ea7\u4f7f\u7528-DNS\u670d\u52a1\u5668\\n\\n\u8bbe\u5907\u4e00\u65e6\u591a\u8d77\u6765\uff0c\u4f7f\u7528IP\u65e0\u6cd5\u8bb0\u4f4f\u6240\u6709\u7684\u8bbe\u5907\uff0c\u6240\u4ee5\u9700\u8981\u4e00\u53f0\u5c40\u57df\u7f51\u7684DNS\u670d\u52a1\u5668\u5efa\u7acb\u57df\u540d\uff0czeronsd\u5c31\u662f\u8d77\u5230\u8fd9\u6837\u7684\u4f5c\u7528\u3002\\n\\n> [zerotier\u8fdb\u9636 \u4f7f\u7528zeronsd\u4f5c\u4e3a\u79c1\u6709\u7f51\u6bb5DNS\u670d\u52a1\u5668](https://www.pudn.com/news/62833b7c9b6e2b6d55d678b9.html)\\n\\n**\u5bb9\u5668\u542f\u52a8\u670d\u52a1**\\n\\n```\\ndocker run --net host -itd \\\\\\n     --name zerodns \\\\\\n     -v /var/lib/zerotier-one/authtoken.secret:/authtoken.secret \\\\\\n     -v /var/lib/zerotier-one/token.txt:/token.txt \\\\\\n     zerotier/zeronsd start -s /authtoken.secret -t /token.txt  -w -d \u66ff\u6362\u4e3a\u4f60\u7684\u57df\u540d \u66ff\u6362\u4e3a\u4f60\u7684ID\\n```\\n\\n**\u8bf4\u660e**\\n\\n- authtoken.secret \\n\\n  \u5b83\u51b3\u5b9a\u4e86zerodns\u8fde\u63a5\u7684\u7f51\u7edc\uff0czerodns\u8fd0\u884c\u65f6\u5fc5\u987b\u5df2\u7ecf\u52a0\u5165\u4e86\u7f51\u7edc\u4e2d\uff0c\u4e00\u822c\u4f4d\u4e8e`/var/lib/zerotier-one/`\u4e0b\uff0c\u53d6\u51b3\u4e8e\u5b89\u88c5\u7684\u65b9\u5f0f\u3002\\n\\n- token.txt \\n\\n  \u751f\u6210token\u65f6\u79d8\u94a5\u6587\u4ef6\uff0c\u751f\u6210\u5b8c\u540e\u5c31\u6d88\u5931\uff0c\u9700\u8981\u4fdd\u6301\u4e0b\u6765\u3002\\n\\n**\u6700\u540e**\\n\\n\u6240\u6709\u52a0\u5165\u7684\u8bbe\u5907\u9700\u8981\u4f7f\u7528DNS\u524d\uff0c\u9700\u8981\u91cd\u65b0\u52a0\u5165\u7f51\u7edc\uff0c\u5e76\u52fe\u9009DNS\u9009\u9879\u3002\\n\\n![img](./assets/img/image-20220808011653241-9892621.png)\\n\\n\u670d\u52a1\u7aef\u6700\u597d\u4e5f\u662f\u91cd\u65b0\u52a0\u5165\u4e00\u4e0b\u7f51\u7edc\uff0c\u5e76\u91cd\u65b0\u542f\u52a8\u4e0b`zeronsd`\\n\\n```\\nsudo zerotier-cli leave 233ccaac27xxxxx # \u79bb\u5f00\\nsudo zerotier-cli join 233ccaac27xxxxx # \u52a0\u5165\\ndocker restart zerodns # \u91cd\u65b0\u542f\u52a8zeronsd\\n```\\n\\n## Moon \u8282\u70b9\u642d\u5efa\\n\\n- [No.001 \u7b80\u5355\u642d\u5efa Zerotier Moon \u4e3a\u865a\u62df\u7f51\u7edc\u52a0\u901f](https://tvtv.fun/vps/001.html)\\n\\n## \u53c2\u8003\\n\\n- [\u7ec4\u7f51\u795e\u5668Zerotier One\u4f7f\u7528](http://t.zoukankan.com/steinven-p-15220959.html)"},{"id":"old-computer-adventures/Headscale","metadata":{"permalink":"/blog/old-computer-adventures/Headscale","editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/01.\u5bb6\u7528\u670d\u52a1\u5668\u6298\u817e\u8bb0/10.\u5185\u7f51\u7a7f\u900f\u65b9\u6848-Headscale.md","source":"@site/blog/01.\u5bb6\u7528\u670d\u52a1\u5668\u6298\u817e\u8bb0/10.\u5185\u7f51\u7a7f\u900f\u65b9\u6848-Headscale.md","title":"0x10.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u5185\u7f51\u7a7f\u900f\u65b9\u6848|Headscale","description":"\u4e0a\u6587\u5df2\u4ecb\u7ecd\u4e86zerotier\u662f\u5f02\u5730\u7ec4\u7f51\u5de5\u5177\uff0c\u4e0b\u9762\u518d\u4ecb\u7ecd\u4e00\u6b3e\u5f00\u6e90\u7684\u5185\u7f51\u7a7f\u900f\u5de5\u5177Headscale\uff0c\u5b83\u662f\u57fa\u4e8eTailscale\u7684\u5f00\u6e90\u7248\u672c\u3002","date":"2022-08-08T00:37:45.000Z","tags":[],"readingTime":14.51,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"0x10.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u5185\u7f51\u7a7f\u900f\u65b9\u6848|Headscale","date":"2022-08-08T00:37:45.000Z","slug":"old-computer-adventures/Headscale","categories":["\u73af\u5883\u7ba1\u7406","\u5bb6\u7528\u670d\u52a1\u5668\u6298\u817e\u8bb0"]},"unlisted":false,"prevItem":{"title":"0x5.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u5185\u7f51\u7a7f\u900f\u65b9\u6848|ZerotierOne","permalink":"/blog/old-computer-adventures/zerotier-one"},"nextItem":{"title":"0x3.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u64cd\u4f5c\u7cfb\u7edf|Ubuntu","permalink":"/blog/old-computer-adventures/ubuntu"}},"content":"\u4e0a\u6587\u5df2\u4ecb\u7ecd\u4e86zerotier\u662f\u5f02\u5730\u7ec4\u7f51\u5de5\u5177\uff0c\u4e0b\u9762\u518d\u4ecb\u7ecd\u4e00\u6b3e\u5f00\u6e90\u7684\u5185\u7f51\u7a7f\u900f\u5de5\u5177Headscale\uff0c\u5b83\u662f\u57fa\u4e8eTailscale\u7684\u5f00\u6e90\u7248\u672c\u3002\\n\\n\x3c!--more--\x3e\\n\x3c!-- truncate --\x3e\\n\\n## \u4ecb\u7ecd\\n\\n> Tailscale \u662f\u4e00\u79cd\u57fa\u4e8e WireGuard \u7684\u865a\u62df\u7ec4\u7f51\u5de5\u5177\uff0c\u548c Netmaker \u7c7b\u4f3c\uff0c**\u6700\u5927\u7684\u533a\u522b\u5728\u4e8e Tailscale \u662f\u5728\u7528\u6237\u6001\u5b9e\u73b0\u4e86 WireGuard \u534f\u8bae\uff0c\u800c Netmaker \u76f4\u63a5\u4f7f\u7528\u4e86\u5185\u6838\u6001\u7684 WireGuard**\u3002\u6240\u4ee5 Tailscale \u76f8\u6bd4\u4e8e\u5185\u6838\u6001 WireGuard \u6027\u80fd\u4f1a\u6709\u6240\u635f\u5931\uff0c\u4f46\u4e0e OpenVPN \u4e4b\u6d41\u76f8\u6bd4\u8fd8\u662f\u80fd\u7529\u597d\u51e0\u5341\u6761\u8857\u7684\uff0cTailscale \u867d\u7136\u5728\u6027\u80fd\u4e0a\u505a\u4e86\u4e9b\u8bb8\u53d6\u820d\uff0c\u4f46\u5728\u529f\u80fd\u548c\u6613\u7528\u6027\u4e0a\u7edd\u5bf9\u662f\u5b8c\u7206\u5176\u4ed6\u5de5\u5177\\n>\\n> --\u8be6\u89c1 [Tailscale \u57fa\u7840\u6559\u7a0b\uff1aHeadscale \u7684\u90e8\u7f72\u65b9\u6cd5\u548c\u4f7f\u7528\u6559\u7a0b](https://icloudnative.io/posts/how-to-set-up-or-migrate-headscale/#macos)\\n\\n## \u670d\u52a1\u7aef\u90e8\u7f72\\n\\n### Headscale \u914d\u7f6e\\n\\n```yaml\\n# docker network create [OPTIONS] NETWORK\\n# docker network create --ipv6 caddy_net\\nversion: \'3.5\'\\nservices:\\n  headscale:\\n    image: headscale/headscale:latest\\n    container_name: headscale\\n    volumes:\\n      - ./config:/etc/headscale\\n      - ../../docker-data/headscale:/var/lib/headscale\\n    cap_add:\\n      - NET_ADMIN\\n      - NET_RAW\\n      - SYS_MODULE\\n    sysctls:\\n      - net.ipv4.ip_forward=1\\n      - net.ipv6.conf.all.forwarding=1\\n    # proxy by caddy\\n    # ports:\\n    #   - 3050:8080\\n    networks:\\n      - caddy_net\\n    command: [\\"headscale\\", \\"serve\\"]\\n    restart: unless-stopped\\n    logging:\\n      driver: json-file\\n      options:\\n        max-size: \\"50m\\"\\n\\n\\n  headscale-ui:\\n    image: ghcr.io/gurucomputing/headscale-ui:latest\\n    container_name: headscale-ui\\n    # proxy by caddy\\n    # ports:\\n    #   - 3100:80\\n    networks:\\n      - caddy_net\\n    restart: unless-stopped\\n    logging:\\n      driver: json-file\\n      options:\\n        max-size: \\"50m\\"\\n\\nnetworks:\\n  caddy_net:\\n    name: caddy_net\\n    external: true\\n```\\n\\n\u4e00\u4e9b\u6ce8\u610f\u4e8b\u9879\uff1a\\n\\n- \u7f51\u4e0a\u7ed9\u51fa\u4e86\u597d\u51e0\u79cd\u90e8\u7f72\u65b9\u5f0f\uff0c\u4e00\u822c\u5206\u4e3a\u5bb9\u5668\u5316\u90e8\u7f72\u548c\u975e\u5bb9\u5668\u5316\u90e8\u7f72\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\u5982\u679c\u662f\u4f7f\u7528\u5bb9\u5668\u5316\u90e8\u7f72\uff0c\u9700\u8981\u5c06\\n- \u4e3a\u4ec0\u4e48\u6ce8\u91ca\u6389\u7aef\u53e3\u6620\u5c04\uff1f\u5efa\u8bae\u521a\u5f00\u59cb\u90e8\u7f72\u670d\u52a1\u7684\u540c\u5b66\u6253\u5f00\u7aef\u53e3\u6620\u5c04\uff0c\u8fd9\u6837\u65b9\u4fbf\u5728\u5bb9\u5668\u5916\u8c03\u8bd5\u3002\u6211\u5173\u95ed\u662f\u56e0\u4e3a\u60f3\u8981\u901a\u8fc7Caddy\u6765\u4ee3\u7406\u3002\uff08\u8bdd\u8bf4\u6211\u4e5f\u662f\u4ece\u8fd9\u4e2a\u670d\u52a1\u91cc\u4e86\u89e3Caddy\u7684\uff09\u3002\\n  - Caddy \u662fWeb\u670d\u52a1\u5668\uff0c\u662fNginx\u7684\u66ff\u4ee3\u54c1\uff0c\u914d\u7f6e\u4e0a\u6bd4Nginx\u7b80\u5355\u5f88\u591a\u3002\u7279\u70b9\u662f\u81ea\u52a8\u5e2e\u52a9\u7533\u8bf7Https\uff0c\u7701\u53bb\u4e86\u81ea\u5df1\u914d\u7f6e\u8bc1\u4e66\u7684\u9ebb\u70e6\u3002\u4e0e\u4e4b\u76f8\u7c7b\u4f3c\u7684\u670d\u52a1\u6709[NginxProxyManager](https://github.com/NginxProxyManager/nginx-proxy-manager)\u3002\\n  - \u65b0\u5efa\u4e86\u4e00\u4e2a\u5bb9\u5668\u7f51\u7edc `caddy_net`\uff0c\u6240\u6709\u670d\u52a1\u4e0e`caddy_net`\u8054\u901a\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u4fdd\u8bc1\u7aef\u53e3\u4e0d\u66b4\u9732\u51fa\u53bb\uff0c\u6240\u6709\u7684\u8bf7\u6c42\u90fd\u7ecf\u8fc7Caddy\u3002\\n- headscale-ui\\n  headscale-ui \u662f\u4e00\u6b3e\u5f00\u6e90\u7684Headscale\u56fe\u5f62\u5316\u914d\u7f6e\u9875\u9762\uff0c\u7528\u4ee5\u6dfb\u52a0\u5ba2\u6237\u7aef\u8bbe\u5907\u3002\u8fd9\u91cc\u5751\u7684\u5730\u65b9\u5728\u4e8eheadscale-ui\u662f\u6709\u8de8\u57df\u9650\u5236\u3002\u4e3e\u4f8bHeadscale\u90e8\u7f72\u5728 abc.com\u4e0a\uff0cHeadscale-ui \u5fc5\u987b\u90e8\u7f72\u5728 abc.com/web \u4e0a\uff0c\u4e0d\u7136\u5c31\u4f1a\u51fa\u73b0\u9519\u8bef\u3002\\n\\n### Config\u914d\u7f6e\\n\\n\u5982\u4e0b\u6587\u4ef6\u7ea6\u5b9a\u4e86Headscale\u7684\u57fa\u7840\u914d\u7f6e\uff0c\u5bb9\u5668\u4e2d\u552f\u4e00\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u5bf9\u5916\u63d0\u4f9b\u670d\u52a1\u5fc5\u987b\u5c06 `127.0.0.1` \u6539\u4e3a `0.0.0.0` \u8fd9\u6837\u4fdd\u8bc1\u4e86\u5916\u90e8\u7f51\u7edc\u7684\u8bf7\u6c42\u80fd\u88ab\u5904\u7406\u3002\\n\\n```yaml\\n# reference: https://github.com/juanfont/headscale/raw/main/config-example.yaml\\n---\\n# headscale will look for a configuration file named `config.yaml` (or `config.json`) in the following order:\\n#\\n# - `/etc/headscale`\\n# - `~/.headscale`\\n# - current working directory\\n\\n# The url clients will connect to.\\n# Typically this will be a domain like:\\n#\\n# https://myheadscale.example.com:443\\n#\\n# \u5ba2\u6237\u7aef\u771f\u5b9e\u8bf7\u6c42\u7684\u5730\u5740\uff0c\u53cd\u5411\u4ee3\u7406\u540e\u7684\u5730\u5740\\n# \u516c\u7f51IP\uff0c\u6216\u662f\u57df\u540d\uff0c\u662f\u6240\u6709\u8bbe\u5907\u9700\u8981\u80fd\u8bbf\u95ee\u5230\u7684\u5730\u5740\u3002\\nserver_url: https://xxx.com/\\n\\n# Address to listen to / bind to on the server\\n#\\n# For local:\\n# listen_addr: 127.0.0.1:8080\\n# For production:\\n# Listen to 0.0.0.0 so it\'s accessible outside the container\\nlisten_addr: 0.0.0.0:8080\\n\\n# Address to listen to /metrics, you may want\\n# to keep this endpoint private to your internal\\n# network\\n# For local:\\n# metrics_listen_addr: 127.0.0.1:9090\\n# set to 0.0.0\\n# Listen to 0.0.0.0 so it\'s accessible outside the container\\nmetrics_listen_addr: 0.0.0.0:9090\\n\\n# Address to listen for gRPC.\\n# gRPC is used for controlling a headscale server\\n# remotely with the CLI\\n# Note: Remote access _only_ works if you have\\n# valid certificates.\\n#\\n# For production:\\n# grpc_listen_addr: 0.0.0.0:50443\\ngrpc_listen_addr: 127.0.0.1:50443\\n\\n# Allow the gRPC admin interface to run in INSECURE\\n# mode. This is not recommended as the traffic will\\n# be unencrypted. Only enable if you know what you\\n# are doing.\\ngrpc_allow_insecure: false\\n\\n# Private key used to encrypt the traffic between headscale\\n# and Tailscale clients.\\n# The private key file will be autogenerated if it\'s missing.\\n#\\n# For production:\\n# /var/lib/headscale/private.key\\n# For test:\\n# ./private.key\\nprivate_key_path: /var/lib/headscale/private.key\\n\\n# The Noise section includes specific configuration for the\\n# TS2021 Noise protocol\\nnoise:\\n  # The Noise private key is used to encrypt the\\n  # traffic between headscale and Tailscale clients when\\n  # using the new Noise-based protocol. It must be different\\n  # from the legacy private key.\\n  #\\n  # For production:\\n  # private_key_path: /var/lib/headscale/noise_private.key\\n  # For test:\\n  # ./noise_private.key\\n  private_key_path: /var/lib/headscale/noise_private.key\\n\\n# List of IP prefixes to allocate tailaddresses from.\\n# Each prefix consists of either an IPv4 or IPv6 address,\\n# and the associated prefix length, delimited by a slash.\\n# While this looks like it can take arbitrary values, it\\n# needs to be within IP ranges supported by the Tailscale\\n# client.\\n# IPv6: https://github.com/tailscale/tailscale/blob/22ebb25e833264f58d7c3f534a8b166894a89536/net/tsaddr/tsaddr.go#LL81C52-L81C71\\n# IPv4: https://github.com/tailscale/tailscale/blob/22ebb25e833264f58d7c3f534a8b166894a89536/net/tsaddr/tsaddr.go#L33\\nip_prefixes:\\n  - fd7a:115c:a1e0::/48\\n  - 100.64.0.0/10\\n\\n# DERP is a relay system that Tailscale uses when a direct\\n# connection cannot be established.\\n# https://tailscale.com/blog/how-tailscale-works/#encrypted-tcp-relays-derp\\n#\\n# headscale needs a list of DERP servers that can be presented\\n# to the clients.\\nderp:\\n  server:\\n    # If enabled, runs the embedded DERP server and merges it into the rest of the DERP config\\n    # The Headscale server_url defined above MUST be using https, DERP requires TLS to be in place\\n    enabled: false\\n\\n    # Region ID to use for the embedded DERP server.\\n    # The local DERP prevails if the region ID collides with other region ID coming from\\n    # the regular DERP config.\\n    region_id: 999\\n\\n    # Region code and name are displayed in the Tailscale UI to identify a DERP region\\n    region_code: \\"headscale\\"\\n    region_name: \\"Headscale Embedded DERP\\"\\n\\n    # Listens over UDP at the configured address for STUN connections - to help with NAT traversal.\\n    # When the embedded DERP server is enabled stun_listen_addr MUST be defined.\\n    #\\n    # For more details on how this works, check this great article: https://tailscale.com/blog/how-tailscale-works/\\n    stun_listen_addr: \\"0.0.0.0:3478\\"\\n\\n  # List of externally available DERP maps encoded in JSON\\n  urls:\\n    - https://controlplane.tailscale.com/derpmap/default\\n\\n  # Locally available DERP map files encoded in YAML\\n  #\\n  # This option is mostly interesting for people hosting\\n  # their own DERP servers:\\n  # https://tailscale.com/kb/1118/custom-derp-servers/\\n  #\\n  # paths:\\n  #   - /etc/headscale/derp-example.yaml\\n  paths: []\\n\\n  # If enabled, a worker will be set up to periodically\\n  # refresh the given sources and update the derpmap\\n  # will be set up.\\n  auto_update_enabled: true\\n\\n  # How often should we check for DERP updates?\\n  update_frequency: 24h\\n\\n# Disables the automatic check for headscale updates on startup\\ndisable_check_updates: false\\n\\n# Time before an inactive ephemeral node is deleted?\\nephemeral_node_inactivity_timeout: 30m\\n\\n# Period to check for node updates within the tailnet. A value too low will severely affect\\n# CPU consumption of Headscale. A value too high (over 60s) will cause problems\\n# for the nodes, as they won\'t get updates or keep alive messages frequently enough.\\n# In case of doubts, do not touch the default 10s.\\nnode_update_check_interval: 10s\\n\\n# SQLite config\\ndb_type: sqlite3\\n\\n# For production:\\n# db_path: /var/lib/headscale/db.sqlite\\ndb_path: ./db.sqlite\\n\\n# # Postgres config\\n# If using a Unix socket to connect to Postgres, set the socket path in the \'host\' field and leave \'port\' blank.\\n# db_type: postgres\\n# db_host: localhost\\n# db_port: 5432\\n# db_name: headscale\\n# db_user: foo\\n# db_pass: bar\\n\\n# If other \'sslmode\' is required instead of \'require(true)\' and \'disabled(false)\', set the \'sslmode\' you need\\n# in the \'db_ssl\' field. Refers to https://www.postgresql.org/docs/current/libpq-ssl.html Table 34.1.\\n# db_ssl: false\\n\\n### TLS configuration\\n#\\n## Let\'s encrypt / ACME\\n#\\n# headscale supports automatically requesting and setting up\\n# TLS for a domain with Let\'s Encrypt.\\n#\\n# URL to ACME directory\\nacme_url: https://acme-v02.api.letsencrypt.org/directory\\n\\n# Email to register with ACME provider\\nacme_email: \\"\\"\\n\\n# Domain name to request a TLS certificate for:\\ntls_letsencrypt_hostname: \\"\\"\\n\\n# Path to store certificates and metadata needed by\\n# letsencrypt\\n# For production:\\n# tls_letsencrypt_cache_dir: /var/lib/headscale/cache\\n# For test:\\n# ./cache\\ntls_letsencrypt_cache_dir: /var/lib/headscale/cache\\n\\n# Type of ACME challenge to use, currently supported types:\\n# HTTP-01 or TLS-ALPN-01\\n# See [docs/tls.md](docs/tls.md) for more information\\ntls_letsencrypt_challenge_type: HTTP-01\\n# When HTTP-01 challenge is chosen, letsencrypt must set up a\\n# verification endpoint, and it will be listening on:\\n# :http = port 80\\ntls_letsencrypt_listen: \\":http\\"\\n\\n## Use already defined certificates:\\ntls_cert_path: \\"\\"\\ntls_key_path: \\"\\"\\n\\nlog:\\n  # Output formatting for logs: text or json\\n  format: text\\n  level: info\\n\\n# Path to a file containg ACL policies.\\n# ACLs can be defined as YAML or HUJSON.\\n# https://tailscale.com/kb/1018/acls/\\nacl_policy_path: \\"\\"\\n\\n## DNS\\n#\\n# headscale supports Tailscale\'s DNS configuration and MagicDNS.\\n# Please have a look to their KB to better understand the concepts:\\n#\\n# - https://tailscale.com/kb/1054/dns/\\n# - https://tailscale.com/kb/1081/magicdns/\\n# - https://tailscale.com/blog/2021-09-private-dns-with-magicdns/\\n#\\ndns_config:\\n  # Whether to prefer using Headscale provided DNS or use local.\\n  override_local_dns: true\\n\\n  # List of DNS servers to expose to clients.\\n  nameservers:\\n    - 1.1.1.1\\n\\n  # NextDNS (see https://tailscale.com/kb/1218/nextdns/).\\n  # \\"abc123\\" is example NextDNS ID, replace with yours.\\n  #\\n  # With metadata sharing:\\n  # nameservers:\\n  #   - https://dns.nextdns.io/abc123\\n  #\\n  # Without metadata sharing:\\n  # nameservers:\\n  #   - 2a07:a8c0::ab:c123\\n  #   - 2a07:a8c1::ab:c123\\n\\n  # Split DNS (see https://tailscale.com/kb/1054/dns/),\\n  # list of search domains and the DNS to query for each one.\\n  #\\n  # restricted_nameservers:\\n  #   foo.bar.com:\\n  #     - 1.1.1.1\\n  #   darp.headscale.net:\\n  #     - 1.1.1.1\\n  #     - 8.8.8.8\\n\\n  # Search domains to inject.\\n  domains: []\\n\\n  # Extra DNS records\\n  # so far only A-records are supported (on the tailscale side)\\n  # See https://github.com/juanfont/headscale/blob/main/docs/dns-records.md#Limitations\\n  # extra_records:\\n  #   - name: \\"grafana.myvpn.example.com\\"\\n  #     type: \\"A\\"\\n  #     value: \\"100.64.0.3\\"\\n  #\\n  #   # you can also put it in one line\\n  #   - { name: \\"prometheus.myvpn.example.com\\", type: \\"A\\", value: \\"100.64.0.3\\" }\\n\\n  # Whether to use [MagicDNS](https://tailscale.com/kb/1081/magicdns/).\\n  # Only works if there is at least a nameserver defined.\\n  # \u4f46\u662fTailscale\u6709\u4e00\u4e2a\u5f88\u574f\u7684\u7f3a\u70b9\uff0c\u5c31\u662f\u5b83\u4e0d\u80fd\u81ea\u5b9a\u4e49\u8282\u70b9\u7684IP\uff0c\u63a7\u5236\u5668\u7ed9\u5206\u914d\u4ec0\u4e48\u5c31\u53ea\u80fd\u662f\u4ec0\u4e48\\n  # \u6240\u4ee5\u4f60\u80af\u5b9a\u4f1a\u9700\u8981Magic DNS\u6765\u5e2e\u4f60\u8fa8\u8bc6\u8282\u70b9\u7684\uff01\\n  magic_dns: true\\n\\n  # Defines the base domain to create the hostnames for MagicDNS.\\n  # `base_domain` must be a FQDNs, without the trailing dot.\\n  # The FQDN of the hosts will be\\n  # `hostname.user.base_domain` (e.g., _myhost.myuser.example.com_).\\n  # \u663e\u793a\u5728Magic DNS\u91cc\u7684\u8bbe\u5907\u57df\u540d\uff0c\u968f\u4fbf\u5199\u5199\\n  base_domain: example.com\\n\\n# Unix socket used for the CLI to connect without authentication\\n# Note: for production you will want to set this to something like:\\n# For production\\n# unix_socket: /var/run/headscale.sock\\n# For test\\n# unix_socket: ./headscale.sock\\nunix_socket: /var/run/headscale.sock\\nunix_socket_permission: \\"0770\\"\\n#\\n# headscale supports experimental OpenID connect support,\\n# it is still being tested and might have some bugs, please\\n# help us test it.\\n# OpenID Connect\\n# oidc:\\n#   only_start_if_oidc_is_available: true\\n#   issuer: \\"https://your-oidc.issuer.com/path\\"\\n#   client_id: \\"your-oidc-client-id\\"\\n#   client_secret: \\"your-oidc-client-secret\\"\\n#   # Alternatively, set `client_secret_path` to read the secret from the file.\\n#   # It resolves environment variables, making integration to systemd\'s\\n#   # `LoadCredential` straightforward:\\n#   client_secret_path: \\"${CREDENTIALS_DIRECTORY}/oidc_client_secret\\"\\n#   # client_secret and client_secret_path are mutually exclusive.\\n#\\n#   # The amount of time from a node is authenticated with OpenID until it\\n#   # expires and needs to reauthenticate.\\n#   # Setting the value to \\"0\\" will mean no expiry.\\n#   expiry: 180d\\n#\\n#   # Use the expiry from the token received from OpenID when the user logged\\n#   # in, this will typically lead to frequent need to reauthenticate and should\\n#   # only been enabled if you know what you are doing.\\n#   # Note: enabling this will cause `oidc.expiry` to be ignored.\\n#   use_expiry_from_token: false\\n#\\n#   # Customize the scopes used in the OIDC flow, defaults to \\"openid\\", \\"profile\\" and \\"email\\" and add custom query\\n#   # parameters to the Authorize Endpoint request. Scopes default to \\"openid\\", \\"profile\\" and \\"email\\".\\n#\\n#   scope: [\\"openid\\", \\"profile\\", \\"email\\", \\"custom\\"]\\n#   extra_params:\\n#     domain_hint: example.com\\n#\\n#   # List allowed principal domains and/or users. If an authenticated user\'s domain is not in this list, the\\n#   # authentication request will be rejected.\\n#\\n#   allowed_domains:\\n#     - example.com\\n#   # Note: Groups from keycloak have a leading \'/\'\\n#   allowed_groups:\\n#     - /headscale\\n#   allowed_users:\\n#     - alice@example.com\\n#\\n#   # If `strip_email_domain` is set to `true`, the domain part of the username email address will be removed.\\n#   # This will transform `first-name.last-name@example.com` to the user `first-name.last-name`\\n#   # If `strip_email_domain` is set to `false` the domain part will NOT be removed resulting to the following\\n#   user: `first-name.last-name.example.com`\\n#\\n#   strip_email_domain: true\\n\\n# Logtail configuration\\n# Logtail is Tailscales logging and auditing infrastructure, it allows the control panel\\n# to instruct tailscale nodes to log their activity to a remote server.\\nlogtail:\\n  # Enable logtail for this headscales clients.\\n  # As there is currently no support for overriding the log server in headscale, this is\\n  # disabled by default. Enabling this will make your clients send logs to Tailscale Inc.\\n  enabled: false\\n\\n# Enabling this option makes devices prefer a random port for WireGuard traffic over the\\n# default static port 41641. This option is intended as a workaround for some buggy\\n# firewall devices. See https://tailscale.com/kb/1181/firewalls/ for more information.\\nrandomize_client_port: false\\n\\n```\\n\\n### Caddy\u90e8\u7f72\\n\\n```yaml\\n# docker network create [OPTIONS] NETWORK\\n# docker network create --ipv6 caddy_net\\nversion: \'3.5\'\\nservices:\\n  caddy:\\n    # build image to add new module\\n    # image: caddy:latest\\n    build: \\n      context: .\\n      dockerfile: Dockerfile\\n    container_name: caddy\\n    networks:\\n      - caddy_net\\n    volumes:\\n      - ../../docker-data/caddy:/data\\n      - ./config:/config\\n      - /etc/localtime:/etc/localtime:ro \\n    ports:\\n      - 80:80\\n      - 443:443\\n    env_file:\\n      - ./dnspod.env\\n    entrypoint: /usr/bin/caddy run --adapter caddyfile --config /config/Caddyfile\\n\\nnetworks:\\n  caddy_net:\\n    name: caddy_net\\n    external: true\\n```\\n\\n\u7531\u4e8e\u6211\u9700\u8981\u63a5\u5165 `\u6cdb\u57df\u540d`\uff0c\u6240\u4ee5\u8fd9\u91cc\u81ea\u5df1build\u4e86\u4e00\u4e2a\u955c\u50cf\uff0c\u5982\u679c\u6ca1\u6709\u8fd9\u4e2a\u9700\u8981\uff0c\u5219\u76f4\u63a5\u62c9\u53d6\u6700\u65b0\u7684 `caddy:latest`\u5373\u53ef\\n\\n### Caddy Dockerfile\\n\\nCaddy \u662f\u7528Go\u5199\u7684\uff0c\u82e5\u662f\u9700\u8981\u6dfb\u52a0\u65b0\u529f\u80fd\u5fc5\u987b\u5f97\u91cd\u65b0\u7f16\u8bd1\u3002\u5982\u4e0bDockerfile \u6dfb\u52a0\u4e86`cloudflare`\u6a21\u5757\uff0c\u8ba9Caddy\u652f\u6301`\u6cdb\u57df\u540d`\\n\\n```\\n# Reference: https://hub.docker.com/_/caddy #Adding custom Caddy modules\\nFROM caddy:2.6.4-builder AS builder\\n\\n# package can be found in https://caddyserver.com/download\\nRUN xcaddy build \\\\\\n    --with github.com/caddy-dns/cloudflare\\n\\nFROM caddy:latest\\n\\nCOPY --from=builder /usr/bin/caddy /usr/bin/caddy\\n```\\n\\n### Caddy\u914d\u7f6e\\n\\n```yaml\\n# all supported dns: https://caddyserver.com/docs/modules/\\n*.abc.top {\\n    tls {\\n        dns cloudflare {env.CF_API_TOKEN}\\n    }\\n}\\n\\n# how to config wildcard-certificate https://caddyserver.com/docs/caddyfile/patterns#wildcard-certificates\\nheadscale.abc.top {\\n    # headscale \u670d\u52a1\u5730\u5740\\n    reverse_proxy http://headscale:8080\\n\\n    # headscale-ui \u5730\u5740\uff0c\u5fc5\u987b\u4e0e\u4e0a\u9762\u7684\u57df\u540d\u4e00\u81f4\uff0c\u4e3a\u4e86\u9632\u6b62CORS\u9519\u8bef\\n    handle /web* {\\n        reverse_proxy http://headscale-ui\\n    }\\n}\\n```\\n\\n## \u5ba2\u6237\u7aef\\n\\n- [Tailscale-\u5ba2\u6237\u7aef\u63a5\u5165](https://icloudnative.io/posts/how-to-set-up-or-migrate-headscale/#tailscale-%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%8E%A5%E5%85%A5)\\n\\n### \u547d\u4ee4\u6c47\u603b\\n\\n```bash\\n# \u521b\u5efa\u7528\u6237\\ndocker-compose -f headscale.yaml exec headscale \\\\\\n  headscale users create ppsteven\\n# \u6ce8\u518c\u8282\u70b9\uff08\u4e5f\u53ef\u4ee5\u901a\u8fc7\u56fe\u5f62\u5316\u9875\u9762\u914d\u7f6e\uff09\\ndocker-compose -f headscale.yaml exec headscale \\\\\\n  headscale nodes register --user jacky --key nodekey:xxxxxx\\n# \u67e5\u770b\u8282\u70b9\u8fde\u63a5\u72b6\u6001\uff08\u83b7\u53d6\u5185\u7f51ip\uff0c\u662f\u5426\u5728\u7ebf\u7b49\uff09\\ndocker-compose -f headscale.yaml exec headscale \\\\\\n  headscale nodes list\\n# linux \u547d\u4ee4\u884c\u8fde\u63a5\uff08\u7528\u4ee5\u83b7\u53d6\u8bbe\u5907\u7684\u767b\u5f55\u8bc6\u522b\u7801 nodekey:xxxxx\uff0c\u62ff\u8fd9\u4e2a\u7801\u5c31\u53ef\u4ee5\u53bb\u670d\u52a1\u7aef\u8fde\u63a5\u4e86\uff09\\ntailscale up --login-server=http://abc.com/ --accept-routes=true --accept-dns=false\\n# \u67e5\u770b\u4f60\u7684IP\u5730\u5740\u4e0e\u5230\u5404\u5927\u516c\u5171DERP\u670d\u52a1\u5668\u4e4b\u95f4\u7684\u5ef6\u8fdf\\ntailscale netcheck\\n# \u67e5\u770b\u5404\u5ba2\u6237\u7aef\u7684\u8fde\u63a5\u72b6\u6001\uff0c\u662f\u76f4\u8fde\u8fd8\u662f\u4e2d\u7ee7\u4e00\u76ee\u4e86\u7136\\ntailscale status\\n```\\n\\n\\n\\n## \u53c2\u8003\\n\\n- [\u642d\u5efa\u5c5e\u4e8e\u81ea\u5df1\u7684Tailscale\u7f51\u7edc](https://maxng.cc/posts/headscale-ez-tutorial/)\\n\\n- [Tailscale \u57fa\u7840\u6559\u7a0b\uff1aHeadscale \u7684\u90e8\u7f72\u65b9\u6cd5\u548c\u4f7f\u7528\u6559\u7a0b](https://icloudnative.io/posts/how-to-set-up-or-migrate-headscale/#tailscale-%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%8E%A5%E5%85%A5)\\n\\n- [Headscale \u642d\u5efa P2P \u5185\u7f51\u7a7f\u900f_](https://mritd.com/2022/10/19/use-headscale-to-build-a-p2p-network/#3-3%E3%80%81%E8%AF%81%E4%B9%A6%E5%8F%8A%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86)\\n\\n- [\u3010\u5b98\u65b9\u3011Headscale\u914d\u7f6e\u53cd\u5411\u4ee3\u7406](https://github.com/juanfont/headscale/blob/main/docs/reverse-proxy.md#caddy)"},{"id":"old-computer-adventures/ubuntu","metadata":{"permalink":"/blog/old-computer-adventures/ubuntu","editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/01.\u5bb6\u7528\u670d\u52a1\u5668\u6298\u817e\u8bb0/03.\u64cd\u4f5c\u7cfb\u7edf\u51c6\u5907-Ubuntu.md","source":"@site/blog/01.\u5bb6\u7528\u670d\u52a1\u5668\u6298\u817e\u8bb0/03.\u64cd\u4f5c\u7cfb\u7edf\u51c6\u5907-Ubuntu.md","title":"0x3.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u64cd\u4f5c\u7cfb\u7edf|Ubuntu","description":"\u5982\u4e0a\u6587\u6240\u8ff0\uff0c\u5728Manjaro\u4e0a\u9047\u5230\u4e00\u4e9b\u96be\u4ee5\u89e3\u51b3\u7684\u95ee\u9898\u540e\uff0c\u6211\u9009\u62e9\u4e86\u4e00\u4e2a\u517c\u5177\u684c\u9762\u7ba1\u7406\u73af\u5883\u4e0e\u65e0\u56fe\u884c\u7684\u64cd\u4f5c\u7cfb\u7edf\u2014\u2014\u2014\u2014Ubuntu","date":"2022-08-08T00:13:09.000Z","tags":[],"readingTime":1.34,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"0x3.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u64cd\u4f5c\u7cfb\u7edf|Ubuntu","date":"2022-08-08T00:13:09.000Z","slug":"old-computer-adventures/ubuntu","categories":["\u73af\u5883\u7ba1\u7406","\u5bb6\u7528\u670d\u52a1\u5668\u6298\u817e\u8bb0"]},"unlisted":false,"prevItem":{"title":"0x10.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u5185\u7f51\u7a7f\u900f\u65b9\u6848|Headscale","permalink":"/blog/old-computer-adventures/Headscale"},"nextItem":{"title":"0x2.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u64cd\u4f5c\u7cfb\u7edf|Manjaro.md","permalink":"/blog/old-computer-adventures/manjaro"}},"content":"\u5982\u4e0a\u6587\u6240\u8ff0\uff0c\u5728Manjaro\u4e0a\u9047\u5230\u4e00\u4e9b\u96be\u4ee5\u89e3\u51b3\u7684\u95ee\u9898\u540e\uff0c\u6211\u9009\u62e9\u4e86\u4e00\u4e2a\u517c\u5177\u684c\u9762\u7ba1\u7406\u73af\u5883\u4e0e\u65e0\u56fe\u884c\u7684\u64cd\u4f5c\u7cfb\u7edf\u2014\u2014\u2014\u2014`Ubuntu`\\nUbuntu \u662f\u4e00\u6b3e\u57fa\u4e8eDebian\u7684\u64cd\u4f5c\u7cfb\u7edf\uff0c\u5b83\u662f\u4e00\u6b3e\u7ecf\u5178\u53d7\u6b22\u8fce\u7684\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4e0d\u8fc7\u591a\u4ecb\u7ecd\u3002\\n\\n\x3c!--more--\x3e\\n\x3c!-- truncate --\x3e\\n\\n## \u7cfb\u7edf\u5b89\u88c5\\n\\n### 1.\u955c\u50cf\u4e0b\u8f7d\\n\\n\u955c\u50cf\u4e0b\u8f7d\uff1a\u5efa\u8bae\u53bb[Ubuntu\u5b98\u7f51](https://www.ubuntu.org.cn/global)\u4e0b\u8f7d\uff0c\u955c\u50cf\u9009\u62e9\u4e0a\uff0c\u53ef\u4ee5\u9009\u62e9\u7ecf\u5178\u768416.04LTS\uff0c\u6211\u8fd9\u6b21\u6ca1\u6709\u9009\u62e9\u6700\u65b0\u7684\u7248\u672c\uff0c\u800c\u662f\u9009\u62e9\u4e8620.04.4 LTS\\n\\n### 2.\u542f\u52a8\u76d8\u5236\u4f5c\\n\\n- UltralSO\\n\\n  [\u4f7f\u7528U\u76d8\u5236\u4f5cUbuntu\u7cfb\u7edf\u542f\u52a8\u76d8](https://zhuanlan.zhihu.com/p/378668860)\\n\\n- Rufus\\n\\n  [\u5728U\u76d8\u4e0b\u5b89\u88c5ubuntu20.04\uff0c\u4eceU\u76d8\u542f\u52a8Linux\u7cfb\u7edf](https://blog.csdn.net/qq_51491920/article/details/123668279)\\n\\n### 3.\u5b89\u88c5\\n\\n\u5206\u533a\u65b9\u6848\uff1a\\n\\n- [\u3010\u4e2a\u4eba\u7b14\u8bb0\u3011Ubuntu\u5206\u533a\u65b9\u6848](https://blog.csdn.net/qq_42751676/article/details/120850185)\\n\\n  ```\\n  /boot \u4e3b\u5206\u533a 512M\\n  /swap \u4e3b\u5206\u533a 16G\\n  /     \u4e3b\u5206\u533a 133G     \\n  ```\\n\\n- [\u5728U\u76d8\u4e0b\u5b89\u88c5ubuntu20.04\uff0c\u4eceU\u76d8\u542f\u52a8Linux\u7cfb\u7edf](https://blog.csdn.net/qq_51491920/article/details/123668279)\\n\\n  ![\u5206\u533a\u65b9\u6848](./assets/img/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBALee0oOW_g-WQkeaalg==,size_20,color_FFFFFF,t_70,g_se,x_16.jpeg)\\n\\n## \u5176\u4ed6\\n\\n### \u5408\u76d6\u4e0d\u4f11\u7720\\n\\n>  [Don\'t suspend when lid is closed, just lock screen](https://askubuntu.com/questions/972169/ubuntu-17-10-and-later-dont-suspend-when-lid-is-closed-just-lock-screen)\\n\\n```\\nsudo apt-get install gnome-tweak-tool\\n# Launch Tweaks -> Power(or General) -> disable suspend on lid-close\\n```"},{"id":"old-computer-adventures/manjaro","metadata":{"permalink":"/blog/old-computer-adventures/manjaro","editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/01.\u5bb6\u7528\u670d\u52a1\u5668\u6298\u817e\u8bb0/02.\u64cd\u4f5c\u7cfb\u7edf\u51c6\u5907-Manjaro.md","source":"@site/blog/01.\u5bb6\u7528\u670d\u52a1\u5668\u6298\u817e\u8bb0/02.\u64cd\u4f5c\u7cfb\u7edf\u51c6\u5907-Manjaro.md","title":"0x2.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u64cd\u4f5c\u7cfb\u7edf|Manjaro.md","description":"\u5bb6\u4e2d\u95f2\u7f6e\u4e86\u4e00\u53f0\u7535\u8111\uff0c\u51c6\u5907\u7528\u6765\u5f53\u505a\u670d\u52a1\u5668\u3002\u4e00\u65b9\u9762\u4e5f\u662f\u4f5c\u4e3alinux \u5b66\u4e60\u7ec3\u7ec3\u624b\uff0c\u4e8c\u662f\u53ef\u4ee5\u8fd0\u884c\u4e00\u4e9b\u722c\u866b\u5c0f\u7a0b\u5e8f\u6216\u8005\u662f\u7f51\u9875\u670d\u52a1\u3002","date":"2022-08-07T22:45:12.000Z","tags":[],"readingTime":3.775,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"0x2.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u64cd\u4f5c\u7cfb\u7edf|Manjaro.md","date":"2022-08-07T22:45:12.000Z","slug":"old-computer-adventures/manjaro","categories":["\u73af\u5883\u7ba1\u7406","\u5bb6\u7528\u670d\u52a1\u5668\u6298\u817e\u8bb0"]},"unlisted":false,"prevItem":{"title":"0x3.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u64cd\u4f5c\u7cfb\u7edf|Ubuntu","permalink":"/blog/old-computer-adventures/ubuntu"},"nextItem":{"title":"0x1.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u6298\u817e\u601d\u8def","permalink":"/blog/old-computer-adventures/idea"}},"content":"\u5bb6\u4e2d\u95f2\u7f6e\u4e86\u4e00\u53f0\u7535\u8111\uff0c\u51c6\u5907\u7528\u6765\u5f53\u505a\u670d\u52a1\u5668\u3002\u4e00\u65b9\u9762\u4e5f\u662f\u4f5c\u4e3alinux \u5b66\u4e60\u7ec3\u7ec3\u624b\uff0c\u4e8c\u662f\u53ef\u4ee5\u8fd0\u884c\u4e00\u4e9b\u722c\u866b\u5c0f\u7a0b\u5e8f\u6216\u8005\u662f\u7f51\u9875\u670d\u52a1\u3002\\n\\n\u8fd9\u91cc\u6211\u7528\u7684manjaro\uff0c\u8fd9\u662f\u76ee\u524d\u6bd4\u8f83\u6d41\u884c\u7684linux \u53d1\u884c\u7248\uff0c\u6700\u70ed\u95e8\u7684linux\u684c\u9762\u53d1\u884c\u7248\u4e4b\u4e00\u3002\\n\\n\u6211\u9009\u62e9manjaro\u4e5f\u662f\u60f3\u4f5c\u4e3a\u66ff\u4ee3windows \u6765\u7528\u3002manjaro\u62e5\u6709\u4e00\u4e2a\u975e\u5e38\u65b9\u4fbf\u7684\u8f6f\u4ef6\u4ed3\u5e93\uff0c\u5229\u7528pacman\u548cyay\u7b49\u547d\u4ee4\u53ef\u4ee5\u5341\u5206\u65b9\u4fbf\u7684\u5b89\u88c5\u8f6f\u4ef6\u3002\\nManjaro \u662f\u4e00\u6b3e\u57fa\u4e8eArch Linux\u7684\u64cd\u4f5c\u7cfb\u7edf\uff0c\u5b83\u662f\u76ee\u524dLinux\u4f17\u591a\u53d1\u884c\u7248\u4e2d\u5bf9\u7528\u6237\u975e\u5e38\u53cb\u597d\u7684\u64cd\u4f5c\u7cfb\u7edf\uff0c\u5b83\u62e5\u6709\u975e\u5e38\u597d\u770b\u7684\u684c\u9762\u73af\u5883\uff08KDE\uff0cGNOME\uff09\uff0c\u652f\u6301\u6eda\u52a8\u53d1\u5e03\uff0c\u4e00\u6761\u547d\u4ee4\u5373\u53ef\u5b89\u88c5\u8f6f\u4ef6\u7b49\u603b\u591a\u4f18\u79c0\u7684\u7279\u70b9\u3002Manjaro\u53ef\u4ee5\u8ba9\u4f60\u4f53\u9a8c\u5230\u5982Windows\uff0cMac\u4e00\u6837\u7684\u4f7f\u7528\u4f53\u9a8c\u3002\\n\\n\u66f4\u591a\u7684\u4ecb\u7ecd\u53ef\u4ee5\u53c2\u8003\uff1a\\n\\n[Manjaro Linux \u4e50\u4e8e\u7b80\u5355](https://manjaro.org.cn/)\\n\\n\x3c!--more--\x3e\\n\x3c!-- truncate --\x3e\\n\\n## \u7cfb\u7edf\u5b89\u88c5\\n\\n- [Manjaro Linux \u5165\u95e8\u4f7f\u7528\u6559\u7a0b](https://segmentfault.com/a/1190000041023208)\\n- [2021\u3010\u4fdd\u59c6\u7ea7\u6559\u7a0b\u3011Win+Manjaro\u53cc\u7cfb\u7edf\u53cc\u786c\u76d8\u5b89\u88c5](https://zhuanlan.zhihu.com/p/376787855)\\n\\n### 1.\u955c\u50cf\u4e0b\u8f7d\\n\\n\u955c\u50cf\u4e0b\u8f7d\uff1a\u5efa\u8bae\u53bb[Manjaro\u5b98\u65b9\u7f51\u7ad9](https://www.manjaro.org/download/)\u4e0b\u8f7d\uff0c\u76ee\u524d\u5b98\u65b9\u7684\u4e3b\u9898\u6709Plasma(KDE)\uff0cXfce\u548cGome\u3002\u4e09\u79cd\u90fd\u7528\u8fc7\uff0c\u90fd\u5dee\u4e0d\u591a\uff0c\u611f\u89c9KDE\u6700\u7cbe\u7f8e\uff0cXfce\u6700\u8f7b\u91cf\uff0cGnome\u6bd4\u8f83\u65b0\u6f6e\u3002\u6211\u73b0\u5728\u7528\u7684\u662fGnome\u3002\\n\\n### 2.\u542f\u52a8\u76d8\u5236\u4f5c\\n\\n\u8fd9\u91cc\u4f7f\u7528\u7684\u662fRufus\uff0c\u64cd\u4f5c\u975e\u5e38\u7b80\u5355\u3002\\n\\n![file](./assets/img/1460000041023211.png)\\n\\n### 3.\u5b89\u88c5\\n\\n\u53ef\u4ee5\u53c2\u8003\uff1a[Manjaro Linux\u5b89\u88c5\u6559\u7a0b(\u6781\u81f4linux\u539f\u521b)](https://linuxacme.cn/99)\\n\\n\u5176\u7ed9\u51fa\u7684\u5206\u533a\u65b9\u6848\u4e3a\uff1a\\n\\n| \u5927\u5c0f/\u5206\u914d  | /\u6839\u5206\u533a | /home\u5206\u533a | swap\u5206\u533a | EFI\u5f15\u5bfc\u5206\u533a |\\n| ---------- | ------- | --------- | -------- | ----------- |\\n| \u65b0\u5206\u533a<80G | \u6240\u6709    | \u65e0        | 2GB      | 300MB       |\\n| \u65b0\u5206\u533a128G | 60GB    | 60GB      | 4GB      | 1GB         |\\n| \u65b0\u5206\u533a256G | 80GB    | 160GB     | 8GB      | 1GB         |\\n| \u65b0\u5206\u533a512G | 150GB   | 340GB     | 16GB     | 1GB         |\\n\\n## \u914d\u7f6e\\n\\n### 1.\u66f4\u6362\u8f6f\u4ef6\u6e90\\n\\n```\\nsudo pacman -Syy\\nsudo pacman-mirrors -i -c China -m rank  #\u9009\u4e00\u4e2a\u963f\u91cc\u6e90\u5c31\u884c\\n```\\n\\n\u589e\u52a0\u4e2d\u6587\u793e\u533a\u7684\u6e90\\n\\n\u53ef\u4ee5\u7f16\u8f91`/etc/pacman.conf`\\n\\n```\\n# sudo vi /etc/pacman.conf\\n[archlinuxcn]\\nSigLevel = Optional TrustedOnly\\nServer = https://mirrors.ustc.edu.cn/archlinuxcn/$arch\\n```\\n\\n\u6216\u76f4\u63a5\u4f7f\u7528\u547d\u4ee4\u884c\u4fee\u6539\\n\\n```\\nsudo sed -i \'$a\\\\[archlinuxcn]\\\\nServer = https://mirrors.ustc.edu.cn/archlinuxcn/$arch\'  /etc/pacman.conf\\n```\\n\\n\u6dfb\u52a0\u5b8c\u4e86\u4e4b\u540e\u66f4\u65b0\\n\\n```\\nsudo pacman -Sy archlinuxcn-keyring\\n```\\n\\n## \u5b89\u88c5\u8f6f\u4ef6\\n\\n\u9996\u5148\uff0c\u7b2c\u4e00\u6b65\uff0c\u5148\u5b89\u88c5`AUR \u5305\u7ba1\u7406\u5de5\u5177(yay)`\uff0c\u6211\u4eec\u4e4b\u540e\u9700\u8981\u7528\u5230\u5b83\u6765\u5b89\u88c5\u8f6f\u4ef6\\n\\n\u8f6f\u4ef6\u5b89\u88c5\u547d\u4ee4\u5982\u4e0b\uff1a\\n\\n```\\nsudo pacman -S yay # Arch Linux AUR \u5305\u7ba1\u7406\u5de5\u5177\\n```\\n\\n### \u8f6f\u4ef6\u5217\u8868\\n\\n```\\n# vim\\nsudo pacman -S vim\\n\\n# chrome\\nsudo pacman -S google-chrome\\nyay -S google-chrome\\n```\\n\\n## \u8f6f\u4ef6\u7ba1\u7406\\n\\n```\\nsudo pacman -S package_name # install\\nsudo pacman -R package_name # remove\\nsudo pacman -Rs package_name # \u5378\u8f7d\u8f6f\u4ef6\uff0b\u4e0d\u9700\u8981\u7684\u4f9d\u8d56\\n```\\n\\n## \u5176\u4ed6\u547d\u4ee4\\n\\n```\\nscreenfetch # \u67e5\u770b\u7cfb\u7edf\u4fe1\u606f\\n```\\n\\n## \u7f3a\u70b9\u4e0e\u4e0d\u8db3\\n\\nManjaro \u966a\u4f34\u4e86\u6211\u4e00\u6bb5\u65f6\u95f4\uff0c\u6700\u7ec8\u6211\u653e\u5f03\u5c06\u5176\u4f5c\u4e3a\u5bb6\u7528\u670d\u52a1\u5668\u7684\u64cd\u4f5c\u7cfb\u7edf\u9009\u62e9\uff0c\u539f\u56e0\u662f\u5176\u4f5c\u4e3a\u4e00\u6b3e\u684c\u9762\u64cd\u4f5c\u7cfb\u7edf\u5f88\u4e0d\u9519\uff0c\u4f46\u662f\u4f5c\u4e3a\u4e00\u6b3e\u670d\u52a1\u5668\u64cd\u4f5c\u7cfb\u7edf\u7a0d\u6709\u4e0d\u8db3\uff0c\u5f88\u591a\u8f6f\u4ef6\u5e76\u672a\u5bf9\u5176\u9002\u914d\uff0c\u4f7f\u5f97\u5728\u5b89\u88c5\u65f6\u78b0\u5230\u4e86\u5f88\u591a\u95ee\u9898\u96be\u4ee5\u89e3\u51b3\u3002"},{"id":"old-computer-adventures/idea","metadata":{"permalink":"/blog/old-computer-adventures/idea","editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/01.\u5bb6\u7528\u670d\u52a1\u5668\u6298\u817e\u8bb0/01.\u6298\u817e\u601d\u8def.md","source":"@site/blog/01.\u5bb6\u7528\u670d\u52a1\u5668\u6298\u817e\u8bb0/01.\u6298\u817e\u601d\u8def.md","title":"0x1.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u6298\u817e\u601d\u8def","description":"\u5de5\u4f5c\u5b66\u4e60\u4e2d\uff0c\u7535\u8111\u8bbe\u5907\u4e0d\u65ad\u7684\u8fed\u4ee3\u5347\u7ea7\uff0c\u624b\u4e0a\u95f2\u7f6e\u4e86\u51e0\u53f0\u65e7\u7535\u8111\uff0c\u62b1\u7740\\"\u5e9f\u7269\u5229\u7528\\"\u7684\u60f3\u6cd5\uff0c\u628a\u8fd9\u4e9b\u65e7\u7535\u8111\u6539\u9020\u4e00\u4e0b\uff0c\u628a\u9650\u5236\u7684\u8d44\u6e90\u91cd\u65b0\u5229\u7528\u8d77\u6765\u3002","date":"2022-08-07T22:28:56.000Z","tags":[],"readingTime":0.95,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"0x1.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u6298\u817e\u601d\u8def","date":"2022-08-07T22:28:56.000Z","slug":"old-computer-adventures/idea","categories":["\u73af\u5883\u7ba1\u7406","\u5bb6\u7528\u670d\u52a1\u5668\u6298\u817e\u8bb0"]},"unlisted":false,"prevItem":{"title":"0x2.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u64cd\u4f5c\u7cfb\u7edf|Manjaro.md","permalink":"/blog/old-computer-adventures/manjaro"},"nextItem":{"title":"\u6162\u6162\u4e70\u6bd4\u4ef7\u722c\u866b(JS \u9006\u5411\u7834\u89e3)","permalink":"/blog/pages/cb409c/"}},"content":"\u5de5\u4f5c\u5b66\u4e60\u4e2d\uff0c\u7535\u8111\u8bbe\u5907\u4e0d\u65ad\u7684\u8fed\u4ee3\u5347\u7ea7\uff0c\u624b\u4e0a\u95f2\u7f6e\u4e86\u51e0\u53f0\u65e7\u7535\u8111\uff0c\u62b1\u7740\\"\u5e9f\u7269\u5229\u7528\\"\u7684\u60f3\u6cd5\uff0c\u628a\u8fd9\u4e9b\u65e7\u7535\u8111\u6539\u9020\u4e00\u4e0b\uff0c\u628a\u9650\u5236\u7684\u8d44\u6e90\u91cd\u65b0\u5229\u7528\u8d77\u6765\u3002\\n\\n\u76ee\u524d\uff0c\u6211\u7684\u60f3\u6cd5\u662f\u9010\u6b65\u7684\u628a\u7535\u8111\u6539\u9020\u6210\u96c6**\u6570\u636e\u5b58\u50a8**\uff0c**web\u670d\u52a1\u5668**\uff0c**\u89c6\u9891\u670d\u52a1\u5668**\u4e00\u4f53\u7684\u8fdc\u7a0b\u8bbe\u5907\u3002\\n\\n\x3c!--more--\x3e\\n\x3c!-- truncate --\x3e\\n\\n\u76ee\u524d\u642d\u5efa\u7684\u670d\u52a1\u6709\uff1a\\n\\n| \u670d\u52a1             | \u7c7b\u578b     | \u529f\u80fd                        |\\n| ---------------- | -------- | --------------------------- |\\n| Alist            | \u7f51\u76d8     | \u6570\u636e\u5b58\u50a8<br />WebDAV \u7535\u5b50\u4e66 |\\n| \u535a\u5ba2             | WEB\u670d\u52a1  | TODO...                     |\\n| \u4e0a\u6d77\u53d1\u5e03\u5b9a\u65f6\u722c\u866b | \u5b9a\u65f6\u4efb\u52a1 | \u666f\u70b9\u4eba\u6d41\u91cf                  |\\n| rancher          | K8S      | \u5bb9\u5668\u7ba1\u7406                    |\\n| portainer        | Docker   | \u5bb9\u5668\u7ba1\u7406                    |\\n| crontab job      |          | TODO...                     |\\n| JellyFin         | \u5f71\u97f3     | TODO...                     |\\n\\n\u53c2\u8003\uff1a\\n\\n- [\u4e00\u53f0\u7535\u8111\u7684 NAS \u4e4b\u65c5](https://tvtv.fun/pc-to-nas/)"},{"id":"/pages/cb409c/","metadata":{"permalink":"/blog/pages/cb409c/","editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/02.\u6162\u6162\u4e70\u6bd4\u4ef7\u722c\u866b.md","source":"@site/blog/02.\u6162\u6162\u4e70\u6bd4\u4ef7\u722c\u866b.md","title":"\u6162\u6162\u4e70\u6bd4\u4ef7\u722c\u866b(JS \u9006\u5411\u7834\u89e3)","description":"\u9879\u76ee\u4e2d\u6d89\u53ca\u5230\u5bf9\u6dd8\u5b9d\uff0c\u4eac\u4e1c\u5546\u54c1\u5386\u53f2\u4ef7\u683c\u7684\u6570\u636e\u91c7\u96c6\uff0c\u76f4\u63a5\u722c\u866b\u662f\u83b7\u53d6\u4e0d\u5230\u5386\u53f2\u6570\u636e\u7684\u3002\u9700\u8981\u501f\u52a9\u7b2c\u4e09\u65b9\u6bd4\u4ef7\u5e73\u53f0\u2014\u2014\u6162\u6162\u4e70\u3002\u6162\u6162\u4e70\u662f\u5168\u7f51\u6bd4\u4ef7\u5e73\u53f0\uff0c\u4e3b\u8981\u662f\u901a\u8fc7\u5b9e\u4e60\u722c\u53d6\u6dd8\u5b9d\uff0c\u4eac\u4e1c\uff0c\u5929\u732b\u7b49\u7535\u6247\u8d2d\u7269\u5e73\u53f0\uff0c\u5411\u7528\u6237\u63d0\u4f9b\u591a\u5e73\u53f0\u7684\u5546\u54c1\u4ef7\u683c\u6bd4\u8f83\u3002\u540c\u65f6\uff0c\u6162\u6162\u4e70\u8fd8\u63d0\u4f9b\u5386\u53f2\u4ef7\u683c\u67e5\u8be2\u7684\u529f\u80fd\u3002\u4f5c\u4e3a\u4e00\u4e2a\u722c\u866b\u5e73\u53f0\uff0c\u6162\u6162\u4e70\u5728\u53cd\u722c\u866b\u4e0a\u4e5f\u662f\u82b1\u8d39\u4e86\u4e0d\u5c11\u5fc3\u601d\u3002","date":"2021-01-14T11:29:28.000Z","tags":[],"readingTime":10.55,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"\u6162\u6162\u4e70\u6bd4\u4ef7\u722c\u866b(JS \u9006\u5411\u7834\u89e3)","date":"2021-01-14T11:29:28.000Z","slug":"/pages/cb409c/","categories":["\u722c\u866b"]},"unlisted":false,"prevItem":{"title":"0x1.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u6298\u817e\u601d\u8def","permalink":"/blog/old-computer-adventures/idea"},"nextItem":{"title":"0x4.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u5185\u7f51\u7a7f\u900f\u65b9\u6848|Ngork","permalink":"/blog/old-computer-adventures/how-to-connect-to-computer-in-home-ssh"}},"content":"\u9879\u76ee\u4e2d\u6d89\u53ca\u5230\u5bf9\u6dd8\u5b9d\uff0c\u4eac\u4e1c\u5546\u54c1\u5386\u53f2\u4ef7\u683c\u7684\u6570\u636e\u91c7\u96c6\uff0c\u76f4\u63a5\u722c\u866b\u662f\u83b7\u53d6\u4e0d\u5230\u5386\u53f2\u6570\u636e\u7684\u3002\u9700\u8981\u501f\u52a9\u7b2c\u4e09\u65b9\u6bd4\u4ef7\u5e73\u53f0\u2014\u2014[\u6162\u6162\u4e70](http://www.manmanbuy.com/)\u3002\u6162\u6162\u4e70\u662f\u5168\u7f51\u6bd4\u4ef7\u5e73\u53f0\uff0c\u4e3b\u8981\u662f\u901a\u8fc7\u5b9e\u4e60\u722c\u53d6\u6dd8\u5b9d\uff0c\u4eac\u4e1c\uff0c\u5929\u732b\u7b49\u7535\u6247\u8d2d\u7269\u5e73\u53f0\uff0c\u5411\u7528\u6237\u63d0\u4f9b\u591a\u5e73\u53f0\u7684\u5546\u54c1\u4ef7\u683c\u6bd4\u8f83\u3002\u540c\u65f6\uff0c\u6162\u6162\u4e70\u8fd8\u63d0\u4f9b\u5386\u53f2\u4ef7\u683c\u67e5\u8be2\u7684\u529f\u80fd\u3002\u4f5c\u4e3a\u4e00\u4e2a\u722c\u866b\u5e73\u53f0\uff0c\u6162\u6162\u4e70\u5728\u53cd\u722c\u866b\u4e0a\u4e5f\u662f\u82b1\u8d39\u4e86\u4e0d\u5c11\u5fc3\u601d\u3002\\n\\n\x3c!--more--\x3e\\n\x3c!-- truncate --\x3e\\n\\n## Http\u6293\u5305\u5206\u6790\\n\\n\u9996\u5148\uff0c\u8fdb\u5165\u6162\u6162\u4e70\u5386\u53f2\u4ef7\u683c\u67e5\u8be2\u5e73\u53f0\uff0c\u590d\u5236\u4e00\u4e2a\u6dd8\u5b9d\u4eac\u4e1c\u7684\u94fe\u63a5\u8fdb\u884c\u67e5\u8be2\u3002\\n\\n![image-20210114113250055](./assets/img/image-20210114113250055.png)\\n\\n\u901a\u8fc7 Chrome \u81ea\u5e26\u7684\u5f00\u53d1\u8005\u5de5\u5177->Network \u8fdb\u884chttp\u6293\u5305\u5206\u6790\\n\\n1. \u9996\u5148\u627e\u5230\u4ef7\u683c\u6570\u636e\uff0c\u4ef7\u683c\u6570\u636e\u4e2d\u4e00\u5b9a\u6709238\\n2. \u641c\u7d22\u6240\u6709\u8bf7\u6c42\u5230\u7684\u8d44\u6e90\uff0c\u67e5\u770b\u54ea\u4e9b\u6709238\\n3. \u627e\u5230\u5bf9\u5e94\u7684\u8bf7\u6c42\\n\\n![](assets/img/image-20210114131939821.png)\\n\\n## \u8bf7\u6c42\u5206\u6790\\n\\n\u901a\u8fc7\u67e5\u770b `Requests Headers` \u7684\u5934\u90e8\u4fe1\u606f\uff0c\u53d1\u73b0\u8fd9\u662f\u4e00\u4e2aPOST\u8bf7\u6c42\uff0c\u53ea\u8981\u628a\u53c2\u6570\u586b\u5165 `From data`\u5373\u53ef\u3002\\n\\n![](./assets/img/image-20210114132139111.png)\\n\\n- \u8bf7\u6c42\u5730\u5740\uff1ahttp://tool.manmanbuy.com/api.ashx\\n\\n- \u8bf7\u6c42\u65b9\u5f0f\uff1aPOST\\n\\n- \u8bf7\u6c42\u6570\u636e\uff1a\\n\\n  | Key    | Value                            | \u542b\u4e49             |\\n  | ------ | -------------------------------- | ---------------- |\\n  | method | getHistoryTrend                  | \u56fa\u5b9a\u4e0d\u53d8         |\\n  | key    | https://item.jd.com/6290488.html | \u539f\u5546\u54c1\u94fe\u63a5\uff08\u53d8\uff09 |\\n  | t      | 1610601399358                    | \u65f6\u95f4\u6233\uff08\u53d8\uff09     |\\n  | token  | DAF418E3848F4B4BB1C8CA6F23AD331D | token \uff08\u53d8\uff09     |\\n\\n- \u8bf7\u6c42\u62a5\u6587\u5206\u6790\\n\\n  ```\\n  Accept: */*  # \u63a5\u6536\u6240\u6709\u7c7b\u578b\u7684\u6570\u636e\\n  Accept-Encoding: gzip, deflate # \u63a5\u6536\u7f16\u7801\u65b9\u5f0f\\n  Accept-Language: zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7 # \u63a5\u6536\u8bed\u8a00\\n  Authorization: BasicAuth D8DD2812A942776AF9ED750C2D6D7539BF204F7C0B0FB414E6CEBD28536A99D07304FA7BFFBB2BDD6B9B46823A9D19FA751316693F17DD79FF26D70E2EBA1BF31918AB09FC305FCFB80352187AE32269B8D8DB1977F84F1E # Basic \u8eab\u4efd\u9a8c\u8bc1\\n  Content-Length: 122 # \u5185\u5bb9\u957f\u5ea6\\n  Content-Type: application/x-www-form-urlencoded; charset=UTF-8 # \u62a5\u6587\u4e3b\u4f53\u7684\u7c7b\u578b\uff1a\u901a\u8fc7 x-www-form-urlencoded \u63d0\u4ea4\u4e3b\u4f53\\n  Cookie: _ga=GA1.2.614520810.1610543725; _gid=GA1.2.187844233.1610543725; Hm_lvt_85f48cee3e51cd48eaba80781b243db3=1608561378,1608561379,1610539536,1610594558; ASP.NET_SessionId=oyiwn2k5xvhc2d5s3owcy4ma; radius=115.174.219.229; uudid=cms4cfa3810-b108-a48c-1a2f-eb4c72b23256; Hm_lvt_01a310dc95b71311522403c3237671ae=1608561378,1610539536,1610595007,1610595218; Hm_lpvt_85f48cee3e51cd48eaba80781b243db3=1610601329; Hm_lpvt_01a310dc95b71311522403c3237671ae=1610601329 # Cookie \\n  Host: tool.manmanbuy.com # \u4e3b\u673a\u5730\u5740\\n  Origin: http://tool.manmanbuy.com # Origin\\n  Proxy-Connection: keep-alive # \u6301\u7eed\u8fde\u63a5\\n  Referer: http://tool.manmanbuy.com/historyLowest.aspx?url=https%3A//item.jd.com/6290488.html # \u662f\u4ece\u54ea\u4e2a\u5730\u5740\u8bf7\u6c42\u6765\u7684\\n  User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 11_1_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.141 Safari/537.36 # User-Agent\\n  X-Requested-With: XMLHttpRequest\\n  ```\\n\\n  \u5176\u4e2d\u6bd4\u8f83\u91cd\u8981\u7684\u662f Cookie \u548c Authorization\u3002\\n\\n## \u5bfb\u627e\u53d8\u52a8\u7684\u5b57\u6bb5\\n\\n\u901a\u8fc7\u591a\u6b21\u8bf7\u6c42\uff0c\u6bd4\u8f83\u6bcf\u6b21\u8bf7\u6c42\u65f6\u5019\u53d8\u52a8\u7684\u8bf7\u6c42\u5934\uff0c\u8fd9\u6837\u624d\u80fd\u77e5\u9053\u54ea\u4e9b\u5b57\u6bb5\u8981\u53bb\u91cd\u70b9\u7814\u7a76\u653b\u514b\u3002\u53ef\u4ee5\u901a\u8fc7 \u4ee3\u7801\u6bd4\u8f83\u5de5\u5177\u53bb\u5206\u6790\u6bcf\u6b21\u53d8\u52a8\u7684\u5b57\u6bb5\u3002\\n\\n\u8fd9\u91cc\u6bd4\u8f83\u4e24\u4e2a\u90e8\u5206\\n\\n- \u8bf7\u6c42\u5934\u63d0\u4ea4\u7684\u6570\u636e\\n- \u8bf7\u6c42\u5934\u62a5\u6587\\n\\n> \u5de5\u5177\uff1a[\u5728\u7ebf\u4ee3\u7801\u5bf9\u6bd4/\u5f52\u5e76](https://www.matools.com/compare)\\n\\n### \u8bf7\u6c42\u5934\u63d0\u4ea4\u7684\u6570\u636e (Form data)\\n\\nmethod \u662f\u56fa\u5b9a\u7684\uff0ckey\uff0ct \u5206\u522b\u662f\u5546\u54c1\u5730\u5740\u548c\u65f6\u95f4\u6233\u3002\\n\\n**\u96be\u70b9\u662f token \u5b57\u6bb5\u7684\u751f\u6210\u65b9\u5f0f**\\n\\n![](./assets/img/image-20210114134237228.png)\\n\\n### \u8bf7\u6c42\u5934\u62a5\u6587(Request Header)\\n\\n![](./assets/img/image-20210114134630360.png)\\n\\n\u8bf7\u6c42\u5934\u4e2d Authorization \u4ee3\u8868\u7684\u662f Web\u7aef \u5bf9\u8bbf\u95ee\u7528\u6237\u8eab\u4efd\u7684\u8ba4\u8bc1\uff0c\u8fd9\u4e2a\u77e5\u8bc6\u70b9\uff0c\u5728 [08.\u786e\u8ba4\u8bbf\u95ee\u7528\u6237\u8eab\u4efd\u7684\u8ba4\u8bc1](./pages/8e336c) \u5df2\u7ecf\u5199\u8fc7\uff0cBasic Auth \u5c5e\u4e8e\u4e00\u79cd\u57fa\u672c\u7684\u8ba4\u8bc1\u65b9\u5f0f\uff0c\u672c\u8d28\u4e0a\u5c31\u662f\u901a\u8fc7 Base64 \u5bf9\u8d26\u6237\u5bc6\u7801\u8fdb\u884c\u7f16\u7801\u540e\u4f20\u8f93\uff0c\u7f16\u7801\u53ef\u4ee5\u901a\u8fc7Base64 \u53cd\u7f16\u7801\uff0c\u6240\u4ee5\u672c\u8d28\u4e0a\u5c31\u662f\u4e00\u79cd\u660e\u6587\u7684\u4f20\u8f93\u65b9\u5f0f\u3002\u6240\u4ee5\uff0c\u6211\u4eec\u53ef\u4ee5\u5c1d\u8bd5\u53cd\u7f16\u8bd1\u4e00\u4e0b\u3002\\n\\n#### \u53cd\u7f16\u8bd1 Authorization\\n\\n#### 1. Python \u5b9e\u73b0 Base64 \u7f16\u7801/\u89e3\u7801\\n\\n```python\\nimport base64\\n\\ndef get_basic_auth_str(username, password):\\n  temp_str = username + \':\' + password\\n  bytesString = temp_str.encode(encoding=\\"utf-8\\")  # \u8f6c\u6210bytes string\\n  encodestr = base64.b64encode(bytesString)  # base64 \u7f16\u7801\\n  return \'Basic \' + encodestr.decode() \\n\\ndef decode_basic_auth_str(auth_str):\\n    bytesString = auth_str.encode(\\"utf-8\\")\\n    decode_str = base64.b64decode(bytesString)\\n    return decode_str.decode(\\"utf-8\\")\\n\\n\\nif __name__ == \'__main__\':\\n    auth_str = get_basic_auth_str(\'Tom\', \'test\') # Basic VG9tOnRlc3Q=\\n    decode_str = decode_basic_auth_str(\'VG9tOnRlc3Q=\') # Tom:test\\n```\\n\\n\u5c1d\u8bd5\u901a\u8fc7 Base64 \u53bb\u53cd\u7f16\u8bd1\u52a0\u5bc6\u540e\u7684\u5b57\u7b26\u4e32\uff0c\u53d1\u73b0\u89e3\u6790\u9519\u8bef\u3002\\n\\n```python\\n>>> from util import decode_basic_auth_str                                                                          \\n>>> decode_basic_auth_str(\'D8DD2812A942776AF9ED750C2D6D7539BF204F7C0B0FB414E6CEBD28536A99D07304FA7BFFBB2BDD6B9B46823A9D19FA751316693F17DD79FF26D70E2EBA1BF31918AB09FC305FCFF5CC0120F0A255CA5D37BDC0EBFFB3CD\')   \\n>>> UnicodeDecodeError: \'utf-8\' codec can\'t decode byte 0xc0 in position 1: invalid start byte\\n```\\n\\n#### 2. \u5728\u7ebfBase\u7f16\u7801/\u89e3\u7801\u7f51\u7ad9\\n\\n\u901a\u8fc7\u5728\u7ebf\u7f16\u7801\u89e3\u7801\u7f51\u7ad9\u4e5f\u662f\u53d1\u73b0\u5168\u90e8\u90fd\u662f\u4e71\u7801\\n\\n![](./assets/img/image-20210114142147404.png)\\n\\n\\n\\n#### \u7ed3\u8bba\\n\\n\u7ecf\u8fc7\u4ee3\u7801\u6bd4\u8f83\u540e\uff0c\u6211\u4eec\u53d1\u73b0\u6709\u4e24\u4e2a\u5b57\u6bb5\u65e0\u6cd5\u89e3\u51b3\\n\\n- Authorization \u4e0d\u662f\u901a\u8fc7\u4f20\u7edf\u7684 Basic64 \u52a0\u5bc6\u7684\\n- token\\n\\n\\n\\n## JS\u4ee3\u7801\u5206\u6790\\n\\n\u77e5\u9053\u4e86\u76ee\u6807\uff0c\u5c31\u53ef\u4ee5\u67e5\u770b\u5177\u4f53\u53d1\u9001\u8bf7\u6c42\u7684\u5730\u65b9\uff0c\u4ee5\u53ca Authorization \u548c token \u751f\u6210\u7684\u903b\u8f91\u3002\\n\\n\u9996\u5148\uff0c\u67e5\u770b `/api.aspx` \u662f\u54ea\u91cc\u53d1\u9001\u51fa\u6765\u7684\\n\\n![](./assets/img/image-20210114145805844.png)\\n\\n\u7136\u540e\uff0c\u53ef\u4ee5\u901a\u8fc7\u6253\u4e0a\u65ad\u70b9\uff0c\u67e5\u627e\u53d1\u9001\u6570\u636e\u7684\u4ee3\u7801\u3002\u4f46\u662f\u8fd9\u91cc\u5e76\u4e0d\u662f\u62fc\u63a5\u6570\u636e\u7684\u5730\u65b9\u3002\\n\\n![](./assets/img/image-20210114150248508.png)\\n\\n\u5728 Call Stack \u8c03\u7528\u6808\u4e2d\uff0c\u4e0d\u65ad\u7684\u5411\u4e0a\u6392\u67e5\uff0c\u6700\u7ec8\u627e\u5230\u62fc\u63a5\u6570\u636e\u7684\u5730\u65b9\uff0c\u53ef\u4ee5\u770b\u51fa ajaxpost \u8fd9\u91cc\u662f\u771f\u6b63\u62fc\u63a5\u6570\u636e\u7684\u5730\u65b9\u3002\\n\\n![](./assets/img/image-20210114150718545.png)\\n\\n\u5728\u8c03\u8bd5\u4e2d\uff0c\u627e\u5230\u4e86 `form data` \u7684\u6570\u636e\\n\\n![](./assets/img/image-20210114151327739.png)\\n\\n\u627e\u5230\u4e86\u6570\u636e\u540e\uff0c\u624d\u53d1\u73b0\u771f\u6b63\u96be\u7684\u5730\u65b9\uff0c\u8fd9\u91cc\u7684 JavaScript \u4ee3\u7801\u90fd\u662f\u7ecf\u8fc7\u52a0\u5bc6\u7684\uff0c\u7531\u4e8e\u4e0d\u77e5\u9053\u51fd\u6570\u548c\u53d8\u91cf\u7684\u542b\u4e49\uff0c\u53bb\u7834\u89e3 token \u548c Authorization \u5b57\u6bb5\u65e0\u4ece\u4e0b\u624b\u3002\\n\\n\u5982\u8fd9\u6bb5\u4ee3\u7801\uff0c\u53d8\u91cf\u540d\u90fd\u662f\u901a\u8fc7 `_0x365d()` \u51fd\u6570\uff0c\u52a0\u5bc6\u8fc7\u4e86\uff0c\u53ea\u8981\u6211\u4eec\u7834\u89e3\u8fd9\u4e2a\u51fd\u6570\u5373\u53ef\u8fd8\u539f\u3002 \\n\\n```javascript\\n\'success\': function(_0x4ce40a) {\\n    var _0x1c6814 = {\\n      \'LrBHV\': _0x365d(\'0x2e\', \'OG@1\'),\\n      \'nyVkE\': _0x365d(\'0x2f\', \'[0Fm\'),\\n      \'qsLdn\': function _0x23683a(_0x46f029, _0x5eba10) {\\n        return _0x46f029(_0x5eba10);\\n      }\\n    };\\n    if (_0x365d(\'0x30\', \'BQd]\') !== _0x1c6814[_0x365d(\'0x31\', \'OG@1\')]) {\\n      w[c](_0x1c6814[_0x365d(\'0x32\', \'b8bF\')]);\\n    } else {\\n      _0x3aca29 && _0x1c6814[_0x365d(\'0x33\', \'xOX6\')](_0x3aca29, _0x4ce40a);\\n    }\\n  }\\n```\\n\\n\u4e0b\u9762\u6211\u4eec\u770b\u770b\u8fd9\u6bb5\u52a0\u5bc6\u4ee3\u7801\uff0c\u53d1\u73b0\u670970\u591a\u884c\uff0c\u624b\u52a8\u7834\u89e3\u592a\u8d39\u52b2\u4e86\u3002\\n\\n![](./assets/img/image-20210114152610556.png)\\n\\n\u800c\u4e14\u901a\u8fc7 `encode_version` \u53d1\u73b0\uff0c\u8fd9\u662f\u4f7f\u7528 jsjiami.com \u505a\u7684\u52a0\u5bc6\u3002\\n\\n![](./assets/img/image-20210114152900610.png)\\n\\n\u9996\u5148\uff0c\u8981\u5148\u628a js \u4ee3\u7801\u8c03\u8bd5\u51fa\u6765\\n\\n```javascript\\nvar window = undefined; // \u56e0\u4e3a node.js \u6ca1\u6709 window\uff0c\u53ef\u4ee5\u5148\u81f3\u4e3a undefined\\nvar encode_version = \'jsjiami.com.v5\',\\n\\tnljdj = \'__0xa3e63\',\\n\\t__0xa3e63 = [\'TURrcMKg\', \'bMKywoIHdw==\', ...];\\n(function (_0x58a45a, _0x50ac96) {...}(__0xa3e63, 0x1dc));\\nvar _0x365d = function (_0x5ce1df, _0x37ef48) {...};\\n                                               \\nconsole.log(_0x365d(\'0x22\', \'G7RY\')) //  \u8f93\u51fa BasicAuth                                   \\n```\\n\\n\u8fd9\u91cc\u4f7f\u7528 `execjs` \u548c \u6b63\u5219\u8868\u8fbe\u5f0f \u53bb\u89e3\u6790 JavaScript \u6587\u4ef6\\n\\n```python\\nimport re, execjs\\n\\ndef callJsFunc(s, func=\\"\\"):\\n    \\"\\"\\" \u8c03\u7528 js \u51fd\u6570\\"\\"\\"\\n    v1, v2 = s.group(1), s.group(2)\\n    return \\"\'{}\'\\".format(ctx.eval(\'_0x365d(%s, %s)\' %(v1, v2)))\\n\\n# \u52a0\u5bc6\u7684 js \u6587\u4ef6\\nwith open(\\"customRequest.js\\", \\"r\\", encoding=\\"utf-8\\") as fr:\\n    raw_code = fr.read()\\n    ctx = execjs.compile(raw_code)\\n# \u6b63\u5219\u5339\u914d\u51fa\uff0c\u4e24\u4e2a\u8f93\u5165\u53c2\u6570\\npattern = re.compile(r\\"_0x365d\\\\((\'.*?\'), (\'.*?\')\\\\)\\", re.S)\\ntrans_code = re.sub(pattern, callJsFunc, raw_code)\\n\\n# \u8f93\u51fa\u89e3\u5bc6\u6587\u4ef6\\nwith open(\'customRequest_trans.js\', \'w\', encoding=\\"utf-8\\") as fw:\\n    fw.write(trans_code)\\n```\\n\\n> \u539f JavaScript \u6587\u4ef6\uff1ahttps://github.com/PPsteven/manmanbuy_js_crack/blob/master/customRequest.js\\n>\\n> \u7834\u89e3\u540e\u7684 JavaScript \u6587\u4ef6\uff1ahttps://github.com/PPsteven/manmanbuy_js_crack/blob/master/customRequest_trans_%E8%BD%AC%E7%A0%81.js\\n\\n## token \u53c2\u6570\u8fd8\u539f\\n\\n\u7ffb\u8bd1\u7684 JavaScript \u4ee3\u7801\\n\\n```javascript\\n\'getNewParam\': function (_0x182946) { // \u4ee4 _0x182946 \u4e3a item\\n        var _0x6318d4 = {\\n            \'XMcLK\': function _0x53fadd(_0x53992b, _0x1be977) { \\n                return _0x53992b !== _0x1be977;\\n            },\\n            \'DCftw\': \'QyP\',\\n            \'rzOuq\': \'WgI\',\\n            \'NpXrl\': function _0x1baebf(_0x37086b, _0x2b1ab6) { // \u4e0d\u7b49\u4e8e\\n                return _0x37086b != _0x2b1ab6;\\n            },\\n            \'XAMWs\': function _0x3d56be(_0x2aa348, _0x2f1927) { // \u4e0d\u7b49\u4e8e\\n                return _0x2aa348 != _0x2f1927;\\n            },\\n            \'coWgu\': function _0x384c4f(_0x34042d, _0x166417) { // \u76f8\u52a0\\n                return _0x34042d + _0x166417;\\n            },\\n            \'MDcDl\': function _0x353cf4(_0x1134d4, _0xcc855d) { // \u51fd\u6570\u8c03\u7528\\n                return _0x1134d4(_0xcc855d);\\n            },\\n            \'cOInn\': function _0x1e4877(_0x532487, _0x49bb94) { // \u76f8\u52a0\\n                return _0x532487 + _0x49bb94;\\n            }\\n        };\\n        that = this; \\n        _0x182946[\'t\'] = new Date()[\'valueOf\'](); // \u83b7\u53d6\u5f53\u524d\u65f6\u95f4\u6233: item[\'t\'] = 1608129001120\\n        let _0x1a4f89 = Object[\'keys\'](_0x182946)[\'sort\'](); // \u6309\u7167 key \u6392\u5e8f: keys = item[\'keys\'].sort()\\n        let _0x3a63ba = {};\\n        _0x1a4f89[\'forEach\'](_0x138605 => {\\n            var _0x50fa23 = { // \u65e0\u610f\u4e49\\n                \'XImOu\': function _0xd5995c(_0x950655, _0x4002ed) {\\n                    return _0x950655 !== _0x4002ed;\\n                },\\n                \'vsytw\': \'KaZ\'\\n            };\\n            if (_0x50fa23[\'XImOu\'](_0x50fa23[\'vsytw\'], _0x50fa23[\'vsytw\'])) { } else { \\n                  // \u4e00\u5b9a\u662fFalse, \u6267\u884c\u672c\u884c\\n                _0x3a63ba[_0x138605] = _0x182946[_0x138605]; // _0x182946 \u6309\u7167 key \u4f9d\u6b21\u8d4b\u503c\u5230 _0x3a63ba\uff1b\u4ee4 _0x3a63ba \u4e3a newItem\\n            }\\n        });\\n  \\t\\t\\t// forEach(key => keys) {\\n  \\t\\t\\t//\\t\\tnewItem[key] = item[key]\\n        // }\\n        var _0x4547db = that[\'secret\'];\\n        for (let _0x3c07c9 in _0x3a63ba) {\\n            if (_0x6318d4[\'XMcLK\'](\'QyP\', \'WgI\')) { // \u4e00\u5b9a\u662fTrue\\n                // if data[key] != null && data[key] != \'\'\\n                if (_0x6318d4[\'NpXrl\'](_0x3a63ba[_0x3c07c9], null) && _0x6318d4[\'XAMWs\'](_0x3a63ba[_0x3c07c9], \'\')) { \\n                    // secret += urlencode(key) + urlencode(data[key])\\n                    _0x4547db += _0x6318d4[\'coWgu\'](_0x6318d4[\'MDcDl\'](encodeURIComponent, _0x3c07c9), encodeURIComponent(_0x3a63ba[_0x3c07c9])); \\n                }\\n            } else {\\n                date = _0x6318d4[\'cOInn\'](\'0\', date);\\n            }\\n        }\\n        _0x4547db += that[\'secret\']; // data += that[\'secret\']\\n        _0x4547db = _0x4547db[\'toUpperCase\'](); // data.toUpperCase()\\n        var _0x20fdfc = hex_md5(_0x4547db)[\'toUpperCase\'](); // hex_md5(data)\\n        _0x182946[\'token\'] = _0x20fdfc;\\n        return _0x182946;\\n    }\\n```\\n\\n\u4e0b\u9762\u662f\u7ffb\u8bd1\u7684 Python \u4ee3\u7801\\n\\n```python\\nimport time\\nfrom urllib.parse import quote\\nimport hashlib\\nimport collections\\n\\npost_data = {\\n    \'method\': \'getHistoryTrend\',\\n    \'key\': \'http://item.jd.hk/10429555538.html\',\\n    \'t\': str(int(time.time() * 100000))[:13] # 13 \u4f4d\u65f6\u95f4\u6233\\n}\\npost_data = collections.OrderedDict( # \u6309\u7167 key \u6392\u5e8f\\n    sorted(post_data.items(),\\n           key=lambda x: x[0])\\n)\\n\\n\\nsecret = \'c5c3f201a8e8fc634d37a766a0299218\' # secret \u4e0d\u53d8\\ntoken = secret\\nfor k, v in post_data.items():\\n    token += quote(k, safe=\'\') + quote(v, safe=\'\') # Python \u9ed8\u8ba4\u4e0d\u8f6c\u4e49 //,\u8fd9\u4e2a\u5fc5\u987b\u5220\u6389\\ntoken += secret\\ntoken = token.upper() # \u8f6c\u6210\u5927\u5199\\nm = hashlib.md5()\\nm.update(token.encode(\'utf-8\')) # \u751f\u6210 md5 \u7801\\ntoken = m.hexdigest().upper()\\npost_data[\'token\'] = token # \u6dfb\u52a0 token \\nprint(post_data)\\n```\\n\\n## Authorization \u7834\u89e3\\n\\n```javascript\\n\'beforeSend\': function(_0x59ca01) {\\n\\t\\t\\t\\tvar _0x467e2a = {\\n\\t\\t\\t\\t\\t\'CZYVH\': \'vBP\',\\n\\t\\t\\t\\t\\t\'suyCt\': \'Authorization\',\\n\\t\\t\\t\\t\\t\'bLTRm\': function _0x40c0f6(_0x326d84, _0xc7d8fa) {\\n\\t\\t\\t\\t\\t\\treturn _0x326d84 + _0xc7d8fa;\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\'HCGmF\': \'BasicAuth \'\\n\\t\\t\\t\\t};\\n\\t\\t\\t\\tif (_0x467e2a[\'CZYVH\'] === _0x467e2a[\'CZYVH\']) {\\n           // \u4e00\u5b9a\u6267\u884c\u672c\u884c\\n\\t\\t\\t\\t\\t_0x59ca01[\'setRequestHeader\'](_0x467e2a[\'suyCt\'], _0x467e2a[\'bLTRm\'](_0x467e2a[\'HCGmF\'], _0x1901a2[\'getTicket\']()));\\n\\t\\t\\t\\t\\t// _0x59ca01[\'setRequestHeader\'](\'Authorization\', \'BasicAuth \' + this.getTicket())\\n        } else {\\n\\t\\t\\t\\t\\t_0x59ca01[\'setRequestHeader\'](_0x467e2a[\'suyCt\'], _0x467e2a[\'bLTRm\'](_0x467e2a[\'HCGmF\'], _0x1901a2[\'getTicket\']()));\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n```\\n\\ngetTicket \u51fd\u6570\\n\\n```javascript\\n   ... \\n   \'secret\': \'c5c3f201a8e8fc634d37a766a0299218\',\\n\\t \'getTicket\': function() {\\n\\t\\tvar _0x3bc08f = {\\n\\t\\t\\t\'ipeUV\': function _0x5ef1ae(_0x41239c, _0x1e50a1) { // a(b)\\n\\t\\t\\t\\treturn _0x41239c(_0x1e50a1);\\n\\t\\t\\t},\\n\\t\\t\\t\'ZadZx\': function _0x13f13f(_0x34a3cb, _0x22d7b9) { // a > b\\n\\t\\t\\t\\treturn _0x34a3cb > _0x22d7b9;\\n\\t\\t\\t},\\n\\t\\t\\t\'XDmmn\': function _0x5cd9f2(_0x47ada5, _0x170387) { // a + b \\n\\t\\t\\t\\treturn _0x47ada5 + _0x170387;\\n\\t\\t\\t},\\n\\t\\t\\t\'HxAAK\': function _0x18276a(_0x1835fa, _0x2d0f0b) { // a - b \\n\\t\\t\\t\\treturn _0x1835fa - _0x2d0f0b;\\n\\t\\t\\t},\\n\\t\\t\\t\'DLUkx\': function _0x149149(_0x200e47, _0x1da274) { // a - b\\n\\t\\t\\t\\treturn _0x200e47 - _0x1da274;\\n\\t\\t\\t}\\n\\t\\t};\\n\\t\\tvar _0x3f166f = _0x3bc08f[\'ipeUV\']($, \'#ticket\')[\'val\'](); // ticket = $(#ticket).val\\n\\t\\tif (_0x3bc08f[\'ZadZx\'](_0x3f166f[\'length\'], 0x4)) {  // if len(ticket) > 4 \\n       // ticket = substr[lenght(ticket) - 4, 4] + substr[0, length(ticket) - 4 ]\\n\\t\\t\\t_0x3f166f = _0x3bc08f[\'XDmmn\'](_0x3f166f[\'substr\'](_0x3bc08f[\'HxAAK\'](_0x3f166f[\'length\'], 0x4), 0x4), _0x3f166f[\'substring\'](0x0, _0x3bc08f[\'DLUkx\'](_0x3f166f[\'length\'], 0x4)));\\n\\t\\t}\\n\\t\\treturn _0x3f166f;\\n\\t},\\n```\\n\\n\u4e0a\u9762\u7684\u4ee3\u7801\u5c31\u5f88\u7b80\u5355\\n\\n- \u9996\u5148\u4ece http://tool.manmanbuy.com/HistoryLowest.aspx \u83b7\u53d6 `#ticket` \u5143\u7d20\u7684\u503c\\n- ticket \u5411\u53f3\u5faa\u73af4\u4e2a\u5b57\u6bcd\uff0c\u5373abcdefgh \u53d8\u6210 efghabcd\\n\\nPython \u7ffb\u8bd1\u4ee3\u7801\\n\\n```python\\ndef create_auth():\\n    req = requests.get(\'http://tool.manmanbuy.com/HistoryLowest.aspx\')\\n    if req.status_code == 200:\\n        history_price_html = req.text\\n        searchRet = re.search(r\'id=\\"ticket\\".+value=\\"(?P<value>.+)\\"\', history_price_html)\\n        if not searchRet:\\n            return \'\'\\n        ticket = searchRet.group(\'value\')\\n\\n        return \'BasicAuth \' + ticket[-4:] + ticket[:-4]\\n    return \'\'\\n```\\n\\n## Github \u4ed3\u5e93\\n\\n[manmanbuy_js_crack](https://github.com/PPsteven/manmanbuy_js_crack)\\n\\n## \u53c2\u8003\u8d44\u6599\\n\\n[\u67d0 JS \u52a0\u5bc6\u9006\u5411\u8fd8\u539f\u7b80\u5355\u5206\u6790](https://www.myitmx.com/96.html)"},{"id":"old-computer-adventures/how-to-connect-to-computer-in-home-ssh","metadata":{"permalink":"/blog/old-computer-adventures/how-to-connect-to-computer-in-home-ssh","editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/01.\u5bb6\u7528\u670d\u52a1\u5668\u6298\u817e\u8bb0/04.\u5185\u7f51\u7a7f\u900f-Ngork.md","source":"@site/blog/01.\u5bb6\u7528\u670d\u52a1\u5668\u6298\u817e\u8bb0/04.\u5185\u7f51\u7a7f\u900f-Ngork.md","title":"0x4.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u5185\u7f51\u7a7f\u900f\u65b9\u6848|Ngork","description":"\u5bb6\u4e2d\u7684\u7535\u8111\uff0c\u7531\u4e8e\u6ca1\u6709\u516c\u7f51ip\uff0c\u53ea\u80fd\u5728\u5bb6\u4e2d\u7528ssh \u8bbf\u95ee\uff0c\u4e00\u65e6\u51fa\u95e8\uff0c\u5c31\u65e0\u6cd5\u8bbf\u95ee\u670d\u52a1\u5668\u4e86\u3002\u8fd9\u975e\u5e38\u4e0d\u65b9\u4fbf\uff0c\u56e0\u4e3a\u53ef\u80fd\u8981\u4ece\u7535\u8111\u4e0a\u83b7\u53d6\u8d44\u6599\uff0c\u8bbf\u95ee\u6570\u636e\u5e93\uff0c\u4fee\u6539\u4ee3\u7801\u7b49\u7b49\u64cd\u4f5c\uff0c\u4e00\u65e6\u79bb\u5f00\u672c\u5730\u73af\u5883\uff0c\u4e5f\u592a\u4e0d\u65b9\u4fbf\u4e86\u3002","date":"2019-12-01T13:23:30.000Z","tags":[{"label":"ssh","permalink":"/blog/tags/ssh"},{"label":"sunny-ngrok","permalink":"/blog/tags/sunny-ngrok"}],"readingTime":9.435,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"0x4.\u5bb6\u5ead\u670d\u52a1\u5668\u6298\u817e\u8bb0|\u5185\u7f51\u7a7f\u900f\u65b9\u6848|Ngork","date":"2019-12-01T13:23:30.000Z","tags":["ssh","sunny-ngrok"],"categories":["\u73af\u5883\u642d\u5efa"],"comments":false,"cover":"https://cdn.jsdelivr.net/gh/PPsteven/pictures/img/20200121011429.png","slug":"old-computer-adventures/how-to-connect-to-computer-in-home-ssh"},"unlisted":false,"prevItem":{"title":"\u6162\u6162\u4e70\u6bd4\u4ef7\u722c\u866b(JS \u9006\u5411\u7834\u89e3)","permalink":"/blog/pages/cb409c/"}},"content":"\u5bb6\u4e2d\u7684\u7535\u8111\uff0c\u7531\u4e8e\u6ca1\u6709\u516c\u7f51ip\uff0c\u53ea\u80fd\u5728\u5bb6\u4e2d\u7528ssh \u8bbf\u95ee\uff0c\u4e00\u65e6\u51fa\u95e8\uff0c\u5c31\u65e0\u6cd5\u8bbf\u95ee\u670d\u52a1\u5668\u4e86\u3002\u8fd9\u975e\u5e38\u4e0d\u65b9\u4fbf\uff0c\u56e0\u4e3a\u53ef\u80fd\u8981\u4ece\u7535\u8111\u4e0a\u83b7\u53d6\u8d44\u6599\uff0c\u8bbf\u95ee\u6570\u636e\u5e93\uff0c\u4fee\u6539\u4ee3\u7801\u7b49\u7b49\u64cd\u4f5c\uff0c\u4e00\u65e6\u79bb\u5f00\u672c\u5730\u73af\u5883\uff0c\u4e5f\u592a\u4e0d\u65b9\u4fbf\u4e86\u3002\\n\\n\u7ecf\u8fc7\u767e\u5ea6\u540e\u53d1\u73b0\uff0c\u9700\u8981\u5229\u7528  **\u5185\u7f51\u7a7f\u900f** \u6280\u672f\u5b9e\u73b0\u3002 \u539f\u56e0\u662f\u6211\u4eec\u7684ip\u8d44\u6e90\u662f\u7a00\u7f3a\u7684\uff0c\u6211\u4eec\u666e\u901a\u5bb6\u5ead\u4e2d\u4f7f\u7528\u7684ip\u90fd\u662f\u52a8\u6001\u5206\u914d\u7684ip\u5730\u5740\u3002\u6ca1\u6709\u56fa\u5b9a\u7684ip\u7684\u670d\u52a1\u5668\u662f\u65e0\u6cd5\u4e0e\u5916\u7f51\u8fde\u63a5\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u81f3\u5c11\u9700\u8981\u4e00\u4e2a\u516c\u7f51ip\u3002\\n\\n\u5185\u7f51\u7a7f\u900f\u6280\u672f\u6709\u5f88\u591a\u4e86\uff0c\u6211\u8fd9\u91cc\u9009\u62e9\u7684\u662fngrok \u8fd9\u4e2a\u65b9\u6848\u3002\\n\u6211\u8bd5\u4e86\u4e00\u4e0b\u4e24\u79cd\u65b9\u6848\uff0c\u7b2c\u4e00\u4e2a\u662f\u5916\u56fd\u7684ngrok\uff0c\u6ca1\u6709\u5c1d\u8bd5\u6210\u529f\uff0c\u800c\u4e14\u514d\u8d39\u7248\u672c\u6bcf\u6b21\u65ad\u5f00\u540e\uff0c\u751f\u6210\u7684url \u662f\u968f\u673a\u7684\u3002\u6240\u4ee5\u6ca1\u6709\u91c7\u7528\u3002\u7b2c\u4e8c\u4e2a\u662f\u56fd\u5185\u7684Sunny-Ngrok\uff0c\u6709\u514d\u8d39\u7248\u7684\u3002\u5148\u5c1d\u8bd5\u4e00\u6ce2\u3002\\n\\n\x3c!--more--\x3e\\n\x3c!-- truncate --\x3e\\n\\n- [ngrok](https://dashboard.ngrok.com/get-started)\\n- [ngrok.cc](https://www.ngrok.cc/download.html)  \uff08Sunny-Ngrok\uff09\\n\\n> \u4f7f\u7528Sunny-Ngrok\u4e00\u4e2a\u5f88\u5927\u7684\u597d\u5904\u5c31\u662f\u5728\u5f53\u4f60\u6ca1\u6709\u670d\u52a1\u5668\u548c\u516c\u7f51ip\u7684\u65f6\u5019\uff0c\u5b83\u4f1a\u662f\u4e00\u4e2a\u5f88\u4e0d\u9519\u7684\u89e3\u51b3\u65b9\u6848\u3002\u5f53\u7136\u82e5\u662f\u4f60\u6709\u670d\u52a1\u5668\u7684\u8bdd\uff0c\u81ea\u5df1\u642d\u4e00\u4e2angrok\u672a\u5c1d\u4e0d\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u9009\u62e9\u3002\\n\\n##  \u5c40\u57df\u7f51\u8fde\u63a5\u670d\u52a1\u5668\\n\\n\u8fd9\u91cc\u5148\u7ed9\u51fa\u7528\u5c40\u57df\u7f51\u8fde\u63a5\u670d\u52a1\u5668\u7684\u65b9\u6cd5\\n```bash\\n# linux \u67e5\u770bip \u5730\u5740\u4e00\u822c\u662f\u4e0b\u9762\u4e09\u79cd\u65b9\u6cd5\uff08\u4e0d\u540c\u7cfb\u7edf\u4e0d\u4e00\u6837\uff09\\n$ ifconfig\\n$ ipconfig\\n$ ip addr # <--manjaro\\n```\\n\u8fd0\u884c\u5982\u4e0b\\n```bash\\n$ ip addr | grep inet\\n    inet 127.0.0.1/8 scope host lo\\n    inet6 ::1/128 scope host\\n    inet 192.168.1.102/24 brd 192.168.1.255 scope global dynamic noprefixroute wlp2s0\\n    inet6 fe80::1bd5:9435:6572:ffc7/64 scope link noprefixroute\\n# ip\u5730\u5740\u662f 192.168.1.102\\n```\\n\u5c40\u57df\u7f51\u4e2d\u4f7f\u7528\\n```bash\\nssh -p 22 ppsteven@192.168.1.l02\\n# -p 22 \u4e5f\u53ef\u4ee5\u7701\u7565\uff0c\u56e0\u4e3assh \u7684\u9ed8\u8ba4\u7aef\u53e3\u53f7\u5c31\u662f22 \\n```\\n\\n\\n\\n## Sunny-Ngrok\u6559\u7a0b\\n\\n\u6559\u7a0b\u57fa\u672c\u4e0a\u90fd\u5728 [ngrok.cc\u5b98\u65b9\u6587\u6863](http://www.ngrok.cc/_book/general/tcp.html) \u5199\u7684\u5f88\u6e05\u695a\u4e86\uff0c\u4f46\u662f\u6709\u4e00\u4e9b\u8fd8\u662f\u9700\u8981\u6ce8\u610f\u7684\u3002\\n\\n### \u5f00\u901a\u96a7\u9053\\n\\n![](https://cdn.jsdelivr.net/gh/PPsteven/pictures/img/20191201135321.png)\\n\\n\u5982\u679c\u4f60\u662f\u60f3\u7528ssh\uff0c\u5f00\u901a\u7684\u5c31\u662fTCP\u8f6c\u53d1\u3002\u8bb0\u5f97\u8981\u628a\u672c\u5730\u7aef\u53e3\u6362\u621022\uff08\u5f53\u7136\u4e0d\u6362\u4e5f\u662f\u53ef\u4ee5\u7684\uff0c\u53ea\u8981\u4f60\u6700\u540e\u8fdessh \u7684\u65f6\u5019\u8bbe\u7f6e\u597d\u7aef\u53e3\u5c31\u884c\u4e86\uff09\\n\\n![](https://cdn.jsdelivr.net/gh/PPsteven/pictures/img/20191201135519.png)\\n\\n\\n\\n\u6700\u540e\u770b\u5230\u7684\u7ed3\u679c\u662f\u8fd9\u6837\u7684\\n\\n![](https://cdn.jsdelivr.net/gh/PPsteven/pictures/img/20191201153141.png)\\n\\n```bash\\n$ ssh -p 10568 yourname@free.aa.com \u5c31\u53ef\u4ee5\u8fde\u63a5\u4e0a\u4f60\u7684\u670d\u52a1\u5668\u4e86\\n```\\n\\n\\n\\n### Ngrok \u542f\u52a8\\n\\n\u4e0a\u56fe\u53ef\u4ee5\u770b\u5230\uff0c\u5728\u72b6\u6001\u680f\u663e\u793a \u662f\u5426\u6210\u529f\u5f00\u542fngrok\\n\\n\u542f\u52a8\u7684\u65b9\u6cd5\uff0c\u5b98\u7f51\u6559\u7a0b\u91cc\u9762\u4e5f\u6709\u5199\uff0c\u672c\u4eba\u6309\u7167\u6d41\u7a0b\u8d70\u4e00\u904d\u3002\\n\\n### \u4e0b\u8f7d\u5ba2\u6237\u7aef\\n\\n\u6211\u7528\u7684\u662fMac \u4e0b\u8f7dzip\u6587\u4ef6\uff0c\u7136\u540e\u4e0a\u4f20\u5230\u670d\u52a1\u5668\u7684\u64cd\u4f5c\u3002\u6709\u56fe\u5f62\u754c\u9762\u7684\u540c\u5b66\uff0c\u53ef\u4ee5\u76f4\u63a5\u6309\u7167\u5b98\u7f51\u64cd\u4f5c\u3002\\n\\n```bash\\n$ scp ~/Downloads/linux_amd64.zip ppsteven@192.168.1.102:~/Documents\\n$ ssh 192.168.1.102\\n$ cd ~/Documents\\n$ unzip linux_amd64.zip\\n```\\n### \u542f\u52a8ngrok \u670d\u52a1\\n```bash\\n# \u5f53\u524d\u76ee\u5f55\u5728linux_amd64 \u4e0b\\n$ ./sunny clientid \u96a7\u9053id  # \u542f\u52a8\u96a7\u9053\u670d\u52a1\\n$ setsid ./sunny clientid 743acXXXX & # \u5728\u540e\u53f0\u542f\u52a8\u96a7\u9053\u670d\u52a1\\n```\\n\u542f\u52a8\u670d\u52a1\u540e\uff0c\u6211\u4eec\u5728\u5b98\u7f51\u7684\u540e\u7aef\u5c31\u53ef\u4ee5\u770b\u5230\u7ed3\u679c\u3002\\n\u4e3a\u4e86\u8ba9\u6211\u4eec\u7684\u670d\u52a1\u5668\u80fd\u4e0d\u65ad\u7684\u5728\u540e\u53f0\u8fd0\u884c\uff0c\u6211\u4eec\u9700\u8981\u767b\u5f55\u670d\u52a1\u5668\u540e\uff0c\u8fd0\u884c\u7b2c\u4e8c\u884c\u7684\u547d\u4ee4\\n\\n - & \u4f5c\u7528\u662f\u540e\u53f0\u8fd0\u884c\u7a0b\u5e8f\\n - setsid \u4f5c\u7528\u662f\u5f53\u7ec8\u7aef\u5173\u95ed\u7684\u65f6\u5019\u547d\u4ee4\u4e00\u76f4\u4e0d\u4f1a\u5173\u95ed\\n\\n### \u9ad8\u7ea7\u6559\u7a0b\u2014\u2014\u5f00\u673a\u81ea\u52a8\u8fd0\u884c\\n\\n\u5b98\u7f51\u4e2d\u5df2\u7ecf\u7ed9\u51fa\u4e86 [Ngrok\u5f00\u673a\u81ea\u542f\u52a8](http://www.ngrok.cc/_book/start/ngrok_auto.html) \u7684\u6559\u7a0b\uff0c\u6211\u4eec\u8fd9\u91cc\u7531\u4e8e\u4f7f\u7528\u7684\u662fmanjaro\uff0c\u5b98\u7f51\u7684\u6559\u7a0b\u65e0\u6cd5\u76f4\u63a5\u53c2\u8003\uff0c\u6211\u4eec\u8fd9\u91cc\u7ed9\u51fa\u81ea\u5df1\u7684\u89e3\u51b3\u65b9\u6848\u3002\\n\\n#### \u7b2c\u4e00\u6b65\uff1a\u79fb\u52a8\u547d\u4ee4\uff0c\u5e76\u4f7f\u4e4b\u53ef\u6267\u884c\\n\\n```bash\\nsudo mv sunny /usr/local/bin/sunny\\nsudo chmod +x /usr/local/bin/sunny\\n```\\n\\n#### \u7b2c\u4e8c\u6b65\uff1a\u7f16\u5199\u542f\u52a8\u811a\u672c\\n\\n\u6211\u4eec\u8fd9\u91cc\u76f4\u63a5\u4e0a\u624b\u4fee\u6539\u5b98\u7f51\u7684shell\u8bed\u8a00\\n\\nsunny_auto.sh\\n\\n```shell\\n#!/bin/bash -e\\n### BEGIN INIT INFO\\n# Provides:          ngrok.cc\\n# Required-Start:    $network $remote_fs $local_fs\\n# Required-Stop:     $network $remote_fs $local_fs\\n# Default-Start:     2 3 4 5\\n# Default-Stop:      0 1 6\\n# Short-Description: autostartup of ngrok for Linux\\n### END INIT INFO\\n\\nNAME=sunny\\nDAEMON=/usr/local/bin/$NAME\\nPIDFILE=/var/run/$NAME.pid\\n# \u5224\u65ad sunny \u662f\u5426\u53ef\u6267\u884c\\n[ -x \\"$DAEMON\\" ] || exit 0\\n\\ncase \\"$1\\" in\\n  start)\\n      # \u6839\u636e/var/run/sunny.pid \u6587\u4ef6\u5224\u65adsunny\u662f\u5426\u6b63\u5728\u8fd0\u884c\\n      if [ -f $PIDFILE ]; then \\n        echo \\"$NAME already running...\\"\\n        echo -e \\"\\\\033[1;35mStart Fail\\\\033[0m\\"\\n      else\\n        echo \\"Starting $NAME...\\"\\n        # start-stop-daemon -S -p $PIDFILE -m -b -o -q -x $DAEMON -- clientid \u96a7\u9053id || return 2\\n        # \u4e0d\u4f7f\u7528start-stop-daemon\uff0c\u4f7f\u7528\u5e38\u89c4\u7684\u65b9\u6cd5\u540e\u53f0\u8fd0\u884c\\n        setsid sunny clientid 1cb52410136cfe34 &\\n        echo -e \\"\\\\033[1;32mStart Success\\\\033[0m\\"\\n    fi\\n    ;;\\n  stop)\\n        echo \\"Stoping $NAME...\\"\\n        # start-stop-daemon -K -p $PIDFILE -s TERM -o -q || return 2\\n        # pkill \u662f kill \u548c pgrep \u7684\u7ed3\u5408\uff0c\u5220\u9664\u6240\u6709\u4e2d\u5e26sunny\u7684\u8fdb\u7a0b\\n        pkill -9 sunny \\n        rm -rf $PIDFILE\\n        echo -e \\"\\\\033[1;32mStop Success\\\\033[0m\\"\\n    ;;\\n  restart)\\n    $0 stop && sleep 2 && $0 start\\n    ;;\\n  *)\\n    echo \\"Usage: $0 {start|stop|restart}\\"\\n    exit 1\\n    ;;\\nesac\\nexit 0\\n```\\n\\n\u5199\u5b8c\u4e4b\u540e\uff0c\u6211\u4eec\u9700\u8981\u6d4b\u8bd5\u4e00\u4e0b\\n\\n```shell\\nchmod a+x sunny_auto.sh\\n./sunny_auto.sh # \u4f1a\u8f93\u51fa\u4f7f\u7528\u65b9\u6cd5\\n./sunny_auto.sh start \\n./sunny_auto.sh stop\\n./sunny_auto.sh restart\\n```\\n\\n\u6d4b\u8bd5\u6210\u529f\u540e\uff0c\u6211\u4eec\u9700\u8981\u8ba9\u7cfb\u7edf\u81ea\u5df1\u542f\u52a8\u3002\u6211\u770b\u4e86\u4e00\u4e0b\uff0c\u76ee\u524d\u7f51\u4e0a\u5927\u90e8\u5206\u6559\u7a0b\u90fd\u662f\u76f4\u63a5\u7ed9\u4e86\u4ee3\u7801\uff0c\u5e76\u6ca1\u6709\u89e3\u91ca\u6e05\u695a\u81ea\u542f\u52a8\u7684\u539f\u7406\u3002\u6211\u8ba4\u4e3a\u8fd9\u662f\u53ef\u4ee5\u901a\u8fc7\u67e5\u770b\u5b98\u65b9\u6559\u7a0b\u4e00\u6b65\u6b65\u8bb2\u6e05\u695a\u7684\u3002\u62b1\u7740**\u201c\u6388\u4eba\u4ee5\u9c7c\u4e0d\u5982\u6388\u4eba\u4ee5\u6e14\u201d** \u7684\u6001\u5ea6\uff0c\u6211\u51c6\u5907\u5199\u7684\u4ed4\u7ec6\u4e00\u70b9\u3002\\n\\n#### \u7b2c\u4e09\u6b65\uff1a\u81ea\u52a8\u8dd1\u8d77\u6765\\n\\n\u6211\u4eec\u7684\u7cfb\u7edf\u662fmanjaro\uff0c\u662farch linux \u7684\u884d\u751f\u7248\u672c\uff0c\u6240\u4ee5\u6211\u4eec\u7b2c\u4e00\u60f3\u5230\u7684\u5c31\u662f\u53bb [https://wiki.archlinux.org/](https://www.archlinux.org/) \u4e0a\u627e\u3002\\n\\narchlinux \u4e0a\uff0c\u5728\u5982\u4e0b\u4e5d\u4e2a\u65b9\u9762\uff0c\u6211\u4eec\u53ef\u4ee5\u5b8c\u6210\\"autostart\\" \u64cd\u4f5c\\n\\n- \u5f00\u5173\u673a\\n- \u767b\u5f55\u767b\u51fa\\n- \u63d2\u5165\u62d4\u51fa\u8bbe\u5907\\n- \u8ba1\u65f6\u4e8b\u4ef6\\n- \u6587\u4ef6\u7cfb\u7edf\u4e8b\u4ef6\\n- shell\u767b\u5f55\u767b\u51fa\\n- Xorg\\n- \u684c\u9762\u73af\u5883\\n- \u7a97\u53e3\u7ba1\u7406\u542f\u52a8\\n\\n\u8fd9\u91cc\uff0c\u6211\u4eec\u9700\u8981\u7b2c\u4e00\u9879\u5f00\u5173\u673a [Systemd](https://wiki.archlinux.org/index.php/Systemd_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)) \u4f5c\u4e3a\u6211\u4eec\u81ea\u542f\u52a8\u7684\u65b9\u5f0f\uff0c\u5176\u5b9e\u5f88\u591a\u6559\u7a0b\u4e2d\u4e5f\u662f\u91c7\u7528\u7684\u8fd9\u4e2a\u65b9\u5f0f\u3002\\n\\n##### \u5355\u5143\u6587\u4ef6\\n\\n\u4e00\u4e2a\u670d\u52a1\u53ef\u4ee5\u770b\u505a\u662f\u4e00\u4e2aunit\uff0c\u6bcf\u4e2aunit\u9700\u8981\u7f16\u5199\u81ea\u5df1\u7684\u5355\u5143\u6587\u4ef6\u3002`systemd` [\u5355\u5143\u6587\u4ef6](https://www.freedesktop.org/software/systemd/man/systemd.unit.html)\u7684\u8bed\u6cd5\u6765\u6e90\u4e8e XDG \u684c\u9762\u9879\u914d\u7f6e\u6587\u4ef6`.desktop`\u6587\u4ef6\uff0c\u6700\u521d\u7684\u6e90\u5934\u5219\u662fMicrosoft Windows\u7684`.ini`\u6587\u4ef6\u3002\\n\\n##### \u5355\u5143\u6587\u4ef6\u64cd\u4f5c\\n\\n\u7acb\u5373\u6fc0\u6d3b\u5355\u5143\uff1a\\n\\n```\\n# systemctl start <\u5355\u5143>\\n```\\n\\n\u7acb\u5373\u505c\u6b62\u5355\u5143\uff1a\\n\\n```\\n# systemctl stop <\u5355\u5143>\\n```\\n\\n\u91cd\u542f\u5355\u5143\uff1a\\n\\n```\\n# systemctl restart <\u5355\u5143>\\n```\\n\\n\u91cd\u65b0\u52a0\u8f7d\u914d\u7f6e\uff1a\\n\\n```\\n# systemctl reload <\u5355\u5143>\\n```\\n\\n\u8f93\u51fa\u5355\u5143\u8fd0\u884c\u72b6\u6001\uff1a\\n\\n```\\n$ systemctl status <\u5355\u5143>\\n```\\n\\n\u68c0\u67e5\u5355\u5143\u662f\u5426\u914d\u7f6e\u4e3a\u81ea\u52a8\u542f\u52a8\uff1a\\n\\n```\\n$ systemctl is-enabled <\u5355\u5143>\\n```\\n\\n\u5f00\u673a\u81ea\u52a8\u6fc0\u6d3b\u5355\u5143\uff1a\\n\\n```\\n# systemctl enable <\u5355\u5143>\\n```\\n\\n\u8bbe\u7f6e\u5355\u5143\u4e3a\u81ea\u52a8\u542f\u52a8\u5e76\u7acb\u5373\u542f\u52a8\u8fd9\u4e2a\u5355\u5143:\\n\\n```\\n# systemctl enable --now unit\\n```\\n\\n\u53d6\u6d88\u5f00\u673a\u81ea\u52a8\u6fc0\u6d3b\u5355\u5143\uff1a\\n\\n```\\n# systemctl disable <\u5355\u5143>\\n```\\n\\n##### \u7f16\u8f91\u6211\u4eec\u7684\u5355\u5143\u6587\u4ef6\\n\\n\u5355\u5143\u6587\u4ef6\u7684\u8bed\u6cd5\uff0c\u53ef\u4ee5\u53c2\u8003\u7cfb\u7edf\u5df2\u7ecf\u5b89\u88c5\u7684\u5355\u5143\uff0c\u4e5f\u53ef\u4ee5\u53c2\u8003 [systemd.service(5)](https://jlk.fjfi.cvut.cz/arch/manpages/man/systemd.service.5) \u4e2d\u7684[EXAMPLES\u7ae0\u8282](https://www.freedesktop.org/software/systemd/man/systemd.service.html#Examples)\u3002\u82f1\u6587\u4e0d\u597d\u7684\u540c\u5b66\uff0c\u6709\u4e00\u4f4d\u70ed\u5fc3\u7684\u5927\u725b\uff0c\u5df2\u7ecf\u5199\u597d\u4e86\u4e2d\u6587\u6559\u7a0b [systemd.index \u4e2d\u6587\u624b\u518c](http://www.jinbuguo.com/systemd/systemd.index.html)\\n\\n\u5355\u5143\u6587\u4ef6\u7684\u5730\u5740\u5982\u4e0b\\n\\n- `/usr/lib/systemd/system/` \uff1a\u8f6f\u4ef6\u5305\u5b89\u88c5\u7684\u5355\u5143\\n- `/etc/systemd/system/` \uff1a\u7cfb\u7edf\u7ba1\u7406\u5458\u5b89\u88c5\u7684\u5355\u5143\\n\\n\u4ece\u7f51\u4e0a\u7684\u6559\u7a0b\u770b\u4e0b\u6765\uff0c\u5927\u5bb6\u6700\u559c\u6b22\u7684\u4e00\u4e2a\u505a\u6cd5\u5c31\u662f\u521b\u5efa\u4e00\u4e2a`rc.local` \u6587\u4ef6\uff0c\u548c\u4e00\u4e2a`rc-local.service` \u670d\u52a1\u3002\u7136\u540e\u628a\u6211\u4eec\u9700\u8981\u8fd0\u884c\u7684\u811a\u672c\u52a0\u5165`rc.local`\u4e2d\u3002\\n\\n\u6211\u8ba4\u4e3a\u8fd9\u6837\u7684\u505a\u6cd5\u5f88\u7701\u4e8b\uff0c\u4e5f\u6bd4\u8f83\u7b80\u5355\uff0c\u4e0d\u8fc7\u7f3a\u70b9\u662f\u6240\u6709\u7684\u5f00\u673a\u81ea\u542f\u670d\u52a1\u90fd\u653e\u4e00\u8d77\u4e86\uff0c\u6bd4\u8f83\u4e71\u4e0d\u597d\u7ba1\u7406\u3002\u8fd9\u91cc\u6211\u51c6\u5907\u6309\u7167\u81ea\u5df1\u7684\u60f3\u6cd5\u6765\u521b\u5efa\u4e00\u4e2a\u670d\u52a1\uff0c\u6211\u8fd9\u91cc\u501f\u9274\u4e86docker.service\u3002\\n\\nsunny.service\\n\\n```ini\\n[Unit]\\nDescription=ngrok sunny\\n\\n[Service]\\nType=forking\\nUser=ppsteven\\n# \u81ea\u52a8\u91cd\u542f\u670d\u52a1\\n# Restart=always\\n# RestartSec=30\\n# \u6267\u884c\u547d\u4ee4\\nRestart=on-failure\\nExecStart=/etc/sunny.sh start\\nExecStop=/etc/sunny.sh stop\\n# ExecReload=/bin/kill -s HUP $MAINPID\\n\\n[Install]\\nWantedBy=multi-user.target\\n```\\n\\n## \u53c2\u8003\u8d44\u6599\\n\\n[\u6709\u4e86\u5185\u7f51\u7a7f\u900f\u795e\u5668 ngrok \uff0c\u4e2a\u4eba\u7535\u8111\u4e5f\u80fd\u505a\u670d\u52a1\u5668](https://zhuanlan.zhihu.com/p/91684175)"}]}')}}]);