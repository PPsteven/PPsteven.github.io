"use strict";(self.webpackChunkcodepainter=self.webpackChunkcodepainter||[]).push([[1928],{84331:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>i,contentTitle:()=>s,default:()=>h,frontMatter:()=>d,metadata:()=>l,toc:()=>t});var o=n(74848),c=n(28453);const d={title:"Docker\u955c\u50cf\u52a0\u901f",tags:["\u65e5\u5e38\u5b66\u4e60\u7b14\u8bb0","Docker"],categories:["\u57fa\u7840\u6280\u80fd"],date:new Date("2023-07-12T01:29:33.000Z"),permalink:"/pages/926782/"},s=void 0,l={id:"\u6280\u672f\u7b14\u8bb0/\u8fd0\u7ef4/Docker/docker\u955c\u50cf\u52a0\u901f",title:"Docker\u955c\u50cf\u52a0\u901f",description:"Docker \u62c9\u53d6\u955c\u50cf\u901f\u5ea6\u5728\u56fd\u5185\u7279\u522b\u6162\uff0c\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u91c7\u7528\u4e86\u5982\u4e0b\u4e09\u79cd\u65b9\u6cd5\uff1a",source:"@site/docs/01.\u6280\u672f\u7b14\u8bb0/03.\u8fd0\u7ef4/01.Docker/04.docker\u955c\u50cf\u52a0\u901f.md",sourceDirName:"01.\u6280\u672f\u7b14\u8bb0/03.\u8fd0\u7ef4/01.Docker",slug:"/\u6280\u672f\u7b14\u8bb0/\u8fd0\u7ef4/Docker/docker\u955c\u50cf\u52a0\u901f",permalink:"/docs/\u6280\u672f\u7b14\u8bb0/\u8fd0\u7ef4/Docker/docker\u955c\u50cf\u52a0\u901f",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/01.\u6280\u672f\u7b14\u8bb0/03.\u8fd0\u7ef4/01.Docker/04.docker\u955c\u50cf\u52a0\u901f.md",tags:[{label:"\u65e5\u5e38\u5b66\u4e60\u7b14\u8bb0",permalink:"/docs/tags/\u65e5\u5e38\u5b66\u4e60\u7b14\u8bb0"},{label:"Docker",permalink:"/docs/tags/docker"}],version:"current",sidebarPosition:4,frontMatter:{title:"Docker\u955c\u50cf\u52a0\u901f",tags:["\u65e5\u5e38\u5b66\u4e60\u7b14\u8bb0","Docker"],categories:["\u57fa\u7840\u6280\u80fd"],date:"2023-07-12T01:29:33.000Z",permalink:"/pages/926782/"},sidebar:"techwiki",previous:{title:"docker \u5b9e\u6218:\u5229\u7528 docker \u642d\u5efa\u670d\u52a1",permalink:"/docs/\u6280\u672f\u7b14\u8bb0/\u8fd0\u7ef4/Docker/docker-some-service-build-instruction"},next:{title:"Linux \u73af\u5883\u53d8\u91cf\u8bfb\u53d6\u987a\u5e8f",permalink:"/docs/\u6280\u672f\u7b14\u8bb0/\u8fd0\u7ef4/Linux/linux-environment-variable-config-file-order"}},i={},t=[{value:"Docker Hub \u955c\u50cf\u52a0\u901f\u5668",id:"docker-hub-\u955c\u50cf\u52a0\u901f\u5668",level:2},{value:"\u914d\u7f6e",id:"\u914d\u7f6e",level:3},{value:"\u68c0\u67e5\u52a0\u901f\u5668\u662f\u5426\u751f\u6548",id:"\u68c0\u67e5\u52a0\u901f\u5668\u662f\u5426\u751f\u6548",level:3},{value:"Docker Hub \u955c\u50cf\u6d4b\u901f",id:"docker-hub-\u955c\u50cf\u6d4b\u901f",level:3},{value:"Docker Proxy \u4ee3\u7406",id:"docker-proxy-\u4ee3\u7406",level:2},{value:"Docker Hub \u5b98\u65b9\u955c\u50cf\u4ee3\u7406",id:"docker-hub-\u5b98\u65b9\u955c\u50cf\u4ee3\u7406",level:3},{value:"\u5e38\u89c4\u955c\u50cf\u4ee3\u7406",id:"\u5e38\u89c4\u955c\u50cf\u4ee3\u7406",level:4},{value:"\u6839\u955c\u50cf\u4ee3\u7406",id:"\u6839\u955c\u50cf\u4ee3\u7406",level:4},{value:"GitHub Container Registry",id:"github-container-registry",level:3},{value:"\u5e38\u89c4\u955c\u50cf\u4ee3\u7406",id:"\u5e38\u89c4\u955c\u50cf\u4ee3\u7406-1",level:4},{value:"Google Container Registry",id:"google-container-registry",level:3},{value:"\u5e38\u89c4\u955c\u50cf\u4ee3\u7406",id:"\u5e38\u89c4\u955c\u50cf\u4ee3\u7406-2",level:4},{value:"Google Kubernetes",id:"google-kubernetes",level:3},{value:"\u5e38\u89c4\u955c\u50cf\u4ee3\u7406",id:"\u5e38\u89c4\u955c\u50cf\u4ee3\u7406-3",level:4},{value:"\u6839\u955c\u50cf\u4ee3\u7406",id:"\u6839\u955c\u50cf\u4ee3\u7406-1",level:4},{value:"Quay.io",id:"quayio",level:3},{value:"\u5e38\u89c4\u955c\u50cf\u4ee3\u7406",id:"\u5e38\u89c4\u955c\u50cf\u4ee3\u7406-4",level:4},{value:"\u672c\u5730\u4ee3\u7406",id:"\u672c\u5730\u4ee3\u7406",level:2}];function a(e){const r={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",...(0,c.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.p,{children:"Docker \u62c9\u53d6\u955c\u50cf\u901f\u5ea6\u5728\u56fd\u5185\u7279\u522b\u6162\uff0c\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u91c7\u7528\u4e86\u5982\u4e0b\u4e09\u79cd\u65b9\u6cd5\uff1a"}),"\n",(0,o.jsxs)(r.ol,{children:["\n",(0,o.jsx)(r.li,{children:"DockerHub\u955c\u50cf\u52a0\u901f\u5668"}),"\n",(0,o.jsx)(r.li,{children:"Docker Proxy \u4ee3\u7406"}),"\n",(0,o.jsx)(r.li,{children:"\u4f7f\u7528\u672c\u5730\u4ee3\u7406"}),"\n"]}),"\n",(0,o.jsx)(r.h2,{id:"docker-hub-\u955c\u50cf\u52a0\u901f\u5668",children:"Docker Hub \u955c\u50cf\u52a0\u901f\u5668"}),"\n",(0,o.jsxs)(r.blockquote,{children:["\n",(0,o.jsxs)(r.p,{children:["Reference From: ",(0,o.jsx)(r.a,{href:"https://gist.github.com/y0ngb1n/7e8f16af3242c7815e7ca2f0833d3ea6",children:"Docker Hub \u955c\u50cf\u52a0\u901f\u5668"})]}),"\n"]}),"\n",(0,o.jsx)(r.p,{children:"\u56fd\u5185\u4ece Docker Hub \u62c9\u53d6\u955c\u50cf\u6709\u65f6\u4f1a\u9047\u5230\u56f0\u96be\uff0c\u6b64\u65f6\u53ef\u4ee5\u914d\u7f6e\u955c\u50cf\u52a0\u901f\u5668\u3002Docker \u5b98\u65b9\u548c\u56fd\u5185\u5f88\u591a\u4e91\u670d\u52a1\u5546\u90fd\u63d0\u4f9b\u4e86\u56fd\u5185\u52a0\u901f\u5668\u670d\u52a1\u3002"}),"\n",(0,o.jsx)(r.h3,{id:"\u914d\u7f6e",children:"\u914d\u7f6e"}),"\n",(0,o.jsxs)(r.p,{children:["\u521b\u5efa\u6216\u4fee\u6539 ",(0,o.jsx)(r.code,{children:"/etc/docker/daemon.json"}),"\uff1a"]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{children:'sudo mkdir -p /etc/docker\nsudo tee /etc/docker/daemon.json <<-\'EOF\'\n{\n    "registry-mirrors": [\n        "https://docker.m.daocloud.io",\n        "https://dockerproxy.com",\n        "https://docker.mirrors.ustc.edu.cn",\n        "https://docker.nju.edu.cn"\n    ]\n}\nEOF\nsudo systemctl daemon-reload\nsudo systemctl restart docker\n'})}),"\n",(0,o.jsxs)(r.blockquote,{children:["\n",(0,o.jsxs)(r.p,{children:["\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4e0a\u8ff0\u52a0\u901f\u670d\u52a1\u53ef\u80fd\u4f1a\u5931\u6548\uff0c ",(0,o.jsx)(r.a,{href:"https://gist.github.com/y0ngb1n/7e8f16af3242c7815e7ca2f0833d3ea6",children:"Docker Hub \u52a0\u901f\u5668\u5217\u8868"})," \u4e2d\u53ef\u4ee5\u627e\u5230\u6709\u6548\u7684\u5730\u5740\u3002"]}),"\n"]}),"\n",(0,o.jsx)(r.h3,{id:"\u68c0\u67e5\u52a0\u901f\u5668\u662f\u5426\u751f\u6548",children:"\u68c0\u67e5\u52a0\u901f\u5668\u662f\u5426\u751f\u6548"}),"\n",(0,o.jsxs)(r.p,{children:["\u547d\u4ee4\u884c\u6267\u884c ",(0,o.jsx)(r.code,{children:"docker info"}),"\uff0c\u5982\u679c\u4ece\u7ed3\u679c\u4e2d\u770b\u5230\u4e86\u5982\u4e0b\u5185\u5bb9\uff0c\u8bf4\u660e\u914d\u7f6e\u6210\u529f\u3002"]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{children:"Registry Mirrors:\n [...]\n https://docker.m.daocloud.io\n"})}),"\n",(0,o.jsx)(r.h3,{id:"docker-hub-\u955c\u50cf\u6d4b\u901f",children:"Docker Hub \u955c\u50cf\u6d4b\u901f"}),"\n",(0,o.jsxs)(r.p,{children:["\u4f7f\u7528\u955c\u50cf\u524d\u540e\uff0c\u53ef\u4f7f\u7528 ",(0,o.jsx)(r.code,{children:"time"})," \u7edf\u8ba1\u6240\u82b1\u8d39\u7684\u603b\u65f6\u95f4\u3002\u6d4b\u901f\u524d\u5148\u79fb\u9664\u672c\u5730\u7684\u955c\u50cf\uff01"]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{children:"$ docker rmi node:latest\n$ time docker pull node:latest\nPulling repository node\n[...]\n\nreal   1m14.078s\nuser   0m0.176s\nsys    0m0.120s\n"})}),"\n",(0,o.jsx)(r.h2,{id:"docker-proxy-\u4ee3\u7406",children:"Docker Proxy \u4ee3\u7406"}),"\n",(0,o.jsx)(r.p,{children:"\u4e0a\u8ff0\u65b9\u6848\uff0c\u53ef\u4ee5\u4e3a\u4eceDocker Hub \u62c9\u53d6\u955c\u50cf\u8fdb\u884c\u52a0\u901f\uff0c\u5bf9\u4e8e\u975eDocker Hub\u7684\u955c\u50cf\u5982\u4f55\u63d0\u4f9b\u52a0\u901f\u670d\u52a1\u3002"}),"\n",(0,o.jsx)(r.p,{children:"Docker Proxy \u63d0\u4f9b\u4e86\u89e3\u51b3\u65b9\u6848\uff0c\u76f4\u63a5\u5c06\u955c\u50cf\u540d\u524d\u52a0\u4e0a*dockerproxy.com/*\u5373\u53ef\u3002"}),"\n",(0,o.jsxs)(r.blockquote,{children:["\n",(0,o.jsxs)(r.p,{children:["Reference From: ",(0,o.jsx)(r.a,{href:"https://dockerproxy.com/docs",children:"Docker Proxy \u4f7f\u7528\u6587\u6863"})]}),"\n"]}),"\n",(0,o.jsx)(r.h3,{id:"docker-hub-\u5b98\u65b9\u955c\u50cf\u4ee3\u7406",children:"Docker Hub \u5b98\u65b9\u955c\u50cf\u4ee3\u7406"}),"\n",(0,o.jsx)(r.h4,{id:"\u5e38\u89c4\u955c\u50cf\u4ee3\u7406",children:"\u5e38\u89c4\u955c\u50cf\u4ee3\u7406"}),"\n",(0,o.jsx)(r.p,{children:"\u5b98\u65b9\u547d\u4ee4\uff1adocker pull stilleshan/frpc:latest\n\u4ee3\u7406\u547d\u4ee4\uff1adocker pull dockerproxy.com/stilleshan/frpc:latest"}),"\n",(0,o.jsx)(r.h4,{id:"\u6839\u955c\u50cf\u4ee3\u7406",children:"\u6839\u955c\u50cf\u4ee3\u7406"}),"\n",(0,o.jsx)(r.p,{children:"\u5b98\u65b9\u547d\u4ee4\uff1adocker pull nginx:latest\n\u4ee3\u7406\u547d\u4ee4\uff1adocker pull dockerproxy.com/library/nginx:latest"}),"\n",(0,o.jsx)(r.h3,{id:"github-container-registry",children:"GitHub Container Registry"}),"\n",(0,o.jsx)(r.h4,{id:"\u5e38\u89c4\u955c\u50cf\u4ee3\u7406-1",children:"\u5e38\u89c4\u955c\u50cf\u4ee3\u7406"}),"\n",(0,o.jsx)(r.p,{children:"\u5b98\u65b9\u547d\u4ee4\uff1adocker pull ghcr.io/username/image:tag\n\u4ee3\u7406\u547d\u4ee4\uff1adocker pull ghcr.dockerproxy.com/username/image:tag"}),"\n",(0,o.jsx)(r.h3,{id:"google-container-registry",children:"Google Container Registry"}),"\n",(0,o.jsx)(r.h4,{id:"\u5e38\u89c4\u955c\u50cf\u4ee3\u7406-2",children:"\u5e38\u89c4\u955c\u50cf\u4ee3\u7406"}),"\n",(0,o.jsx)(r.p,{children:"\u5b98\u65b9\u547d\u4ee4\uff1adocker pull gcr.io/username/image:tag\n\u4ee3\u7406\u547d\u4ee4\uff1adocker pull gcr.dockerproxy.com/username/image:tag"}),"\n",(0,o.jsx)(r.h3,{id:"google-kubernetes",children:"Google Kubernetes"}),"\n",(0,o.jsx)(r.h4,{id:"\u5e38\u89c4\u955c\u50cf\u4ee3\u7406-3",children:"\u5e38\u89c4\u955c\u50cf\u4ee3\u7406"}),"\n",(0,o.jsx)(r.p,{children:"\u5b98\u65b9\u547d\u4ee4\uff1adocker pull k8s.gcr.io/username/image:tag\n\u5b98\u65b9\u547d\u4ee4\uff1adocker pull registry.k8s.io/username/image:tag\n\u4ee3\u7406\u547d\u4ee4\uff1adocker pull k8s.dockerproxy.com/username/image:tag"}),"\n",(0,o.jsx)(r.h4,{id:"\u6839\u955c\u50cf\u4ee3\u7406-1",children:"\u6839\u955c\u50cf\u4ee3\u7406"}),"\n",(0,o.jsx)(r.p,{children:"\u5b98\u65b9\u547d\u4ee4\uff1adocker pull k8s.gcr.io/coredns:1.6.5\n\u5b98\u65b9\u547d\u4ee4\uff1adocker pull registry.k8s.io/coredns:1.6.5\n\u4ee3\u7406\u547d\u4ee4\uff1adocker pull k8s.dockerproxy.com/coredns:1.6.5"}),"\n",(0,o.jsx)(r.h3,{id:"quayio",children:"Quay.io"}),"\n",(0,o.jsx)(r.h4,{id:"\u5e38\u89c4\u955c\u50cf\u4ee3\u7406-4",children:"\u5e38\u89c4\u955c\u50cf\u4ee3\u7406"}),"\n",(0,o.jsx)(r.p,{children:"\u5b98\u65b9\u547d\u4ee4\uff1adocker pull quay.io/username/image:tag\n\u4ee3\u7406\u547d\u4ee4\uff1adocker pull quay.dockerproxy.com/username/image:tag"}),"\n",(0,o.jsx)(r.h2,{id:"\u672c\u5730\u4ee3\u7406",children:"\u672c\u5730\u4ee3\u7406"}),"\n",(0,o.jsxs)(r.blockquote,{children:["\n",(0,o.jsxs)(r.p,{children:["Reference: ",(0,o.jsx)(r.a,{href:"https://note.qidong.name/2020/05/docker-proxy/",children:"Docker\u7684\u4e09\u79cd\u7f51\u7edc\u4ee3\u7406\u914d\u7f6e"}),"\u3001",(0,o.jsx)(r.a,{href:"https://docs.docker.com/config/daemon/systemd/#httphttps-proxy",children:"Configure the Docker daemon to use a proxy server|Docker Document"})]}),"\n"]}),"\n",(0,o.jsxs)(r.p,{children:["\u5728\u6267\u884c",(0,o.jsx)(r.code,{children:"docker pull"}),"\u65f6\uff0c\u662f\u7531\u5b88\u62a4\u8fdb\u7a0b",(0,o.jsx)(r.code,{children:"dockerd"}),"\u6765\u6267\u884c\u3002 \u56e0\u6b64\uff0c\u4ee3\u7406\u9700\u8981\u914d\u5728",(0,o.jsx)(r.code,{children:"dockerd"}),"\u7684\u73af\u5883\u4e2d\u3002 \u800c\u8fd9\u4e2a\u73af\u5883\uff0c\u5219\u662f\u53d7",(0,o.jsx)(r.code,{children:"systemd"}),"\u6240\u7ba1\u63a7\uff0c\u56e0\u6b64\u5b9e\u9645\u662f",(0,o.jsx)(r.code,{children:"systemd"}),"\u7684\u914d\u7f6e\u3002"]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-sh",children:"sudo mkdir -p /etc/systemd/system/docker.service.d\nsudo touch /etc/systemd/system/docker.service.d/proxy.conf\n"})}),"\n",(0,o.jsxs)(r.p,{children:["\u5728\u8fd9\u4e2a",(0,o.jsx)(r.code,{children:"proxy.conf"}),"\u6587\u4ef6\uff08\u53ef\u4ee5\u662f\u4efb\u610f",(0,o.jsx)(r.code,{children:"*.conf"}),"\u7684\u5f62\u5f0f\uff09\u4e2d\uff0c\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9\uff1a"]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-ini",children:'[Service]\nEnvironment="HTTP_PROXY=http://proxy.example.com:8080/"\nEnvironment="HTTPS_PROXY=http://proxy.example.com:8080/"\nEnvironment="NO_PROXY=localhost,127.0.0.1,.example.com"\n'})}),"\n",(0,o.jsxs)(r.p,{children:["\u5176\u4e2d\uff0c",(0,o.jsx)(r.code,{children:"proxy.example.com:8080"}),"\u8981\u6362\u6210\u53ef\u7528\u7684\u514d\u5bc6\u4ee3\u7406\u3002 \u901a\u5e38\u4f7f\u7528",(0,o.jsx)(r.code,{children:"cntlm"}),"\u5728\u672c\u673a\u81ea\u5efa\u514d\u5bc6\u4ee3\u7406\uff0c\u53bb\u5bf9\u63a5\u516c\u53f8\u7684\u4ee3\u7406\u3002"]}),"\n",(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"dockerd"}),"\u4ee3\u7406\u7684\u4fee\u6539\u6bd4\u8f83\u7279\u6b8a\uff0c\u5b83\u5b9e\u9645\u4e0a\u662f\u6539",(0,o.jsx)(r.code,{children:"systemd"}),"\u7684\u914d\u7f6e\uff0c\u56e0\u6b64\u9700\u8981\u91cd\u8f7d",(0,o.jsx)(r.code,{children:"systemd"}),"\u5e76\u91cd\u542f",(0,o.jsx)(r.code,{children:"dockerd"}),"\u624d\u80fd\u751f\u6548\u3002"]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-sh",children:"sudo systemctl daemon-reload\nsudo systemctl restart docker\n"})})]})}function h(e={}){const{wrapper:r}={...(0,c.R)(),...e.components};return r?(0,o.jsx)(r,{...e,children:(0,o.jsx)(a,{...e})}):a(e)}},28453:(e,r,n)=>{n.d(r,{R:()=>s,x:()=>l});var o=n(96540);const c={},d=o.createContext(c);function s(e){const r=o.useContext(d);return o.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:s(e.components),o.createElement(d.Provider,{value:r},e.children)}}}]);