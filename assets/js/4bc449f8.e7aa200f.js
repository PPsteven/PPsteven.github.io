"use strict";(self.webpackChunkcodepainter=self.webpackChunkcodepainter||[]).push([[8703],{80434:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>o,contentTitle:()=>c,default:()=>a,frontMatter:()=>l,metadata:()=>d,toc:()=>t});var i=s(74848),r=s(28453);const l={title:"Python\u5e76\u53d1\u7f16\u7a0b\u2014\u2014\u591a\u8fdb\u7a0b\u7f16\u7a0b multiprocessing \u6a21\u5757",tags:["Python","multiprocessing"],comments:!1,date:new Date("2020-04-05T12:27:57.000Z"),categories:"python",cover:"https://cdn.jsdelivr.net/gh/PPsteven/pictures/img/20201025170211.png",slug:"/pages/62f651/"},c=void 0,d={id:"\u6280\u672f\u7b14\u8bb0/\u540e\u7aef/Python/Python\u5e76\u53d1\u7f16\u7a0b\u2014\u2014\u591a\u8fdb\u7a0b\u7f16\u7a0b multiprocessing \u6a21\u5757",title:"Python\u5e76\u53d1\u7f16\u7a0b\u2014\u2014\u591a\u8fdb\u7a0b\u7f16\u7a0b multiprocessing \u6a21\u5757",description:"Python \u5e76\u53d1\u7f16\u7a0b\u53ef\u4ee5\u5206\u4e3a\u4e09\u5757\uff1a\u591a\u8fdb\u7a0b\u7f16\u7a0b\uff0c\u591a\u7ebf\u7a0b\u7f16\u7a0b\uff0c\u591a\u534f\u7a0b\u7f16\u7a0b\u3002\u524d\u4e24\u8005\u662f\u7531\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u63a7\u5236\u7684\uff0c\u534f\u7a0b\u662f\u7531\u7528\u6237\u63a7\u5236\u3002\u6240\u4ee5\u5728\u591a\u8fdb\u7a0b\u7684\u7f16\u7a0b\u4e0a\uff0c\u4e0d\u540c\u64cd\u4f5c\u7cfb\u7edf\u7684\u6548\u679c\u4e0d\u4e00\u6837\u3002\u5982\u679c\u662f\u4e3a\u4e86\u5b66\u4e60\u591a\u8fdb\u7a0b\u7f16\u8f91\uff0c\u5efa\u8bae\u5728Mac Os \u6216\u8005 Linux \u4e0a\u3002",source:"@site/docs/01.\u6280\u672f\u7b14\u8bb0/02.\u540e\u7aef/04.Python/03.Python\u5e76\u53d1\u7f16\u7a0b\u2014\u2014\u591a\u8fdb\u7a0b\u7f16\u7a0b multiprocessing \u6a21\u5757.md",sourceDirName:"01.\u6280\u672f\u7b14\u8bb0/02.\u540e\u7aef/04.Python",slug:"/pages/62f651/",permalink:"/docs/pages/62f651/",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/01.\u6280\u672f\u7b14\u8bb0/02.\u540e\u7aef/04.Python/03.Python\u5e76\u53d1\u7f16\u7a0b\u2014\u2014\u591a\u8fdb\u7a0b\u7f16\u7a0b multiprocessing \u6a21\u5757.md",tags:[{label:"Python",permalink:"/docs/tags/python"},{label:"multiprocessing",permalink:"/docs/tags/multiprocessing"}],version:"current",sidebarPosition:3,frontMatter:{title:"Python\u5e76\u53d1\u7f16\u7a0b\u2014\u2014\u591a\u8fdb\u7a0b\u7f16\u7a0b multiprocessing \u6a21\u5757",tags:["Python","multiprocessing"],comments:!1,date:"2020-04-05T12:27:57.000Z",categories:"python",cover:"https://cdn.jsdelivr.net/gh/PPsteven/pictures/img/20201025170211.png",slug:"/pages/62f651/"},sidebar:"techwiki",previous:{title:"\u5982\u4f55\u5728python\u9879\u76ee\u4e2d\u4f7f\u7528import\u5bfc\u5165\u81ea\u7f16\u6a21\u5757",permalink:"/docs/pages/e34eb5/"},next:{title:"python\u5e76\u53d1\u7f16\u7a0b\u2014\u2014\u591a\u7ebf\u7a0b\u7f16\u7a0b threading \u534f\u7a0b",permalink:"/docs/pages/0ac2b0/"}},o={},t=[{value:"\u7b80\u5355\u591a\u8fdb\u7a0b\u7f16\u7a0b",id:"\u7b80\u5355\u591a\u8fdb\u7a0b\u7f16\u7a0b",level:2},{value:"Process",id:"process",level:3},{value:"\u6784\u9020\u65b9\u6cd5",id:"\u6784\u9020\u65b9\u6cd5",level:4},{value:"\u5c5e\u6027",id:"\u5c5e\u6027",level:4},{value:"\u65b9\u6cd5",id:"\u65b9\u6cd5",level:4},{value:"Pool",id:"pool",level:3},{value:"\u8fdb\u7a0b\u6c60Pool vs Process",id:"\u8fdb\u7a0b\u6c60pool-vs-process",level:4},{value:"\u6784\u9020\u65b9\u6cd5",id:"\u6784\u9020\u65b9\u6cd5-1",level:4},{value:"\u65b9\u6cd5",id:"\u65b9\u6cd5-1",level:4},{value:"\u8fdb\u7a0b\u95f4\u901a\u4fe1\u2014\u2014\u6570\u636e\u4f20\u9012",id:"\u8fdb\u7a0b\u95f4\u901a\u4fe1\u6570\u636e\u4f20\u9012",level:2},{value:"\u57fa\u7840\u7528\u6cd5",id:"\u57fa\u7840\u7528\u6cd5",level:3},{value:"Pipe \u7684\u4f7f\u7528",id:"pipe-\u7684\u4f7f\u7528",level:3},{value:"Queue \u7684\u4f7f\u7528",id:"queue-\u7684\u4f7f\u7528",level:3},{value:"Queue\u7684\u51e0\u79cd\u53d8\u5f62",id:"queue\u7684\u51e0\u79cd\u53d8\u5f62",level:3},{value:"\u8fdb\u7a0b\u95f4\u901a\u4fe1\u2014\u2014\u6570\u636e\u5171\u4eab",id:"\u8fdb\u7a0b\u95f4\u901a\u4fe1\u6570\u636e\u5171\u4eab",level:2},{value:"Manager \u7c7b\uff08\u5171\u4eab\u8fdb\u7a0b\uff09",id:"manager-\u7c7b\u5171\u4eab\u8fdb\u7a0b",level:3},{value:"Value, Array\uff08\u5171\u4eab\u5185\u5b58\uff09",id:"value-array\u5171\u4eab\u5185\u5b58",level:3},{value:"\u4f8b\u5b50",id:"\u4f8b\u5b50",level:4},{value:"\u6570\u636e\u8fdb\u7a0b\u9501",id:"\u6570\u636e\u8fdb\u7a0b\u9501",level:2},{value:"Lock \u539f\u59cb\u9501",id:"lock-\u539f\u59cb\u9501",level:3},{value:"RLock \u9012\u5f52\u9501",id:"rlock-\u9012\u5f52\u9501",level:3},{value:"Semaphore \u4fe1\u53f7\u91cf",id:"semaphore-\u4fe1\u53f7\u91cf",level:3},{value:"Barrier \u5c4f\u969c",id:"barrier-\u5c4f\u969c",level:3},{value:"\u5c5e\u6027",id:"\u5c5e\u6027-1",level:4},{value:"\u65b9\u6cd5",id:"\u65b9\u6cd5-2",level:4},{value:"Event \u4e8b\u4ef6\u9501",id:"event-\u4e8b\u4ef6\u9501",level:3},{value:"\u65b9\u6cd5",id:"\u65b9\u6cd5-3",level:4},{value:"\u4f8b\u5b50",id:"\u4f8b\u5b50-1",level:4},{value:"Condition \u6761\u4ef6\u9501",id:"condition-\u6761\u4ef6\u9501",level:3},{value:"\u51e0\u79cd\u65b9\u6cd5\u7684\u6bd4\u8f83",id:"\u51e0\u79cd\u65b9\u6cd5\u7684\u6bd4\u8f83",level:3},{value:"\u53c2\u8003\u8d44\u6599",id:"\u53c2\u8003\u8d44\u6599",level:2}];function h(n){const e={a:"a",blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.p,{children:"Python \u5e76\u53d1\u7f16\u7a0b\u53ef\u4ee5\u5206\u4e3a\u4e09\u5757\uff1a\u591a\u8fdb\u7a0b\u7f16\u7a0b\uff0c\u591a\u7ebf\u7a0b\u7f16\u7a0b\uff0c\u591a\u534f\u7a0b\u7f16\u7a0b\u3002\u524d\u4e24\u8005\u662f\u7531\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u63a7\u5236\u7684\uff0c\u534f\u7a0b\u662f\u7531\u7528\u6237\u63a7\u5236\u3002\u6240\u4ee5\u5728\u591a\u8fdb\u7a0b\u7684\u7f16\u7a0b\u4e0a\uff0c\u4e0d\u540c\u64cd\u4f5c\u7cfb\u7edf\u7684\u6548\u679c\u4e0d\u4e00\u6837\u3002\u5982\u679c\u662f\u4e3a\u4e86\u5b66\u4e60\u591a\u8fdb\u7a0b\u7f16\u8f91\uff0c\u5efa\u8bae\u5728Mac Os \u6216\u8005 Linux \u4e0a\u3002"}),"\n",(0,i.jsxs)(e.p,{children:["\u672c\u7bc7\u4ecb\u7ecd\u57fa\u4e8e\u8fdb\u7a0b\u7684\u5e76\u884c\u64cd\u4f5c\uff0c\u4e3b\u8981\u7528\u5230\u7684\u6a21\u5757\u662f ",(0,i.jsx)(e.code,{children:"multiprocessing"})]}),"\n",(0,i.jsx)(e.h2,{id:"\u7b80\u5355\u591a\u8fdb\u7a0b\u7f16\u7a0b",children:"\u7b80\u5355\u591a\u8fdb\u7a0b\u7f16\u7a0b"}),"\n",(0,i.jsxs)(e.p,{children:["\u7b80\u5355\u591a\u8fdb\u7a0b\u7528 ",(0,i.jsx)(e.code,{children:"Process"}),"  \u548c ",(0,i.jsx)(e.code,{children:"Pool"})," \u4e24\u4e2a\u57fa\u7840\u7c7b\u5c31\u53ef\u4ee5\u5b9e\u73b0"]}),"\n",(0,i.jsx)(e.h3,{id:"process",children:"Process"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"from multiprocessing import Process\n\ndef f(name):\n    print('hello', name)\n\nif __name__ == '__main__':\n    p = Process(target=f, args=('bob',))\n    p.start()  # \u542f\u52a8\u8fdb\u7a0b\n    p.join()  # \u963b\u585e\u8fdb\u7a0b\uff0c\u53ea\u6709\u5f53\u672c\u6b21\u8fdb\u7a0b\u5b8c\u6210\u540e\u624d\u8fd0\u884c\u4e0b\u4e00\u8fdb\u7a0b\u3002\u8fdb\u7a0b\u540c\u6b65\u903b\u8f91\u3002\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u4e0b\u9762\u6211\u4eec\u53ef\u4ee5\u8be6\u7ec6\u770b\u770b Process \u7c7b\u7684\u5c5e\u6027\uff0c\u6784\u9020\u65b9\u6cd5\u548c\u65b9\u6cd5"}),"\n",(0,i.jsx)(e.h4,{id:"\u6784\u9020\u65b9\u6cd5",children:"\u6784\u9020\u65b9\u6cd5"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"class multiprocessing.Process(group=None, target=None, name=None, args=(), kwargs={}, *, daemon=None)\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.em,{children:"group"}),"    \u517c\u5bb9\u903b\u8f91\uff0c\u59cb\u7ec8\u8bbe\u7f6e\u4e3aNone"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.em,{children:"target"}),"     \u76ee\u6807\u51fd\u6570"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.em,{children:"args, kwargs"}),"    \u4f20\u5165\u76ee\u6807\u51fd\u6570\u7684\u53c2\u6570\uff0c\u5217\u8868\u53c2\u6570\u548c\u5b57\u5178\u53c2\u6570"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.em,{children:"name"}),"   \u8fdb\u7a0b\u540d\u79f0"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.em,{children:"daemon"}),"  \u540e\u53f0\u8fd0\u884c\uff0c\u5b88\u62a4\u8fdb\u7a0b\u3002\u82e5 daemon =True\uff0c\u8be5\u8fdb\u7a0b\u4f1a\u4e00\u76f4\u5b58\u5728\u4e8e\u4e3b\u8fdb\u7a0b\u4e2d\uff0c\u4f34\u968f\u7740\u7236\u8fdb\u7a0b\u7ec8\u6b62\u800c\u7ec8\u6b62\u3002"]}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"Tips\uff1a \u5b88\u62a4\u8fdb\u7a0b"}),"\n",(0,i.jsx)(e.p,{children:"\u4e3b\u8fdb\u7a0b\u7ed3\u675f\u540e\uff0c\u5b50\u8fdb\u7a0b\u4e0d\u4e00\u5b9a\u4f1a\u8fd0\u884c\u7ed3\u675f\u3002\u5982\u679c\u6211\u4eec\u9700\u8981\u8ba9\u7236\u8fdb\u7a0b\u7ec8\u6b62\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u5b50\u8fdb\u7a0b\u4e3a\u5b88\u62a4\u8fdb\u7a0b\u3002\u6ce8\u610f\u7684\u662f\uff0c\u5b88\u62a4\u8fdb\u7a0b\u4e0d\u80fd\u591f\u518d\u521b\u9020\u5b50\u8fdb\u7a0b\u4e86\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"multiprocessing.Process(group=None, target=None, name=None, args=(), kwargs={}, *, daemon=True) # \u521b\u5efaProcess\u7c7b\u65f6\u8bbe\u7f6e\np.daemon = True # \u4e3b\u52a8\u8bbe\u7f6edeemon \u5c5e\u6027\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h4,{id:"\u5c5e\u6027",children:"\u5c5e\u6027"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.em,{children:"pid"}),"  \u8fdb\u7a0bID"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.em,{children:"name"}),"  \u8fdb\u7a0b\u540d"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.em,{children:"deamon"})," \u8bbe\u7f6e\u540e\u53f0\u5b88\u62a4\u8fdb\u7a0b"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.em,{children:"exitcode"})," \u5b50\u8fdb\u7a0b\u9000\u51fa\u4ee3\u7801\u3002\u5982\u679c\u8fdb\u7a0b\u5c1a\u672a\u7ec8\u6b62\uff0c\u8fd9\u5c06\u662f ",(0,i.jsx)(e.code,{children:"None"})," \u3002\u8d1f\u503c ",(0,i.jsx)(e.em,{children:"-N"})," \u8868\u793a\u5b69\u5b50\u88ab\u4fe1\u53f7 ",(0,i.jsx)(e.em,{children:"N"})," \u7ec8\u6b62\u3002"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u6211\u4eec\u53ef\u4ee5\u8f7b\u677e\u7684\u901a\u8fc7\u8bbf\u95ee\u4efb\u4e00 Process \u7c7b\u7684\u53d8\u91cf\u83b7\u53d6\u57fa\u672c\u4fe1\u606f"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"multiprocessing.current_process().pid\nmultiprocessing.current_process().name\n"})}),"\n",(0,i.jsx)(e.h4,{id:"\u65b9\u6cd5",children:"\u65b9\u6cd5"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"run()  \u8fdb\u7a0b\u6d3b\u52a8\u7684\u65b9\u6cd5"}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"\u901a\u8fc7\u91cd\u8f7d run \u65b9\u6cd5\u5b9e\u73b0\u8fdb\u7a0b"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"import multiprocessing\n\n\nclass MyProcess(multiprocessing.Process):\n    def __init__(self):\n        super().__init__()\n\n    def run(self):\n        name = multiprocessing.current_process().name\n        pid = multiprocessing.current_process().pid\n        print(f'name:{name}, pid:{pid}')\n\nif __name__ == '__main__':\n     p = MyProcess()\n     p.start()\n     p.join()\n"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5c3d\u7ba1\u6211\u4eec\u4fee\u6539\u7684\u662f run \u65b9\u6cd5\u3002\u6211\u4eec\u542f\u52a8\u8fdb\u7a0b\u7684\u65b9\u6cd5\u8fd8\u662f p.start"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"start()   \u542f\u52a8\u8fdb\u7a0b"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"join([timeout]) \u8fdb\u7a0b\u963b\u585e\uff0c\u76f4\u5230\u8fdb\u7a0b\u7ec8\u6b62\u3002"}),"\n",(0,i.jsx)(e.p,{children:"timeout \u662f\u963b\u585e\u7684\u65f6\u95f4\uff0c\u9ed8\u8ba4None\uff0c\u4e00\u76f4\u963b\u585e\u76f4\u5230\u8fdb\u7a0b\u7ec8\u6b62\u3002"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"is_alive()  \u8fdb\u7a0b\u5b58\u5728\u8fd4\u56de True\uff0c \u5426\u5219 False"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["terminate()/kill() \u5728Unix\u4e0a\uff0c\u8fd9\u662f\u4f7f\u7528 ",(0,i.jsx)(e.code,{children:"SIGTERM"})," \u4fe1\u53f7\u5b8c\u6210\u7684"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["close() \u5173\u95ed ",(0,i.jsx)(e.code,{children:"Process"}),"\u5bf9\u8c61\uff0c\u91ca\u653e\u4e0e\u4e4b\u5173\u8054\u7684\u6240\u6709\u8d44\u6e90"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"pool",children:"Pool"}),"\n",(0,i.jsxs)(e.p,{children:["\u5982\u679c\u9700\u8981\u8fd0\u884c\u591a\u4e2a\u5b50\u8fdb\u7a0b\uff0c\u91c7\u7528\u8fdb\u7a0b\u6c60 ",(0,i.jsx)(e.code,{children:"Pool"})," \u7684\u65b9\u5f0f\u53ef\u4ee5\u8282\u7701\u7a0b\u5e8f\u5f00\u9500\u3002\u8fdb\u7a0b\u7684\u521b\u5efa\u548c\u9500\u6bc1\u90fd\u662f\u9700\u8981\u64cd\u4f5c\u7cfb\u7edf\u8d44\u6e90\u7684\u3002"]}),"\n",(0,i.jsx)(e.h4,{id:"\u8fdb\u7a0b\u6c60pool-vs-process",children:"\u8fdb\u7a0b\u6c60Pool vs Process"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:'import multiprocessing\nimport os\n\n\ndef worker(msg):\n    print("%s is now running, process id: %s" % (msg, os.getpid()))\n\nif __name__ == "__main__":\n    po = multiprocessing.Pool(4)\n    for i in range(10):\n        po.apply_async(worker, args=(i,))\n\n    print("main process starting....")\n    po.close()\n    po.join()\n    print("main process stoping....")\n\n\'\'\' \u8f93\u51fa\nmain process starting....\n0 is now running, process id: 3436\n1 is now running, process id: 3437\n2 is now running, process id: 3438\n4 is now running, process id: 3436\n3 is now running, process id: 3439\n5 is now running, process id: 3437\n6 is now running, process id: 3438\n7 is now running, process id: 3436\n8 is now running, process id: 3437\n9 is now running, process id: 3439\nmain process stoping....\n\'\'\'\n'})}),"\n",(0,i.jsx)(e.p,{children:"\u4f7f\u7528\u8fdb\u7a0b\u6c60\u7684\u4f18\u70b9\u63d0\u73b0\u5728"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u9650\u5236\u540c\u4e00\u65f6\u95f4\u8fdb\u7a0b\u5e76\u884c\u7684\u6570\u76ee\n\u591a\u8fdb\u7a0b\u53ef\u4ee5\u63d0\u9ad8\u7a0b\u5e8f\u8fd0\u884c\u7684\u6548\u7387\uff0c\u4f46\u662f\u8fc7\u591a\u7684\u8fdb\u7a0b\u5207\u6362\u53cd\u800c\u4f1a\u964d\u4f4e\u6548\u7387\u3002\u539f\u56e0\u662fa.\u8fdb\u7a0b\u4f1a\u5360\u7528\u8ba1\u7b97\u673a\u8d44\u6e90\uff0c\u8d44\u6e90\u51b3\u5b9a\u4e86\u8fdb\u7a0b\u4e0d\u80fd\u5f00\u542f\u8fc7\u591a\u3002b.\u8fdb\u7a0b\u7684\u5207\u6362\u5f00\u9500\u6bd4\u8f83\u5927\uff0c\u5360\u7528\u8fc7\u591aCPU\u8d44\u6e90\u3002"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8fdb\u7a0b\u6c60\u51cf\u5c11\u4e0d\u5fc5\u8981\u7684\u521b\u5efa\uff0c\u9500\u6bc1\u8fc7\u7a0b\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u7a0b\u5e8f\u4e2d\uff0cPool(4) \u7684\u8fdb\u7a0b\u53f7\u53ea\u6709 3436\uff0c3437\uff0c3438\uff0c3439 \u8fd9\u56db\u4e2a\u8fdb\u7a0b\u53f7\u3002\u8bc1\u660e\u8fdb\u7a0b\u6c60\u7701\u53bb\u4e86\u521b\u5efa\u548c\u9500\u6bc1\u7684\u8fc7\u7a0b\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u5f53\u8fdb\u7a0b\u6570\u548c\u8ba1\u7b97\u673a\u7684\u5185\u6838\u6570\u4e00\u81f4\u7684\u65f6\u5019\uff0c\u6548\u7387\u6700\u9ad8\u3002\u6211\u4eec\u53ef\u4ee5\u5148\u770b\u770b\u81ea\u5df1\u8ba1\u7b97\u673a\u7684\u5185\u6838\u4e2a\u6570\uff0c\u4f7f\u7528 ",(0,i.jsx)(e.code,{children:"os.cpu_count()"})," \u6216\u8005 ",(0,i.jsx)(e.code,{children:"multiprocess.cpu_count()"})," \u6765\u67e5\u770b\u5185\u6838\u4e2a\u6570\u3002\n\u5982\u679c\u4e0d\u586b\u5199\u5185\u6838\u53c2\u6570\uff0cPool \u9ed8\u8ba4\u91c7\u53d6\u673a\u5668\u7684\u5185\u6838\u4e2a\u6570\u3002"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"from multiprocessing import Pool\np = Pool(4)\nfor i in range(5):\n    p.apply_async(f, args=(i,))  # \u5f02\u6b65\u8c03\u7528\n    p.apply(f, args=(i,)) # \u540c\u6b65\u8c03\u7528\np.close()\np.join() \n"})}),"\n",(0,i.jsx)(e.h4,{id:"\u6784\u9020\u65b9\u6cd5-1",children:"\u6784\u9020\u65b9\u6cd5"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"class multiprocessing.pool.Pool([processes[, initializer[, initargs[, maxtasksperchild[, context]]]]])\n# \u4e00\u4e2a\u8fdb\u7a0b\u6c60\u5bf9\u8c61\uff0c\u5b83\u63a7\u5236\u53ef\u4ee5\u63d0\u4ea4\u4f5c\u4e1a\u7684\u5de5\u4f5c\u8fdb\u7a0b\u6c60\u3002\u5b83\u652f\u6301\u5e26\u6709\u8d85\u65f6\u548c\u56de\u8c03\u7684\u5f02\u6b65\u7ed3\u679c\uff0c\u4ee5\u53ca\u4e00\u4e2a\u5e76\u884c\u7684 map \u5b9e\u73b0\u3002\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["processes \u8fdb\u7a0b\u6570\uff0c\u9ed8\u8ba4\u91c7\u7528 ",(0,i.jsx)(e.code,{children:"os.cpu_count()"})]}),"\n",(0,i.jsx)(e.li,{children:"initializer(*initargs) \u8fdb\u7a0b\u6c60\u8c03\u7528\u524d\u7684\u521d\u59cb\u5316\u65b9\u6cd5"}),"\n"]}),"\n",(0,i.jsx)(e.h4,{id:"\u65b9\u6cd5-1",children:"\u65b9\u6cd5"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["apply(",(0,i.jsx)(e.em,{children:"func"}),"[, ",(0,i.jsx)(e.em,{children:"args"}),"[, ",(0,i.jsx)(e.em,{children:"kwds"}),"]])"]}),"\n",(0,i.jsxs)(e.p,{children:["\u8fd4\u56de\u7ed3\u679c\u524d\u963b\u585e\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c",(0,i.jsx)(e.a,{href:"https://docs.python.org/zh-cn/3.7/library/multiprocessing.html#multiprocessing.pool.Pool.apply_async",children:(0,i.jsx)(e.code,{children:"apply_async()"})})," \u66f4\u9002\u5408\u5e76\u884c\u5316\u5de5\u4f5c\u3002\u53e6\u5916 ",(0,i.jsx)(e.em,{children:"func"})," \u53ea\u4f1a\u5728\u4e00\u4e2a\u8fdb\u7a0b\u6c60\u4e2d\u7684\u4e00\u4e2a\u5de5\u4f5c\u8fdb\u7a0b\u4e2d\u6267\u884c\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["apply_async(",(0,i.jsx)(e.em,{children:"func"}),"[, ",(0,i.jsx)(e.em,{children:"args"}),"[, ",(0,i.jsx)(e.em,{children:"kwds"}),"[, ",(0,i.jsx)(e.em,{children:"callback"}),"[, ",(0,i.jsx)(e.em,{children:"error_callback"}),"]]]])  \u975e\u963b\u585e\u64cd\u4f5c"]}),"\n",(0,i.jsx)(e.p,{children:"callback \u662f\u4e00\u4e2a\u53ea\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570\u7684\u53ef\u8c03\u7528\u5bf9\u8c61\u3002\u6210\u529f\u5219\u6267\u884ccallback\uff0c\u5931\u8d25\u6267\u884c error_callback"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["map(",(0,i.jsx)(e.em,{children:"func"}),", ",(0,i.jsx)(e.em,{children:"iterable"}),"[, ",(0,i.jsx)(e.em,{children:"chunksize"}),"])"]}),"\n",(0,i.jsxs)(e.p,{children:["\u5185\u7f6e\u51fd\u6570 ",(0,i.jsx)(e.code,{children:"map"})," \u7684\u5e76\u884c\u7248\u672c\uff0cmap\u4f1a ",(0,i.jsx)(e.strong,{children:"\u4fdd\u6301\u963b\u585e"})," \u76f4\u5230\u83b7\u5f97\u7ed3\u679c\u3002"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.em,{children:"iterable"})," \u53ef\u4ee5\u5207\u5206\u6210\u591a\u5757\u8fd0\u884c\uff0cchunksize \u6307\u5b9a\u5757\u7684\u5927\u5c0f\u3002"]}),"\n",(0,i.jsx)(e.p,{children:"\u5f53 iterable \u592a\u5927\u7684\u65f6\u5019\uff0c\u4e3a\u4e86\u8282\u7701\u5185\u5b58\uff0c\u53ef\u4ee5\u4f7f\u7528 imap \u548c imap_unordered"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["map_async(",(0,i.jsx)(e.em,{children:"func"}),", ",(0,i.jsx)(e.em,{children:"iterable"}),"[, ",(0,i.jsx)(e.em,{children:"chunksize"}),"[, ",(0,i.jsx)(e.em,{children:"callback"}),"[, ",(0,i.jsx)(e.em,{children:"error_callback"}),"]]])"]}),"\n",(0,i.jsxs)(e.p,{children:["map \u7684\u5bf9\u5e94\u7684",(0,i.jsx)(e.strong,{children:"\u5f02\u6b65"}),"\u56de\u8c03\u65b9\u6cd5"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["imap(",(0,i.jsx)(e.em,{children:"func"}),", ",(0,i.jsx)(e.em,{children:"iterable"}),"[, ",(0,i.jsx)(e.em,{children:"chunksize"}),"] \u9700\u8981\u663e\u5f0f\u7684\u8bbe\u7f6e chunksize\uff0c\u53ef\u4ee5\u6781\u5927\u7684\u52a0\u5feb map  \u7684\u901f\u5ea6\u3002\u539f\u5148map\u4e2d\u7684\u9ed8\u8ba4\u503c\u4e3a1\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"imap_unordered    imap \u7684\u65e0\u5e8f\u7248\u672c"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsxs)(e.p,{children:["apply_async \u548c map_async \u9664\u4e86\u662f\u5f02\u6b65\u6267\u884c\u7684\u4ee5\u5916\uff0c\u5b83\u4eec\u8fd8\u4f1a\u653e\u56de\u4e00\u4e2a ",(0,i.jsx)(e.strong,{children:"AsyncResult"})," \u5bf9\u8c61\uff0c\u5b83\u6709\u5982\u4e0b\u65b9\u6cd5"]}),"\n"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["get([",(0,i.jsx)(e.em,{children:"timeout"}),"]) \u83b7\u53d6\u6267\u884c\u7684\u7ed3\u679c"]}),"\n",(0,i.jsxs)(e.li,{children:["wait([",(0,i.jsx)(e.em,{children:"timeout"}),"]) \u963b\u585e\uff0c\u76f4\u5230\u8fd4\u56de\u7ed3\u679c"]}),"\n",(0,i.jsx)(e.li,{children:"ready \u662f\u5426\u5df2\u5b8c\u6210\u7ed3\u679c"}),"\n",(0,i.jsx)(e.li,{children:"successful \u662f\u5426\u5df2\u5b8c\u6210\u4e14\u6ca1\u6709\u53d1\u751f\u5f02\u5e38"}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"\u8fdb\u7a0b\u95f4\u901a\u4fe1\u6570\u636e\u4f20\u9012",children:"\u8fdb\u7a0b\u95f4\u901a\u4fe1\u2014\u2014\u6570\u636e\u4f20\u9012"}),"\n",(0,i.jsx)(e.p,{children:"multiprocessing  \u652f\u6301\u4e24\u79cd\u901a\u4fe1\u65b9\u5f0f\uff1aQueue(\u961f\u5217) , Pipe(\u7ba1\u9053)"}),"\n",(0,i.jsx)(e.h3,{id:"\u57fa\u7840\u7528\u6cd5",children:"\u57fa\u7840\u7528\u6cd5"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"q = Queue(maxsize=4)\nq.put(obj, block=True, timeout=None) # \u5b58\u5165\u961f\u5217\u4e2d\nq.get(obj, block=False) # \u8bfb\u53d6\u961f\u5217\n# block: \u662f\u5426\u4e3b\u52a8\u963b\u585e\uff0c\u963b\u585e\u7684\u65f6\u95f4\u4e3atimeout\u3002timeout=None \u4ee3\u8868\u4e00\u76f4\u963b\u585e\u3002block\u4e3a False \u7684\u65f6\u5019\uff0c\u4f1a\u4e3b\u52a8\u629b\u51fa queue.Full \u548c queue.Empty \u7684\u9519\u8bef\u3002\n\n# Pipe \u5efa\u7acb\u7684\u662f\u4e00\u4e2a\u53cc\u5168\u5de5\u7684\u8fde\u63a5\nparent_conn, child_conn = Pipe()\nparent_conn.send([42, None, 'hello']) # \u53d1\u9001\nparent_conn.close() # \u5173\u95ed \u4e00\u7aef\u7684\u8fde\u63a5\uff0c\u5173\u95ed\u540e\u4e0d\u53ef\u4ee5\u518d\u6b21\u8fdb\u884c send \u548c recv \u64cd\u4f5c\nchild_conn.recv() # \u63a5\u6536\n"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"\u53ef\u4ee5\u770b\u51fa\uff0cPipe \u662f\u53ea\u80fd\u5728\u4e24\u4e2a\u8fdb\u7a0b\u8fdb\u884c\u901a\u4fe1\uff0c\u800c Queue \u53ef\u4ee5\u652f\u6301\u591a\u4e2a\u961f\u5217\u3002Pipe \u89e3\u51b3\u4e86\u8fdb\u7a0b\u4e4b\u95f4\u7684\u901a\u4fe1\u95ee\u9898\uff0cQueue \u8fd8\u52a0\u4e0a\u4e86\u4e00\u4e2a\u7f13\u51b2\u533a\u7684\u4f5c\u7528\u3002"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u90a3\u4e48multiprocessing.Queue \u548c \u6807\u51c6\u5e93\u4e2d\u7684 queue \u7684\u533a\u522b\u662f\u4ec0\u4e48\uff1f"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"\u9700\u8981\u6ce8\u610f\u7684\u662f\u8fd9\u91cc\u662f\u591a\u8fdb\u7a0b\u7f16\u7a0b\uff0c\u8fdb\u7a0b\u662f\u8d44\u6e90\u5206\u914d\u7684\u6700\u5c0f\u5355\u4f4d\u3002\u4e0d\u540c\u7684\u8fdb\u7a0b\u662f\u65e0\u6cd5\u83b7\u53d6\u5bf9\u65b9\u5806\u6808\u7684\u3002Queue \u53ef\u4ee5\u89e3\u51b3\u8fd9\u4e00\u4e2a\u6570\u636e\u5171\u4eab\u7684\u95ee\u9898\u3002\u5982\u679c\u6211\u4eec\u73b0\u5728\u91c7\u7528\u7684\u662f\u591a\u7ebf\u7a0b\u7f16\u7a0b\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u76f4\u63a5\u91c7\u7528\u6807\u51c6\u5e93\u7684queue \u6765\u66ff\u4ee3\u3002"}),"\n",(0,i.jsxs)(e.li,{children:["multiprocessing \u4e2d\u7684 Queue \u5b9e\u73b0\u4e86\u6807\u51c6\u5e93\u4e2d\u7684 queue \u4e2d\u7684\u6240\u6709\u65b9\u6cd5\uff0c\u9664\u4e86",(0,i.jsx)(e.code,{children:"task_done"})," \u548c ",(0,i.jsx)(e.code,{children:"join"})," \u65b9\u6cd5"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"pipe-\u7684\u4f7f\u7528",children:"Pipe \u7684\u4f7f\u7528"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"conn1, conn2 = multiprocessing.Pipe([duplex])\n# \u8fd4\u56de Connection \u5bf9\u8c61 conn1,conn2 \u5206\u522b\u4ee3\u8868\u7ba1\u9053\u7684\u4e24\u7aef\u3002Connection \u7c7b\u578b\nwhile conn1.poll():\n   conn1.recv()\n"})}),"\n",(0,i.jsxs)(e.p,{children:["duplex: True \u4ee3\u8868\u53cc\u5168\u5de5\uff0c\u5373\u7ba1\u9053\u7684\u4e24\u7aef\u662f\u53ef\u4ee5\u53cc\u5411\u7684\u901a\u4fe1\u7684\u3002False \u4ee3\u8868\u5355\u5411\uff0c ",(0,i.jsx)(e.code,{children:"conn1"})," \u53ea\u80fd\u7528\u4e8e\u63a5\u6536\u6d88\u606f\uff0c\u800c ",(0,i.jsx)(e.code,{children:"conn2"})," \u4ec5\u80fd\u7528\u4e8e\u53d1\u9001\u6d88\u606f\u3002"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Connect \u5bf9\u8c61\u7684\u65b9\u6cd5\u6709"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"send/recv \u53d1\u9001\u7684\u5bf9\u8c61\u5fc5\u987b\u662f\u53ef\u5e8f\u5217\u5316\u7684"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["send_bytes(",(0,i.jsx)(e.em,{children:"buffer"}),"[, ",(0,i.jsx)(e.em,{children:"offset"}),"[, ",(0,i.jsx)(e.em,{children:"size"}),"]]) / recv_bytes([",(0,i.jsx)(e.em,{children:"maxlength"}),"]) / ",(0,i.jsx)(e.code,{children:"recv_bytes_into"}),"(",(0,i.jsx)(e.em,{children:"buffer"}),"[, ",(0,i.jsx)(e.em,{children:"offset"}),"])"]}),"\n",(0,i.jsxs)(e.p,{children:["\u53d1\u9001 \u548c \u63a5\u53d7 ",(0,i.jsx)(e.a,{href:"https://docs.python.org/zh-cn/3.7/glossary.html#term-bytes-like-object",children:"bytes-like object"})," \u5b57\u8282\u7c7b\u5bf9\u8c61"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["poll([",(0,i.jsx)(e.em,{children:"timeout"}),"]) \u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u4e2d\u662f\u5426\u6709\u53ef\u4ee5\u8bfb\u53d6\u7684\u6570\u636e"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"close() \u5173\u95ed"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"\u6ce8\u610f\u7684\u4e00\u70b9\u662f\uff0cConnect \u7684\u4ec5\u4ec5\u652f\u6301\u5c11\u91cf\u6570\u636e\u7684\u53d1\u9001\uff0c\u5bf9\u4e8e\u591a\u5927\u7684\u5bf9\u8c61\uff0832M+\uff09\uff0c\u53ef\u80fd\u4f1a\u5f15\u53d1\u5f02\u5e38"}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"queue-\u7684\u4f7f\u7528",children:"Queue \u7684\u4f7f\u7528"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"class multiprocessing.Queue([maxsize])\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u4e3b\u8981\u5b9e\u73b0\u4e86\u5982\u4e0b\u5c5e\u6027&\u65b9\u6cd5\uff0c\u57fa\u672c\u548c queue \u4e00\u6837"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"qsize \u961f\u5217\u5927\u5c0f\uff0c\u7531\u4e8e\u662f\u591a\u8fdb\u7a0b\u7684\u4e0a\u4e0b\u6587\uff0c\u8fd9\u4e2a\u6570\u5b57\u4e0d\u662f\u5f88\u53ef\u9760\uff0c\u800c\u4e14\u5728Mac OS X \u4e0a\u53ef\u80fd\u5b58\u5728\u5f02\u5e38\u3002"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"empty \u662f\u5426\u4e3a\u7a7a"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"full \u662f\u5426\u4e3a\u6ee1"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["put(",(0,i.jsx)(e.em,{children:"obj"}),"[, ",(0,i.jsx)(e.em,{children:"block"}),"[, ",(0,i.jsx)(e.em,{children:"timeout"}),"]])  \u5f53\u6ca1\u6709\u53ef\u7528\u7f13\u51b2\u69fd\u7684\u65f6\uff0c\u629b\u51fa ",(0,i.jsx)(e.a,{href:"https://docs.python.org/zh-cn/3.7/library/queue.html#queue.Empty",children:(0,i.jsx)(e.code,{children:"queue.Empty"})})," \u5f02\u5e38"]}),"\n",(0,i.jsxs)(e.p,{children:["put_nowait(",(0,i.jsx)(e.em,{children:"obj"}),") \u7b49\u4ef7\u4e8e put(obj, False)"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["get([",(0,i.jsx)(e.em,{children:"block"}),"[, ",(0,i.jsx)(e.em,{children:"timeout"}),"]]) \u5f53\u6ca1\u6709\u53ef\u53d6\u7528\u5bf9\u8c61\u65f6\uff0c\u629b\u51fa ",(0,i.jsx)(e.a,{href:"https://docs.python.org/zh-cn/3.7/library/queue.html#queue.Empty",children:(0,i.jsx)(e.code,{children:"queue.Empty"})})," \u5f02\u5e38"]}),"\n",(0,i.jsx)(e.p,{children:"get_nowait() \u7b49\u4ef7\u4e8e get(False)"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"close() \u6307\u793a\u5f53\u524d\u8fdb\u7a0b\u5c06\u4e0d\u4f1a\u518d\u5f80\u961f\u5217\u4e2d\u653e\u5165\u5bf9\u8c61"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"queue\u7684\u51e0\u79cd\u53d8\u5f62",children:"Queue\u7684\u51e0\u79cd\u53d8\u5f62"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"multiprocessing.SimpleQueue() \u7b80\u5316\u7684\u961f\u5217\uff0c\u5176\u53ea\u5177\u6709empty\u3001get\u3001put3\u4e2a\u65b9\u6cd5\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u8fd9\u4e2a\u961f\u5217\u5b9e\u9645\u4e0a\u662f\u7528 Pipe \u5b9e\u73b0\u7684"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["multiprocessing.JoinableQueue(maxsize=0)  \u5efa\u7acb",(0,i.jsx)(e.strong,{children:"\u53ef\u963b\u585e\u7684\u961f\u5217\u5b9e\u4f8b"}),"\uff0c\u91c7\u7528\u4e00\u822c\u961f\u5217\u7684\u65b9\u5f0f\u8bbf\u95ee\u3002\u52a0\u4e0a\u4e86 ",(0,i.jsx)(e.code,{children:"join"}),"  \u548c ",(0,i.jsx)(e.code,{children:"task_done"})," \u4e24\u4e2a\u65b9\u6cd5\u3002"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"\u8fdb\u7a0b\u95f4\u901a\u4fe1\u6570\u636e\u5171\u4eab",children:"\u8fdb\u7a0b\u95f4\u901a\u4fe1\u2014\u2014\u6570\u636e\u5171\u4eab"}),"\n",(0,i.jsxs)(e.p,{children:["\u8fdb\u7a0b\u95f4\u7684\u901a\u4fe1 Pipe \u548c Queue \u80fd\u89e3\u51b3\u5c0f\u6279\u91cf\u6570\u636e\u7684\u4f20\u8f93\uff0c\u5982 ",(0,i.jsx)(e.strong,{children:"Pipe.send() \u65b9\u6cd5\u53d1\u9001\u7684\u6570\u636e\u4e00\u822c\u4e0d\u8d85\u8fc7 32M"}),"\u3002\u5bf9\u4e8e\u5927\u91cf\u7684\u6570\u636e\uff0c\u53ef\u4ee5\u501f\u52a9 ",(0,i.jsx)(e.code,{children:"\u5171\u4eab\u5185\u5b58"})," \u548c ",(0,i.jsx)(e.code,{children:"Manager \u7c7b"}),"\u5b9e\u73b0\u3002",(0,i.jsx)(e.code,{children:"Manager"}),"\u5b9e\u73b0\u4e86\u4e24\u4e2a\u91cd\u8981\u7684\u7c7b\u578b ",(0,i.jsx)(e.code,{children:"list"})," \u548c ",(0,i.jsx)(e.code,{children:"dict"}),"\u3002"]}),"\n",(0,i.jsx)(e.h3,{id:"manager-\u7c7b\u5171\u4eab\u8fdb\u7a0b",children:"Manager \u7c7b\uff08\u5171\u4eab\u8fdb\u7a0b\uff09"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"import multiprocessing\nimport time\n\ndef f(list, x):\n    print(list, x)\n    list.append(x)\n\n\nif __name__ == '__main__':\n     manager = multiprocessing.Manager()\n     mag_list = manager.list([]) \n     \n\n     with multiprocessing.Pool(4) as p:\n         for item in [1, 2, 3]:\n            p.apply(f, args=(mag_list, item))\n         p.close()\n     print(mag_list)\n\n# output: \n# [] 1\n# [1] 2\n# [1, 2] 3\n# [1, 2, 3]\n\n# \u53ef\u4ee5\u5c1d\u8bd5 mag_list=[] ,\u6700\u540e\u7684\u7ed3\u679c\u662f\u4e0d\u4f1a\u53d1\u751f\u4efb\u4f55\u53d8\u5316\n# [] 1\n# [] 2\n# [] 3\n# []\n"})}),"\n",(0,i.jsx)(e.h3,{id:"value-array\u5171\u4eab\u5185\u5b58",children:"Value, Array\uff08\u5171\u4eab\u5185\u5b58\uff09"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"multiprocessing.Value(typecode_or_type, *args, lock=True)\nmultiprocessing.Array(typecode_or_type, size_or_initializer, *, lock=True)\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"typecode_or_type  \u7c7b\u578b\u7801"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://cdn.jsdelivr.net/gh/PPsteven/pictures/img/20200406150352.png",alt:""})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"size_or_initializer \u5927\u5c0f\uff0c\u6216\u8005\u521d\u59cb\u5316\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"multiprocessing.Array('i', 3) # \u7ed3\u679c [0,0,0]\nmultiprocessing.Array('i', range(3)) # \u7ed3\u679c [0,1,2]\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Lock \u9501\u64cd\u4f5c\uff0c\u5728\u4fee\u6539\u8bbf\u95ee\u6570\u636e\u7684\u65f6\u5019\uff0c\u901a\u8fc7\u8bbe\u7f6e\u4e3a True \u80fd\u9501\u5b9a\u8d44\u6e90\uff0c\u963b\u585e\u5176\u4ed6\u8fdb\u7a0b\u7684\u8bbf\u95ee\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h4,{id:"\u4f8b\u5b50",children:"\u4f8b\u5b50"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"v = multiprocessing.Value('d', 10, lock=True)\nwith v.get_lock(): # \u4fee\u6539\u503c\u524d\uff0c\u52a0\u9501\n    v.value += 1  # \u5c5e\u6027 value \u53d6\u503c\n"})}),"\n",(0,i.jsx)(e.h2,{id:"\u6570\u636e\u8fdb\u7a0b\u9501",children:"\u6570\u636e\u8fdb\u7a0b\u9501"}),"\n",(0,i.jsx)(e.p,{children:"\u4e0a\u4e00\u90e8\u5206\u89e3\u51b3\u4e86\u8fdb\u7a0b\u95f4\u5171\u4eab\u6570\u636e\u7684\u64cd\u4f5c\u3002\u4f46\u662f\u4e0d\u540c\u8fdb\u7a0b\u82e5\u662f\u9700\u8981\u5bf9\u4e8e\u5171\u4eab\u6570\u636e\u8fdb\u884c\u4fee\u6539\uff0c\u53ef\u80fd\u4f1a\u53d1\u751f\u51b2\u7a81\u3002\u89e3\u51b3\u8fd9\u4e00\u7c7b\u95ee\u9898\u7684\u65b9\u5f0f\u5c31\u662f\u5728 \u91cd\u8981\u6570\u636e\u4fee\u6539\u7684\u65f6\u5019\u52a0\u4e0a\u9501\uff0c\u4fee\u6539\u5b8c\u6bd5\u518d\u91ca\u653e\u3002"}),"\n",(0,i.jsxs)(e.p,{children:["multiprocessing \u7684 \u4e92\u65a5&\u540c\u6b65\u64cd\u4f5c\u6709\uff1a ",(0,i.jsx)(e.code,{children:"Lock"}),",  ",(0,i.jsx)(e.code,{children:"Semaphore"})," , ",(0,i.jsx)(e.code,{children:"Event"})," \u548c ",(0,i.jsx)(e.code,{children:"Barrier"})]}),"\n",(0,i.jsx)(e.h3,{id:"lock-\u539f\u59cb\u9501",children:"Lock \u539f\u59cb\u9501"}),"\n",(0,i.jsxs)(e.p,{children:["\u539f\u59cb\u9501\uff08\u975e\u9012\u5f52\u9501\uff09\u5bf9\u8c61\uff0c\u4e00\u65e6\u4e00\u4e2a\u8fdb\u7a0b\u6216\u8005\u7ebf\u7a0b\u62ff\u5230\u4e86\u9501\uff0c\u540e\u7eed\u7684\u4efb\u4f55\u5176\u4ed6\u8fdb\u7a0b\u6216\u7ebf\u7a0b\u7684\u5176\u4ed6\u8bf7\u6c42\u90fd\u4f1a\u88ab\u963b\u585e\u76f4\u5230\u9501\u88ab\u91ca\u653e\u3002",(0,i.jsx)(e.strong,{children:"\u4efb\u4f55\u8fdb\u7a0b\u6216\u7ebf\u7a0b\u90fd\u53ef\u4ee5\u91ca\u653e\u9501\u3002"})]}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"Lock \u4e00\u822c\u53ea\u9488\u5bf9\u4e00\u4e2a\u8d44\u6e90\u540c\u6b65\u8bbf\u95ee"}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"rlock-\u9012\u5f52\u9501",children:"RLock \u9012\u5f52\u9501"}),"\n",(0,i.jsx)(e.p,{children:"**\u9012\u5f52\u9501\u5fc5\u987b\u7531\u6301\u6709\u7ebf\u7a0b\u3001\u8fdb\u7a0b\u4eb2\u81ea\u91ca\u653e\u3002**\u9012\u5f52\u9501\u548c\u539f\u59cb\u9501\u7684\u533a\u522b\u662f\uff0c\u4e00\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u591a\u6b21\u52a0\u9501\uff0c\u6bcf\u6b21\u52a0\u9501\uff0c\u9501\u52a0\u4e00\u3002\u6bcf\u6b21\u91ca\u653e\uff0c\u9501\u51cf\u4e00\u3002\u6240\u4ee5\u5f53\u83b7\u5f97\u9501\u548c\u91ca\u653e\u9501\u7684\u6570\u91cf\u76f8\u7b49\u7684\u65f6\u5019\uff0c\u624d\u80fd\u91ca\u653e\u9501\u4f4f\u7684\u8d44\u6e90\u3002\u4f7f\u7528\u65b9\u6cd5\u548cLock \u4e00\u6837\u3002"}),"\n",(0,i.jsx)(e.h3,{id:"semaphore-\u4fe1\u53f7\u91cf",children:"Semaphore \u4fe1\u53f7\u91cf"}),"\n",(0,i.jsx)(e.p,{children:"Semaphore \u4e00\u822c\u662f\u9488\u5bf9\u591a\u4e2a(\u6709\u9650)\u8d44\u6e90\u7684\u8bbf\u95ee\u7684\uff0c\u5b83\u7684\u64cd\u4f5c\u548cLock\u4e00\u6837\u3002\u53ea\u662f\u521d\u59cb\u5316\u7684\u65f6\u5019\uff0c\u9700\u8981\u7ed9\u51fa\u578b\u53f7\u91cf\u7684\u521d\u59cb\u503c\u3002\u53ef\u4ee5\u8ba4\u4e3aSemaphore(1) \u548c RLock\u662f\u76f8\u540c\u7684\u3002"}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"\u4e0a\u9762\u4e09\u4e2a\u9501\u7684\u4f7f\u7528\u65b9\u6cd5\u90fd\u53ef\u4ee5\u4f7f\u7528 acquire/release \u64cd\u4f5c"}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"barrier-\u5c4f\u969c",children:"Barrier \u5c4f\u969c"}),"\n",(0,i.jsx)(e.p,{children:"\u5f53\u82e5\u5e72\u4e2a\u8fdb\u7a0b\u6ca1\u6709\u5230\u8fbe\u5c4f\u969c\u70b9\u7684\u65f6\u5019\uff0c\u4f1a\u81ea\u52a8\u963b\u585e\uff0c\u4e00\u65e6\u5230\u8fbe\u5c4f\u969c\u70b9\uff0c\u5c06\u4f1a\u81ea\u52a8\u89e3\u9664\u963b\u585e\u5e76\u542f\u52a8\u8fd0\u884c"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://cdn.jsdelivr.net/gh/PPsteven/pictures/img/20200406020450.png",alt:""})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"class threading.Barrier(parties, action=None, timeout=None)\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"parties  \u6805\u680f\u7684\u4e2a\u6570"}),"\n",(0,i.jsx)(e.li,{children:"action  \u5f53\u7a81\u7834\u6805\u680f\u540e\uff0c\u4f1a\u5728\u88ab\u91ca\u653e\u7684\u5176\u4e2d\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c"}),"\n"]}),"\n",(0,i.jsx)(e.h4,{id:"\u5c5e\u6027-1",children:"\u5c5e\u6027"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"n_waiting  \u5f53\u524d\u65f6\u523b\u6b63\u5728\u6805\u680f\u4e2d\u963b\u585e\u7684\u7ebf\u7a0b\u6570\u91cf\u3002"}),"\n",(0,i.jsxs)(e.li,{children:["broken  \u503c\u4e3a ",(0,i.jsx)(e.code,{children:"True"})," \u8868\u660e\u6805\u680f\u4e3a\u7834\u635f\u6001\u3002"]}),"\n"]}),"\n",(0,i.jsx)(e.h4,{id:"\u65b9\u6cd5-2",children:"\u65b9\u6cd5"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["wait(",(0,i.jsx)(e.em,{children:"timeout=None"}),") \u963b\u585e\u64cd\u4f5c\uff0c\u51fd\u6570\u4f1a\u8fd4\u56de\u4e00\u4e2a\u8303\u56f4\u5728 0~parties-1 \u5185\u7684\u6574\u6570\u3002\u5f53\u4e3a0 \u7684\u65f6\u5019\uff0c\u4ee3\u8868\u6805\u680f\u7834\u88c2"]}),"\n",(0,i.jsx)(e.li,{children:"reset() \u91cd\u7f6e\u4e3a\u521d\u59cb\u72b6\u6001"}),"\n",(0,i.jsx)(e.li,{children:"abort() \u4e0ereset() \u76f8\u53cd\uff0c\u8bbe\u7f6e\u4e3a\u7834\u635f\u72b6\u6001"}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"event-\u4e8b\u4ef6\u9501",children:"Event \u4e8b\u4ef6\u9501"}),"\n",(0,i.jsx)(e.p,{children:"\u8fd9\u662f\u7ebf\u7a0b\u4e4b\u95f4\u901a\u4fe1\u7684\u6700\u7b80\u5355\u673a\u5236\u4e4b\u4e00\uff1a\u4e00\u4e2a\u7ebf\u7a0b\u53d1\u51fa\u4e8b\u4ef6\u4fe1\u53f7\uff0c\u800c\u5176\u4ed6\u7ebf\u7a0b\u7b49\u5f85\u8be5\u4fe1\u53f7\u3002"}),"\n",(0,i.jsx)(e.h4,{id:"\u65b9\u6cd5-3",children:"\u65b9\u6cd5"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"is_set()   \u5224\u65ad\u5185\u90e8\u6807\u8bc6\u4f4d\u662f\u5426\u4e3aTrue"}),"\n",(0,i.jsx)(e.li,{children:"set()  \u8bbe\u7f6e\u5185\u90e8\u6807\u8bc6\u4f4d\u4e3aTrue"}),"\n",(0,i.jsx)(e.li,{children:"clear()  \u8bbe\u7f6e\u5185\u90e8\u6807\u8bc6\u4f4d\u4e3aFalse"}),"\n",(0,i.jsx)(e.li,{children:"wait()  \u963b\u585e\u7ebf\u7a0b\u76f4\u5230\u5185\u90e8\u53d8\u91cf\u4e3atrue\u3002\u5982\u679c\u8c03\u7528\u65f6\u5185\u90e8\u6807\u5fd7\u4e3atrue\uff0c\u5c06\u7acb\u5373\u8fd4\u56de\u3002\u5426\u5219\u5c06\u963b\u585e\u7ebf\u7a0b\uff0c"}),"\n"]}),"\n",(0,i.jsx)(e.h4,{id:"\u4f8b\u5b50-1",children:"\u4f8b\u5b50"}),"\n",(0,i.jsx)(e.p,{children:"\u7531\u4e8e\u4e4b\u524d\u6ca1\u6709\u63a5\u89e6\u8fc7Event\uff0c\u8fd9\u91cc\u81ea\u5df1\u7ec3\u624b\u5199\u4e86\u4e00\u4e2aEvent \u7684\u5c0f\u4f8b\u5b50\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"import multiprocessing\nimport time\n\ndef car(e, car_id):\n    print(f'car {car_id} is coming ')\n    if not e.is_set():\n        print(f'car {car_id} is waiting')\n        e.wait()\n\n    if e.is_set():\n        print(f'car {car_id} pass the cross road')\n\n\ndef traffic_light(e):\n    \"\"\"\n    \u7ea2\u7eff\u706f\u5207\u6362\u7684\u65f6\u5019\uff0ce.clear \u548c e.set \u662f\u6210\u961f\u51fa\u73b0\u7684\u3002\n    \u56e0\u4e3a\u7ea2\u7eff\u672c\u7701\u5c31\u662f\u76f8\u4e92\u540c\u6b65\u7684\u4e00\u4e2a\u64cd\u4f5c\n    \"\"\"\n    while True: # \u6bcf5\u79d2\u5207\u6362\u4e00\u6b21\u7ea2\u7eff\u706f\n        if e.is_set():\n            time.sleep(2)\n            print('<<<<<<<<<<<<<<< green to red >>>>>>>>>>>>>>>>>>>')\n            e.clear()\n        if not e.is_set():\n            time.sleep(2)\n            print('<<<<<<<<<<<<<<< red to green >>>>>>>>>>>>>>>>>>>')\n            e.set()\n\n\nif __name__ == '__main__':\n    event = multiprocessing.Event()\n    event.clear()  # \u9ed8\u8ba4\u8bbe\u7f6e\u7ea2\u706f\n    cars = [multiprocessing.Process(target=car, args=(event,car_id)) for car_id in range(10)]\n    lights = multiprocessing.Process(target=traffic_light, args=(event,))\n    lights.daemon = True  # \u8bbe\u7f6e\u5b8c\u8fd9\u4e00\u6b65\uff0c\u53ef\u4ee5\u5728\u5c0f\u6c7d\u8f66\u90fd\u5f00\u8d70\u540e\uff0c\u7ed3\u675f\u6574\u4e2a\u7a0b\u5e8f\u3002\n    lights.start()\n    for each in cars:\n        each.start()\n        time.sleep(1) # \u95f4\u9694\u4e00\u79d2\u949f\u53d1\u8f66\n\n    for each in cars:\n        each.join()\n    # \u5f53 each.join \u6267\u884c\u5b8c\u6bd5\uff0c\u6b64\u65f6 traffic_light \u8fd8\u5728\u540e\u53f0\u8fd0\u884c\n    # \u4f46\u662f\u7531\u4e8e\u6ca1\u6709\u6dfb\u52a0 traffic_light.join() \u6240\u4ee5\u6b64\u65f6 mian \u7ed3\u675f\uff0c\u5e26\u7740\u5b88\u62a4\u8fdb\u7a0b traffic_light\u4e00\u8d77\u7ed3\u675f\n\n# \u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\ncar 0 is coming \ncar 0 is waiting\ncar 1 is coming \ncar 1 is waiting\n<<<<<<<<<<<<<<< red to green >>>>>>>>>>>>>>>>>>>\n....\n<<<<<<<<<<<<<<< green to red >>>>>>>>>>>>>>>>>>>\ncar 8 is coming \ncar 8 is waiting\ncar 9 is coming \ncar 9 is waiting\n<<<<<<<<<<<<<<< red to green >>>>>>>>>>>>>>>>>>>\ncar 8 pass the cross road\ncar 9 pass the cross road\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u5982\u679c\u6211\u4eec\u4e0d\u542f\u52a8\u5b88\u62a4\u8fdb\u7a0b\uff0c\u800c\u662f\u4e00\u76f4\u8ba9\u7a0b\u5e8f\u5728\u540e\u53f0\u8fd0\u884c\u3002\u8fd9\u6837\u6211\u4eec\u53ef\u4ee5\u611f\u53d7\u5230  ",(0,i.jsx)(e.strong,{children:"\u5b88\u62a4\u8fdb\u7a0b"}),"  \u7684\u4f5c\u7528"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-diff",children:" cars = [multiprocessing.Process(target=car, args=(event,car_id)) for car_id in range(10)]\n lights = multiprocessing.Process(target=traffic_light, args=(event,))\n-   lights.daemon = True  # \u8bbe\u7f6e\u5b8c\u8fd9\u4e00\u6b65\uff0c\u53ef\u4ee5\u5728\u5c0f\u6c7d\u8f66\u90fd\u5f00\u8d70\u540e\uff0c\u7ed3\u675f\u6574\u4e2a\u7a0b\u5e8f\u3002\n    lights.start()\n    for each in cars:\n        each.start()\n        time.sleep(1) # \u95f4\u9694\u4e00\u79d2\u949f\u53d1\u8f66\n\n    for each in cars:\n        each.join()\n+   lights.join() # \n# \u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\n<<<<<<<<<<<<<<< red to green >>>>>>>>>>>>>>>>>>>\ncar 9 pass the cross road\ncar 8 pass the cross road\n<<<<<<<<<<<<<<< green to red >>>>>>>>>>>>>>>>>>>\n<<<<<<<<<<<<<<< red to green >>>>>>>>>>>>>>>>>>>\n<<<<<<<<<<<<<<< green to red >>>>>>>>>>>>>>>>>>>\n<<<<<<<<<<<<<<< red to green >>>>>>>>>>>>>>>>>>>\n"})}),"\n",(0,i.jsx)(e.h3,{id:"condition-\u6761\u4ef6\u9501",children:"Condition \u6761\u4ef6\u9501"}),"\n",(0,i.jsx)(e.h3,{id:"\u51e0\u79cd\u65b9\u6cd5\u7684\u6bd4\u8f83",children:"\u51e0\u79cd\u65b9\u6cd5\u7684\u6bd4\u8f83"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u65b9\u6cd5"}),(0,i.jsx)(e.th,{children:"\u540d\u79f0"}),(0,i.jsx)(e.th,{children:"\u4f5c\u7528"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Lock"}),(0,i.jsx)(e.td,{children:"\u539f\u59cb\u9501"}),(0,i.jsx)(e.td,{children:"\u5f53\u591a\u4e2a\u8fdb\u7a0b\u9700\u8981\u8bbf\u95ee\u5171\u4eab\u8d44\u6e90\u7684\u65f6\u5019\uff0c\u3001"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"RLock"}),(0,i.jsx)(e.td,{children:"\u9012\u5f52\u9501"}),(0,i.jsx)(e.td,{children:"Lock \u7684\u5347\u7ea7"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Semaphore"}),(0,i.jsx)(e.td,{children:"\u4fe1\u53f7\u91cf\uff08\u8ba1\u6570\u5668\u9501\uff09"}),(0,i.jsx)(e.td,{children:"Semaphore\u7528\u6765\u63a7\u5236\u5bf9\u5171\u4eab\u8d44\u6e90\u7684\u8bbf\u95ee\u6570\u91cf\uff0c\u4f8b\u5982\u6c60\u7684\u6700\u5927\u8fde\u63a5\u6570\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Barrier"}),(0,i.jsx)(e.td,{children:"\u65f6\u95f4\u9501"}),(0,i.jsx)(e.td,{children:"\u8fdb\u7a0b\u95f4\u540c\u6b65\u901a\u4fe1"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Barrier"}),(0,i.jsx)(e.td,{children:"\u969c\u788d\u9501"}),(0,i.jsx)(e.td,{children:"\u7b49\u5f85\u8db3\u591f\u8d44\u6e90\u542f\u52a8"})]})]})]}),"\n",(0,i.jsx)(e.h2,{id:"\u53c2\u8003\u8d44\u6599",children:"\u53c2\u8003\u8d44\u6599"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.a,{href:"https://docs.python.org/zh-cn/3.7/library/multiprocessing.html#cleanup",children:"python\u5b98\u65b9\u6587\u6863"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.a,{href:"https://www.bilibili.com/video/BV1pJ411h7YS?p=17",children:"B\u7ad9\u3010\u674e\u5174\u534e\u7f16\u7a0b\u8bad\u7ec3\u8425\u3011Python\u5e76\u53d1\u7f16\u7a0b"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.a,{href:"https://zhuanlan.zhihu.com/p/46798399",children:"\u77e5\u4e4epython\u5e76\u884c\u8ba1\u7b97\uff08\u4e0a\uff09\uff1amultiprocessing\u3001multiprocess\u6a21\u5757"})})]})}function a(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(h,{...n})}):h(n)}},28453:(n,e,s)=>{s.d(e,{R:()=>c,x:()=>d});var i=s(96540);const r={},l=i.createContext(r);function c(n){const e=i.useContext(l);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:c(n.components),i.createElement(l.Provider,{value:e},n.children)}}}]);