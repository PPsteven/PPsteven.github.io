"use strict";(self.webpackChunkcodepainter=self.webpackChunkcodepainter||[]).push([[8326],{78907:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>d,default:()=>h,frontMatter:()=>o,metadata:()=>c,toc:()=>l});var s=t(74848),i=t(28453);const o={title:"\u201c\u518d\u201d\u5b66\u4e60\u4e0d\u4e00\u6837\u7684Vue\uff1aMock\u5047\u6570\u636e",tags:["vue"],comments:!1,date:new Date("2020-11-10T20:39:44.000Z"),categories:["Vue"],permalink:"/pages/3ed00e/"},d=void 0,c={id:"\u6280\u672f\u7b14\u8bb0/\u524d\u7aef/Vue/\u201c\u518d\u201d\u5b66\u4e60\u4e0d\u4e00\u6837\u7684Vue\uff1aMock\u5047\u6570\u636e",title:"\u201c\u518d\u201d\u5b66\u4e60\u4e0d\u4e00\u6837\u7684Vue\uff1aMock\u5047\u6570\u636e",description:"\u524d\u8a00",source:"@site/docs/01.\u6280\u672f\u7b14\u8bb0/01.\u524d\u7aef/02.Vue/04.\u201c\u518d\u201d\u5b66\u4e60\u4e0d\u4e00\u6837\u7684Vue\uff1aMock\u5047\u6570\u636e.md",sourceDirName:"01.\u6280\u672f\u7b14\u8bb0/01.\u524d\u7aef/02.Vue",slug:"/\u6280\u672f\u7b14\u8bb0/\u524d\u7aef/Vue/\u201c\u518d\u201d\u5b66\u4e60\u4e0d\u4e00\u6837\u7684Vue\uff1aMock\u5047\u6570\u636e",permalink:"/docs/\u6280\u672f\u7b14\u8bb0/\u524d\u7aef/Vue/\u201c\u518d\u201d\u5b66\u4e60\u4e0d\u4e00\u6837\u7684Vue\uff1aMock\u5047\u6570\u636e",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/01.\u6280\u672f\u7b14\u8bb0/01.\u524d\u7aef/02.Vue/04.\u201c\u518d\u201d\u5b66\u4e60\u4e0d\u4e00\u6837\u7684Vue\uff1aMock\u5047\u6570\u636e.md",tags:[{label:"vue",permalink:"/docs/tags/vue"}],version:"current",sidebarPosition:4,frontMatter:{title:"\u201c\u518d\u201d\u5b66\u4e60\u4e0d\u4e00\u6837\u7684Vue\uff1aMock\u5047\u6570\u636e",tags:["vue"],comments:!1,date:"2020-11-10T20:39:44.000Z",categories:["Vue"],permalink:"/pages/3ed00e/"},sidebar:"techwiki",previous:{title:"\u201c\u518d\u201d\u5b66\u4e60\u4e0d\u4e00\u6837\u7684Vue\uff1aVuex\u7684\u4f7f\u7528",permalink:"/docs/\u6280\u672f\u7b14\u8bb0/\u524d\u7aef/Vue/\u201c\u518d\u201d\u5b66\u4e60\u4e0d\u4e00\u6837\u7684Vue\uff1aVuex\u7684\u4f7f\u7528"},next:{title:"vue-router \u57fa\u7840\u7528\u6cd5",permalink:"/docs/\u6280\u672f\u7b14\u8bb0/\u524d\u7aef/Vue/vue-router\u57fa\u672c\u4f7f\u7528"}},r={},l=[{value:"\u524d\u8a00",id:"\u524d\u8a00",level:2},{value:"\u6e90\u5730\u5740",id:"\u6e90\u5730\u5740",level:2},{value:"\u4f7f\u7528Mock\u5047\u6570\u636e",id:"\u4f7f\u7528mock\u5047\u6570\u636e",level:2},{value:"\u4fee\u6539 src/store/index.js",id:"\u4fee\u6539-srcstoreindexjs",level:3},{value:"\u6dfb\u52a0Item\u7ec4\u4ef6",id:"\u6dfb\u52a0item\u7ec4\u4ef6",level:2},{value:"\u4fee\u6539 src/components/todo.vue",id:"\u4fee\u6539-srccomponentstodovue",level:3},{value:"\u6dfb\u52a0 src/components/item.vue",id:"\u6dfb\u52a0-srccomponentsitemvue",level:3},{value:"\u6570\u636e\u53cc\u5411\u7ed1\u5b9a\u7684\u5904\u7406\u65b9\u6cd5",id:"\u6570\u636e\u53cc\u5411\u7ed1\u5b9a\u7684\u5904\u7406\u65b9\u6cd5",level:2},{value:"\u4fee\u6539 src/components/item.vue",id:"\u4fee\u6539-srccomponentsitemvue",level:3},{value:"\u6211\u7684\u4ed3\u5e93",id:"\u6211\u7684\u4ed3\u5e93",level:2}];function a(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"\u524d\u8a00",children:"\u524d\u8a00"}),"\n",(0,s.jsxs)(n.p,{children:["\u5b66\u4e60Vue\u7684\u8fc7\u7a0b\u4e2d\uff0c\u770b\u5b8c ",(0,s.jsx)(n.a,{href:"https://cn.vuejs.org/v2/guide/instance.html",children:"Vue.js"})," \u5b98\u7f51\u7684\u57fa\u7840\u77e5\u8bc6\uff0c\u7279\u522b\u60f3\u8981\u627e\u4e00\u4e2a\u9879\u76ee\u7ec3\u7ec3\u624b\u3002\u770b\u5230\u4e86\u6768\u6021\u7684\u6559\u7a0b\u300a\u5b66\u4e60\u4e0d\u4e00\u6837\u7684Vue\u300b\uff0cgithub\u4e0a ",(0,s.jsx)(n.a,{href:"https://github.com/liangxiaojuan/vue-todos",children:"vue-todos"})," \u6807\u661f1.5k\uff0c\u52a8\u624b\u5b9e\u8df5\u7684\u8fc7\u7a0b\u4e2d\uff0c\u78b0\u5230\u4e86\u5404\u79cd\u95ee\u9898\uff0c\u6545\u6b64\u8bb0\u5f55\u4e0b\u5b66\u4e60\u7684\u8fc7\u7a0b\u3002"]}),"\n",(0,s.jsx)(n.h2,{id:"\u6e90\u5730\u5740",children:"\u6e90\u5730\u5740"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["\u9996\u53d1\u535a\u5ba2: ",(0,s.jsx)(n.a,{href:"http://yangyi1024.com/",children:"yangyi1024"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["\u9879\u76ee\u6e90\u7801: ",(0,s.jsx)(n.a,{href:"https://github.com/liangxiaojuan/vue-todos",children:"\u6e90\u7801"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["\u9879\u76ee\u9884\u89c8: ",(0,s.jsx)(n.a,{href:"http://yangyi1024.com/todo",children:"\u9884\u89c8"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["\u6211\u7684\u535a\u5ba2: ",(0,s.jsx)(n.a,{href:"https://ppsteven.github.io/",children:"\u6211\u7684\u535a\u5ba2"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["\u6211\u7684\u4ed3\u5e93\uff1a",(0,s.jsx)(n.a,{href:"https://github.com/PPsteven/vue-todos-exercise",children:"\u6211\u7684\u4ed3\u5e93"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.img,{src:"https://cdn.jsdelivr.net/gh/PPsteven/pictures/img/20201112164549.png",style:{zoom:"33%"}}),"\n",(0,s.jsx)(n.h2,{id:"\u4f7f\u7528mock\u5047\u6570\u636e",children:"\u4f7f\u7528Mock\u5047\u6570\u636e"}),"\n",(0,s.jsxs)(n.p,{children:["\u4e3a\u4e86\u66f4\u597d\u7684\u6d4b\u8bd5\u6211\u4eec\u7684\u7a0b\u5e8f\uff0c\u9700\u8981\u9020\u4e00\u4e9b\u5047\u6570\u636e\u3002",(0,s.jsx)(n.a,{href:"http://mockjs.com/",children:"mockjs"})," \u662f\u4e00\u4e2a\u4e13\u95e8\u7528\u4e8e\u751f\u4ea7\u5047\u6570\u636e\u7684\u5de5\u5177\uff0c\u4f7f\u7528\u4e5f\u662f\u5f88\u65b9\u4fbf\u7684\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// src/mock/data/todoList.js\nimport Mock from 'mockjs'; // \u5bfc\u5165mockjs \u6a21\u5757\nlet Todos = []; // \u5b9a\u4e49\u6211\u4eec\u9700\u8981\u7684\u6570\u636e\nconst COUNT = [1, 2, 3, 4, 5]; // \u5b9a\u4e49\u6211\u4eec\u9700\u8981\u6570\u91cf\nfor (let i = 1; i <= COUNT.length; i++) {\n  Todos.push(Mock.mock({ // \u6839\u636e\u6570\u636e\u6a21\u677f\u751f\u6210\u6a21\u62df\u6570\u636e\u3002\n    id: Mock.Random.guid(), // \u968f\u673aid\n    title: Mock.Random.first(), // \u968f\u673a\u6807\u9898\n    isDelete: false, // \u662f\u5426\u5220\u9664\n    locked: Mock.Random.boolean(), // \u968f\u673a\u9501\u5b9a\n    record: COUNT.map(() => { // \u4ee3\u529e\u5355\u9879\u5217\u8868\u7684\u6570\u636e\n      return {\n        text: Mock.Random.cparagraph(2), // \u968f\u673a\u5185\u5bb9\n        isDelete: false, // \u662f\u5426\u5220\u9664\n        checked: Mock.Random.boolean()  // \u662f\u5426\u5b8c\u6210\n      };\n    })\n  }));\n}\nexport { // \u5bfc\u51fa\u5217\u8868\u6570\u636e\n  Todos\n};\n\n\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u66f4\u591a\u5047\u6570\u636e\u53ef\u4ee5\u53c2\u8003",(0,s.jsx)(n.a,{href:"https://github.com/nuysoft/Mock/wiki",children:"\u8fd9\u91cc"}),"\u3002"]}),"\n",(0,s.jsx)(n.h3,{id:"\u4fee\u6539-srcstoreindexjs",children:"\u4fee\u6539 src/store/index.js"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-diff",children:"import Vue from 'vue'\nimport Vuex from 'vuex'\nimport * as getters from './getters';\n+ import { Todos } from '@/mock/data/todoList'\n+ import Mock from 'mockjs'\n\nVue.use(Vuex); // \u5b89\u88c5 Vuex \u63d2\u4ef6\n\nexport default new Vuex.Store({\n  // \u4e25\u683c\u6a21\u5f0f\u4e0b\uff0c\u65e0\u8bba\u4f55\u65f6\u53d1\u751f\u4e86\u72b6\u6001\u53d8\u66f4\u4e14\u4e0d\u662f\u7531 mutation \u51fd\u6570\u5f15\u8d77\u7684\uff0c\u5c06\u4f1a\u629b\u51fa\u9519\u8bef\n  strict: true,\n  // \u521b\u5efa\u521d\u59cb\u5e94\u7528\u5168\u5c40\u72b6\u6001\u53d8\u91cf\n  state: {\n    // \u6307\u6211\u4eec\u7684\u5f85\u529e\u4e8b\u9879\u5217\u8868\u6570\u636e\n-    todoList: [\n-        { title: '\u661f\u671f\u4e00', count: 1, locked: true , id: 'a', isDelete: false },\n-        { title: '\u661f\u671f\u4e8c', count: 2, locked: false, id: 'b', isDelete: false },\n-        { title: '\u661f\u671f\u4e09', count: 3, locked: true, id: 'c', isDelete: false },\n-    ],  \n+    todoList: Todos,\n\n  },\n  // \u5b9a\u4e49\u6240\u9700\u7684 mutations\uff0c \u7528\u6765\u64cd\u4f5c state \u6570\u636e\n  mutations: {\n    EDITTODE(state, data) { // \u5b9a\u4e49\u540d\u4e3a EDITTODE\u51fd\u6570\u7528\u4f5c\u6539\u53d8todoList\u7684\u503c\n      state.todoList = data;\n    },\n    ADDTODO(state) { // \u6dfb\u52a0\u65b0\u7684 TODO \u83dc\u5355\n       state.todoList.push(\n-        { title: '\u661f\u671f\u56db', count: 3, locked: true, id: Math.floor(Math.random() * 1000 + 1), isDelete: false }\n-      )\n+        {\n+          id: Mock.Random.guid(),\n+          title: 'newList',\n+          isDelete: false,\n+          locked: false,\n+          record: []\n+        });\n     },\n\n    UPDATETODE(state, todo) { // \u66f4\u65b0TODO\u83dc\u5355\n      state.todoList.some((t, index) => {\n        if (t.id == todo.id) {\n            t.title = todo.title;\n            t.locked = todo.locked;\n            t.isDelete = todo.isDelete;\n            return true;\n        }\n      });\n    },\n+    ADDRECORD(state, todo){ // \u6dfb\u52a0 TODO \u8bb0\u5f55\n+      let { id, text } = todo;\n+      state.todoList.some((t, index) => {\n+        if (t.id === id) {\n+          t.record.push({\n+            text: text,\n+            isDelete: false,\n+            checked: false\n+          });\n+          return true;\n+        }\n+      });\n+    },\n  },\n  getters: getters, // \u83b7\u53d6\u6570\u636e\n  actions: {},\n  modules: {}\n})\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u6dfb\u52a0item\u7ec4\u4ef6",children:"\u6dfb\u52a0Item\u7ec4\u4ef6"}),"\n",(0,s.jsx)(n.h3,{id:"\u4fee\u6539-srccomponentstodovue",children:"\u4fee\u6539 src/components/todo.vue"}),"\n",(0,s.jsx)(n.p,{children:"\u5f15\u5165 item.vue"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-diff",children:"// src/components/todo.vue\n<script>\n+ import item from './item';\nexport default {\n  data() {\n    return {\n      todo: {},\n-      items: [  // \u4ee3\u529e\u5355\u9879\u5217\u8868\n-      ],\n+      items: [],  // \u4ee3\u529e\u5355\u9879\u5217\u8868\n\n      text: '', // \u7528\u6237\u8f93\u5165\u5355\u9879\u9879\u7ed1\u5b9a\u7684\u8f93\u5165\n      isUpdate: false // \u65b0\u589e\u4fee\u6539\u72b6\u6001\n    };\n  },\n  created() {\n    this.init();\n  },\n  watch: {\n     '$route.params.id'() {\n       // \u76d1\u542c$route.params.id\u7684\u53d8\u5316\uff0c\u5982\u679c\u8fd9\u4e2aid\u5373\u4ee3\u8868\u7528\u6237\u70b9\u51fb\u4e86\u5176\u4ed6\u7684\u5f85\u529e\u9879\u9700\u8981\u91cd\u65b0\u8bf7\u6c42\u6570\u636e\u3002\n       this.init();\n     }\n  },\n+  components: {\n+    item,\n+  },\n\n  methods: {\n    init() { // \u521d\u59cb\u5316\n      const ID = this.$route.params.id;\n-      let { id, title, count, isDelete, locked } = this.$store.getters.getTodoId(ID);\n+      let { id, title, count, isDelete, locked, record } = this.$store.getters.getTodoId(ID);\n\n      this.todo = {\n          id: id,\n          title: title,\n          count: count,\n          locked: locked,\n          isDelete: isDelete\n      }\n      this.items = record;\n    }, \n    updateTodo(){ // \u66f4\u65b0 todo \u83dc\u5355\n      this.$store.commit('UPDATETODE', this.todo);\n    },\n-    onAdd() {}, // \u6dfb\u52a0 TODO\u9879\n+    onAdd() { // \u6dfb\u52a0 TODO\u9879\n+      const ID = this.$route.params.id;\n+      this.$store.commit('ADDRECORD', {text: this.text, id: ID });\n+      this.text = '';\n+    }, \n\n    updateTitle() { // \u66f4\u65b0 \u83dc\u5355\u540d\u79f0\n      this.updateTodo();\n      this.isUpdate = false;\n    }, \n    onDelete() {  // \u5220\u9664 TODO \u83dc\u5355\n      this.todo.isDelete = true;\n      this.updateTodo();\n    },\n    onlock() { // \u9501\u5b9a TODO \u83dc\u5355\n      this.todo.locked = !this.todo.locked;\n      this.updateTodo();\n    } \n  }\n};\n<\/script>\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u6dfb\u52a0-srccomponentsitemvue",children:"\u6dfb\u52a0 src/components/item.vue"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-vue",children:'<template>\n  <transition name="slide-fade">\n    <div class="list-item  editingClass editing " :class="{checked: item.checked}" v-show="!item.isDelete">\n      <label class="checkbox">\n        <input type="checkbox" v-model="item.checked" name="checked" @change="onChange" :disabled="locked">\n        <span class="checkbox-custom"></span>\n      </label>\n      <input type="text" v-model="item.text" placeholder=\'\u5199\u70b9\u4ec0\u4e48\u3002\u3002\u3002\'  :disabled=" item.checked || locked" @keyup.enter="onChange">\n      <a class="delete-item" v-if="item.checked && !locked" @click="item.isDelete = true;onChange()">\n        <span class="icon-trash"></span>\n      </a>\n    </div>\n  </transition>\n</template>\n\n<script>\n\n// item \u662ftodo\u7684\u5b50\u7ec4\u4ef6,\u4ed6\u63a5\u53d7\u4e00\u4e2a\u7236\u7ec4\u4ef6\u4f20\u5165\u7684item\nexport default {\n  props: {\n    item: { // \u4efb\u52a1\u9879\u8be6\u60c5\n      type: Object,\n      default: () => {\n        return {\n          checked: false,\n          text: \'\u4f60\u597d,\u4e16\u754c\',\n          isDelete: false,\n        };\n      }\n    },\n    \'index\': {}, // \u4efb\u52a1\u9879\u7684\u6570\u7ec4\u7d22\u5f15\n    \'id\': {}, // \u83dc\u5355ID\n    \'init\': {}, \n    \'locked\': {}\n  },\n  methods: {\n    // \u7528\u6237\u65e0\u8bba\u5220\u9664,\u4fee\u6539\uff0c\u9501\u5b9a\u90fd\u53ef\u4ee5\u5229\u7528\u8fd9\u4e2a\u65b9\u6cd5\u3002\n    onChange() {\n      // this.$store.commit(\'UPDATERECORD\', {id: this.id, index: this.index, record: this.item});\n      this.init(); // \u66f4\u65b0\u83dc\u5355\u4fe1\u606f\uff0c\u6bd4\u5982\u66f4\u65b0\u4e2a\u6570\u7b49\n    }\n  }\n};\n<\/script>\n<style lang="less">\n@import \'../common/style/list-items.less\';\n.slide-fade-enter-active {\n  transition: all .3s ease;\n}\n.slide-fade-leave-active {\n  transition: all .3s cubic-bezier(1.0, 0.5, 0.8, 1.0);\n}\n.slide-fade-enter, .slide-fade-leave-active {\n  transform: translateX(10px);\n  opacity: 0;\n}\n</style>\n'})}),"\n",(0,s.jsx)(n.h2,{id:"\u6570\u636e\u53cc\u5411\u7ed1\u5b9a\u7684\u5904\u7406\u65b9\u6cd5",children:"\u6570\u636e\u53cc\u5411\u7ed1\u5b9a\u7684\u5904\u7406\u65b9\u6cd5"}),"\n",(0,s.jsx)(n.p,{children:"\u5148\u8fd0\u884c\u4ee3\u7801\u7a0b\u5e8f\u3002\u5982\u679c\u4e0a\u9762\u90a3\u4e48\u591a\u590d\u5236\u8d77\u6765\u4e0d\u65b9\u4fbf\uff1f\u53ef\u4ee5\u76f4\u63a5\u8fd0\u884c\u6211\u5206\u652f\u4e0a\u7684\u4ee3\u7801\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u9996\u5148 clone \u6211\u7684\u4ed3\u5e93 master \u5206\u652f"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"$ git clone https://github.com/PPsteven/vue-todos-exercise.git master\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u7136\u540e\u5207\u6362\u5230\u5bf9\u5e94\u7684 ",(0,s.jsx)(n.code,{children:"commit"}),"\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"git reset --hard 4c25c1ef\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u5982\u679c\u4e0d\u719f\u6089\u7684\u8bdd\uff0c\u5efa\u8bae\u4f7f\u7528 ",(0,s.jsx)(n.code,{children:"SourceTree"})," \u8fd9\u4e2a git \u56fe\u5f62\u5316\u5de5\u5177"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://cdn.jsdelivr.net/gh/PPsteven/pictures/img/20201112162143.png",alt:""})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"$ npm run serve\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u53d1\u73b0\u80fd\u591f\u6b63\u5e38\u8fd0\u884c\uff0c\u4f46\u662f\u6253\u5f00 console\uff0c\u53d1\u73b0\u4e00\u5806\u62a5\u9519\u3002 ",(0,s.jsx)(n.code,{children:"do not mutation vuex store outside mutation"})]}),"\n",(0,s.jsx)(n.img,{src:"https://cdn.jsdelivr.net/gh/PPsteven/pictures/img/20201112162308.png",style:{zoom:"25%"}}),"\n",(0,s.jsxs)(n.p,{children:["\u5f88\u660e\u663e\uff0c\u8fd9\u662f\u56e0\u4e3a\u6211\u4eec",(0,s.jsx)(n.strong,{children:"\u4e0d\u7ecf\u610f\u95f4"}),"\uff0c\u5bf9 vuex \u7684\u6570\u636e\u8fdb\u884c\u4e86\u4fee\u6539\uff0c\u7ecf\u8fc7\u6392\u67e5\u53d1\u73b0\uff0c\u4e00\u5171\u6709\u4e09\u5904\u5730\u65b9\u3002\u4e24\u4e2a\u662f v-model \u6570\u636e\u53cc\u5411\u7ed1\u5b9a\uff0c\u4e00\u4e2a\u662f\u76f4\u63a5\u5bf9 item \u8fdb\u884c\u4fee\u6539\uff0c\u8fd9\u6837\u7684\u64cd\u4f5c\u90fd\u662f\u4e0d\u63a8\u8350\u7684\u7528\u6cd5\u3002"]}),"\n",(0,s.jsx)(n.img,{src:"https://cdn.jsdelivr.net/gh/PPsteven/pictures/img/20201112162532.png",style:{zoom:"33%"}}),"\n",(0,s.jsxs)(n.p,{children:["\u5b98\u7f51\u5bf9\u4e8e\u8fd9\u79cd\u60c5\u51b5\uff0c\u7ed9\u4e86\u4e00\u4e2a\u5904\u7406\u65b9\u6cd5\uff1a",(0,s.jsx)(n.a,{href:"https://vuex.vuejs.org/zh/guide/forms.html#%E5%8F%8C%E5%90%91%E7%BB%91%E5%AE%9A%E7%9A%84%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7",children:"\u53cc\u5411\u7ed1\u5b9a\u7684\u8ba1\u7b97\u5c5e\u6027"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// ...\ncomputed: {\n  message: {\n    get () {\n      return this.$store.state.obj.message\n    },\n    set (value) {\n      this.$store.commit('updateMessage', value) // \u5bf9\u5199\u5165\u90e8\u5206\u989d\u5916\u5904\u7406\n    }\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u4fee\u6539-srccomponentsitemvue",children:"\u4fee\u6539 src/components/item.vue"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-vue",children:'<template>\n  <transition name="slide-fade">\n    <div class="list-item  editingClass editing " :class="{checked: item.checked}" v-show="!item.isDelete">\n      <label class="checkbox">\n        <input type="checkbox" v-model="isChecked" name="checked" @change="onChange" :disabled="locked">\n        <span class="checkbox-custom"></span>\n      </label>\n      <input type="text" v-model="recordText" placeholder=\'\u5199\u70b9\u4ec0\u4e48\u3002\u3002\u3002\'  :disabled=" item.checked || locked" @keyup.enter="onChange">\n      <a class="delete-item" v-if="item.checked && !locked" @click="isDelete = true;onChange()">\n        <span class="icon-trash"></span>\n      </a>\n    </div>\n  </transition>\n</template>\n\n<script>\n// item \u662ftodo\u7684\u5b50\u7ec4\u4ef6,\u4ed6\u63a5\u53d7\u4e00\u4e2a\u7236\u7ec4\u4ef6\u4f20\u5165\u7684item\nexport default {\n  props: {\n    item: { // \u4efb\u52a1\u9879\u8be6\u60c5\n      type: Object,\n      default: () => {\n        return {\n          checked: false,\n          text: \'\u4f60\u597d,\u4e16\u754c\',\n          isDelete: false,\n        };\n      }\n    },\n    \'index\': {}, // \u4efb\u52a1\u9879\u7684\u6570\u7ec4\u7d22\u5f15\n    \'id\': {}, // \u83dc\u5355ID\n    \'init\': {}, \n    \'locked\': {}\n  },\n  computed: {\n    isChecked: {\n      get() {\n        return this.item.checked;\n      },\n      set(value) {\n        let record = {checked: value};\n        this.$store.commit(\'UPDATERECORD\', {id: this.id, index: this.index, record: record});\n      },\n    },\n  recordText: {\n    get() {\n      return this.item.text;\n    },\n    set(value) {\n      let record = {text: value};\n      this.$store.commit(\'UPDATERECORD\', {id: this.id, index: this.index, record: record});\n    }\n  },\n  isDelete: {\n    get() {\n      return this.item.isDelete;\n    },\n    set(value) {\n      let record = {isDelete: value };\n      this.$store.commit(\'UPDATERECORD\', {id: this.id, index: this.index, record: record})\n    }\n  }\n  },\n  methods: {\n    // \u7528\u6237\u65e0\u8bba\u5220\u9664,\u4fee\u6539\uff0c\u9501\u5b9a\u90fd\u53ef\u4ee5\u5229\u7528\u8fd9\u4e2a\u65b9\u6cd5\u3002\n    onChange() {\n      // this.$store.commit(\'UPDATERECORD\', {id: this.id, index: this.index, record: this.item});\n      this.init(); // \u66f4\u65b0\u83dc\u5355\u4fe1\u606f\uff0c\u6bd4\u5982\u66f4\u65b0\u4e2a\u6570\u7b49\n    }\n  }\n};\n<\/script>\n'})}),"\n",(0,s.jsx)(n.p,{children:"\u5f53\u7136\uff0c store \u90e8\u5206\u4e5f\u8981\u5199\u5bf9\u5e94\u7684\u65b9\u6cd5"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// src/store/index.js\nexport default new Vuex.Store({\n  // \u4e25\u683c\u6a21\u5f0f\u4e0b\uff0c\u65e0\u8bba\u4f55\u65f6\u53d1\u751f\u4e86\u72b6\u6001\u53d8\u66f4\u4e14\u4e0d\u662f\u7531 mutation \u51fd\u6570\u5f15\u8d77\u7684\uff0c\u5c06\u4f1a\u629b\u51fa\u9519\u8bef\n  strict: true,\n  // \u521b\u5efa\u521d\u59cb\u5e94\u7528\u5168\u5c40\u72b6\u6001\u53d8\u91cf\n  state: {\n    // \u6307\u6211\u4eec\u7684\u5f85\u529e\u4e8b\u9879\u5217\u8868\u6570\u636e\n    todoList: Todos,\n  },\n  // \u5b9a\u4e49\u6240\u9700\u7684 mutations\uff0c \u7528\u6765\u64cd\u4f5c state \u6570\u636e\n  mutations: {\n    EDITTODE(state, data) { // \u5b9a\u4e49\u540d\u4e3a EDITTODE\u51fd\u6570\u7528\u4f5c\u6539\u53d8todoList\u7684\u503c\n      state.todoList = data;\n    },\n    ADDTODO(state) { // \u6dfb\u52a0\u65b0\u7684 TODO \u83dc\u5355\n      state.todoList.push(\n        {\n          id: Mock.Random.guid(),\n          title: 'newList',\n          isDelete: false,\n          locked: false,\n          record: []\n        });\n    },\n    UPDATETODE(state, todo) { // \u66f4\u65b0TODO\u83dc\u5355\n      state.todoList.some((t, index) => {\n        if (t.id == todo.id) {\n            t.title = todo.title;\n            t.locked = todo.locked;\n            t.isDelete = todo.isDelete;\n            return true;\n        }\n      });\n    },\n    ADDRECORD(state, todo){ // \u6dfb\u52a0 TODO \u8bb0\u5f55\n      let { id, text } = todo;\n      state.todoList.some((t, index) => {\n        if (t.id === id) {\n          t.record.push({\n            text: text,\n            isDelete: false,\n            checked: false\n          });\n          return true;\n        }\n      });\n    },\n    UPDATERECORD(state, todo) { // \u66f4\u65b0 TODO \u8bb0\u5f55\n      let {id, index, record } = todo;\n      state.todoList.some((t) => {\n        if (t.id === id){\n          // t.record[index] = record;  \n          for (var key in record){ \n            t.record[index][key] = record[key];\n          }\n          return true;\n        }\n      }); \n    }\n  },\n  getters: getters, // \u83b7\u53d6\u6570\u636e\n  actions: {},\n  modules: {}\n})\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u6211\u7684\u4ed3\u5e93",children:"\u6211\u7684\u4ed3\u5e93"}),"\n",(0,s.jsxs)(n.p,{children:["\u8fd9\u91cc\uff0c\u6211\u5c06\u5b66\u4e60\u8fc7\u7a0b\u540c\u6b65\u5230 ",(0,s.jsx)(n.a,{href:"https://github.com/PPsteven/vue-todos-exercise",children:"\u6211\u7684\u4ed3\u5e93"})," \u4e2d"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'$ git add -A \n$ git commit -m "\u201c\u518d\u201d\u5b66\u4e60\u4e0d\u4e00\u6837\u7684Vue\uff1aMock\u5047\u6570\u636e"\n# \u5f3a\u5236\u540c\u6b65\n$ git push -f https://github.com/PPsteven/vue-todos-exercise.git master\n'})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>d,x:()=>c});var s=t(96540);const i={},o=s.createContext(i);function d(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);