"use strict";(self.webpackChunkcodepainter=self.webpackChunkcodepainter||[]).push([[2122],{17501:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>l,toc:()=>o});var c=s(74848),a=s(28453);const i={title:"docker\u642d\u5efaelasticsearch+kibana",tags:["es","kibana","Docker"],comments:!1,date:new Date("2020-02-25T09:10:44.000Z"),categories:["Docker"],slug:"/pages/e7311f/"},r=void 0,l={id:"\u6280\u672f\u7b14\u8bb0/\u8fd0\u7ef4/Docker/docker\u642d\u5efaelasticsearch+kibana",title:"docker\u642d\u5efaelasticsearch+kibana",description:"\u5de5\u4f5c\u4e2d\u9700\u8981\u5bf9\u516c\u53f8\u7684es\u670d\u52a1\u5668\u8fdb\u884c\u914d\u7f6e\uff0c\u5c0f\u767d\u4e0d\u6562\u76f4\u63a5\u5728\u516c\u53f8\u7684\u5f00\u53d1\u673a\u4e0a\u76f4\u63a5\u4fee\u6539\u3002\u6545\u9700\u8981\u5728\u6d4b\u8bd5\u673a\u4e0a\u4e34\u65f6\u642d\u5efa\u4e00\u4e2aes+kibana\u73af\u5883\u3002",source:"@site/docs/01.\u6280\u672f\u7b14\u8bb0/03.\u8fd0\u7ef4/01.Docker/01.docker\u642d\u5efaelasticsearch+kibana.md",sourceDirName:"01.\u6280\u672f\u7b14\u8bb0/03.\u8fd0\u7ef4/01.Docker",slug:"/pages/e7311f/",permalink:"/docs/pages/e7311f/",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/01.\u6280\u672f\u7b14\u8bb0/03.\u8fd0\u7ef4/01.Docker/01.docker\u642d\u5efaelasticsearch+kibana.md",tags:[{label:"es",permalink:"/docs/tags/es"},{label:"kibana",permalink:"/docs/tags/kibana"},{label:"Docker",permalink:"/docs/tags/docker"}],version:"current",sidebarPosition:1,frontMatter:{title:"docker\u642d\u5efaelasticsearch+kibana",tags:["es","kibana","Docker"],comments:!1,date:"2020-02-25T09:10:44.000Z",categories:["Docker"],slug:"/pages/e7311f/"},sidebar:"techwiki",previous:{title:"\u8fd0\u7ef4",permalink:"/docs/category/\u8fd0\u7ef4"},next:{title:"Docker\u5b89\u88c5\u53ca\u57fa\u7840\u547d\u4ee4",permalink:"/docs/pages/ce8ab0/"}},t={},o=[{value:"elasticsearch\u5b89\u88c5",id:"elasticsearch\u5b89\u88c5",level:2},{value:"kibana\u5b89\u88c5",id:"kibana\u5b89\u88c5",level:2},{value:"\u6ce8\u610f\u70b9",id:"\u6ce8\u610f\u70b9",level:2},{value:"TODO",id:"todo",level:2},{value:"\u53c2\u8003\u8d44\u6599",id:"\u53c2\u8003\u8d44\u6599",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.p,{children:"\u5de5\u4f5c\u4e2d\u9700\u8981\u5bf9\u516c\u53f8\u7684es\u670d\u52a1\u5668\u8fdb\u884c\u914d\u7f6e\uff0c\u5c0f\u767d\u4e0d\u6562\u76f4\u63a5\u5728\u516c\u53f8\u7684\u5f00\u53d1\u673a\u4e0a\u76f4\u63a5\u4fee\u6539\u3002\u6545\u9700\u8981\u5728\u6d4b\u8bd5\u673a\u4e0a\u4e34\u65f6\u642d\u5efa\u4e00\u4e2aes+kibana\u73af\u5883\u3002"}),"\n",(0,c.jsx)(n.p,{children:"\u4e3a\u4e86\u907f\u5f00\u57fa\u7840\u7684\u73af\u5883\u95ee\u9898\u548c\u5feb\u901f\u642d\u5efa\uff0cdocker\u662f\u6211\u4eec\u975e\u5e38\u597d\u7684\u4f19\u4f34"}),"\n",(0,c.jsx)(n.h2,{id:"elasticsearch\u5b89\u88c5",children:"elasticsearch\u5b89\u88c5"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"docker pull elasticsearch:6.6.1\n"})}),"\n",(0,c.jsx)(n.p,{children:"\u521b\u5efa\u914d\u7f6e\u6587\u4ef6"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-yaml",children:'# vim /etc/elasticsearch.yml\ncluster.name: "docker-cluster"\nnetwork.host: 0.0.0.0\n# \u5141\u8bb8\u4efb\u4f55\u7aef\u53e3\u8bbf\u95ee\ntransport.host: 0.0.0.0\n'})}),"\n",(0,c.jsx)(n.p,{children:"\u542f\u52a8\u5bb9\u5668"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:'docker run -di --name=es -p 9200:9200 -p 9300:9300 -e "discovery.type=single-node" -v /etc/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml elasticsearch:6.6.1\n'})}),"\n",(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsx)(n.li,{children:"\u5f00\u653e\u4e869300\u7aef\u53e3"}),"\n",(0,c.jsx)(n.li,{children:"\u6302\u8f7d\u914d\u7f6e\u6587\u4ef6\uff1a/usr/share/elasticsearch/config/elasticsearch.yml"}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"\u67e5\u770b\u5bb9\u5668\u662f\u5426\u542f\u52a8\uff0c\u4ee5\u53ca\u7aef\u53e3\u662f\u5426\u6b63\u5e38\u5f00\u653e"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:'$ docker ps \nCONTAINER ID        IMAGE                 COMMAND                  CREATED             STATUS              PORTS                                            NAMES\nacc39c54a0d8        elasticsearch:6.6.1   "/usr/local/bin/dock\u2026"   18 hours ago        Up 18 hours         0.0.0.0:9200->9200/tcp, 0.0.0.0:9300->9300/tcp   es\n'})}),"\n",(0,c.jsxs)(n.p,{children:["\u66f4\u52a0\u76f4\u89c2\u7684\u5224\u65ad\u662f\u5426\u542f\u52a8\u6210\u529f\u7684\u63d0\u793a\u662f\uff0c\u76f4\u63a5\u8bbf\u95ee ",(0,c.jsx)(n.code,{children:"9200"})," \u7aef\u53e3\u53f7\u3002\u6210\u529f\u7684\u8bdd\uff0c\u4f1a\u8fd4\u56de\u5982\u4e0b\u4fe1\u606f\u3002"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'# \u8fd9\u91cc\u5047\u8bbe\u4e00\u4e2a\u516c\u7f51\u7684ip   http://111.111.111.111:9200/\n{\n  "name" : "cWz9ZWm",\n  "cluster_name" : "elasticsearch",\n  "cluster_uuid" : "5v3SilrTQyCjjQO-a5heBA",\n  "version" : {\n    "number" : "6.2.4",\n    "build_hash" : "ccec39f",\n    "build_date" : "2018-04-12T20:37:28.497551Z",\n    "build_snapshot" : false,\n    "lucene_version" : "7.2.1",\n    "minimum_wire_compatibility_version" : "5.6.0",\n    "minimum_index_compatibility_version" : "5.0.0"\n  },\n  "tagline" : "You Know, for Search"\n}\n'})}),"\n",(0,c.jsx)(n.h2,{id:"kibana\u5b89\u88c5",children:"kibana\u5b89\u88c5"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"docker pull kibana:6.6.1\n"})}),"\n",(0,c.jsx)(n.p,{children:"\u63a5\u4e0b\u6765\uff0c\u5982\u679c\u6211\u4eec\u624b\u91cc\u6ca1\u6709kibana\u914d\u7f6e\u6587\u4ef6\u7684\u4fe1\u606f\u7684\u8bdd\uff0c\u9700\u8981\u5148\u4ece\u5bb9\u5668\u4e2dcopy\u4e00\u4efd\u8fc7\u6765\u3002"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"# \u542f\u52a8\u5bb9\u5668 temp\ndocker run -di -p 5601:5601 --name temp kibana:6.6.1\n\n# \u521b\u5efa\u6587\u4ef6\u5939\u5b58\u653e\u914d\u7f6e\u6587\u4ef6\nmkdir -p /etc/kibana\n\n# \u4ece\u5bb9\u5668\u4e2d\u590d\u5236\u8fc7\u6765\uff0c\u6ce8\u610f\u914d\u7f6e\u6587\u4ef6\u5730\u5740\u662f /usr/share/kibana/config\ndocker cp temp:/usr/share/kibana/config /etc/kibana/config\n\n# \u5220\u9664\u4e34\u65f6\u7684temp\u6587\u4ef6\uff0c\u5f3a\u5236\u5220\u9664\ndocker container rm -f temp\n"})}),"\n",(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsx)(n.p,{children:"\u6ce8\u610f\u6302\u8f7d\u7684\u914d\u7f6e\u6587\u4ef6\u5730\u5740\u4e3a\uff1a /usr/share/kibana/config"}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"\u4fee\u6539\u672c\u5730\u914d\u7f6e\u6587\u4ef6"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-yaml",children:'# vim /etc/kibana/config/kibana.yml\nserver.name: kibana\n# \u5141\u8bb8\u6240\u6709\u5730\u5740\u8bbf\u95ee\nserver.host: "0.0.0.0"\n# elasticsearch\u7684\u5730\u5740\uff0c\u6ce8\u610f\u8fd9\u91cc\u6211\u76f4\u63a5\u586b\u5199\u7684\u516c\u7f51ip\u3002\n# \u6709\u7684\u6559\u7a0b\u91cc\u9762\u586b\u5199elasticsearch\uff0c127.0.0.1\uff0clocalhost \u7b49\n# docker\u5bb9\u5668\u7684\u7f51\u7edc\u95ee\u9898\u662f\u6211\u7684\u5f31\u9879\uff0c\u91c7\u7528\u4e0a\u8ff0\u65b9\u6848\uff0c\u9700\u8981\u5728docker\u5bb9\u5668\u4e92\u8054\uff0c\u7f51\u7edc\u65b9\u9762\u6709\u4e00\u5b9a\u7684\u77e5\u8bc6\uff0c\u4e0d\u7136\u4f1a\u51fa\u95ee\u9898\u3002\nelasticsearch.url: http://111.111.111.111:9200\nxpack.monitoring.ui.container.elasticsearch.enabled: true\n'})}),"\n",(0,c.jsx)(n.p,{children:"\u542f\u52a8\u5bb9\u5668"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"docker run -di --name=kibana  -p 5601:5601 -v /etc/kibana/config:/usr/share/kibana/config kibana:6.6.1\n"})}),"\n",(0,c.jsx)(n.p,{children:"\u8fd9\u91cc\u5f00\u653e\u4e86\u65b0\u7684\u7aef\u53e3 5601"}),"\n",(0,c.jsxs)(n.p,{children:["\u9a8c\u8bc1\u662f\u5426\u6210\u529f\uff0c\u76f4\u63a5\u8bbf\u95ee  ",(0,c.jsx)(n.code,{children:"http://111.111.111.111:5601"})," \u5c31\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u754c\u9762"]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.img,{src:"https://cdn.jsdelivr.net/gh/PPsteven/pictures/img/20200225110755.png",alt:""})}),"\n",(0,c.jsx)(n.h2,{id:"\u6ce8\u610f\u70b9",children:"\u6ce8\u610f\u70b9"}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"elasticsearch \u548c kibana \u7684\u7248\u672c\u6700\u597d\u4fdd\u6301\u4e00\u81f4\uff0c\u8fd9\u91cc\u6211\u90fd\u4f7f\u7528\u4e86 6.6.1"}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"elasticsearch \u548c kibana \u90fd\u662f\u6bd4\u8f83\u5403\u5185\u5b58\u7684\u5bb6\u4f19\uff0c\u6240\u4ee5\u5982\u679c\u4f60\u7684\u670d\u52a1\u5668\u7684\u5185\u5b58\u5c11\u4e8e4G\uff0c\u53ef\u80fd\u5c31\u4f1a\u51fa\u5f88\u591a\u95ee\u9898\u3002"}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["kibana \u7aef\u53e3\u53ef\u80fd\u4f1a\u88ab\u5c01\u6389\u3002\u6ce8\u610f\u4f60\u7684\u670d\u52a1\u5668\u6709\u6ca1\u6709\u6253\u5f00 ",(0,c.jsx)(n.code,{children:"5601"})," \u7aef\u53e3\uff0c\u82e5\u662f\u6ca1\u6709\u7684\u8bdd\uff0c\u6362\u4e00\u4e2a\u7aef\u53e3\u6620\u5c04\u5373\u53ef\u3002\n",(0,c.jsx)(n.code,{children:"-p 7899:5601"})]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"\u914d\u7f6e\u4fee\u6539\u540e\u53ef\u80fd\u4f1a\u9700\u8981\u91cd\u542f\u670d\u52a1/\u5bb9\u5668"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"# \u91cd\u542f/\u67e5\u770b \u670d\u52a1\u72b6\u6001\nservice kibana restart/status\nsystemctl restart/status kibana\n# \u5bb9\u5668\u91cd\u542f\ndocker restart kibana\n"})}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"todo",children:"TODO"}),"\n",(0,c.jsxs)(n.p,{children:["\u5982\u679c\u662f\u642d\u5efaELK\uff0c\u6211\u4eec\u53ef\u80fd\u8fd8\u9700\u8981 Filebeat \u548c Logstash \u7684\u914d\u548c\uff0c\u8fd9\u4e9b\u8fd8\u8981\u540e\u7eed\u7684\u8fdb\u884c\u642d\u5efa\u3002\n",(0,c.jsx)(n.code,{children:"ELK"})," \u662f\u597d\u4e1c\u897f\uff0c\u53ea\u662f\u592a\u5403\u5185\u5b58\u4e86\u3002\u5982\u679c\u4e0d\u662f\u516c\u53f8\u57fa\u672c\u7684\u9879\u76ee\uff0c\u53ea\u662f\u505a\u7684\u73a9\u7968\u6027\u8d28\u7684\u5c0f\u670d\u52a1\uff0c\u4f30\u8ba1\u4e70\u670d\u52a1\u5668\u7684\u5f00\u9500\u5c31\u4e0d\u5c0f\uff0c\u6240\u4ee5\u6211\u6682\u65f6\u4e0d\u592a\u4f1a\u7528 ",(0,c.jsx)(n.code,{children:"ELK"})," \u642d\u5efa\u65e5\u5fd7\u7cfb\u7edf\u3002"]}),"\n",(0,c.jsx)(n.h2,{id:"\u53c2\u8003\u8d44\u6599",children:"\u53c2\u8003\u8d44\u6599"}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.a,{href:"https://blog.csdn.net/qq1031893936/article/details/93798646",children:"Docker\u5b89\u88c5ELK"})})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(d,{...e})}):d(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>l});var c=s(96540);const a={},i=c.createContext(a);function r(e){const n=c.useContext(i);return c.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),c.createElement(i.Provider,{value:n},e.children)}}}]);